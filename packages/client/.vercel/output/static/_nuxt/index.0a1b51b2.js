import{I as Hl,aq as Wg,ar as V1,k as H,as as Yg,s as Ki,at as sa,M as zl,au as Xg,av as Fc,aw as Gl,ax as J1,l as Fe,ay as Zr,az as W1,m as Vl,q as Y1,aA as X1,aB as Jl,p as Q1,aC as Z1}from"./entry.c9c9d3e3.js";import{b as em,l as Qs}from"./_address_.4b2b904a.js";function tm(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}const qi=Hl(em);function rm(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wn={},nm={get exports(){return wn},set exports(t){wn=t}},Wl={},Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});function im(t){var e=4,r=t.length,n=r%e;if(!n)return t;var i=r,s=e-n,a=r+s,o=Buffer.alloc(a);for(o.write(t);s--;)o.write("=",i++);return o.toString()}Yl.default=im;Object.defineProperty(Wl,"__esModule",{value:!0});var sm=Yl;function Qg(t,e){return e===void 0&&(e="utf8"),Buffer.isBuffer(t)?sl(t.toString("base64")):sl(Buffer.from(t,e).toString("base64"))}function am(t,e){return e===void 0&&(e="utf8"),Buffer.from(Xl(t),"base64").toString(e)}function Xl(t){return t=t.toString(),sm.default(t).replace(/\-/g,"+").replace(/_/g,"/")}function sl(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function om(t){return Buffer.from(Xl(t),"base64")}var aa=Qg;aa.encode=Qg;aa.decode=am;aa.toBase64=Xl;aa.fromBase64=sl;aa.toBuffer=om;Wl.default=aa;(function(t){t.exports=Wl.default,t.exports.default=t.exports})(nm);const{Transform:cm}=Wg;var fm=t=>class Zg extends cm{constructor(r,n,i,s,a){super(a),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=s,this._options=a,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(a){s=a}i(s)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new Zg(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const{Transform:um}=Wg;var lm=t=>class ey extends um{constructor(r,n,i,s){super(s),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=s,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(a){s=a}i(s)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new ey(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const dm=fm,hm=lm;var pm=function(t){const e=dm(t),r=hm(t);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new e(1152,448,null,224,i);case"keccak256":return new e(1088,512,null,256,i);case"keccak384":return new e(832,768,null,384,i);case"keccak512":return new e(576,1024,null,512,i);case"sha3-224":return new e(1152,448,6,224,i);case"sha3-256":return new e(1088,512,6,256,i);case"sha3-384":return new e(832,768,6,384,i);case"sha3-512":return new e(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}},ty={};const zh=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];ty.p1600=function(t){for(let e=0;e<24;++e){const r=t[0]^t[10]^t[20]^t[30]^t[40],n=t[1]^t[11]^t[21]^t[31]^t[41],i=t[2]^t[12]^t[22]^t[32]^t[42],s=t[3]^t[13]^t[23]^t[33]^t[43],a=t[4]^t[14]^t[24]^t[34]^t[44],o=t[5]^t[15]^t[25]^t[35]^t[45],c=t[6]^t[16]^t[26]^t[36]^t[46],f=t[7]^t[17]^t[27]^t[37]^t[47],u=t[8]^t[18]^t[28]^t[38]^t[48],d=t[9]^t[19]^t[29]^t[39]^t[49];let g=u^(i<<1|s>>>31),b=d^(s<<1|i>>>31);const S=t[0]^g,_=t[1]^b,y=t[10]^g,E=t[11]^b,A=t[20]^g,M=t[21]^b,B=t[30]^g,D=t[31]^b,L=t[40]^g,z=t[41]^b;g=r^(a<<1|o>>>31),b=n^(o<<1|a>>>31);const Y=t[2]^g,ie=t[3]^b,oe=t[12]^g,ge=t[13]^b,re=t[22]^g,P=t[23]^b,l=t[32]^g,m=t[33]^b,T=t[42]^g,N=t[43]^b;g=i^(c<<1|f>>>31),b=s^(f<<1|c>>>31);const O=t[4]^g,U=t[5]^b,$=t[14]^g,v=t[15]^b,h=t[24]^g,C=t[25]^b,q=t[34]^g,x=t[35]^b,K=t[44]^g,J=t[45]^b;g=a^(u<<1|d>>>31),b=o^(d<<1|u>>>31);const W=t[6]^g,X=t[7]^b,ye=t[16]^g,pe=t[17]^b,be=t[26]^g,Qe=t[27]^b,Ee=t[36]^g,Ue=t[37]^b,Wt=t[46]^g,Tt=t[47]^b;g=c^(r<<1|n>>>31),b=f^(n<<1|r>>>31);const kt=t[8]^g,yr=t[9]^b,dt=t[18]^g,Pt=t[19]^b,Jr=t[28]^g,wt=t[29]^b,ht=t[38]^g,Wr=t[39]^b,pt=t[48]^g,_t=t[49]^b,jr=S,Et=_,Ct=E<<4|y>>>28,Kr=y<<4|E>>>28,gt=A<<3|M>>>29,ct=M<<3|A>>>29,wr=D<<9|B>>>23,tt=B<<9|D>>>23,nt=L<<18|z>>>14,Ir=z<<18|L>>>14,it=Y<<1|ie>>>31,st=ie<<1|Y>>>31,qr=ge<<12|oe>>>20,At=oe<<12|ge>>>20,It=re<<10|P>>>22,on=P<<10|re>>>22,Je=m<<13|l>>>19,Ze=l<<13|m>>>19,xr=T<<2|N>>>30,yt=N<<2|T>>>30,xt=U<<30|O>>>2,Yr=O<<30|U>>>2,Nt=$<<6|v>>>26,Ke=v<<6|$>>>26,Xr=C<<11|h>>>21,w=h<<11|C>>>21,k=q<<15|x>>>17,I=x<<15|q>>>17,p=J<<29|K>>>3,R=K<<29|J>>>3,V=W<<28|X>>>4,G=X<<28|W>>>4,ee=pe<<23|ye>>>9,fe=ye<<23|pe>>>9,xe=be<<25|Qe>>>7,ue=Qe<<25|be>>>7,Le=Ee<<21|Ue>>>11,ve=Ue<<21|Ee>>>11,Ce=Tt<<24|Wt>>>8,Ie=Wt<<24|Tt>>>8,Ne=kt<<27|yr>>>5,De=yr<<27|kt>>>5,Re=dt<<20|Pt>>>12,Me=Pt<<20|dt>>>12,Be=wt<<7|Jr>>>25,Ae=Jr<<7|wt>>>25,ke=ht<<8|Wr>>>24,we=Wr<<8|ht>>>24,Se=pt<<14|_t>>>18,Te=_t<<14|pt>>>18;t[0]=jr^~qr&Xr,t[1]=Et^~At&w,t[10]=V^~Re&gt,t[11]=G^~Me&ct,t[20]=it^~Nt&xe,t[21]=st^~Ke&ue,t[30]=Ne^~Ct&It,t[31]=De^~Kr&on,t[40]=xt^~ee&Be,t[41]=Yr^~fe&Ae,t[2]=qr^~Xr&Le,t[3]=At^~w&ve,t[12]=Re^~gt&Je,t[13]=Me^~ct&Ze,t[22]=Nt^~xe&ke,t[23]=Ke^~ue&we,t[32]=Ct^~It&k,t[33]=Kr^~on&I,t[42]=ee^~Be&wr,t[43]=fe^~Ae&tt,t[4]=Xr^~Le&Se,t[5]=w^~ve&Te,t[14]=gt^~Je&p,t[15]=ct^~Ze&R,t[24]=xe^~ke&nt,t[25]=ue^~we&Ir,t[34]=It^~k&Ce,t[35]=on^~I&Ie,t[44]=Be^~wr&xr,t[45]=Ae^~tt&yt,t[6]=Le^~Se&jr,t[7]=ve^~Te&Et,t[16]=Je^~p&V,t[17]=Ze^~R&G,t[26]=ke^~nt&it,t[27]=we^~Ir&st,t[36]=k^~Ce&Ne,t[37]=I^~Ie&De,t[46]=wr^~xr&xt,t[47]=tt^~yt&Yr,t[8]=Se^~jr&qr,t[9]=Te^~Et&At,t[18]=p^~V&Re,t[19]=R^~G&Me,t[28]=nt^~it&Nt,t[29]=Ir^~st&Ke,t[38]=Ce^~Ne&Ct,t[39]=Ie^~De&Kr,t[48]=xr^~xt&ee,t[49]=yt^~Yr&fe,t[0]^=zh[e*2],t[1]^=zh[e*2+1]}};const xc=ty;function oa(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}oa.prototype.initialize=function(t,e){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=t/8,this.count=0,this.squeezing=!1};oa.prototype.absorb=function(t){for(let e=0;e<t.length;++e)this.state[~~(this.count/4)]^=t[e]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(xc.p1600(this.state),this.count=0)};oa.prototype.absorbLastFewBits=function(t){this.state[~~(this.count/4)]^=t<<8*(this.count%4),t&128&&this.count===this.blockSize-1&&xc.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),xc.p1600(this.state),this.count=0,this.squeezing=!0};oa.prototype.squeeze=function(t){this.squeezing||this.absorbLastFewBits(1);const e=Buffer.alloc(t);for(let r=0;r<t;++r)e[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(xc.p1600(this.state),this.count=0);return e};oa.prototype.copy=function(t){for(let e=0;e<50;++e)t.state[e]=this.state[e];t.blockSize=this.blockSize,t.count=this.count,t.squeezing=this.squeezing};var gm=oa,ym=pm(gm);const St={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function vn(t,e){if(!t)throw new Error(e)}function lt(t,e,r){if(vn(e instanceof Uint8Array,`Expected ${t} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){const n=r.join(", "),i=`Expected ${t} to be an Uint8Array with length [${n}]`;vn(r.includes(e.length),i)}else{const n=`Expected ${t} to be an Uint8Array with length ${r}`;vn(e.length===r,n)}}function Zi(t){vn(Ks(t)==="Boolean","Expected compressed to be a Boolean")}function Cn(t=r=>new Uint8Array(r),e){return typeof t=="function"&&(t=t(e)),lt("output",t,e),t}function Ks(t){return Object.prototype.toString.call(t).slice(8,-1)}var xm=t=>({contextRandomize(e){switch(vn(e===null||e instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),e!==null&&lt("seed",e,32),t.contextRandomize(e)){case 1:throw new Error(St.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(e){return lt("private key",e,32),t.privateKeyVerify(e)===0},privateKeyNegate(e){switch(lt("private key",e,32),t.privateKeyNegate(e)){case 0:return e;case 1:throw new Error(St.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(e,r){switch(lt("private key",e,32),lt("tweak",r,32),t.privateKeyTweakAdd(e,r)){case 0:return e;case 1:throw new Error(St.TWEAK_ADD)}},privateKeyTweakMul(e,r){switch(lt("private key",e,32),lt("tweak",r,32),t.privateKeyTweakMul(e,r)){case 0:return e;case 1:throw new Error(St.TWEAK_MUL)}},publicKeyVerify(e){return lt("public key",e,[33,65]),t.publicKeyVerify(e)===0},publicKeyCreate(e,r=!0,n){switch(lt("private key",e,32),Zi(r),n=Cn(n,r?33:65),t.publicKeyCreate(n,e)){case 0:return n;case 1:throw new Error(St.SECKEY_INVALID);case 2:throw new Error(St.PUBKEY_SERIALIZE)}},publicKeyConvert(e,r=!0,n){switch(lt("public key",e,[33,65]),Zi(r),n=Cn(n,r?33:65),t.publicKeyConvert(n,e)){case 0:return n;case 1:throw new Error(St.PUBKEY_PARSE);case 2:throw new Error(St.PUBKEY_SERIALIZE)}},publicKeyNegate(e,r=!0,n){switch(lt("public key",e,[33,65]),Zi(r),n=Cn(n,r?33:65),t.publicKeyNegate(n,e)){case 0:return n;case 1:throw new Error(St.PUBKEY_PARSE);case 2:throw new Error(St.IMPOSSIBLE_CASE);case 3:throw new Error(St.PUBKEY_SERIALIZE)}},publicKeyCombine(e,r=!0,n){vn(Array.isArray(e),"Expected public keys to be an Array"),vn(e.length>0,"Expected public keys array will have more than zero items");for(const i of e)lt("public key",i,[33,65]);switch(Zi(r),n=Cn(n,r?33:65),t.publicKeyCombine(n,e)){case 0:return n;case 1:throw new Error(St.PUBKEY_PARSE);case 2:throw new Error(St.PUBKEY_COMBINE);case 3:throw new Error(St.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(e,r,n=!0,i){switch(lt("public key",e,[33,65]),lt("tweak",r,32),Zi(n),i=Cn(i,n?33:65),t.publicKeyTweakAdd(i,e,r)){case 0:return i;case 1:throw new Error(St.PUBKEY_PARSE);case 2:throw new Error(St.TWEAK_ADD)}},publicKeyTweakMul(e,r,n=!0,i){switch(lt("public key",e,[33,65]),lt("tweak",r,32),Zi(n),i=Cn(i,n?33:65),t.publicKeyTweakMul(i,e,r)){case 0:return i;case 1:throw new Error(St.PUBKEY_PARSE);case 2:throw new Error(St.TWEAK_MUL)}},signatureNormalize(e){switch(lt("signature",e,64),t.signatureNormalize(e)){case 0:return e;case 1:throw new Error(St.SIG_PARSE)}},signatureExport(e,r){lt("signature",e,64),r=Cn(r,72);const n={output:r,outputlen:72};switch(t.signatureExport(n,e)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(St.SIG_PARSE);case 2:throw new Error(St.IMPOSSIBLE_CASE)}},signatureImport(e,r){switch(lt("signature",e),r=Cn(r,64),t.signatureImport(r,e)){case 0:return r;case 1:throw new Error(St.SIG_PARSE);case 2:throw new Error(St.IMPOSSIBLE_CASE)}},ecdsaSign(e,r,n={},i){lt("message",e,32),lt("private key",r,32),vn(Ks(n)==="Object","Expected options to be an Object"),n.data!==void 0&&lt("options.data",n.data),n.noncefn!==void 0&&vn(Ks(n.noncefn)==="Function","Expected options.noncefn to be a Function"),i=Cn(i,64);const s={signature:i,recid:null};switch(t.ecdsaSign(s,e,r,n.data,n.noncefn)){case 0:return s;case 1:throw new Error(St.SIGN);case 2:throw new Error(St.IMPOSSIBLE_CASE)}},ecdsaVerify(e,r,n){switch(lt("signature",e,64),lt("message",r,32),lt("public key",n,[33,65]),t.ecdsaVerify(e,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(St.SIG_PARSE);case 2:throw new Error(St.PUBKEY_PARSE)}},ecdsaRecover(e,r,n,i=!0,s){switch(lt("signature",e,64),vn(Ks(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),lt("message",n,32),Zi(i),s=Cn(s,i?33:65),t.ecdsaRecover(s,e,r,n)){case 0:return s;case 1:throw new Error(St.SIG_PARSE);case 2:throw new Error(St.RECOVER);case 3:throw new Error(St.IMPOSSIBLE_CASE)}},ecdh(e,r,n={},i){switch(lt("public key",e,[33,65]),lt("private key",r,32),vn(Ks(n)==="Object","Expected options to be an Object"),n.data!==void 0&&lt("options.data",n.data),n.hashfn!==void 0?(vn(Ks(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&lt("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&lt("options.ybuf",n.ybuf,32),lt("output",i)):i=Cn(i,32),t.ecdh(i,e,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(St.PUBKEY_PARSE);case 2:throw new Error(St.ECDH)}}});const bm=V1().ec,$n=new bm("secp256k1"),at=$n.curve,Kt=at.n.constructor;function mm(t,e){let r=new Kt(e);if(r.cmp(at.p)>=0)return null;r=r.toRed(at.red);let n=r.redSqr().redIMul(r).redIAdd(at.b).redSqrt();return t===3!==n.isOdd()&&(n=n.redNeg()),$n.keyPair({pub:{x:r,y:n}})}function vm(t,e,r){let n=new Kt(e),i=new Kt(r);if(n.cmp(at.p)>=0||i.cmp(at.p)>=0||(n=n.toRed(at.red),i=i.toRed(at.red),(t===6||t===7)&&i.isOdd()!==(t===7)))return null;const s=n.redSqr().redIMul(n);return i.redSqr().redISub(s.redIAdd(at.b)).isZero()?$n.keyPair({pub:{x:n,y:i}}):null}function Si(t){const e=t[0];switch(e){case 2:case 3:return t.length!==33?null:mm(e,t.subarray(1,33));case 4:case 6:case 7:return t.length!==65?null:vm(e,t.subarray(1,33),t.subarray(33,65));default:return null}}function es(t,e){const r=e.encode(null,t.length===33);for(let n=0;n<t.length;++n)t[n]=r[n]}var wm={contextRandomize(){return 0},privateKeyVerify(t){const e=new Kt(t);return e.cmp(at.n)<0&&!e.isZero()?0:1},privateKeyNegate(t){const e=new Kt(t),r=at.n.sub(e).umod(at.n).toArrayLike(Uint8Array,"be",32);return t.set(r),0},privateKeyTweakAdd(t,e){const r=new Kt(e);if(r.cmp(at.n)>=0||(r.iadd(new Kt(t)),r.cmp(at.n)>=0&&r.isub(at.n),r.isZero()))return 1;const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},privateKeyTweakMul(t,e){let r=new Kt(e);if(r.cmp(at.n)>=0||r.isZero())return 1;r.imul(new Kt(t)),r.cmp(at.n)>=0&&(r=r.umod(at.n));const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},publicKeyVerify(t){return Si(t)===null?1:0},publicKeyCreate(t,e){const r=new Kt(e);if(r.cmp(at.n)>=0||r.isZero())return 1;const n=$n.keyFromPrivate(e).getPublic();return es(t,n),0},publicKeyConvert(t,e){const r=Si(e);if(r===null)return 1;const n=r.getPublic();return es(t,n),0},publicKeyNegate(t,e){const r=Si(e);if(r===null)return 1;const n=r.getPublic();return n.y=n.y.redNeg(),es(t,n),0},publicKeyCombine(t,e){const r=new Array(e.length);for(let i=0;i<e.length;++i)if(r[i]=Si(e[i]),r[i]===null)return 1;let n=r[0].getPublic();for(let i=1;i<r.length;++i)n=n.add(r[i].pub);return n.isInfinity()?2:(es(t,n),0)},publicKeyTweakAdd(t,e,r){const n=Si(e);if(n===null)return 1;if(r=new Kt(r),r.cmp(at.n)>=0)return 2;const i=n.getPublic().add(at.g.mul(r));return i.isInfinity()?2:(es(t,i),0)},publicKeyTweakMul(t,e,r){const n=Si(e);if(n===null)return 1;if(r=new Kt(r),r.cmp(at.n)>=0||r.isZero())return 2;const i=n.getPublic().mul(r);return es(t,i),0},signatureNormalize(t){const e=new Kt(t.subarray(0,32)),r=new Kt(t.subarray(32,64));return e.cmp(at.n)>=0||r.cmp(at.n)>=0?1:(r.cmp($n.nh)===1&&t.set(at.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(t,e){const r=e.subarray(0,32),n=e.subarray(32,64);if(new Kt(r).cmp(at.n)>=0||new Kt(n).cmp(at.n)>=0)return 1;const{output:i}=t;let s=i.subarray(4,4+33);s[0]=0,s.set(r,1);let a=33,o=0;for(;a>1&&s[o]===0&&!(s[o+1]&128);--a,++o);if(s=s.subarray(o),s[0]&128||a>1&&s[0]===0&&!(s[1]&128))return 1;let c=i.subarray(6+33,6+33+33);c[0]=0,c.set(n,1);let f=33,u=0;for(;f>1&&c[u]===0&&!(c[u+1]&128);--f,++u);return c=c.subarray(u),c[0]&128||f>1&&c[0]===0&&!(c[1]&128)?1:(t.outputlen=6+a+f,i[0]=48,i[1]=t.outputlen-2,i[2]=2,i[3]=s.length,i.set(s,4),i[4+a]=2,i[5+a]=c.length,i.set(c,6+a),0)},signatureImport(t,e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return 1;const r=e[3];if(r===0||5+r>=e.length||e[4+r]!==2)return 1;const n=e[5+r];if(n===0||6+r+n!==e.length||e[4]&128||r>1&&e[4]===0&&!(e[5]&128)||e[r+6]&128||n>1&&e[r+6]===0&&!(e[r+7]&128))return 1;let i=e.subarray(4,4+r);if(i.length===33&&i[0]===0&&(i=i.subarray(1)),i.length>32)return 1;let s=e.subarray(6+r);if(s.length===33&&s[0]===0&&(s=s.slice(1)),s.length>32)throw new Error("S length is too long");let a=new Kt(i);a.cmp(at.n)>=0&&(a=new Kt(0));let o=new Kt(e.subarray(6+r));return o.cmp(at.n)>=0&&(o=new Kt(0)),t.set(a.toArrayLike(Uint8Array,"be",32),0),t.set(o.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(t,e,r,n,i){if(i){const o=i;i=c=>{const f=o(e,r,null,n,c);if(!(f instanceof Uint8Array&&f.length===32))throw new Error("This is the way");return new Kt(f)}}const s=new Kt(r);if(s.cmp(at.n)>=0||s.isZero())return 1;let a;try{a=$n.sign(e,r,{canonical:!0,k:i,pers:n})}catch{return 1}return t.signature.set(a.r.toArrayLike(Uint8Array,"be",32),0),t.signature.set(a.s.toArrayLike(Uint8Array,"be",32),32),t.recid=a.recoveryParam,0},ecdsaVerify(t,e,r){const n={r:t.subarray(0,32),s:t.subarray(32,64)},i=new Kt(n.r),s=new Kt(n.s);if(i.cmp(at.n)>=0||s.cmp(at.n)>=0)return 1;if(s.cmp($n.nh)===1||i.isZero()||s.isZero())return 3;const a=Si(r);if(a===null)return 2;const o=a.getPublic();return $n.verify(e,n,o)?0:3},ecdsaRecover(t,e,r,n){const i={r:e.slice(0,32),s:e.slice(32,64)},s=new Kt(i.r),a=new Kt(i.s);if(s.cmp(at.n)>=0||a.cmp(at.n)>=0)return 1;if(s.isZero()||a.isZero())return 2;let o;try{o=$n.recoverPubKey(n,i,r)}catch{return 2}return es(t,o),0},ecdh(t,e,r,n,i,s,a){const o=Si(e);if(o===null)return 1;const c=new Kt(r);if(c.cmp(at.n)>=0||c.isZero())return 2;const f=o.getPublic().mul(c);if(i===void 0){const u=f.encode(null,!0),d=$n.hash().update(u).digest();for(let g=0;g<32;++g)t[g]=d[g]}else{s||(s=new Uint8Array(32));const u=f.getX().toArray("be",32);for(let S=0;S<32;++S)s[S]=u[S];a||(a=new Uint8Array(32));const d=f.getY().toArray("be",32);for(let S=0;S<32;++S)a[S]=d[S];const g=i(s,a,n);if(!(g instanceof Uint8Array&&g.length===t.length))return 2;t.set(g)}return 0}},ry=xm(wm),Ql={},bc={},Zl={},Ya={},_m={get exports(){return Ya},set exports(t){Ya=t}},mc={},Em={get exports(){return mc},set exports(t){mc=t}},ny=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},Am=ny,$i=Object.prototype.toString;function ed(t){return Array.isArray(t)}function al(t){return typeof t>"u"}function Sm(t){return t!==null&&!al(t)&&t.constructor!==null&&!al(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function iy(t){return $i.call(t)==="[object ArrayBuffer]"}function Tm(t){return $i.call(t)==="[object FormData]"}function km(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&iy(t.buffer),e}function Pm(t){return typeof t=="string"}function Cm(t){return typeof t=="number"}function sy(t){return t!==null&&typeof t=="object"}function tc(t){if($i.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Im(t){return $i.call(t)==="[object Date]"}function Nm(t){return $i.call(t)==="[object File]"}function Rm(t){return $i.call(t)==="[object Blob]"}function ay(t){return $i.call(t)==="[object Function]"}function Bm(t){return sy(t)&&ay(t.pipe)}function Mm(t){return $i.call(t)==="[object URLSearchParams]"}function Om(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Dm(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function td(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),ed(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function ol(){var t={};function e(i,s){tc(t[s])&&tc(i)?t[s]=ol(t[s],i):tc(i)?t[s]=ol({},i):ed(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)td(arguments[r],e);return t}function Um(t,e,r){return td(e,function(i,s){r&&typeof i=="function"?t[s]=Am(i,r):t[s]=i}),t}function Lm(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var rn={isArray:ed,isArrayBuffer:iy,isBuffer:Sm,isFormData:Tm,isArrayBufferView:km,isString:Pm,isNumber:Cm,isObject:sy,isPlainObject:tc,isUndefined:al,isDate:Im,isFile:Nm,isBlob:Rm,isFunction:ay,isStream:Bm,isURLSearchParams:Mm,isStandardBrowserEnv:Dm,forEach:td,merge:ol,extend:Um,trim:Om,stripBOM:Lm},ks=rn;function Gh(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var oy=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(ks.isURLSearchParams(r))i=r.toString();else{var s=[];ks.forEach(r,function(c,f){c===null||typeof c>"u"||(ks.isArray(c)?f=f+"[]":c=[c],ks.forEach(c,function(d){ks.isDate(d)?d=d.toISOString():ks.isObject(d)&&(d=JSON.stringify(d)),s.push(Gh(f)+"="+Gh(d))}))}),i=s.join("&")}if(i){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},Fm=rn;function jc(){this.handlers=[]}jc.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};jc.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};jc.prototype.forEach=function(e){Fm.forEach(this.handlers,function(n){n!==null&&e(n)})};var jm=jc,Km=rn,qm=function(e,r){Km.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},cy=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Bf,Vh;function fy(){if(Vh)return Bf;Vh=1;var t=cy;return Bf=function(r,n,i,s,a){var o=new Error(r);return t(o,n,i,s,a)},Bf}var Mf,Jh;function $m(){if(Jh)return Mf;Jh=1;var t=fy();return Mf=function(r,n,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},Mf}var Of,Wh;function Hm(){if(Wh)return Of;Wh=1;var t=rn;return Of=t.isStandardBrowserEnv()?function(){return{write:function(n,i,s,a,o,c){var f=[];f.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&f.push("expires="+new Date(s).toGMTString()),t.isString(a)&&f.push("path="+a),t.isString(o)&&f.push("domain="+o),c===!0&&f.push("secure"),document.cookie=f.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Of}var Df,Yh;function zm(){return Yh||(Yh=1,Df=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),Df}var Uf,Xh;function Gm(){return Xh||(Xh=1,Uf=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Uf}var Lf,Qh;function Vm(){if(Qh)return Lf;Qh=1;var t=zm(),e=Gm();return Lf=function(n,i){return n&&!t(i)?e(n,i):i},Lf}var Ff,Zh;function Jm(){if(Zh)return Ff;Zh=1;var t=rn,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Ff=function(n){var i={},s,a,o;return n&&t.forEach(n.split(`
`),function(f){if(o=f.indexOf(":"),s=t.trim(f.substr(0,o)).toLowerCase(),a=t.trim(f.substr(o+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([a]):i[s]=i[s]?i[s]+", "+a:a}}),i},Ff}var jf,e0;function Wm(){if(e0)return jf;e0=1;var t=rn;return jf=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(a){var o=a;return r&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(o){var c=t.isString(o)?s(o):o;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),jf}var Kf,t0;function Kc(){if(t0)return Kf;t0=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Kf=t,Kf}var qf,r0;function n0(){if(r0)return qf;r0=1;var t=rn,e=$m(),r=Hm(),n=oy,i=Vm(),s=Jm(),a=Wm(),o=fy(),c=qc(),f=Kc();return qf=function(d){return new Promise(function(b,S){var _=d.data,y=d.headers,E=d.responseType,A;function M(){d.cancelToken&&d.cancelToken.unsubscribe(A),d.signal&&d.signal.removeEventListener("abort",A)}t.isFormData(_)&&delete y["Content-Type"];var B=new XMLHttpRequest;if(d.auth){var D=d.auth.username||"",L=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";y.Authorization="Basic "+btoa(D+":"+L)}var z=i(d.baseURL,d.url);B.open(d.method.toUpperCase(),n(z,d.params,d.paramsSerializer),!0),B.timeout=d.timeout;function Y(){if(B){var oe="getAllResponseHeaders"in B?s(B.getAllResponseHeaders()):null,ge=!E||E==="text"||E==="json"?B.responseText:B.response,re={data:ge,status:B.status,statusText:B.statusText,headers:oe,config:d,request:B};e(function(l){b(l),M()},function(l){S(l),M()},re),B=null}}if("onloadend"in B?B.onloadend=Y:B.onreadystatechange=function(){!B||B.readyState!==4||B.status===0&&!(B.responseURL&&B.responseURL.indexOf("file:")===0)||setTimeout(Y)},B.onabort=function(){B&&(S(o("Request aborted",d,"ECONNABORTED",B)),B=null)},B.onerror=function(){S(o("Network Error",d,null,B)),B=null},B.ontimeout=function(){var ge=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",re=d.transitional||c.transitional;d.timeoutErrorMessage&&(ge=d.timeoutErrorMessage),S(o(ge,d,re.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",B)),B=null},t.isStandardBrowserEnv()){var ie=(d.withCredentials||a(z))&&d.xsrfCookieName?r.read(d.xsrfCookieName):void 0;ie&&(y[d.xsrfHeaderName]=ie)}"setRequestHeader"in B&&t.forEach(y,function(ge,re){typeof _>"u"&&re.toLowerCase()==="content-type"?delete y[re]:B.setRequestHeader(re,ge)}),t.isUndefined(d.withCredentials)||(B.withCredentials=!!d.withCredentials),E&&E!=="json"&&(B.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&B.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&B.upload&&B.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(A=function(oe){B&&(S(!oe||oe&&oe.type?new f("canceled"):oe),B.abort(),B=null)},d.cancelToken&&d.cancelToken.subscribe(A),d.signal&&(d.signal.aborted?A():d.signal.addEventListener("abort",A))),_||(_=null),B.send(_)})},qf}var $f,i0;function qc(){if(i0)return $f;i0=1;var t=rn,e=qm,r=cy,n={"Content-Type":"application/x-www-form-urlencoded"};function i(c,f){!t.isUndefined(c)&&t.isUndefined(c["Content-Type"])&&(c["Content-Type"]=f)}function s(){var c;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(c=n0()),c}function a(c,f,u){if(t.isString(c))try{return(f||JSON.parse)(c),t.trim(c)}catch(d){if(d.name!=="SyntaxError")throw d}return(u||JSON.stringify)(c)}var o={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:s(),transformRequest:[function(f,u){return e(u,"Accept"),e(u,"Content-Type"),t.isFormData(f)||t.isArrayBuffer(f)||t.isBuffer(f)||t.isStream(f)||t.isFile(f)||t.isBlob(f)?f:t.isArrayBufferView(f)?f.buffer:t.isURLSearchParams(f)?(i(u,"application/x-www-form-urlencoded;charset=utf-8"),f.toString()):t.isObject(f)||u&&u["Content-Type"]==="application/json"?(i(u,"application/json"),a(f)):f}],transformResponse:[function(f){var u=this.transitional||o.transitional,d=u&&u.silentJSONParsing,g=u&&u.forcedJSONParsing,b=!d&&this.responseType==="json";if(b||g&&t.isString(f)&&f.length)try{return JSON.parse(f)}catch(S){if(b)throw S.name==="SyntaxError"?r(S,this,"E_JSON_PARSE"):S}return f}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(f){return f>=200&&f<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return t.forEach(["delete","get","head"],function(f){o.headers[f]={}}),t.forEach(["post","put","patch"],function(f){o.headers[f]=t.merge(n)}),$f=o,$f}var Ym=rn,Xm=qc(),Qm=function(e,r,n){var i=this||Xm;return Ym.forEach(n,function(a){e=a.call(i,e,r)}),e},Hf,s0;function uy(){return s0||(s0=1,Hf=function(e){return!!(e&&e.__CANCEL__)}),Hf}var a0=rn,zf=Qm,Zm=uy(),ev=qc(),tv=Kc();function Gf(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new tv("canceled")}var rv=function(e){Gf(e),e.headers=e.headers||{},e.data=zf.call(e,e.data,e.headers,e.transformRequest),e.headers=a0.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),a0.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||ev.adapter;return r(e).then(function(i){return Gf(e),i.data=zf.call(e,i.data,i.headers,e.transformResponse),i},function(i){return Zm(i)||(Gf(e),i&&i.response&&(i.response.data=zf.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},cn=rn,ly=function(e,r){r=r||{};var n={};function i(u,d){return cn.isPlainObject(u)&&cn.isPlainObject(d)?cn.merge(u,d):cn.isPlainObject(d)?cn.merge({},d):cn.isArray(d)?d.slice():d}function s(u){if(cn.isUndefined(r[u])){if(!cn.isUndefined(e[u]))return i(void 0,e[u])}else return i(e[u],r[u])}function a(u){if(!cn.isUndefined(r[u]))return i(void 0,r[u])}function o(u){if(cn.isUndefined(r[u])){if(!cn.isUndefined(e[u]))return i(void 0,e[u])}else return i(void 0,r[u])}function c(u){if(u in r)return i(e[u],r[u]);if(u in e)return i(void 0,e[u])}var f={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c};return cn.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var g=f[d]||s,b=g(d);cn.isUndefined(b)&&g!==c||(n[d]=b)}),n},Vf,o0;function dy(){return o0||(o0=1,Vf={version:"0.25.0"}),Vf}var nv=dy().version,rd={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){rd[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var c0={};rd.transitional=function(e,r,n){function i(s,a){return"[Axios v"+nv+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return function(s,a,o){if(e===!1)throw new Error(i(a," has been removed"+(r?" in "+r:"")));return r&&!c0[a]&&(c0[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,a,o):!0}};function iv(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],a=e[s];if(a){var o=t[s],c=o===void 0||a(o,s,t);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+s)}}var sv={assertOptions:iv,validators:rd},hy=rn,av=oy,f0=jm,u0=rv,$c=ly,py=sv,Ps=py.validators;function ho(t){this.defaults=t,this.interceptors={request:new f0,response:new f0}}ho.prototype.request=function(e,r){if(typeof e=="string"?(r=r||{},r.url=e):r=e||{},!r.url)throw new Error("Provided config url is not valid");r=$c(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&py.assertOptions(n,{silentJSONParsing:Ps.transitional(Ps.boolean),forcedJSONParsing:Ps.transitional(Ps.boolean),clarifyTimeoutError:Ps.transitional(Ps.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(r)===!1||(s=s&&b.synchronous,i.unshift(b.fulfilled,b.rejected))});var a=[];this.interceptors.response.forEach(function(b){a.push(b.fulfilled,b.rejected)});var o;if(!s){var c=[u0,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(a),o=Promise.resolve(r);c.length;)o=o.then(c.shift(),c.shift());return o}for(var f=r;i.length;){var u=i.shift(),d=i.shift();try{f=u(f)}catch(g){d(g);break}}try{o=u0(f)}catch(g){return Promise.reject(g)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};ho.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=$c(this.defaults,e),av(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};hy.forEach(["delete","get","head","options"],function(e){ho.prototype[e]=function(r,n){return this.request($c(n||{},{method:e,url:r,data:(n||{}).data}))}});hy.forEach(["post","put","patch"],function(e){ho.prototype[e]=function(r,n,i){return this.request($c(i||{},{method:e,url:r,data:n}))}});var ov=ho,Jf,l0;function cv(){if(l0)return Jf;l0=1;var t=Kc();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(a){n=a});var i=this;this.promise.then(function(s){if(i._listeners){var a,o=i._listeners.length;for(a=0;a<o;a++)i._listeners[a](s);i._listeners=null}}),this.promise.then=function(s){var a,o=new Promise(function(c){i.subscribe(c),a=c}).then(s);return o.cancel=function(){i.unsubscribe(a)},o},r(function(a){i.reason||(i.reason=new t(a),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(a){n=a});return{token:i,cancel:n}},Jf=e,Jf}var Wf,d0;function fv(){return d0||(d0=1,Wf=function(e){return function(n){return e.apply(null,n)}}),Wf}var Yf,h0;function uv(){if(h0)return Yf;h0=1;var t=rn;return Yf=function(r){return t.isObject(r)&&r.isAxiosError===!0},Yf}var p0=rn,lv=ny,rc=ov,dv=ly,hv=qc();function gy(t){var e=new rc(t),r=lv(rc.prototype.request,e);return p0.extend(r,rc.prototype,e),p0.extend(r,e),r.create=function(i){return gy(dv(t,i))},r}var ii=gy(hv);ii.Axios=rc;ii.Cancel=Kc();ii.CancelToken=cv();ii.isCancel=uy();ii.VERSION=dy().version;ii.all=function(e){return Promise.all(e)};ii.spread=fv();ii.isAxiosError=uv();Em.exports=ii;mc.default=ii;(function(t){t.exports=mc})(_m);var pv=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zl,"__esModule",{value:!0});const gv=pv(Ya);let yv=class{constructor(e){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){const r=e.protocol||"http",n=e.port||(r==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:r,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log}}async get(e,r){try{return await this.request().get(e,r)}catch(n){if(n.response&&n.response.status)return n.response;throw n}}async post(e,r,n){try{return await this.request().post(e,r,n)}catch(i){if(i.response&&i.response.status)return i.response;throw i}}request(){const e=gv.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout,maxContentLength:536870912});return this.config.logging&&(e.interceptors.request.use(r=>(this.config.logger(`Requesting: ${r.baseURL}/${r.url}`),r)),e.interceptors.response.use(r=>(this.config.logger(`Response:   ${r.config.url} - ${r.status}`),r))),e}};Zl.default=yv;var nd={},Hc={},po={},In={},go={},Vt={},xv=H&&H.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bv=H&&H.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mv=H&&H.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&xv(e,t,r);return bv(e,t),e};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.b64UrlDecode=Vt.b64UrlEncode=Vt.bufferTob64Url=Vt.bufferTob64=Vt.b64UrlToBuffer=Vt.stringToB64Url=Vt.stringToBuffer=Vt.bufferToString=Vt.b64UrlToString=Vt.concatBuffers=void 0;const yy=mv(Yg);function vv(t){let e=0;for(let i=0;i<t.length;i++)e+=t[i].byteLength;let r=new Uint8Array(e),n=0;r.set(new Uint8Array(t[0]),n),n+=t[0].byteLength;for(let i=1;i<t.length;i++)r.set(new Uint8Array(t[i]),n),n+=t[i].byteLength;return r}Vt.concatBuffers=vv;function wv(t){let e=my(t);return xy(e)}Vt.b64UrlToString=wv;function xy(t){return new TextDecoder("utf-8",{fatal:!0}).decode(t)}Vt.bufferToString=xy;function by(t){return new TextEncoder().encode(t)}Vt.stringToBuffer=by;function _v(t){return wy(by(t))}Vt.stringToB64Url=_v;function my(t){return new Uint8Array(yy.toByteArray(Ey(t)))}Vt.b64UrlToBuffer=my;function vy(t){return yy.fromByteArray(new Uint8Array(t))}Vt.bufferTob64=vy;function wy(t){return _y(vy(t))}Vt.bufferTob64Url=wy;function _y(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}Vt.b64UrlEncode=_y;function Ey(t){t=t.replace(/\-/g,"+").replace(/\_/g,"/");let e;return t.length%4==0?e=0:e=4-t.length%4,t.concat("=".repeat(e))}Vt.b64UrlDecode=Ey;var ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.isBrowser=ur.arraybufferEqual=ur.byteArrayToLong=ur.longTo32ByteArray=ur.longTo16ByteArray=ur.shortTo2ByteArray=ur.longTo8ByteArray=void 0;function Ev(t){const e=[0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return Uint8Array.from(e)}ur.longTo8ByteArray=Ev;function Av(t){if(t>(2^32-1))throw new Error("Short too long");const e=[0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return Uint8Array.from(e)}ur.shortTo2ByteArray=Av;function Sv(t){const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return e}ur.longTo16ByteArray=Sv;function Tv(t){const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return Uint8Array.from(e)}ur.longTo32ByteArray=Tv;function kv(t){let e=0;for(let r=t.length-1;r>=0;r--)e=e*256+t[r];return e}ur.byteArrayToLong=kv;function Pv(t,e){const r=t.buffer,n=e.buffer;if(r===n)return!0;if(r.byteLength!==n.byteLength)return!1;const i=new DataView(r),s=new DataView(n);let a=r.byteLength;for(;a--;)if(i.getUint8(a)!==s.getUint8(a))return!1;return!0}ur.arraybufferEqual=Pv;ur.isBrowser=typeof window<"u"&&typeof window.document<"u";var gi={},hs={},jo={},id={};Object.defineProperty(id,"__esModule",{value:!0});const Cv=qi;class Iv{BigNum;constructor(){this.BigNum=(e,r)=>{let n=Cv.BigNumber.clone({DECIMAL_PLACES:r});return new n(e)}}winstonToAr(e,{formatted:r=!1,decimals:n=12,trim:i=!0}={}){let s=this.stringToBigNum(e,n).shiftedBy(-12);return r?s.toFormat(n):s.toFixed(n)}arToWinston(e,{formatted:r=!1}={}){let n=this.stringToBigNum(e).shiftedBy(12);return r?n.toFormat():n.toFixed(0)}compare(e,r){let n=this.stringToBigNum(e),i=this.stringToBigNum(r);return n.comparedTo(i)}isEqual(e,r){return this.compare(e,r)===0}isLessThan(e,r){let n=this.stringToBigNum(e),i=this.stringToBigNum(r);return n.isLessThan(i)}isGreaterThan(e,r){let n=this.stringToBigNum(e),i=this.stringToBigNum(r);return n.isGreaterThan(i)}add(e,r){let n=this.stringToBigNum(e);return this.stringToBigNum(r),n.plus(r).toFixed(0)}sub(e,r){let n=this.stringToBigNum(e);return this.stringToBigNum(r),n.minus(r).toFixed(0)}stringToBigNum(e,r=12){return this.BigNum(e,r)}}id.default=Iv;var sd={};Object.defineProperty(sd,"__esModule",{value:!0});class Nv{METHOD_GET="GET";METHOD_POST="POST";config;constructor(e){this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){const r=e.protocol||"http",n=e.port||(r==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:r,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log,network:e.network}}async get(e,r){return await this.request(e,{...r,method:this.METHOD_GET})}async post(e,r,n){const i=new Headers(n?.headers||{});return i.get("content-type")?.includes("application/json")||i.append("content-type","application/json"),i.append("accept","application/json, text/plain, */*"),await this.request(e,{...n,method:this.METHOD_POST,body:typeof r!="string"?JSON.stringify(r):r,headers:i})}async request(e,r){const n=new Headers(r?.headers||{}),i=`${this.config.protocol}://${this.config.host}:${this.config.port}`,s=r?.responseType;delete r?.responseType,e.startsWith("/")&&(e=e.slice(1)),this.config.network&&n.append("x-network",this.config.network),this.config.logging&&this.config.logger(`Requesting: ${i}/${e}`);let a=await fetch(`${i}/${e}`,{...r||{},headers:n});this.config.logging&&this.config.logger(`Response:   ${a.url} - ${a.status}`);const o=a.headers.get("content-type"),c=o?.match(/charset=([^()<>@,;:\"/[\]?.=\s]*)/i)?.[1],f=a,u=async()=>{if(c)try{f.data=new TextDecoder(c).decode(await a.arrayBuffer())}catch{f.data=await a.text()}else f.data=await a.text()};if(s==="arraybuffer")f.data=await a.arrayBuffer();else if(s==="text")await u();else if(s==="webstream")f.data=Rv(a.body);else if(o?.startsWith("application/json"))try{await a.clone().json(),f.data=await a.json()}catch{await u()}else await u();return f}}sd.default=Nv;const Rv=t=>{const e=t;return typeof e[Symbol.asyncIterator]>"u"?(e[Symbol.asyncIterator]=Bv(t),e):t},Bv=function(t){return async function*(){const r=t.getReader();try{const{done:n,value:i}=await r.read();if(n)return;yield i}finally{r.releaseLock()}}};var ad={},Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.b64UrlDecode=Rt.b64UrlEncode=Rt.bufferTob64Url=Rt.bufferTob64=Rt.b64UrlToBuffer=Rt.stringToB64Url=Rt.stringToBuffer=Rt.bufferToString=Rt.b64UrlToString=Rt.concatBuffers=void 0;const Ay=Yg;function Mv(t){let e=0;for(let i=0;i<t.length;i++)e+=t[i].byteLength;let r=new Uint8Array(e),n=0;r.set(new Uint8Array(t[0]),n),n+=t[0].byteLength;for(let i=1;i<t.length;i++)r.set(new Uint8Array(t[i]),n),n+=t[i].byteLength;return r}Rt.concatBuffers=Mv;function Ov(t){let e=ky(t);return Sy(e)}Rt.b64UrlToString=Ov;function Sy(t){return new TextDecoder("utf-8",{fatal:!0}).decode(t)}Rt.bufferToString=Sy;function Ty(t){return new TextEncoder().encode(t)}Rt.stringToBuffer=Ty;function Dv(t){return Cy(Ty(t))}Rt.stringToB64Url=Dv;function ky(t){return new Uint8Array(Ay.toByteArray(Ny(t)))}Rt.b64UrlToBuffer=ky;function Py(t){return Ay.fromByteArray(new Uint8Array(t))}Rt.bufferTob64=Py;function Cy(t){return Iy(Py(t))}Rt.bufferTob64Url=Cy;function Iy(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}Rt.b64UrlEncode=Iy;function Ny(t){t=t.replace(/\-/g,"+").replace(/\_/g,"/");let e;return t.length%4==0?e=0:e=4-t.length%4,t.concat("=".repeat(e))}Rt.b64UrlDecode=Ny;Object.defineProperty(ad,"__esModule",{value:!0});const Ti=Rt;class Uv{keyLength=4096;publicExponent=65537;hashAlgorithm="sha256";driver;constructor(){if(!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let e=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),r=await this.driver.exportKey("jwk",e.privateKey);return{kty:r.kty,e:r.e,n:r.n,d:r.d,p:r.p,q:r.q,dp:r.dp,dq:r.dq,qi:r.qi}}async sign(e,r,{saltLength:n}={}){let i=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(e),r);return new Uint8Array(i)}async hash(e,r="SHA-256"){let n=await this.driver.digest(r,e);return new Uint8Array(n)}async verify(e,r,n){const i={kty:"RSA",e:"AQAB",n:e},s=await this.jwkToPublicCryptoKey(i),a=await this.driver.digest("SHA-256",r),o=await this.driver.verify({name:"RSA-PSS",saltLength:0},s,n,r),c=await this.driver.verify({name:"RSA-PSS",saltLength:32},s,n,r),f=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((s.algorithm.modulusLength-1)/8)-a.byteLength-2},s,n,r);return o||c||f}async jwkToCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;const e=crypto?.subtle;return e===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(n=>typeof e[n]=="function")}async encrypt(e,r,n){const i=await this.driver.importKey("raw",typeof r=="string"?Ti.stringToBuffer(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:n?Ti.stringToBuffer(n):Ti.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),a=new Uint8Array(16);crypto.getRandomValues(a);const o=await this.driver.encrypt({name:"AES-CBC",iv:a},s,e);return Ti.concatBuffers([a,o])}async decrypt(e,r,n){const i=await this.driver.importKey("raw",typeof r=="string"?Ti.stringToBuffer(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:n?Ti.stringToBuffer(n):Ti.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),a=e.slice(0,16),o=await this.driver.decrypt({name:"AES-CBC",iv:a},s,e.slice(16));return Ti.concatBuffers([o])}}ad.default=Uv;var od={};Object.defineProperty(od,"__esModule",{value:!0});class Lv{api;constructor(e){this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}}od.default=Lv;var Ko={},Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.getError=void 0;class Fv extends Error{type;response;constructor(e,r={}){r.message?super(r.message):super(),this.type=e,this.response=r.response}getType(){return this.type}}Hi.default=Fv;function jv(t){let e=t.data;if(typeof t.data=="string")try{e=JSON.parse(t.data)}catch{}if(t.data instanceof ArrayBuffer||t.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch{}return e?e.error||e:t.statusText||"unknown"}Hi.getError=jv;var Cs={},qo={},g0;function Ry(){if(g0)return qo;g0=1,Object.defineProperty(qo,"__esModule",{value:!0});const t=vc();async function e(n){if(Array.isArray(n)){const a=t.default.utils.concatBuffers([t.default.utils.stringToBuffer("list"),t.default.utils.stringToBuffer(n.length.toString())]);return await r(n,await t.default.crypto.hash(a,"SHA-384"))}const i=t.default.utils.concatBuffers([t.default.utils.stringToBuffer("blob"),t.default.utils.stringToBuffer(n.byteLength.toString())]),s=t.default.utils.concatBuffers([await t.default.crypto.hash(i,"SHA-384"),await t.default.crypto.hash(n,"SHA-384")]);return await t.default.crypto.hash(s,"SHA-384")}qo.default=e;async function r(n,i){if(n.length<1)return i;const s=t.default.utils.concatBuffers([i,await e(n[0])]),a=await t.default.crypto.hash(s,"SHA-384");return await r(n.slice(1),a)}return qo}var Xf={},y0;function By(){return y0||(y0=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.debug=t.validatePath=t.arrayCompare=t.bufferToInt=t.intToBuffer=t.arrayFlatten=t.generateProofs=t.buildLayers=t.generateTransactionChunks=t.generateTree=t.computeRootHash=t.generateLeaves=t.chunkData=t.MIN_CHUNK_SIZE=t.MAX_CHUNK_SIZE=void 0;const e=vc(),r=Rt;t.MAX_CHUNK_SIZE=256*1024,t.MIN_CHUNK_SIZE=32*1024;const n=32,i=32;async function s(D){let L=[],z=D,Y=0;for(;z.byteLength>=t.MAX_CHUNK_SIZE;){let ie=t.MAX_CHUNK_SIZE,oe=z.byteLength-t.MAX_CHUNK_SIZE;oe>0&&oe<t.MIN_CHUNK_SIZE&&(ie=Math.ceil(z.byteLength/2));const ge=z.slice(0,ie),re=await e.default.crypto.hash(ge);Y+=ge.byteLength,L.push({dataHash:re,minByteRange:Y-ge.byteLength,maxByteRange:Y}),z=z.slice(ie)}return L.push({dataHash:await e.default.crypto.hash(z),minByteRange:Y,maxByteRange:Y+z.byteLength}),L}t.chunkData=s;async function a(D){return Promise.all(D.map(async({dataHash:L,minByteRange:z,maxByteRange:Y})=>({type:"leaf",id:await _(await Promise.all([_(L),_(y(Y))])),dataHash:L,minByteRange:z,maxByteRange:Y})))}t.generateLeaves=a;async function o(D){return(await c(D)).id}t.computeRootHash=o;async function c(D){return await u(await a(await s(D)))}t.generateTree=c;async function f(D){const L=await s(D),z=await a(L),Y=await u(z),ie=await d(Y),oe=L.slice(-1)[0];return oe.maxByteRange-oe.minByteRange===0&&(L.splice(L.length-1,1),ie.splice(ie.length-1,1)),{data_root:Y.id,chunks:L,proofs:ie}}t.generateTransactionChunks=f;async function u(D,L=0){if(D.length<2)return D[0];const z=[];for(let Y=0;Y<D.length;Y+=2)z.push(await S(D[Y],D[Y+1]));return u(z,L+1)}t.buildLayers=u;function d(D){const L=g(D);return Array.isArray(L)?b(L):[L]}t.generateProofs=d;function g(D,L=new Uint8Array,z=0){if(D.type=="leaf")return{offset:D.maxByteRange-1,proof:(0,r.concatBuffers)([L,D.dataHash,y(D.maxByteRange)])};if(D.type=="branch"){const Y=(0,r.concatBuffers)([L,D.leftChild.id,D.rightChild.id,y(D.byteRange)]);return[g(D.leftChild,Y,z+1),g(D.rightChild,Y,z+1)]}throw new Error("Unexpected node type")}function b(D){const L=[];return D.forEach(z=>{Array.isArray(z)?L.push(...b(z)):L.push(z)}),L}t.arrayFlatten=b;async function S(D,L){return L?{type:"branch",id:await _([await _(D.id),await _(L.id),await _(y(D.maxByteRange))]),byteRange:D.maxByteRange,maxByteRange:L.maxByteRange,leftChild:D,rightChild:L}:D}async function _(D){return Array.isArray(D)&&(D=e.default.utils.concatBuffers(D)),new Uint8Array(await e.default.crypto.hash(D))}function y(D){const L=new Uint8Array(n);for(var z=L.length-1;z>=0;z--){var Y=D%256;L[z]=Y,D=(D-Y)/256}return L}t.intToBuffer=y;function E(D){let L=0;for(var z=0;z<D.length;z++)L*=256,L+=D[z];return L}t.bufferToInt=E;const A=(D,L)=>D.every((z,Y)=>L[Y]===z);t.arrayCompare=A;async function M(D,L,z,Y,ie){if(Y<=0)return!1;if(L>=Y)return M(D,0,Y-1,Y,ie);if(L<0)return M(D,0,0,Y,ie);if(ie.length==i+n){const T=ie.slice(0,i),N=ie.slice(T.length,T.length+n),O=await _([await _(T),await _(N)]);return(0,t.arrayCompare)(D,O)?{offset:Y-1,leftBound:z,rightBound:Y,chunkSize:Y-z}:!1}const oe=ie.slice(0,i),ge=ie.slice(oe.length,oe.length+i),re=ie.slice(oe.length+ge.length,oe.length+ge.length+n),P=E(re),l=ie.slice(oe.length+ge.length+re.length),m=await _([await _(oe),await _(ge),await _(re)]);return(0,t.arrayCompare)(D,m)?L<P?await M(oe,L,z,Math.min(Y,P),l):await M(ge,L,Math.max(z,P),Y,l):!1}t.validatePath=M;async function B(D,L=""){if(D.byteLength<1)return L;const z=D.slice(0,i),Y=D.slice(z.length,z.length+i),ie=D.slice(z.length+Y.length,z.length+Y.length+n),oe=E(ie),ge=D.slice(z.length+Y.length+ie.length),re=await _([await _(z),await _(Y),await _(ie)]),P=`${L}
${JSON.stringify(Buffer.from(z))},${JSON.stringify(Buffer.from(Y))},${oe} => ${JSON.stringify(re)}`;return B(ge,P)}t.debug=B}(Xf)),Xf}var x0;function cd(){if(x0)return Cs;x0=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.Tag=void 0;const t=Rt,e=Ry(),r=By();class n{get(o,c){if(!Object.getOwnPropertyNames(this).includes(o))throw new Error(`Field "${o}" is not a property of the Arweave Transaction class.`);return this[o]instanceof Uint8Array?c&&c.decode&&c.string?t.bufferToString(this[o]):c&&c.decode&&!c.string?this[o]:t.bufferTob64Url(this[o]):c&&c.decode==!0?c&&c.string?t.b64UrlToString(this[o]):t.b64UrlToBuffer(this[o]):this[o]}}class i extends n{name;value;constructor(o,c,f=!1){super(),this.name=o,this.value=c}}Cs.Tag=i;class s extends n{format=2;id="";last_tx="";owner="";tags=[];target="";quantity="0";data_size="0";data=new Uint8Array;data_root="";reward="0";signature="";chunks;constructor(o={}){super(),Object.assign(this,o),typeof this.data=="string"&&(this.data=t.b64UrlToBuffer(this.data)),o.tags&&(this.tags=o.tags.map(c=>new i(c.name,c.value)))}addTag(o,c){this.tags.push(new i(t.stringToB64Url(o),t.stringToB64Url(c)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:t.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(o){this.owner=o}setSignature({id:o,owner:c,reward:f,tags:u,signature:d}){this.id=o,this.owner=c,f&&(this.reward=f),u&&(this.tags=u),this.signature=d}async prepareChunks(o){!this.chunks&&o.byteLength>0&&(this.chunks=await(0,r.generateTransactionChunks)(o),this.data_root=t.bufferTob64Url(this.chunks.data_root)),!this.chunks&&o.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(o,c){if(!this.chunks)throw new Error("Chunks have not been prepared");const f=this.chunks.proofs[o],u=this.chunks.chunks[o];return{data_root:this.data_root,data_size:this.data_size,data_path:t.bufferTob64Url(f.proof),offset:f.offset.toString(),chunk:t.bufferTob64Url(c.slice(u.minByteRange,u.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let o=this.tags.reduce((f,u)=>t.concatBuffers([f,u.get("name",{decode:!0,string:!1}),u.get("value",{decode:!0,string:!1})]),new Uint8Array);return t.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),t.stringToBuffer(this.quantity),t.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),o]);case 2:this.data_root||await this.prepareChunks(this.data);const c=this.tags.map(f=>[f.get("name",{decode:!0,string:!1}),f.get("value",{decode:!0,string:!1})]);return await(0,e.default)([t.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),t.stringToBuffer(this.quantity),t.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),c,t.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}}return Cs.default=s,Cs}var ma={},b0;function Kv(){if(b0)return ma;b0=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.TransactionUploader=void 0;const t=cd(),e=Rt,r=Hi,n=By(),i=1,s=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],a=1e3*40;class o{api;chunkIndex=0;txPosted=!1;transaction;lastRequestTimeEnd=0;totalErrors=0;data;lastResponseStatus=0;lastResponseError="";get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}constructor(f,u){if(this.api=f,!u.id)throw new Error("Transaction is not signed");if(!u.chunks)throw new Error("Transaction chunks not prepared");this.data=u.data,this.transaction=new t.default(Object.assign({},u,{data:new Uint8Array(0)}))}async uploadChunk(f){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let u=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+a-Date.now(),a);if(u>0&&(u=u-u*Math.random()*.3,await new Promise(S=>setTimeout(S,u))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}f&&(this.chunkIndex=f);const d=this.transaction.getChunk(f||this.chunkIndex,this.data);if(!await(0,n.validatePath)(this.transaction.chunks.data_root,parseInt(d.offset),0,parseInt(d.data_size),e.b64UrlToBuffer(d.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);const b=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(S=>(console.error(S.message),{status:-1,data:{error:S.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=b.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=(0,r.getError)(b),s.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(f,u,d){if(!u||typeof u.chunkIndex!="number"||typeof u.transaction!="object")throw new Error("Serialized object does not match expected format.");var g=new t.default(u.transaction);g.chunks||await g.prepareChunks(d);const b=new o(f,g);if(b.chunkIndex=u.chunkIndex,b.lastRequestTimeEnd=u.lastRequestTimeEnd,b.lastResponseError=u.lastResponseError,b.lastResponseStatus=u.lastResponseStatus,b.txPosted=u.txPosted,b.data=d,b.transaction.data_root!==u.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return b}static async fromTransactionId(f,u){const d=await f.get(`tx/${u}`);if(d.status!==200)throw new Error(`Tx ${u} not found: ${d.status}`);const g=d.data;return g.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:g}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=i){this.transaction.data=this.data;const d=await this.api.post("tx",this.transaction).catch(g=>(console.error(g),{status:-1,data:{error:g.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=d.status,this.transaction.data=new Uint8Array(0),d.status>=200&&d.status<300){this.txPosted=!0,this.chunkIndex=i;return}throw this.lastResponseError=(0,r.getError)(d),new Error(`Unable to upload transaction: ${d.status}, ${this.lastResponseError}`)}const u=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=u.status,!(u.status>=200&&u.status<300))throw this.lastResponseError=(0,r.getError)(u),new Error(`Unable to upload transaction: ${u.status}, ${this.lastResponseError}`);this.txPosted=!0}}return ma.TransactionUploader=o,ma}var m0;function qv(){if(m0)return Ko;m0=1,Object.defineProperty(Ko,"__esModule",{value:!0});const t=Hi,e=cd(),r=Rt,n=Kv();class i{api;crypto;chunks;constructor(a,o,c){this.api=a,this.crypto=o,this.chunks=c}async getTransactionAnchor(){const a=await this.api.get("tx_anchor");if(!a.data.match(/^[a-z0-9_-]{43,}/i)||!a.ok)throw new Error(`Could not getTransactionAnchor. Received: ${a.data}. Status: ${a.status}, ${a.statusText}`);return a.data}async getPrice(a,o){let c=o?`price/${a}/${o}`:`price/${a}`;const f=await this.api.get(c);if(!/^\d+$/.test(f.data)||!f.ok)throw new Error(`Could not getPrice. Received: ${f.data}. Status: ${f.status}, ${f.statusText}`);return f.data}async get(a){const o=await this.api.get(`tx/${a}`);if(o.status==200){const c=parseInt(o.data.data_size);if(o.data.format>=2&&c>0&&c<=1024*1024*12){const f=await this.getData(a);return new e.default({...o.data,data:f})}return new e.default({...o.data,format:o.data.format||1})}throw o.status==404?new t.default("TX_NOT_FOUND"):o.status==410?new t.default("TX_FAILED"):new t.default("TX_INVALID")}fromRaw(a){return new e.default(a)}async search(a,o){return this.api.post("arql",{op:"equals",expr1:a,expr2:o}).then(c=>c.data?c.data:[])}getStatus(a){return this.api.get(`tx/${a}/status`).then(o=>o.status==200?{status:200,confirmed:o.data}:{status:o.status,confirmed:null})}async getData(a,o){let c;try{c=await this.chunks.downloadChunkedData(a)}catch(f){console.error(`Error while trying to download chunked data for ${a}`),console.error(f)}if(!c){console.warn(`Falling back to gateway cache for ${a}`);try{c=(await this.api.get(`/${a}`,{responseType:"arraybuffer"})).data}catch(f){console.error(`Error while trying to download contiguous data from gateway cache for ${a}`),console.error(f)}}if(!c)throw new Error(`${a} was not found!`);return o&&o.decode&&!o.string?c:o&&o.decode&&o.string?r.bufferToString(c):r.bufferTob64Url(c)}async sign(a,o,c){const u=typeof o=="object"&&(g=>{let b=!0;return["n","e","d","p","q","dp","dq","qi"].map(S=>!(S in g)&&(b=!1)),b})(o),d=typeof arweaveWallet=="object";if(!u&&!d)throw new Error("No valid JWK or external wallet found to sign transaction.");if(d){try{(await arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}const g=await arweaveWallet.sign(a,c);a.setSignature({id:g.id,owner:g.owner,reward:g.reward,tags:g.tags,signature:g.signature})}else if(u){a.setOwner(o.n);let g=await a.getSignatureData(),b=await this.crypto.sign(o,g,c),S=await this.crypto.hash(b);a.setSignature({id:r.bufferTob64Url(S),owner:o.n,signature:r.bufferTob64Url(b)})}else throw new Error("An error occurred while signing. Check wallet is valid")}async verify(a){const o=await a.getSignatureData(),c=a.get("signature",{decode:!0,string:!1}),f=r.bufferTob64Url(await this.crypto.hash(c));if(a.id!==f)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(a.owner,o,c)}async post(a){if(typeof a=="string"?a=new e.default(JSON.parse(a)):typeof a.readInt32BE=="function"?a=new e.default(JSON.parse(a.toString())):typeof a=="object"&&!(a instanceof e.default)&&(a=new e.default(a)),!(a instanceof e.default))throw new Error("Must be Transaction object");a.chunks||await a.prepareChunks(a.data);const o=await this.getUploader(a,a.data);try{for(;!o.isComplete;)await o.uploadChunk()}catch(c){if(o.lastResponseStatus>0)return{status:o.lastResponseStatus,statusText:o.lastResponseError,data:{error:o.lastResponseError}};throw c}return{status:200,statusText:"OK",data:{}}}async getUploader(a,o){let c;if(o instanceof ArrayBuffer&&(o=new Uint8Array(o)),a instanceof e.default){if(o||(o=a.data),!(o instanceof Uint8Array))throw new Error("Data format is invalid");a.chunks||await a.prepareChunks(o),c=new n.TransactionUploader(this.api,a),(!c.data||c.data.length===0)&&(c.data=o)}else{if(typeof a=="string"&&(a=await n.TransactionUploader.fromTransactionId(this.api,a)),!o||!(o instanceof Uint8Array))throw new Error("Must provide data when resuming upload");c=await n.TransactionUploader.fromSerialized(this.api,a,o)}return c}async*upload(a,o){const c=await this.getUploader(a,o);for(;!c.isComplete;)await c.uploadChunk(),yield c;return c}}return Ko.default=i,Ko}var fd={};Object.defineProperty(fd,"__esModule",{value:!0});const v0=Rt;class $v{api;crypto;constructor(e,r){this.api=e,this.crypto=r}getBalance(e){return this.api.get(`wallet/${e}/balance`).then(r=>r.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(r=>r.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return!e||e==="use_wallet"?this.getAddress():this.getAddress(e)}async getAddress(e){if(!e||e==="use_wallet"){try{await arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return arweaveWallet.getActiveAddress()}else return this.ownerToAddress(e.n)}async ownerToAddress(e){return v0.bufferTob64Url(await this.crypto.hash(v0.b64UrlToBuffer(e)))}}fd.default=$v;var yo={};Object.defineProperty(yo,"__esModule",{value:!0});yo.SiloResource=void 0;const w0=Rt;class Hv{api;crypto;transactions;constructor(e,r,n){this.api=e,this.crypto=r,this.transactions=n}async get(e){if(!e)throw new Error("No Silo URI specified");const r=await this.parseUri(e),n=await this.transactions.search("Silo-Name",r.getAccessKey());if(n.length==0)throw new Error(`No data could be found for the Silo URI: ${e}`);const i=await this.transactions.get(n[0]);if(!i)throw new Error(`No data could be found for the Silo URI: ${e}`);const s=i.get("data",{decode:!0,string:!1});return this.crypto.decrypt(s,r.getEncryptionKey())}async readTransactionData(e,r){if(!r)throw new Error("No Silo URI specified");const n=await this.parseUri(r),i=e.get("data",{decode:!0,string:!1});return this.crypto.decrypt(i,n.getEncryptionKey())}async parseUri(e){const r=e.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!r)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");const n=r[1],i=Math.pow(2,parseInt(r[2])),s=await this.hash(w0.stringToBuffer(n),i),a=w0.bufferTob64(s.slice(0,15)),o=await this.hash(s.slice(16,31),1);return new My(e,a,o)}async hash(e,r){let n=await this.crypto.hash(e);for(let i=0;i<r-1;i++)n=await this.crypto.hash(n);return n}}yo.default=Hv;class My{uri;accessKey;encryptionKey;constructor(e,r,n){this.uri=e,this.accessKey=r,this.encryptionKey=n}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}}yo.SiloResource=My;var ud={};Object.defineProperty(ud,"__esModule",{value:!0});const _0=Hi,zv=Rt;class Gv{api;constructor(e){this.api=e}async getTransactionOffset(e){const r=await this.api.get(`tx/${e}/offset`);if(r.status===200)return r.data;throw new Error(`Unable to get transaction offset: ${(0,_0.getError)(r)}`)}async getChunk(e){const r=await this.api.get(`chunk/${e}`);if(r.status===200)return r.data;throw new Error(`Unable to get chunk: ${(0,_0.getError)(r)}`)}async getChunkData(e){const r=await this.getChunk(e);return zv.b64UrlToBuffer(r.chunk)}firstChunkOffset(e){return parseInt(e.offset)-parseInt(e.size)+1}async downloadChunkedData(e){const r=await this.getTransactionOffset(e),n=parseInt(r.size),s=parseInt(r.offset)-n+1,a=new Uint8Array(n);let o=0;for(;o<n;){this.api.config.logging&&console.log(`[chunk] ${o}/${n}`);let c;try{c=await this.getChunkData(s+o)}catch{console.error(`[chunk] Failed to fetch chunk at offset ${s+o}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(c)a.set(c,o),o+=c.length;else throw new Error(`Couldn't complete data download at ${o}/${n}`)}return a}}ud.default=Gv;var ld={};Object.defineProperty(ld,"__esModule",{value:!0});const Vv=Hi;class dd{api;network;static ENDPOINT="block/hash/";constructor(e,r){this.api=e,this.network=r}async get(e){const r=await this.api.get(`${dd.ENDPOINT}${e}`);if(r.status===200)return r.data;throw r.status===404?new Vv.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getCurrent(){const{current:e}=await this.network.getInfo();return await this.get(e)}}ld.default=dd;var E0;function vc(){if(E0)return jo;E0=1,Object.defineProperty(jo,"__esModule",{value:!0});const t=id,e=sd,r=ad,n=od,i=qv(),s=fd,a=cd(),o=Rt,c=yo,f=ud,u=ld;class d{api;wallets;transactions;network;blocks;ar;silo;chunks;static init;static crypto=new r.default;static utils=o;constructor(b){this.api=new e.default(b),this.wallets=new s.default(this.api,d.crypto),this.chunks=new f.default(this.api),this.transactions=new i.default(this.api,d.crypto,this.chunks),this.silo=new c.default(this.api,this.crypto,this.transactions),this.network=new n.default(this.api),this.blocks=new u.default(this.api,this.network),this.ar=new t.default}get crypto(){return d.crypto}get utils(){return d.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(b,S){const _={};if(Object.assign(_,b),!b.data&&!(b.target&&b.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(b.owner==null&&S&&S!=="use_wallet"&&(_.owner=S.n),b.last_tx==null&&(_.last_tx=await this.transactions.getTransactionAnchor()),typeof b.data=="string"&&(b.data=o.stringToBuffer(b.data)),b.data instanceof ArrayBuffer&&(b.data=new Uint8Array(b.data)),b.data&&!(b.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(b.reward==null){const E=b.data?b.data.byteLength:0;_.reward=await this.transactions.getPrice(E,_.target)}_.data_root="",_.data_size=b.data?b.data.byteLength.toString():"0",_.data=b.data||new Uint8Array(0);const y=new a.default(_);return await y.getSignatureData(),y}async createSiloTransaction(b,S,_){const y={};if(Object.assign(y,b),!b.data)throw new Error("Silo transactions must have a 'data' value");if(!_)throw new Error("No Silo URI specified.");if(b.target||b.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(b.owner==null){if(!S||!S.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");y.owner=S.n}b.last_tx==null&&(y.last_tx=await this.transactions.getTransactionAnchor());const E=await this.silo.parseUri(_);if(typeof b.data=="string"){const M=await this.crypto.encrypt(o.stringToBuffer(b.data),E.getEncryptionKey());y.reward=await this.transactions.getPrice(M.byteLength),y.data=o.bufferTob64Url(M)}if(b.data instanceof Uint8Array){const M=await this.crypto.encrypt(b.data,E.getEncryptionKey());y.reward=await this.transactions.getPrice(M.byteLength),y.data=o.bufferTob64Url(M)}const A=new a.default(y);return A.addTag("Silo-Name",E.getAccessKey()),A.addTag("Silo-Version","0.1.0"),A}arql(b){return this.api.post("/arql",b).then(S=>S.data||[])}}return jo.default=d,jo}var zc={};Object.defineProperty(zc,"__esModule",{value:!0});zc.getDefaultConfig=void 0;const Jv=(t,e)=>{const r=/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,n=e.split("."),i=n[n.length-1],s=["localhost","[::1]"];return s.includes(e)||t=="file"||s.includes(i)||!!e.match(r)||!!i.match(r)},Wv=t=>{const e=t.charAt(0)==="[",r=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/;return!!t.match(r)||e},Yv=(t,e)=>{if(Jv(t,e))return{protocol:"https",host:"arweave.net",port:443};if(!Wv(e)){let r=e.split(".");if(r.length>=3){r.shift();const n=r.join(".");return{protocol:t,host:n}}}return{protocol:t,host:e}};zc.getDefaultConfig=Yv;(function(t){var e=H&&H.__createBinding||(Object.create?function(s,a,o,c){c===void 0&&(c=o);var f=Object.getOwnPropertyDescriptor(a,o);(!f||("get"in f?!a.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(s,c,f)}:function(s,a,o,c){c===void 0&&(c=o),s[c]=a[o]}),r=H&&H.__exportStar||function(s,a){for(var o in s)o!=="default"&&!Object.prototype.hasOwnProperty.call(a,o)&&e(a,s,o)};Object.defineProperty(t,"__esModule",{value:!0});const n=vc(),i=zc;n.default.init=function(s={}){const a={host:"arweave.net",port:443,protocol:"https"};if(typeof location!="object"||!location.protocol||!location.hostname)return new n.default({...s,...a});const o=location.protocol.replace(":",""),c=location.hostname,f=location.port?parseInt(location.port):o=="https"?443:80,u=(0,i.getDefaultConfig)(o,c),d=s.protocol||u.protocol,g=s.host||u.host,b=s.port||u.port||f;return new n.default({...s,host:g,protocol:d,port:b})},typeof globalThis=="object"?globalThis.Arweave=n.default:typeof self=="object"&&(self.Arweave=n.default),r(vc(),t),t.default=n.default})(hs);var Xv=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gi,"__esModule",{value:!0});gi.hashStream=gi.deepHashChunks=gi.deepHash=void 0;const dr=Xv(hs),Oy=Ki();async function Dy(t){if(typeof t[Symbol.asyncIterator]=="function"){const i=t,s=Oy.createHash("sha384");let a=0;for await(const f of i)a+=f.byteLength,s.update(f);const o=dr.default.utils.concatBuffers([dr.default.utils.stringToBuffer("blob"),dr.default.utils.stringToBuffer(a.toString())]),c=dr.default.utils.concatBuffers([await dr.default.crypto.hash(o,"SHA-384"),s.digest()]);return await dr.default.crypto.hash(c,"SHA-384")}else if(Array.isArray(t)){const i=dr.default.utils.concatBuffers([dr.default.utils.stringToBuffer("list"),dr.default.utils.stringToBuffer(t.length.toString())]);return await hd(t,await dr.default.crypto.hash(i,"SHA-384"))}const e=t,r=dr.default.utils.concatBuffers([dr.default.utils.stringToBuffer("blob"),dr.default.utils.stringToBuffer(e.byteLength.toString())]),n=dr.default.utils.concatBuffers([await dr.default.crypto.hash(r,"SHA-384"),await dr.default.crypto.hash(e,"SHA-384")]);return await dr.default.crypto.hash(n,"SHA-384")}gi.deepHash=Dy;async function hd(t,e){if(t.length<1)return e;const r=dr.default.utils.concatBuffers([e,await Dy(t[0])]),n=await dr.default.crypto.hash(r,"SHA-384");return await hd(t.slice(1),n)}gi.deepHashChunks=hd;async function Qv(t){const e=Oy.createHash("sha384");for await(const r of t)e.update(r);return e.digest()}gi.hashStream=Qv;var Zv=H&&H.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ew=H&&H.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),tw=H&&H.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Zv(e,t,r);return ew(e,t),e};Object.defineProperty(go,"__esModule",{value:!0});go.getSignatureData=void 0;const Is=Vt,rw=ur,nw=gi;async function iw(t){return rw.isBrowser?(await Promise.resolve().then(()=>tw(Ry()))).default([Is.stringToBuffer("dataitem"),Is.stringToBuffer("1"),Is.stringToBuffer(t.signatureType.toString()),t.rawOwner,t.rawTarget,t.rawAnchor,t.rawTags,t.rawData]):nw.deepHash([Is.stringToBuffer("dataitem"),Is.stringToBuffer("1"),Is.stringToBuffer(t.signatureType.toString()),t.rawOwner,t.rawTarget,t.rawAnchor,t.rawTags,t.rawData])}go.getSignatureData=iw;var $o={},Qf={},pd={},cl={},sw={get exports(){return cl},set exports(t){cl=t}},fl={},aw={get exports(){return fl},set exports(t){fl=t}},ow=Ki(),cw=sa,fw=new Fy(4096);function Xa(t){return typeof Buffer.alloc=="function"?Buffer.alloc(t):new Buffer(t)}function Uy(t,e){return typeof Buffer.from=="function"?Buffer.from(t,e):new Buffer(t,e)}function Ly(t){return t.charAt(0).toUpperCase()+t.slice(1)}function uw(t,e){return t===e?0:t<e?-1:1}function lw(t,e,r){var n=t[e];return n===void 0?r:n}function dw(t,e){e=e||"md5";var r=ow.createHash(e);return r.end(t),r.read()}function hw(t,e){var r=-1,n,i;if(!t)return-1;for(n=0,i=t.length;n<i;n++)if(t[n]===e){if(r>=0)return-2;r=n}return r}function pw(t,e){var r={},n,i;for(n=0;n<t.length;n++)i=t[n],r[e(i)]=i;return r}function gw(t){return Object.keys(t).map(function(e){return t[e]})}function yw(t,e){var r={},n,i,s;for(n=0,i=t.length;n<i;n++){if(s=t[n],e&&(s=e(s)),r[s])return!0;r[s]=!0}return!1}function xw(t,e,r){var n=Object.getOwnPropertyNames(t),i,s,a;for(i=0,s=n.length;i<s;i++)if(a=n[i],!e.hasOwnProperty(a)||r){var o=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(e,a,o)}return e}function bw(t,e){e=e|0;var r=t.charAt(e++);if(/[\d-]/.test(r)){for(;/[eE\d.+-]/.test(t.charAt(e));)e++;return e}else{if(/true|null/.test(t.slice(e-1,e+3)))return e+3;if(/false/.test(t.slice(e-1,e+4)))return e+4}var n=0,i=!1;do switch(r){case"{":case"[":i||n++;break;case"}":case"]":if(!i&&!--n)return e;break;case'"':if(i=!i,!n&&!i)return e;break;case"\\":e++}while(r=t.charAt(e++));return-1}function mw(){throw new Error("abstract")}function vw(t,e){var r=t.prototype,n,i,s,a;for(n=0,i=e.length;n<i;n++)s=e[n],a="get"+Ly(s),r[a]=cw.deprecate(o(s),"use `."+s+"` instead of `."+a+"()`");function o(c){return function(){var f=this[c];return typeof f=="function"?f.apply(this,arguments):f}}}function Fy(t){this._len=t|0,this._pos=0,this._slab=Xa(this._len)}Fy.prototype.alloc=function(t){var e=this._len;return t>e?Xa(t):(this._pos+t>e&&(this._slab=Xa(e),this._pos=0),this._slab.slice(this._pos,this._pos+=t))};function ps(t){var e=1103515245,r=12345,n=Math.pow(2,31),i=Math.floor(t||Math.random()*(n-1));this._max=n,this._nextInt=function(){return i=(e*i+r)%n}}ps.prototype.nextBoolean=function(){return!!(this._nextInt()%2)};ps.prototype.nextInt=function(t,e){return e===void 0&&(e=t,t=0),e=e===void 0?this._max:e,t+Math.floor(this.nextFloat()*(e-t))};ps.prototype.nextFloat=function(t,e){return e===void 0&&(e=t,t=0),e=e===void 0?1:e,t+(e-t)*this._nextInt()/this._max};ps.prototype.nextString=function(t,e){t|=0,e=e||"aA";var r="";e.indexOf("a")>-1&&(r+="abcdefghijklmnopqrstuvwxyz"),e.indexOf("A")>-1&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),e.indexOf("#")>-1&&(r+="0123456789"),e.indexOf("!")>-1&&(r+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var n=[],i=0;i<t;i++)n.push(this.choice(r));return n.join("")};ps.prototype.nextBuffer=function(t){var e=[],r;for(r=0;r<t;r++)e.push(this.nextInt(256));return Uy(e)};ps.prototype.choice=function(t){var e=t.length;if(!e)throw new Error("choosing from empty array");return t[this.nextInt(e)]};function gd(){this._index=0,this._items=[]}gd.prototype.push=function(t){var e=this._items,r=e.length|0,n;for(e.push(t);r>0&&e[r].index<e[n=r-1>>1].index;)t=e[r],e[r]=e[n],e[n]=t,r=n};gd.prototype.pop=function(){var t=this._items,e=t.length-1|0,r=t[0];if(!r||r.index>this._index)return null;if(this._index++,!e)return t.pop(),r;t[0]=t.pop();for(var n=e>>1,i=0,s,a,o,c,f,u,d;i<n&&(c=t[i],s=(i<<1)+1,a=i+1<<1,u=t[s],d=t[a],!d||u.index<=d.index?(f=u,o=s):(f=d,o=a),!(f.index>=c.index));)t[o]=c,t[i]=f,i=o;return r};function ze(t,e){if(this.buf=t,this.pos=e|0,this.pos<0)throw new Error("negative offset")}ze.prototype.isValid=function(){return this.pos<=this.buf.length};ze.prototype.readBoolean=function(){return!!this.buf[this.pos++]};ze.prototype.skipBoolean=function(){this.pos++};ze.prototype.writeBoolean=function(t){this.buf[this.pos++]=!!t};ze.prototype.readInt=ze.prototype.readLong=function(){var t=0,e=0,r=this.buf,n,i,s,a;do n=r[this.pos++],i=n&128,t|=(n&127)<<e,e+=7;while(i&&e<28);if(i){s=t,a=268435456;do n=r[this.pos++],s+=(n&127)*a,a*=128;while(n&128);return(s%2?-(s+1):s)/2}return t>>1^-(t&1)};ze.prototype.skipInt=ze.prototype.skipLong=function(){for(var t=this.buf;t[this.pos++]&128;);};ze.prototype.writeInt=ze.prototype.writeLong=function(t){var e=this.buf,r,n;if(t>=-1073741824&&t<1073741824){n=t>=0?t<<1:~t<<1|1;do e[this.pos]=n&127,n>>=7;while(n&&(e[this.pos++]|=128))}else{r=t>=0?t*2:-t*2-1;do e[this.pos]=r&127,r/=128;while(r>=1&&(e[this.pos++]|=128))}this.pos++};ze.prototype.readFloat=function(){var t=this.buf,e=this.pos;if(this.pos+=4,!(this.pos>t.length))return this.buf.readFloatLE(e)};ze.prototype.skipFloat=function(){this.pos+=4};ze.prototype.writeFloat=function(t){var e=this.buf,r=this.pos;if(this.pos+=4,!(this.pos>e.length))return this.buf.writeFloatLE(t,r)};ze.prototype.readDouble=function(){var t=this.buf,e=this.pos;if(this.pos+=8,!(this.pos>t.length))return this.buf.readDoubleLE(e)};ze.prototype.skipDouble=function(){this.pos+=8};ze.prototype.writeDouble=function(t){var e=this.buf,r=this.pos;if(this.pos+=8,!(this.pos>e.length))return this.buf.writeDoubleLE(t,r)};ze.prototype.readFixed=function(t){var e=this.pos;if(this.pos+=t,!(this.pos>this.buf.length)){var r=fw.alloc(t);return this.buf.copy(r,0,e,e+t),r}};ze.prototype.skipFixed=function(t){this.pos+=t};ze.prototype.writeFixed=function(t,e){e=e||t.length;var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&t.copy(this.buf,r,0,e)};ze.prototype.readBytes=function(){return this.readFixed(this.readLong())};ze.prototype.skipBytes=function(){var t=this.readLong();this.pos+=t};ze.prototype.writeBytes=function(t){var e=t.length;this.writeLong(e),this.writeFixed(t,e)};typeof Buffer.prototype.utf8Slice=="function"?ze.prototype.readString=function(){var t=this.readLong(),e=this.pos,r=this.buf;if(this.pos+=t,!(this.pos>r.length))return this.buf.utf8Slice(e,e+t)}:ze.prototype.readString=function(){var t=this.readLong(),e=this.pos,r=this.buf;if(this.pos+=t,!(this.pos>r.length))return this.buf.slice(e,e+t).toString()};ze.prototype.skipString=function(){var t=this.readLong();this.pos+=t};ze.prototype.writeString=function(t){var e=Buffer.byteLength(t),r=this.buf;this.writeLong(e);var n=this.pos;if(this.pos+=e,!(this.pos>r.length))if(e>64)this._writeUtf8(t,e);else{var i,s,a,o;for(i=0,s=e;i<s;i++)a=t.charCodeAt(i),a<128?r[n++]=a:a<2048?(r[n++]=a>>6|192,r[n++]=a&63|128):(a&64512)===55296&&((o=t.charCodeAt(i+1))&64512)===56320?(a=65536+((a&1023)<<10)+(o&1023),i++,r[n++]=a>>18|240,r[n++]=a>>12&63|128,r[n++]=a>>6&63|128,r[n++]=a&63|128):(r[n++]=a>>12|224,r[n++]=a>>6&63|128,r[n++]=a&63|128)}};typeof Buffer.prototype.utf8Write=="function"?ze.prototype._writeUtf8=function(t,e){this.buf.utf8Write(t,this.pos-e,e)}:ze.prototype._writeUtf8=function(t,e){this.buf.write(t,this.pos-e,e,"utf8")};typeof Buffer.prototype.latin1Write=="function"?ze.prototype.writeBinary=function(t,e){var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.latin1Write(t,r,e)}:typeof Buffer.prototype.binaryWrite=="function"?ze.prototype.writeBinary=function(t,e){var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.binaryWrite(t,r,e)}:ze.prototype.writeBinary=function(t,e){var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.write(t,r,e,"binary")};ze.prototype.matchBoolean=function(t){return this.buf[this.pos++]-t.buf[t.pos++]};ze.prototype.matchInt=ze.prototype.matchLong=function(t){var e=this.readLong(),r=t.readLong();return e===r?0:e<r?-1:1};ze.prototype.matchFloat=function(t){var e=this.readFloat(),r=t.readFloat();return e===r?0:e<r?-1:1};ze.prototype.matchDouble=function(t){var e=this.readDouble(),r=t.readDouble();return e===r?0:e<r?-1:1};ze.prototype.matchFixed=function(t,e){return this.readFixed(e).compare(t.readFixed(e))};ze.prototype.matchBytes=ze.prototype.matchString=function(t){var e=this.readLong(),r=this.pos;this.pos+=e;var n=t.readLong(),i=t.pos;t.pos+=n;var s=this.buf.slice(r,this.pos),a=t.buf.slice(i,t.pos);return s.compare(a)};ze.prototype.unpackLongBytes=function(){var t=Xa(8),e=0,r=0,n=6,i=this.buf,s,a;for(s=i[this.pos++],a=s&1,t.fill(0),e|=(s&127)>>1;s&128;)s=i[this.pos++],e|=(s&127)<<n,n+=7,n>=8&&(n-=8,t[r++]=e,e>>=8);return t[r]=e,a&&ul(t,8),t};ze.prototype.packLongBytes=function(t){var e=(t[7]&128)>>7,r=this.buf,n=1,i=0,s=3,a;e?(ul(t,8),a=1):a=0;for(var o=[t.readUIntLE(0,3),t.readUIntLE(3,3),t.readUIntLE(6,2)];s&&!o[--s];);for(;i<s;)for(a|=o[i++]<<n,n+=24;n>7;)r[this.pos++]=a&127|128,a>>=7,n-=7;a|=o[s]<<n;do r[this.pos]=a&127,a>>=7;while(a&&(r[this.pos++]|=128));this.pos++,e&&ul(t,8)};function ul(t,e){for(;e--;)t[e]=~t[e]}var ca={abstractFunction:mw,addDeprecatedGetters:vw,bufferFrom:Uy,capitalize:Ly,copyOwnProperties:xw,getHash:dw,compare:uw,getOption:lw,jsonEnd:bw,newBuffer:Xa,objectValues:gw,toMap:pw,singleIndexOf:hw,hasDuplicates:yw,Lcg:ps,OrderedQueue:gd,Tap:ze},et=ca,jy=zl,nr=sa,cs=et.Tap,ll=nr.debuglog("avsc:types"),Xe=nr.format,wc={array:an,boolean:vi,bytes:pn,double:ai,enum:nn,error:tr,fixed:sn,float:si,int:wi,long:hn,map:Gr,null:_n,record:tr,string:jn},ww=/^[A-Za-z_][A-Za-z0-9_]*$/,Tr=new et.Lcg,ns=new cs(new jy.SlowBuffer(1024)),Bi=null,Js=[];function se(t,e){var r;if(Bi?(r=Bi,Js.push([Bi,this]),Bi=null):r=this,this._hash=new _w,this.name=void 0,this.aliases=void 0,this.doc=t&&t.doc?""+t.doc:void 0,t){var n=t.name,i=t.namespace===void 0?e&&e.namespace:t.namespace;if(n!==void 0){if(n=_c(n,i),fa(n))throw new Error(Xe("cannot rename primitive type: %j",n));var s=e&&e.registry;if(s){if(s[n]!==void 0)throw new Error(Xe("duplicate type name: %s",n));s[n]=r}}else if(e&&e.noAnonymousTypes)throw new Error(Xe("missing name property in schema: %j",t));this.name=n,this.aliases=t.aliases?t.aliases.map(function(a){return _c(a,i)}):[]}}se.forSchema=function(t,e){e=e||{},e.registry=e.registry||{};var r=function(c){switch(c===!0?c="always":c===!1?c="never":c===void 0?c="auto":typeof c=="string"&&(c=c.toLowerCase()),c){case"always":return En;case"never":return tn;case"auto":return;default:throw new Error(Xe("invalid wrap unions option: %j",c))}}(e.wrapUnions);if(t===null)throw new Error('invalid type: null (did you mean "null"?)');if(se.isType(t))return t;var n;if(e.typeHook&&(n=e.typeHook(t,e))){if(!se.isType(n))throw new Error(Xe("invalid typehook return value: %j",n));return n}if(typeof t=="string"){if(t=_c(t,e.namespace),n=e.registry[t],n)return n;if(fa(t))return e.registry[t]=se.forSchema({type:t},e);throw new Error(Xe("undefined type name: %s",t))}if(t.logicalType&&e.logicalTypes&&!Bi){var i=e.logicalTypes[t.logicalType];if(i){var s=e.namespace,a={};Object.keys(e.registry).forEach(function(c){a[c]=e.registry[c]});try{return ll("instantiating logical type for %s",t.logicalType),new i(t,e)}catch(c){if(ll("failed to instantiate logical type for %s",t.logicalType),e.assertLogicalTypes)throw c;Bi=null,e.namespace=s,e.registry=a}}}if(Array.isArray(t)){var o=t.map(function(c){return se.forSchema(c,e)});r||(r=Ew(o)?En:tn),n=new r(o,e)}else n=function(c){var f=wc[c];if(f===void 0)throw new Error(Xe("unknown type: %j",c));return new f(t,e)}(t.type);return n};se.forValue=function(t,e){if(e=e||{},e.emptyArrayType=e.emptyArrayType||se.forSchema({type:"array",items:"null"}),e.valueHook){var r=e.valueHook(t,e);if(r!==void 0){if(!se.isType(r))throw new Error(Xe("invalid value hook return value: %j",r));return r}}switch(typeof t){case"string":return se.forSchema("string",e);case"boolean":return se.forSchema("boolean",e);case"number":return(t|0)===t?se.forSchema("int",e):Math.abs(t)<9007199254740991?se.forSchema("float",e):se.forSchema("double",e);case"object":if(t===null)return se.forSchema("null",e);if(Array.isArray(t))return t.length?se.forSchema({type:"array",items:se.forTypes(t.map(function(i){return se.forValue(i,e)}))},e):e.emptyArrayType;if(Buffer.isBuffer(t))return se.forSchema("bytes",e);var n=Object.keys(t);return n.some(function(i){return!xo(i)})?se.forSchema({type:"map",values:se.forTypes(n.map(function(i){return se.forValue(t[i],e)}),e)},e):se.forSchema({type:"record",fields:n.map(function(i){return{name:i,type:se.forValue(t[i],e)}})},e);default:throw new Error(Xe("cannot infer type from: %j",t))}};se.forTypes=function(t,e){if(!t.length)throw new Error("no types to combine");if(t.length===1)return t[0];e=e||{};var r=[],n=0,i=!0;if(t.forEach(function(d){switch(d.typeName){case"union:unwrapped":i=!1,r=r.concat(d.types);break;case"union:wrapped":n++,r=r.concat(d.types);break;case"null":r.push(d);break;default:i=!1,r.push(d)}}),n){if(!i)throw new Error("cannot combine wrapped union");var s={};r.forEach(function(d){var g=d.branchName,b=s[g];if(!b)s[g]=d;else if(!d.equals(b))throw new Error("inconsistent branch type")});var a=e.wrapUnions,o;e.wrapUnions=!0;try{o=se.forSchema(Object.keys(s).map(function(d){return s[d]}),e)}catch(d){throw e.wrapUnions=a,d}return e.wrapUnions=a,o}var c={};r.forEach(function(d){var g=Gc(d),b=c[g];b||(c[g]=b=[]),b.push(d)});var f=Object.keys(c),u=f.map(function(d){var g=c[d];if(g.length===1)return g[0];switch(d){case"null":case"boolean":return g[0];case"number":return Aw(g);case"string":return Sw(g,e);case"buffer":return Tw(g,e);case"array":return g=g.filter(function(b){return b!==e.emptyArrayType}),g.length?se.forSchema({type:"array",items:se.forTypes(g.map(function(b){return b.itemsType}))},e):e.emptyArrayType;default:return kw(g,e)}});return u.length===1?u[0]:se.forSchema(u,e)};se.isType=function(){var t=arguments.length;if(!t)return!1;var e=arguments[0];if(!e||typeof e._update!="function"||typeof e.fingerprint!="function")return!1;if(t===1)return!0;var r=e.typeName,n;for(n=1;n<t;n++)if(r.indexOf(arguments[n])===0)return!0;return!1};se.__reset=function(t){ll("resetting type buffer to %d",t),ns.buf=new jy.SlowBuffer(t)};Object.defineProperty(se.prototype,"branchName",{enumerable:!0,get:function(){if(this.name)return this.name;var t=se.isType(this,"logical")?this.underlyingType:this;return se.isType(t,"abstract")?t._concreteTypeName:se.isType(t,"union")?void 0:t.typeName}});se.prototype.clone=function(t,e){return e?(e={coerce:!!e.coerceBuffers|0,fieldHook:e.fieldHook,qualifyNames:!!e.qualifyNames,skip:!!e.skipMissingFields,wrap:!!e.wrapUnions|0},this._copy(t,e)):this.fromBuffer(this.toBuffer(t))};se.prototype.compare=et.abstractFunction;se.prototype.compareBuffers=function(t,e){return this._match(new cs(t),new cs(e))};se.prototype.createResolver=function(t,e){if(!se.isType(t))throw new Error(Xe("not a type: %j",t));if(!se.isType(this,"union","logical")&&se.isType(t,"logical"))return this.createResolver(t.underlyingType,e);e=e||{},e.registry=e.registry||{};var r,n;if(se.isType(this,"record","error")&&se.isType(t,"record","error")&&(n=this.name+":"+t.name,r=e.registry[n],r))return r;if(r=new yd(this),n&&(e.registry[n]=r),se.isType(t,"union")){var i=t.types.map(function(s){return this.createResolver(s,e)},this);r._read=function(s){var a=s.readLong(),o=i[a];if(o===void 0)throw new Error(Xe("invalid union index: %s",a));return i[a]._read(s)}}else this._update(r,t,e);if(!r._read)throw new Error(Xe("cannot read %s as %s",t,this));return Object.freeze(r)};se.prototype.decode=function(t,e,r){var n=new cs(t,e),i=Ky(this,n,r);return n.isValid()?{value:i,offset:n.pos}:{value:void 0,offset:-1}};se.prototype.encode=function(t,e,r){var n=new cs(e,r);return this._write(n,t),n.isValid()?n.pos:e.length-n.pos};se.prototype.equals=function(t){return se.isType(t)&&this.fingerprint().equals(t.fingerprint())};se.prototype.fingerprint=function(t){if(t)return et.getHash(JSON.stringify(this.schema()),t);if(!this._hash.str){var e=JSON.stringify(this.schema());this._hash.str=et.getHash(e).toString("binary")}return et.bufferFrom(this._hash.str,"binary")};se.prototype.fromBuffer=function(t,e,r){var n=new cs(t),i=Ky(this,n,e,r);if(!n.isValid())throw new Error("truncated buffer");if(!r&&n.pos<t.length)throw new Error("trailing data");return i};se.prototype.fromString=function(t){return this._copy(JSON.parse(t),{coerce:2})};se.prototype.inspect=function(){var t=this.typeName,e=qy(t);if(fa(t))return Xe("<%s>",e);var r=this.schema({exportAttrs:!0,noDeref:!0});return typeof r=="object"&&!se.isType(this,"logical")&&(r.type=void 0),Xe("<%s %j>",e,r)};se.prototype.isValid=function(t,e){var r=(e&&e.noUndeclaredFields)|0,n=e&&e.errorHook,i,s;return n&&(s=[],i=function(a,o){n.call(this,s.slice(),a,o,t)}),this._check(t,r,i,s)};se.prototype.random=et.abstractFunction;se.prototype.schema=function(t){return this._attrs({exportAttrs:!!(t&&t.exportAttrs),noDeref:!!(t&&t.noDeref)})};se.prototype.toBuffer=function(t){ns.pos=0,this._write(ns,t);var e=et.newBuffer(ns.pos);return ns.isValid()?ns.buf.copy(e,0,0,ns.pos):this._write(new cs(e),t),e};se.prototype.toJSON=function(){return this.schema({exportAttrs:!0})};se.prototype.toString=function(t){return JSON.stringify(t===void 0?this.schema({noDeref:!0}):this._copy(t,{coerce:3}))};se.prototype.wrap=function(t){var e=this._branchConstructor;return e===null?null:new e(t)};se.prototype._attrs=function(t){t.derefed=t.derefed||{};var e=this.name;if(e!==void 0){if(t.noDeref||t.derefed[e])return e;t.derefed[e]=!0}var r={};this.name!==void 0&&(r.name=e),r.type=this.typeName;var n=this._deref(r,t);return n!==void 0&&(r=n),t.exportAttrs&&(this.aliases&&this.aliases.length&&(r.aliases=this.aliases),this.doc!==void 0&&(r.doc=this.doc)),r};se.prototype._createBranchConstructor=function(){var t=this.branchName;if(t==="null")return null;function e(){return function(i){~t.indexOf(".")?this[`${t}`]=i:this[t]=i}}var r=e();return r.type=this,r.prototype.unwrap=function(){return this[`${t}`]},r.prototype.unwrapped=r.prototype.unwrap,r};se.prototype._peek=function(t){var e=t.pos,r=this._read(t);return t.pos=e,r};se.prototype._check=et.abstractFunction;se.prototype._copy=et.abstractFunction;se.prototype._deref=et.abstractFunction;se.prototype._match=et.abstractFunction;se.prototype._read=et.abstractFunction;se.prototype._skip=et.abstractFunction;se.prototype._update=et.abstractFunction;se.prototype._write=et.abstractFunction;se.prototype.getAliases=function(){return this.aliases};se.prototype.getFingerprint=se.prototype.fingerprint;se.prototype.getName=function(t){return this.name||!t?this.name:this.branchName};se.prototype.getSchema=se.prototype.schema;se.prototype.getTypeName=function(){return this.typeName};function Jt(t){se.call(this),this._branchConstructor=this._createBranchConstructor(),t||Object.freeze(this)}nr.inherits(Jt,se);Jt.prototype._update=function(t,e){e.typeName===this.typeName&&(t._read=this._read)};Jt.prototype._copy=function(t){return this._check(t,void 0,Ft),t};Jt.prototype._deref=function(){return this.typeName};Jt.prototype.compare=et.compare;function _n(){Jt.call(this)}nr.inherits(_n,Jt);_n.prototype._check=function(t,e,r){var n=t===null;return!n&&r&&r(t,this),n};_n.prototype._read=function(){return null};_n.prototype._skip=function(){};_n.prototype._write=function(t,e){e!==null&&Ft(e,this)};_n.prototype._match=function(){return 0};_n.prototype.compare=_n.prototype._match;_n.prototype.typeName="null";_n.prototype.random=_n.prototype._read;function vi(){Jt.call(this)}nr.inherits(vi,Jt);vi.prototype._check=function(t,e,r){var n=typeof t=="boolean";return!n&&r&&r(t,this),n};vi.prototype._read=function(t){return t.readBoolean()};vi.prototype._skip=function(t){t.skipBoolean()};vi.prototype._write=function(t,e){typeof e!="boolean"&&Ft(e,this),t.writeBoolean(e)};vi.prototype._match=function(t,e){return t.matchBoolean(e)};vi.prototype.typeName="boolean";vi.prototype.random=function(){return Tr.nextBoolean()};function wi(){Jt.call(this)}nr.inherits(wi,Jt);wi.prototype._check=function(t,e,r){var n=t===(t|0);return!n&&r&&r(t,this),n};wi.prototype._read=function(t){return t.readInt()};wi.prototype._skip=function(t){t.skipInt()};wi.prototype._write=function(t,e){e!==(e|0)&&Ft(e,this),t.writeInt(e)};wi.prototype._match=function(t,e){return t.matchInt(e)};wi.prototype.typeName="int";wi.prototype.random=function(){return Tr.nextInt(1e3)|0};function hn(){Jt.call(this)}nr.inherits(hn,Jt);hn.prototype._check=function(t,e,r){var n=typeof t=="number"&&t%1===0&&bd(t);return!n&&r&&r(t,this),n};hn.prototype._read=function(t){var e=t.readLong();if(!bd(e))throw new Error("potential precision loss");return e};hn.prototype._skip=function(t){t.skipLong()};hn.prototype._write=function(t,e){(typeof e!="number"||e%1||!bd(e))&&Ft(e,this),t.writeLong(e)};hn.prototype._match=function(t,e){return t.matchLong(e)};hn.prototype._update=function(t,e){switch(e.typeName){case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=this._read}};hn.prototype.typeName="long";hn.prototype.random=function(){return Tr.nextInt()};hn.__with=function(t,e){t=t||{};var r={toBuffer:"_toBuffer",fromBuffer:"_fromBuffer",fromJSON:"_fromJSON",toJSON:"_toJSON",isValid:"_isValid",compare:"compare"},n=new Lr(e);return Object.keys(r).forEach(function(i){if(t[i]===void 0)throw new Error(Xe("missing method implementation: %s",i));n[r[i]]=t[i]}),Object.freeze(n)};function si(){Jt.call(this)}nr.inherits(si,Jt);si.prototype._check=function(t,e,r){var n=typeof t=="number";return!n&&r&&r(t,this),n};si.prototype._read=function(t){return t.readFloat()};si.prototype._skip=function(t){t.skipFloat()};si.prototype._write=function(t,e){typeof e!="number"&&Ft(e,this),t.writeFloat(e)};si.prototype._match=function(t,e){return t.matchFloat(e)};si.prototype._update=function(t,e){switch(e.typeName){case"float":case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=function(r){return r.readLong()}}};si.prototype.typeName="float";si.prototype.random=function(){return Tr.nextFloat(1e3)};function ai(){Jt.call(this)}nr.inherits(ai,Jt);ai.prototype._check=function(t,e,r){var n=typeof t=="number";return!n&&r&&r(t,this),n};ai.prototype._read=function(t){return t.readDouble()};ai.prototype._skip=function(t){t.skipDouble()};ai.prototype._write=function(t,e){typeof e!="number"&&Ft(e,this),t.writeDouble(e)};ai.prototype._match=function(t,e){return t.matchDouble(e)};ai.prototype._update=function(t,e){switch(e.typeName){case"double":case"float":case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=function(r){return r.readLong()}}};ai.prototype.typeName="double";ai.prototype.random=function(){return Tr.nextFloat()};function jn(){Jt.call(this)}nr.inherits(jn,Jt);jn.prototype._check=function(t,e,r){var n=typeof t=="string";return!n&&r&&r(t,this),n};jn.prototype._read=function(t){return t.readString()};jn.prototype._skip=function(t){t.skipString()};jn.prototype._write=function(t,e){typeof e!="string"&&Ft(e,this),t.writeString(e)};jn.prototype._match=function(t,e){return t.matchString(e)};jn.prototype._update=function(t,e){switch(e.typeName){case"bytes":case"string":t._read=this._read}};jn.prototype.typeName="string";jn.prototype.random=function(){return Tr.nextString(Tr.nextInt(32))};function pn(){Jt.call(this)}nr.inherits(pn,Jt);pn.prototype._check=function(t,e,r){var n=Buffer.isBuffer(t);return!n&&r&&r(t,this),n};pn.prototype._read=function(t){return t.readBytes()};pn.prototype._skip=function(t){t.skipBytes()};pn.prototype._write=function(t,e){Buffer.isBuffer(e)||Ft(e,this),t.writeBytes(e)};pn.prototype._match=function(t,e){return t.matchBytes(e)};pn.prototype._update=jn.prototype._update;pn.prototype._copy=function(t,e){var r;switch((e&&e.coerce)|0){case 3:return this._check(t,void 0,Ft),t.toString("binary");case 2:if(typeof t!="string")throw new Error(Xe("cannot coerce to buffer: %j",t));return r=et.bufferFrom(t,"binary"),this._check(r,void 0,Ft),r;case 1:if(!$y(t))throw new Error(Xe("cannot coerce to buffer: %j",t));return r=et.bufferFrom(t.data),this._check(r,void 0,Ft),r;default:return this._check(t,void 0,Ft),et.bufferFrom(t)}};pn.prototype.compare=Buffer.compare;pn.prototype.typeName="bytes";pn.prototype.random=function(){return Tr.nextBuffer(Tr.nextInt(32))};function oi(t,e){if(se.call(this),!Array.isArray(t))throw new Error(Xe("non-array union schema: %j",t));if(!t.length)throw new Error("empty union");this.types=Object.freeze(t.map(function(r){return se.forSchema(r,e)})),this._branchIndices={},this.types.forEach(function(r,n){if(se.isType(r,"union"))throw new Error("unions cannot be directly nested");var i=r.branchName;if(this._branchIndices[i]!==void 0)throw new Error(Xe("duplicate union branch name: %j",i));this._branchIndices[i]=n},this)}nr.inherits(oi,se);oi.prototype._branchConstructor=function(){throw new Error("unions cannot be directly wrapped")};oi.prototype._skip=function(t){this.types[t.readLong()]._skip(t)};oi.prototype._match=function(t,e){var r=t.readLong(),n=e.readLong();return r===n?this.types[r]._match(t,e):r<n?-1:1};oi.prototype._deref=function(t,e){return this.types.map(function(r){return r._attrs(e)})};oi.prototype.getTypes=function(){return this.types};function tn(t,e){oi.call(this,t,e),this._dynamicBranches=null,this._bucketIndices={},this.types.forEach(function(r,n){if(se.isType(r,"abstract","logical"))this._dynamicBranches||(this._dynamicBranches=[]),this._dynamicBranches.push({index:n,type:r});else{var i=Gc(r);if(this._bucketIndices[i]!==void 0)throw new Error(Xe("ambiguous unwrapped union: %j",this));this._bucketIndices[i]=n}},this),Object.freeze(this)}nr.inherits(tn,oi);tn.prototype._getIndex=function(t){var e=this._bucketIndices[Hy(t)];return this._dynamicBranches&&(e=this._getBranchIndex(t,e)),e};tn.prototype._getBranchIndex=function(t,e){var r=this._dynamicBranches,n,i,s;for(n=0,i=r.length;n<i;n++)if(s=r[n],s.type._check(t))if(e===void 0)e=s.index;else throw new Error("ambiguous conversion");return e};tn.prototype._check=function(t,e,r,n){var i=this._getIndex(t),s=i!==void 0;return s?this.types[i]._check(t,e,r,n):(r&&r(t,this),s)};tn.prototype._read=function(t){var e=t.readLong(),r=this.types[e];if(r)return r._read(t);throw new Error(Xe("invalid union index: %s",e))};tn.prototype._write=function(t,e){var r=this._getIndex(e);r===void 0&&Ft(e,this),t.writeLong(r),e!==null&&this.types[r]._write(t,e)};tn.prototype._update=function(t,e,r){var n,i,s;for(n=0,i=this.types.length;n<i;n++){try{s=this.types[n].createResolver(e,r)}catch{continue}t._read=function(a){return s._read(a)};return}};tn.prototype._copy=function(t,e){var r=e&&e.coerce|0,n=e&&e.wrap|0,i;if(n===2)i=0;else{switch(r){case 1:$y(t)&&this._bucketIndices.buffer!==void 0?i=this._bucketIndices.buffer:i=this._getIndex(t);break;case 2:if(t===null)i=this._bucketIndices.null;else if(typeof t=="object"){var s=Object.keys(t);s.length===1&&(i=this._branchIndices[s[0]],t=t[s[0]])}break;default:i=this._getIndex(t)}i===void 0&&Ft(t,this)}var a=this.types[i];if(t===null||n===3)return a._copy(t,e);switch(r){case 3:var o={};return o[a.branchName]=a._copy(t,e),o;default:return a._copy(t,e)}};tn.prototype.compare=function(t,e){var r=this._getIndex(t),n=this._getIndex(e);if(r===void 0)Ft(t,this);else if(n===void 0)Ft(e,this);else return r===n?this.types[r].compare(t,e):et.compare(r,n)};tn.prototype.typeName="union:unwrapped";tn.prototype.random=function(){var t=Tr.nextInt(this.types.length);return this.types[t].random()};function En(t,e){oi.call(this,t,e),Object.freeze(this)}nr.inherits(En,oi);En.prototype._check=function(t,e,r,n){var i=!1;if(t===null)i=this._branchIndices.null!==void 0;else if(typeof t=="object"){var s=Object.keys(t);if(s.length===1){var a=s[0],o=this._branchIndices[a];if(o!==void 0)return r?(n.push(a),i=this.types[o]._check(t[a],e,r,n),n.pop(),i):this.types[o]._check(t[a],e)}}return!i&&r&&r(t,this),i};En.prototype._read=function(t){var e=this.types[t.readLong()];if(!e)throw new Error(Xe("invalid union index"));var r=e._branchConstructor;return r===null?null:new r(e._read(t))};En.prototype._write=function(t,e){var r,n,i;e===null?(r=this._branchIndices.null,r===void 0&&Ft(e,this),t.writeLong(r)):(n=Object.keys(e),n.length===1&&(i=n[0],r=this._branchIndices[i]),r===void 0&&Ft(e,this),t.writeLong(r),this.types[r]._write(t,e[i]))};En.prototype._update=function(t,e,r){var n,i,s,a;for(n=0,i=this.types.length;n<i;n++){try{s=this.types[n].createResolver(e,r)}catch{continue}a=this.types[n]._branchConstructor,a?t._read=function(o){return new a(s._read(o))}:t._read=function(){return null};return}};En.prototype._copy=function(t,e){var r=e&&e.wrap|0;if(r===2){var n=this.types[0];return t===null&&n.typeName==="null"?null:new n._branchConstructor(n._copy(t,e))}if(t===null&&this._branchIndices.null!==void 0)return null;var i,s,a;if(typeof t=="object"){var o=Object.keys(t);if(o.length===1){var c=o[0];if(i=this._branchIndices[c],i===void 0&&e.qualifyNames){var f,u;for(f=0,s=this.types.length;f<s;f++)if(u=this.types[f],u.name&&c===xd(u.name)){i=f;break}}i!==void 0&&(a=this.types[i]._copy(t[c],e))}}if(r===1&&a===void 0)for(i=0,s=this.types.length;i<s&&a===void 0;)try{a=this.types[i]._copy(t,e)}catch{i++}if(a!==void 0)return r===3?a:new this.types[i]._branchConstructor(a);Ft(t,this)};En.prototype.compare=function(t,e){var r=t===null?"null":Object.keys(t)[0],n=e===null?"null":Object.keys(e)[0],i=this._branchIndices[r];return r===n?r==="null"?0:this.types[i].compare(t[r],e[r]):et.compare(i,this._branchIndices[n])};En.prototype.typeName="union:wrapped";En.prototype.random=function(){var t=Tr.nextInt(this.types.length),e=this.types[t],r=e._branchConstructor;return r?new r(e.random()):null};function nn(t,e){if(se.call(this,t,e),!Array.isArray(t.symbols)||!t.symbols.length)throw new Error(Xe("invalid enum symbols: %j",t.symbols));this.symbols=Object.freeze(t.symbols.slice()),this._indices={},this.symbols.forEach(function(r,n){if(!xo(r))throw new Error(Xe("invalid %s symbol: %j",this,r));if(this._indices[r]!==void 0)throw new Error(Xe("duplicate %s symbol: %j",this,r));this._indices[r]=n},this),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}nr.inherits(nn,se);nn.prototype._check=function(t,e,r){var n=this._indices[t]!==void 0;return!n&&r&&r(t,this),n};nn.prototype._read=function(t){var e=t.readLong(),r=this.symbols[e];if(r===void 0)throw new Error(Xe("invalid %s enum index: %s",this.name,e));return r};nn.prototype._skip=function(t){t.skipLong()};nn.prototype._write=function(t,e){var r=this._indices[e];r===void 0&&Ft(e,this),t.writeLong(r)};nn.prototype._match=function(t,e){return t.matchLong(e)};nn.prototype.compare=function(t,e){return et.compare(this._indices[t],this._indices[e])};nn.prototype._update=function(t,e){var r=this.symbols;e.typeName==="enum"&&(!e.name||~ja(this).indexOf(e.name))&&e.symbols.every(function(n){return~r.indexOf(n)})&&(t.symbols=e.symbols,t._read=e._read)};nn.prototype._copy=function(t){return this._check(t,void 0,Ft),t};nn.prototype._deref=function(t){t.symbols=this.symbols};nn.prototype.getSymbols=function(){return this.symbols};nn.prototype.typeName="enum";nn.prototype.random=function(){return Tr.choice(this.symbols)};function sn(t,e){if(se.call(this,t,e),t.size!==(t.size|0)||t.size<1)throw new Error(Xe("invalid %s size",this.branchName));this.size=t.size|0,this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}nr.inherits(sn,se);sn.prototype._check=function(t,e,r){var n=Buffer.isBuffer(t)&&t.length===this.size;return!n&&r&&r(t,this),n};sn.prototype._read=function(t){return t.readFixed(this.size)};sn.prototype._skip=function(t){t.skipFixed(this.size)};sn.prototype._write=function(t,e){(!Buffer.isBuffer(e)||e.length!==this.size)&&Ft(e,this),t.writeFixed(e,this.size)};sn.prototype._match=function(t,e){return t.matchFixed(e,this.size)};sn.prototype.compare=Buffer.compare;sn.prototype._update=function(t,e){e.typeName==="fixed"&&this.size===e.size&&(!e.name||~ja(this).indexOf(e.name))&&(t.size=this.size,t._read=this._read)};sn.prototype._copy=pn.prototype._copy;sn.prototype._deref=function(t){t.size=this.size};sn.prototype.getSize=function(){return this.size};sn.prototype.typeName="fixed";sn.prototype.random=function(){return Tr.nextBuffer(this.size)};function Gr(t,e){if(se.call(this),!t.values)throw new Error(Xe("missing map values: %j",t));this.valuesType=se.forSchema(t.values,e),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}nr.inherits(Gr,se);Gr.prototype._check=function(t,e,r,n){if(!t||typeof t!="object"||Array.isArray(t))return r&&r(t,this),!1;var i=Object.keys(t),s=!0,a,o,c,f;if(r){for(c=n.length,n.push(""),a=0,o=i.length;a<o;a++)f=n[c]=i[a],this.valuesType._check(t[f],e,r,n)||(s=!1);n.pop()}else for(a=0,o=i.length;a<o;a++)if(!this.valuesType._check(t[i[a]],e))return!1;return s};Gr.prototype._read=function(t){for(var e=this.valuesType,r={},n;n=dl(t);)for(;n--;){var i=t.readString();r[i]=e._read(t)}return r};Gr.prototype._skip=function(t){for(var e=this.valuesType,r,n;n=t.readLong();)if(n<0)r=t.readLong(),t.pos+=r;else for(;n--;)t.skipString(),e._skip(t)};Gr.prototype._write=function(t,e){(!e||typeof e!="object"||Array.isArray(e))&&Ft(e,this);var r=this.valuesType,n=Object.keys(e),i=n.length,s,a;if(i)for(t.writeLong(i),s=0;s<i;s++)a=n[s],t.writeString(a),r._write(t,e[a]);t.writeLong(0)};Gr.prototype._match=function(){throw new Error("maps cannot be compared")};Gr.prototype._update=function(t,e,r){e.typeName==="map"&&(t.valuesType=this.valuesType.createResolver(e.valuesType,r),t._read=this._read)};Gr.prototype._copy=function(t,e){if(t&&typeof t=="object"&&!Array.isArray(t)){var r=this.valuesType,n=Object.keys(t),i,s,a,o={};for(i=0,s=n.length;i<s;i++)a=n[i],o[a]=r._copy(t[a],e);return o}Ft(t,this)};Gr.prototype.compare=Gr.prototype._match;Gr.prototype.typeName="map";Gr.prototype.getValuesType=function(){return this.valuesType};Gr.prototype.random=function(){var t={},e,r;for(e=0,r=Tr.nextInt(10);e<r;e++)t[Tr.nextString(Tr.nextInt(20))]=this.valuesType.random();return t};Gr.prototype._deref=function(t,e){t.values=this.valuesType._attrs(e)};function an(t,e){if(se.call(this),!t.items)throw new Error(Xe("missing array items: %j",t));this.itemsType=se.forSchema(t.items,e),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}nr.inherits(an,se);an.prototype._check=function(t,e,r,n){if(!Array.isArray(t))return r&&r(t,this),!1;var i=!0,s,a,o;if(r){for(o=n.length,n.push(""),s=0,a=t.length;s<a;s++)n[o]=""+s,this.itemsType._check(t[s],e,r,n)||(i=!1);n.pop()}else for(s=0,a=t.length;s<a;s++)if(!this.itemsType._check(t[s],e))return!1;return i};an.prototype._read=function(t){for(var e=this.itemsType,r=[],n;n=t.readLong();)for(n<0&&(n=-n,t.skipLong());n--;)r.push(e._read(t));return r};an.prototype._skip=function(t){for(var e,r;r=t.readLong();)if(r<0)e=t.readLong(),t.pos+=e;else for(;r--;)this.itemsType._skip(t)};an.prototype._write=function(t,e){Array.isArray(e)||Ft(e,this);var r=e.length,n;if(r)for(t.writeLong(r),n=0;n<r;n++)this.itemsType._write(t,e[n]);t.writeLong(0)};an.prototype._match=function(t,e){for(var r=t.readLong(),n=e.readLong(),i;r&&n;){if(i=this.itemsType._match(t,e),i)return i;--r||(r=dl(t)),--n||(n=dl(e))}return et.compare(r,n)};an.prototype._update=function(t,e,r){e.typeName==="array"&&(t.itemsType=this.itemsType.createResolver(e.itemsType,r),t._read=this._read)};an.prototype._copy=function(t,e){Array.isArray(t)||Ft(t,this);var r=new Array(t.length),n,i;for(n=0,i=t.length;n<i;n++)r[n]=this.itemsType._copy(t[n],e);return r};an.prototype._deref=function(t,e){t.items=this.itemsType._attrs(e)};an.prototype.compare=function(t,e){var r=t.length,n=e.length,i,s,a;for(i=0,s=Math.min(r,n);i<s;i++)if(a=this.itemsType.compare(t[i],e[i]))return a;return et.compare(r,n)};an.prototype.getItemsType=function(){return this.itemsType};an.prototype.typeName="array";an.prototype.random=function(){var t=[],e,r;for(e=0,r=Tr.nextInt(10);e<r;e++)t.push(this.itemsType.random());return t};function tr(t,e){e=e||{};var r=e.namespace;if(t.namespace!==void 0)e.namespace=t.namespace;else if(t.name){var n=/^(.*)\.[^.]+$/.exec(t.name);n&&(e.namespace=n[1])}if(se.call(this,t,e),!Array.isArray(t.fields))throw new Error(Xe("non-array record fields: %j",t.fields));if(et.hasDuplicates(t.fields,function(i){return i.name}))throw new Error(Xe("duplicate field name: %j",t.fields));this._fieldsByName={},this.fields=Object.freeze(t.fields.map(function(i){var s=new yi(i,e);return this._fieldsByName[s.name]=s,s},this)),this._branchConstructor=this._createBranchConstructor(),this._isError=t.type==="error",this.recordConstructor=this._createConstructor(e.errorStackTraces),this._read=this._createReader(),this._skip=this._createSkipper(),this._write=this._createWriter(),this._check=this._createChecker(),e.namespace=r,Object.freeze(this)}nr.inherits(tr,se);tr.prototype._getConstructorName=function(){return this.name?xd(this.name):this._isError?"Error$":"Record$"};tr.prototype._createConstructor=function(t){var e={},r,n,i,s,a,o,c;for(r=0,n=this.fields.length;r<n;r++)i=this.fields[r],a=i.defaultValue,o=a()!==void 0,s=i.name,t&&this._isError&&s==="stack"&&se.isType(i.type,"string")&&!o&&(c=i),o&&(e[r]=a);var f=this;function u(g){const b=f._getConstructorName();var S={[b]:function(..._){for(var y=0,E=f.fields.length;y<E;y++){let A=f.fields[y];A.defaultValue()===void 0?this[A.name]=_[y]:_[y]===void 0?this[A.name]=g[y]():this[A.name]=_[y]}c&&this.stack===void 0&&(typeof Error.captureStackTrace=="function"?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack)}}[b];return S}var d=u(e);return d.getType=function(){return f},d.type=f,this._isError&&(nr.inherits(d,Error),d.prototype.name=this._getConstructorName()),d.prototype.clone=function(g){return f.clone(this,g)},d.prototype.compare=function(g){return f.compare(this,g)},d.prototype.isValid=function(g){return f.isValid(this,g)},d.prototype.toBuffer=function(){return f.toBuffer(this)},d.prototype.toString=function(){return f.toString(this)},d.prototype.wrap=function(){return f.wrap(this)},d.prototype.wrapped=d.prototype.wrap,d};tr.prototype._createChecker=function(){const t=[];this.fields.forEach(n=>{t.push(n.type)});var e=this;function r(n){var i=e._getConstructorName(),s={[i]:function(a,o,c,f){if(a===null||typeof a!="object"||o&&!this._checkFields(a))return c&&c(a,this),!1;const u=[];if(e.fields.length)for(var d=0,g=e.fields.length;d<g;d++){let _=e.fields[d];_.defaultValue()!==void 0&&u.push(a[_.name])}else return!0;if(c){var b=1,S=f.length;f.push("");for(var d=0,g=e.fields.length;d<g;d++){let E=e.fields[d];f[S]=E.name,b&=E.defaultValue()===void 0?n[d]._check(a[E.name],E,c,f):u[d]===void 0||n[d]._check(u[d],E,c,f)}return f.pop(),!!b}else return e.fields.reduce((_,y,E)=>_&&(y.defaultValue()===void 0?n[E]._check(a[y.name]):u[E]===void 0||n[E]._check(u[E],o)),!0)}}[i];return s}return r(t)};tr.prototype._createReader=function(){var t=[this.recordConstructor],e,r;for(e=0,r=this.fields.length;e<r;e++)t.push(this.fields[e].type);var n=this;function i(s){var a=n._getConstructorName(),o={[a]:function(c){return new s[0](...s.slice(1).map(f=>f._read(c)))}}[a];return o}return i(t)};tr.prototype._createSkipper=function(){var t=[];this.fields.forEach(n=>{t.push(n.type)});var e=this;function r(n){var i=e._getConstructorName(),s={[i]:function(a){n.forEach(o=>o._skip(a))}}[i];return s}return r(t)};tr.prototype._createWriter=function(){var t=[],e={};this.fields.forEach((i,s)=>{t.push(i.type),i.defaultValue()!==void 0&&(e[s]=i.type.toBuffer(i.defaultValue()).toString("binary"))});var r=this;function n(i,s){var a=r._getConstructorName(),o={[a]:function(c,f){for(var u=0,d=r.fields.length;u<d;u++){let g=r.fields[u];g.defaultValue()===void 0?i[u]._write(c,f[g.name]):f[g.name]===void 0?c.writeBinary(s[u],s[u].length):i[u]._write(c,f[g.name])}}}[a];return o}return n(t,e)};tr.prototype._update=function(t,e,r){if(e.name&&!~ja(this).indexOf(e.name))throw new Error(Xe("no alias found for %s",e.name));var n=this.fields,i=e.fields,s=et.toMap(i,function(y){return y.name}),a={},o,c,f,u,d,g,b;for(o=0;o<n.length;o++){for(f=n[o],d=ja(f),g=[],c=0;c<d.length;c++)u=d[c],s[u]&&g.push(u);if(g.length>1)throw new Error(Xe("ambiguous aliasing for %s.%s (%s)",e.name,f.name,g));if(g.length)u=g[0],b={resolver:f.type.createResolver(s[u].type,r),name:"_"+f.name},a[u]?a[u].push(b):a[u]=[b];else if(f.defaultValue()===void 0)throw new Error(Xe("no matching field for default-less %s.%s",e.name,f.name))}var S=this;function _(){var y=S._getConstructorName(),E={[y]:function(A,M){if(!M){var B=[];for(D=0;D<n.length;D++){for(f=n[D],d=ja(f),g=[],L=0;L<d.length;L++)u=d[L],s[u]&&g.push(u);g.length||B.push(void 0)}for(var D=0;D<i.length;D++){let z=e.fields[D];if(u=z.name,a[u]===void 0)z.type._skip(A);else for(var L=a[u].length;L--;)B.unshift(L?a[u][L].resolver._peek(A):a[u][L].resolver._read(A))}return new S.recordConstructor(...B)}}}[y];return E}t._read=_()};tr.prototype._match=function(t,e){var r=this.fields,n,i,s,a,o;for(n=0,i=r.length;n<i;n++)if(s=r[n],a=s._order,o=s.type,a){if(a*=o._match(t,e),a)return a}else o._skip(t),o._skip(e);return 0};tr.prototype._checkFields=function(t){var e=Object.keys(t),r,n;for(r=0,n=e.length;r<n;r++)if(!this._fieldsByName[e[r]])return!1;return!0};tr.prototype._copy=function(t,e){var r=e&&e.fieldHook,n=[void 0],i,s,a,o;for(i=0,s=this.fields.length;i<s;i++)a=this.fields[i],o=t[a.name],o===void 0&&a.hasOwnProperty("defaultValue")&&(o=a.defaultValue()),(e&&!e.skip||o!==void 0)&&(o=a.type._copy(o,e)),r&&(o=r(a,o,this)),n.push(o);var c=this.recordConstructor;return new(c.bind.apply(c,n))};tr.prototype._deref=function(t,e){t.fields=this.fields.map(function(r){var n=r.type,i={name:r.name,type:n._attrs(e)};if(e.exportAttrs){var s=r.defaultValue();s!==void 0&&(i.default=n._copy(s,{coerce:3,wrap:3}));var a=r.order;a!=="ascending"&&(i.order=a);var o=r.aliases;o.length&&(i.aliases=o);var c=r.doc;c!==void 0&&(i.doc=c)}return i})};tr.prototype.compare=function(t,e){var r=this.fields,n,i,s,a,o,c;for(n=0,i=r.length;n<i;n++)if(s=r[n],a=s.name,o=s._order,c=s.type,o&&(o*=c.compare(t[a],e[a]),o))return o;return 0};tr.prototype.random=function(){var t=this.fields.map(function(r){return r.type.random()});t.unshift(void 0);var e=this.recordConstructor;return new(e.bind.apply(e,t))};tr.prototype.field=function(t){return this._fieldsByName[t]};tr.prototype.getField=tr.prototype.field;tr.prototype.getFields=function(){return this.fields};tr.prototype.getRecordConstructor=function(){return this.recordConstructor};Object.defineProperty(tr.prototype,"typeName",{enumerable:!0,get:function(){return this._isError?"error":"record"}});function mr(t,e){this._logicalTypeName=t.logicalType,se.call(this),Bi=this;try{this._underlyingType=se.forSchema(t,e)}finally{Bi=null;var r=Js.length;r&&Js[r-1][0]===this&&Js.pop()}se.isType(this.underlyingType,"union")?this._branchConstructor=this.underlyingType._branchConstructor:this._branchConstructor=this.underlyingType._createBranchConstructor()}nr.inherits(mr,se);Object.defineProperty(mr.prototype,"typeName",{enumerable:!0,get:function(){return"logical:"+this._logicalTypeName}});Object.defineProperty(mr.prototype,"underlyingType",{enumerable:!0,get:function(){if(this._underlyingType)return this._underlyingType;var t,e,r;for(t=0,e=Js.length;t<e;t++)if(r=Js[t],r[0]===this)return r[1]}});mr.prototype.getUnderlyingType=function(){return this.underlyingType};mr.prototype._read=function(t){return this._fromValue(this.underlyingType._read(t))};mr.prototype._write=function(t,e){this.underlyingType._write(t,this._toValue(e))};mr.prototype._check=function(t,e,r,n){try{var i=this._toValue(t)}catch{}return i===void 0?(r&&r(t,this),!1):this.underlyingType._check(i,e,r,n)};mr.prototype._copy=function(t,e){var r=this.underlyingType;switch(e&&e.coerce){case 3:return r._copy(this._toValue(t),e);case 2:return this._fromValue(r._copy(t,e));default:return this._fromValue(r._copy(this._toValue(t),e))}};mr.prototype._update=function(t,e,r){var n=this._resolve(e,r);n&&(t._read=function(i){return n(e._read(i))})};mr.prototype.compare=function(t,e){var r=this._toValue(t),n=this._toValue(e);return this.underlyingType.compare(r,n)};mr.prototype.random=function(){return this._fromValue(this.underlyingType.random())};mr.prototype._deref=function(t,e){var r=this.underlyingType,n=r.name!==void 0&&e.derefed[r.name];return t=r._attrs(e),!n&&e.exportAttrs&&(typeof t=="string"&&(t={type:t}),t.logicalType=this._logicalTypeName,this._export(t)),t};mr.prototype._skip=function(t){this.underlyingType._skip(t)};mr.prototype._export=function(){};mr.prototype._fromValue=et.abstractFunction;mr.prototype._toValue=et.abstractFunction;mr.prototype._resolve=et.abstractFunction;function Lr(t){this._concreteTypeName="long",Jt.call(this,!0),this._noUnpack=!!t}nr.inherits(Lr,hn);Lr.prototype.typeName="abstract:long";Lr.prototype._check=function(t,e,r){var n=this._isValid(t);return!n&&r&&r(t,this),n};Lr.prototype._read=function(t){var e,r;if(this._noUnpack?(r=t.pos,t.skipLong(),e=t.buf.slice(r,t.pos)):e=t.unpackLongBytes(t),t.isValid())return this._fromBuffer(e)};Lr.prototype._write=function(t,e){this._isValid(e)||Ft(e,this);var r=this._toBuffer(e);this._noUnpack?t.writeFixed(r):t.packLongBytes(r)};Lr.prototype._copy=function(t,e){switch(e&&e.coerce){case 3:return this._toJSON(t);case 2:return this._fromJSON(t);default:return this._fromJSON(this._toJSON(t))}};Lr.prototype._deref=function(){return"long"};Lr.prototype._update=function(t,e){var r=this;switch(e.typeName){case"int":t._read=function(n){return r._fromJSON(e._read(n))};break;case"long":t._read=function(n){return r._read(n)}}};Lr.prototype.random=function(){return this._fromJSON(hn.prototype.random())};Lr.prototype._fromBuffer=et.abstractFunction;Lr.prototype._toBuffer=et.abstractFunction;Lr.prototype._fromJSON=et.abstractFunction;Lr.prototype._toJSON=et.abstractFunction;Lr.prototype._isValid=et.abstractFunction;Lr.prototype.compare=et.abstractFunction;function yi(t,e){var r=t.name;if(typeof r!="string"||!xo(r))throw new Error(Xe("invalid field name: %s",r));this.name=r,this.type=se.forSchema(t.type,e),this.aliases=t.aliases||[],this.doc=t.doc!==void 0?""+t.doc:void 0,this._order=function(a){switch(a){case"ascending":return 1;case"descending":return-1;case"ignore":return 0;default:throw new Error(Xe("invalid order: %j",a))}}(t.order===void 0?"ascending":t.order);var n=t.default;if(n!==void 0){var i=this.type,s=i._copy(n,{coerce:2,wrap:2});fa(i.typeName)&&i.typeName!=="bytes"?this.defaultValue=function(){return s}:this.defaultValue=function(){return i._copy(s)}}Object.freeze(this)}yi.prototype.defaultValue=function(){};Object.defineProperty(yi.prototype,"order",{enumerable:!0,get:function(){return["descending","ignore","ascending"][this._order+1]}});yi.prototype.getAliases=function(){return this.aliases};yi.prototype.getDefault=yi.prototype.defaultValue;yi.prototype.getName=function(){return this.name};yi.prototype.getOrder=function(){return this.order};yi.prototype.getType=function(){return this.type};function yd(t){this._readerType=t,this._read=null,this.itemsType=null,this.size=0,this.symbols=null,this.valuesType=null}yd.prototype._peek=se.prototype._peek;yd.prototype.inspect=function(){return"<Resolver>"};function _w(){this.str=void 0}function Ky(t,e,r,n){if(r){if(r._readerType!==t)throw new Error("invalid resolver");return r._read(e,n)}else return t._read(e)}function xd(t){var e=t.split(".");return e[e.length-1]}function _c(t,e){~t.indexOf(".")?t=t.replace(/^\./,""):e&&(t=e+"."+t),t.split(".").forEach(function(n){if(!xo(n))throw new Error(Xe("invalid name: %j",t))});var r=xd(t);return fa(r)?r:t}function ja(t){var e={};t.name&&(e[t.name]=!0);var r=t.aliases,n,i;for(n=0,i=r.length;n<i;n++)e[r[n]]=!0;return Object.keys(e)}function fa(t){var e=wc[t];return e&&e.prototype instanceof Jt}function qy(t){if(t==="error")t="record";else{var e=/^([^:]+):(.*)$/.exec(t);e&&(e[1]==="union"?t=e[2]+"Union":t=e[1])}return et.capitalize(t)+"Type"}function dl(t){var e=t.readLong();return e<0&&(e=-e,t.skipLong()),e}function bd(t){return t>=-9007199254740990&&t<=9007199254740990}function $y(t){return t&&t.type==="Buffer"&&Array.isArray(t.data)}function xo(t){return ww.test(t)}function Ft(t,e){throw new Error(Xe("invalid %s: %j",e,t))}function Gc(t){var e=t.typeName;switch(e){case"double":case"float":case"int":case"long":return"number";case"bytes":case"fixed":return"buffer";case"enum":return"string";case"map":case"error":case"record":return"object";default:return e}}function Hy(t){if(t===null)return"null";var e=typeof t;if(e==="object"){if(Array.isArray(t))return"array";if(Buffer.isBuffer(t))return"buffer"}return e}function Ew(t){var e={},r,n,i,s;for(r=0,n=t.length;r<n;r++)if(s=t[r],!se.isType(s,"logical")){if(i=Gc(s),e[i])return!0;e[i]=!0}return!1}function Aw(t){var e=["int","long","float","double"],r=-1,n=null,i,s,a,o;for(i=0,s=t.length;i<s;i++)a=t[i],o=e.indexOf(a.typeName),o>r&&(r=o,n=a);return n}function Sw(t,e){var r={},n,i,s,a;for(n=0,i=t.length;n<i;n++){if(s=t[n],s.typeName==="string")return s;a=s.symbols;var o,c;for(o=0,c=a.length;o<c;o++)r[a[o]]=!0}return se.forSchema({type:"enum",symbols:Object.keys(r)},e)}function Tw(t,e){var r=-1,n,i,s;for(n=0,i=t.length;n<i;n++){if(s=t[n],s.typeName==="bytes")return s;r===-1?r=s.size:s.size!==r&&(r=-2)}return r<0?se.forSchema("bytes",e):t[0]}function kw(t,e){var r=[],n={},i={},s=!0,a,o,c,f;for(a=0,o=t.length;a<o;a++)if(c=t[a],c.typeName==="map")s=!1,r.push(c.valuesType);else{f=c.fields;var u,d,g,b,S,_;for(u=0,d=f.length;u<d;u++)g=f[u],S=g.name,_=g.type,r.push(_),s&&(n[S]||(n[S]=[]),n[S].push(_),b=g.defaultValue(),b!==void 0&&(i[S]=b))}if(s){var y=Object.keys(n);for(a=0,o=y.length;a<o;a++)S=y[a],n[S].length<t.length&&i[S]===void 0&&(e&&e.strictDefaults?s=!1:(n[S].unshift(se.forSchema("null",e)),i[S]=null))}var E;return s?E={type:"record",fields:y.map(function(A){var M=se.forTypes(n[A],e),B=i[A];if(B!==void 0&&~M.typeName.indexOf("union")){var D=M.types.slice(),L,z;for(L=0,z=D.length;L<z&&!D[L].isValid(B);L++);if(L>0){var Y=D[0];D[0]=D[L],D[L]=Y,M=se.forSchema(D,e)}}return{name:A,type:M,default:i[A]}})}:E={type:"map",values:se.forTypes(r,e)},se.forSchema(E,e)}var md={Type:se,getTypeBucket:Gc,getValueBucket:Hy,isPrimitive:fa,isValidName:xo,qualify:_c,builtins:function(){var t={LogicalType:mr,UnwrappedUnionType:tn,WrappedUnionType:En},e=Object.keys(wc),r,n,i;for(r=0,n=e.length;r<n;r++)i=e[r],t[qy(i)]=wc[i];return t}()},Ua=md;function Pw(t,e){var r;if(typeof t=="string")try{r=JSON.parse(t)}catch{r=t}else r=t;return Ua.Type.forSchema(r,e)}var Cw={Type:Ua.Type,parse:Pw,types:Ua.builtins,combine:Ua.Type.forTypes,infer:Ua.Type.forValue},vd=md,jt=ca,zi=Xg,Qn=Fc,Dt=sa,wd=jt.Tap,gr=vd.Type,or=Dt.debuglog("avsc:services"),br=Dt.format,Wn={namespace:"org.apache.avro.ipc"},zy=gr.forSchema("boolean",Wn),Zn=gr.forSchema({type:"map",values:"bytes"},Wn),_d=gr.forSchema("string",Wn),bo=gr.forSchema({name:"HandshakeRequest",type:"record",fields:[{name:"clientHash",type:{name:"MD5",type:"fixed",size:16}},{name:"clientProtocol",type:["null","string"],default:null},{name:"serverHash",type:"MD5"},{name:"meta",type:["null",Zn],default:null}]},Wn),mo=gr.forSchema({name:"HandshakeResponse",type:"record",fields:[{name:"match",type:{name:"HandshakeMatch",type:"enum",symbols:["BOTH","CLIENT","NONE"]}},{name:"serverProtocol",type:["null","string"],default:null},{name:"serverHash",type:["null","MD5"],default:null},{name:"meta",type:["null",Zn],default:null}]},Wn),Ed=16,Ad=new xi("",gr.forSchema({name:"PingRequest",type:"record",fields:[]},Wn),gr.forSchema(["string"],Wn),gr.forSchema("null",Wn));function xi(t,e,r,n,i,s){if(this.name=t,!gr.isType(e,"record"))throw new Error("invalid request type");if(this.requestType=e,!gr.isType(r,"union")||!gr.isType(r.getTypes()[0],"string"))throw new Error("invalid error type");if(this.errorType=r,i&&(!gr.isType(n,"null")||r.getTypes().length>1))throw new Error("inapplicable one-way parameter");this.responseType=n,this.oneWay=!!i,this.doc=s!==void 0?""+s:void 0,Object.freeze(this)}xi.forSchema=function(t,e,r){if(r=r||{},!vd.isValidName(t))throw new Error(br("invalid message name: %s",t));if(!Array.isArray(e.request))throw new Error(br("invalid message request: %s",t));var n=br("%s.%sRequest",Wn.namespace,jt.capitalize(t)),i=gr.forSchema({name:n,type:"record",namespace:r.namespace||"",fields:e.request},r);if(delete r.registry[n],!e.response)throw new Error(br("invalid message response: %s",t));var s=gr.forSchema(e.response,r);if(e.errors!==void 0&&!Array.isArray(e.errors))throw new Error(br("invalid message errors: %s",t));var a=gr.forSchema(["string"].concat(e.errors||[]),r),o=!!e["one-way"];return new xi(t,i,a,s,o,e.doc)};xi.prototype.schema=gr.prototype.getSchema;xi.prototype._attrs=function(t){var e=this.requestType._attrs(t),r={request:e.fields,response:this.responseType._attrs(t)},n=this.doc;n!==void 0&&(r.doc=n);var i=this.errorType._attrs(t);return i.length>1&&(r.errors=i.slice(1)),this.oneWay&&(r["one-way"]=!0),r};jt.addDeprecatedGetters(xi,["name","errorType","requestType","responseType"]);xi.prototype.isOneWay=Dt.deprecate(function(){return this.oneWay},"use `.oneWay` directly instead of `.isOneWay()`");function Bt(t,e,r,n,i){if(typeof t!="string")return Bt.forProtocol(t,e);this.name=t,this._messagesByName=e||{},this.messages=Object.freeze(jt.objectValues(this._messagesByName)),this._typesByName=r||{},this.types=Object.freeze(jt.objectValues(this._typesByName)),this.protocol=n,this._hashStr=jt.getHash(JSON.stringify(n)).toString("binary"),this.doc=n.doc?""+n.doc:void 0,this._server=i||this.createServer({silent:!0}),Object.freeze(this)}Bt.Client=gn;Bt.Server=Kn;Bt.compatible=function(t,e){try{Jy(t,e)}catch{return!1}return!0};Bt.forProtocol=function(t,e){e=e||{};var r=t.protocol;if(!r)throw new Error("missing protocol name");if(t.namespace!==void 0)e.namespace=t.namespace;else{var n=/^(.*)\.[^.]+$/.exec(r);n&&(e.namespace=n[1])}r=vd.qualify(r,e.namespace),t.types&&t.types.forEach(function(s){gr.forSchema(s,e)});var i;return t.messages&&(i={},Object.keys(t.messages).forEach(function(s){i[s]=xi.forSchema(s,t.messages[s],e)})),new Bt(r,i,e.registry,t)};Bt.isService=function(t){return!!t&&t.hasOwnProperty("_hashStr")};Bt.prototype.createClient=function(t){var e=new gn(this,t);return process.nextTick(function(){if(t&&t.server){var r={objectMode:!0},n=[new Qn.PassThrough(r),new Qn.PassThrough(r)];t.server.createChannel({readable:n[0],writable:n[1]},r),e.createChannel({readable:n[1],writable:n[0]},r)}else t&&t.transport&&e.createChannel(t.transport)}),e};Bt.prototype.createServer=function(t){return new Kn(this,t)};Object.defineProperty(Bt.prototype,"hash",{enumerable:!0,get:function(){return jt.bufferFrom(this._hashStr,"binary")}});Bt.prototype.message=function(t){return this._messagesByName[t]};Bt.prototype.type=function(t){return this._typesByName[t]};Bt.prototype.inspect=function(){return br("<Service %j>",this.name)};jt.addDeprecatedGetters(Bt,["message","messages","name","type","types"]);Bt.prototype.createEmitter=Dt.deprecate(function(t,e){e=e||{};var r=this.createClient({cache:e.cache,buffering:!1,strictTypes:e.strictErrors,timeout:e.timeout}),n=r.createChannel(t,e);return Nw(r,n),n},"use `.createClient()` instead of `.createEmitter()`");Bt.prototype.createListener=Dt.deprecate(function(t,e){if(e&&e.strictErrors)throw new Error("use `.createServer()` to support strict errors");return this._server.createChannel(t,e)},"use `.createServer().createChannel()` instead of `.createListener()`");Bt.prototype.emit=Dt.deprecate(function(t,e,r,n){if(!r||!this.equals(r.client._svc$))throw new Error("invalid emitter");var i=r.client;return gn.prototype.emitMessage.call(i,t,e,n&&n.bind(this)),r.getPending()},"create a client via `.createClient()` to emit messages instead of `.emit()`");Bt.prototype.equals=Dt.deprecate(function(t){return Bt.isService(t)&&this.getFingerprint().equals(t.getFingerprint())},"equality testing is deprecated, compare the `.protocol`s instead");Bt.prototype.getFingerprint=Dt.deprecate(function(t){return jt.getHash(JSON.stringify(this.protocol),t)},"use `.hash` instead of `.getFingerprint()`");Bt.prototype.getSchema=Dt.deprecate(gr.prototype.getSchema,"use `.protocol` instead of `.getSchema()`");Bt.prototype.on=Dt.deprecate(function(t,e){var r=this;return this._server.onMessage(t,function(n,i){return e.call(r,n,this.channel,i)}),this},"use `.createServer().onMessage()` instead of `.on()`");Bt.prototype.subprotocol=Dt.deprecate(function(){var t=this._server,e={strictTypes:t._strict,cache:t._cache},r=new Kn(t.service,e);return r._handlers=Object.create(t._handlers),new Bt(this.name,this._messagesByName,this._typesByName,this.protocol,r)},"`.subprotocol()` will be removed in 5.1");Bt.prototype._attrs=function(t){var e={protocol:this.name},r=[];this.types.forEach(function(i){if(i.getName()!==void 0){var s=i._attrs(t);typeof s!="string"&&r.push(s)}}),r.length&&(e.types=r);var n=Object.keys(this._messagesByName);return n.length&&(e.messages={},n.forEach(function(i){e.messages[i]=this._messagesByName[i]._attrs(t)},this)),t&&t.exportAttrs&&this.doc!==void 0&&(e.doc=this.doc),e};function Iw(t,e,r){r===void 0&&typeof e=="function"&&(r=e,e=void 0);var n=new Bt({protocol:"Empty"},Wn),i;n.createClient({timeout:e&&e.timeout}).createChannel(t,{scope:e&&e.scope,endWritable:typeof t=="function"}).once("handshake",function(s,a){i=a.serverProtocol,this.destroy(!0)}).once("eot",function(s,a){a&&!/interrupted/.test(a)?r(a):r(null,JSON.parse(i))})}function gn(t,e){e=e||{},zi.EventEmitter.call(this),this._svc$=t,this._channels$=[],this._fns$=[],this._buffering$=!!e.buffering,this._cache$=e.cache||{},this._policy$=e.channelPolicy,this._strict$=!!e.strictTypes,this._timeout$=jt.getOption(e,"timeout",1e4),e.remoteProtocols&&Wy(this._cache$,e.remoteProtocols,t,!0),this._svc$.messages.forEach(function(r){this[r.name]=this._createMessageHandler$(r)},this)}Dt.inherits(gn,zi.EventEmitter);gn.prototype.activeChannels=function(){return this._channels$.slice()};gn.prototype.createChannel=function(t,e){var r=e&&e.objectMode,n;if(typeof t=="function"){var i;r?i=t:i=function(u){var d=new wo,g=t(function(b,S){if(b){u(b);return}var _=new gs().once("error",function(y){n.destroy(y)});u(null,S.pipe(_))});if(g)return d.pipe(g),d},n=new Sd(this,i,e)}else{var s,a;if(Zy(t)?s=a=t:(s=t.readable,a=t.writable),!r){var o=new ua;s=s.pipe(o);var c=new _o;c.pipe(a),a=c}n=new Vc(this,s,a,e),r||(n.once("eot",function(){s.unpipe(o),c.unpipe(a)}),o.once("error",function(u){n.destroy(u)}))}var f=this._channels$;return f.push(n),n.once("_drain",function(){f.splice(f.indexOf(this),1)}),this._buffering$=!1,this.emit("channel",n),n};gn.prototype.destroyChannels=function(t){this._channels$.forEach(function(e){e.destroy(t&&t.noWait)})};gn.prototype.emitMessage=function(t,e,r,n){var i=ex(this._svc$,t),s=new Jc(i,{},e);this._emitMessage$(s,r,n)};gn.prototype.remoteProtocols=function(){return Yy(this._cache$,!0)};Object.defineProperty(gn.prototype,"service",{enumerable:!0,get:function(){return this._svc$}});gn.prototype.use=function(){var t,e,r;for(t=0,e=arguments.length;t<e;t++)r=arguments[t],this._fns$.push(r.length<3?r(this):r);return this};gn.prototype._emitMessage$=function(t,e,r){!r&&typeof e=="function"&&(r=e,e=void 0);var n=this,i=this._channels$,s=i.length;if(!s){if(this._buffering$)or("no active client channels, buffering call"),this.once("channel",function(){this._emitMessage$(t,e,r)});else{var a=new Error("no active channels");process.nextTick(function(){r?r.call(new kd(t._msg),a):n.emit("error",a)})}return}e=e||{},e.timeout===void 0&&(e.timeout=this._timeout$);var o;if(s===1)o=i[0];else if(this._policy$){if(o=this._policy$(this._channels$.slice()),!o){or("policy returned no channel, skipping call");return}}else o=i[Math.floor(Math.random()*s)];o._emit(t,e,function(c,f){var u=this,d=u.message.errorType;if(c){n._strict$&&(c=d.clone(c.message,{wrapUnions:!0})),g(c);return}if(!f){g();return}c=f.error,n._strict$||(c===void 0?c=null:gr.isType(d,"union:unwrapped")?typeof c=="string"&&(c=new Error(c)):c&&c.string&&typeof c.string=="string"&&(c=new Error(c.string))),g(c,f.response);function g(b,S){r?r.call(u,b,S):b&&n.emit("error",b)}})};gn.prototype._createMessageHandler$=function(t){var e=t.requestType.getFields(),r=e.map(function(i){return i.getName()}),n="return function "+t.name+"(";return r.length&&(n+=r.join(", ")+", "),n+=`opts, cb) {
`,n+="  var req = {",n+=r.map(function(i){return i+": "+i}).join(", "),n+=`};
`,n+="  return this.emitMessage('"+t.name+`', req, opts, cb);
`,n+="};",new Function(n)()};function Kn(t,e){e=e||{},zi.EventEmitter.call(this),this.service=t,this._handlers={},this._fns=[],this._channels={},this._nextChannelId=1,this._cache=e.cache||{},this._defaultHandler=e.defaultHandler,this._sysErrFormatter=e.systemErrorFormatter,this._silent=!!e.silent,this._strict=!!e.strictTypes,e.remoteProtocols&&Wy(this._cache,e.remoteProtocols,t,!1),t.messages.forEach(function(r){var n=r.name;e.noCapitalize||(n=jt.capitalize(n)),this["on"+n]=this._createMessageHandler(r)},this)}Dt.inherits(Kn,zi.EventEmitter);Kn.prototype.activeChannels=function(){return jt.objectValues(this._channels)};Kn.prototype.createChannel=function(t,e){var r=e&&e.objectMode,n;if(typeof t=="function"){var i;r?i=t:i=function(d){var g=new gs().once("error",function(b){n.destroy(b)});return t(function(b,S){if(b){d(b);return}var _=new wo;_.pipe(S),d(null,_)}).pipe(g)},n=new Gy(this,i,e)}else{var s,a;if(Zy(t)?s=a=t:(s=t.readable,a=t.writable),!r){var o=new ua;s=s.pipe(o);var c=new _o;c.pipe(a),a=c}n=new Vy(this,s,a,e),r||(n.once("eot",function(){s.unpipe(o),c.unpipe(a)}),o.once("error",function(d){n.destroy(d)}))}this.listeners("error").length||this.on("error",this._onError);var f=this._nextChannelId++,u=this._channels;return u[f]=n.once("eot",function(){delete u[f]}),this.emit("channel",n),n};Kn.prototype.onMessage=function(t,e){return ex(this.service,t),this._handlers[t]=e,this};Kn.prototype.remoteProtocols=function(){return Yy(this._cache,!1)};Kn.prototype.use=function(){var t,e,r;for(t=0,e=arguments.length;t<e;t++)r=arguments[t],this._fns.push(r.length<3?r(this):r);return this};Kn.prototype._createMessageHandler=function(t){var e=t.name,r=t.requestType.fields,n=r.length,i=r.length?", "+r.map(function(a){return"req."+a.name}).join(", "):"",s=`return function (handler) {
`;return s+="  if (handler.length > "+n+`) {
`,s+="    return this.onMessage('"+e+`', function (req, cb) {
`,s+="      return handler.call(this"+i+`, cb);
`,s+=`    });
`,s+=`  } else {
`,s+="    return this.onMessage('"+e+`', function (req) {
`,s+="      return handler.call(this"+i+`);
`,s+=`    });
`,s+=`  }
`,s+=`};
`,new Function(s)()};Kn.prototype._onError=function(t){!this._silent&&t.rpcCode!=="UNKNOWN_PROTOCOL"&&(console.error(),t.rpcCode?(console.error(t.rpcCode),console.error(t.cause)):(console.error("INTERNAL_SERVER_ERROR"),console.error(t)))};function Pr(t,e){e=e||{},zi.EventEmitter.call(this),this.client=t,this.timeout=jt.getOption(e,"timeout",t._timeout$),this._endWritable=!!jt.getOption(e,"endWritable",!0),this._prefix=Xy(e.scope);var r=t._cache$,n=t._svc$,i=e.serverHash;i||(i=n.hash);var s=r[i];s||(i=n.hash,s=r[i]=new Gi(n,n,i)),this._adapter=s,this._registry=new vo(this,Ed),this.pending=0,this.destroyed=!1,this.draining=!1,this.once("_eot",function(a,o){or("client channel EOT"),this.destroyed=!0,this.emit("eot",a,o)})}Dt.inherits(Pr,zi.EventEmitter);Pr.prototype.destroy=function(t){or("destroying client channel"),this.draining||(this.draining=!0,this.emit("_drain"));var e=this._registry,r=this.pending;t&&e.clear(),t||!r?Pd(t)?(or("fatal client channel error: %s",t),this.emit("_eot",r,t)):this.emit("_eot",r):or("client channel entering drain mode (%s pending)",r)};Pr.prototype.ping=function(t,e){!e&&typeof t=="function"&&(e=t,t=void 0);var r=this,n=new Jc(Ad);this._emit(n,{timeout:t},function(i){e?e.call(r,i):i&&r.destroy(i)})};Pr.prototype._createHandshakeRequest=function(t,e){var r=this.client._svc$;return{clientHash:r.hash,clientProtocol:e?null:JSON.stringify(r.protocol),serverHash:t._hash}};Pr.prototype._emit=function(t,e,r){var n=t._msg,i=n.oneWay?void 0:new Td(n,{}),s=new kd(n,this),a=this;this.pending++,process.nextTick(function(){if(!n.name)o(t,i,c);else{a.emit("outgoingCall",s,e);var u=a.client._fns$;or("starting client middleware chain (%s middleware)",u.length),tx({fns:u,ctx:s,wreq:t,wres:i,onTransition:o,onCompletion:c,onError:f})}});function o(u,d,g){var b,S;if(a.destroyed)b=new Error("channel destroyed");else try{S=u.toBuffer()}catch{b=pl(br("invalid %j request",n.name),u,[{name:"headers",type:Zn},{name:"request",type:n.requestType}])}if(b){g(b);return}var _=e&&e.timeout!==void 0?e.timeout:a.timeout,y=a._registry.add(_,function(E,A,M){if(!E&&!n.oneWay)try{M._decodeResponse(A,d,n)}catch(B){E=B}g(E)});y|=a._prefix,or("sending message %s",y),a._send(y,S,!!n&&n.oneWay)}function c(u){a.pending--,r.call(s,u,i),a.draining&&!a.destroyed&&!a.pending&&a.destroy()}function f(u){a.client.emit("error",u,a)}};Pr.prototype._getAdapter=function(t){var e=t.serverHash,r=this.client._cache$,n=r[e];if(n)return n;var i=JSON.parse(t.serverProtocol),s=Bt.forProtocol(i);return n=new Gi(this.client._svc$,s,e,!0),r[e]=n};Pr.prototype._matchesPrefix=function(t){return Qy(t,this._prefix)};Pr.prototype._send=jt.abstractFunction;jt.addDeprecatedGetters(Pr,["pending","timeout"]);Pr.prototype.getCache=Dt.deprecate(function(){return this.client._cache$},"use `.remoteProtocols()` instead of `.getCache()`");Pr.prototype.getProtocol=Dt.deprecate(function(){return this.client._svc$},"use `.service` instead or `.getProtocol()`");Pr.prototype.isDestroyed=Dt.deprecate(function(){return this.destroyed},"use `.destroyed` instead of `.isDestroyed`");function Sd(t,e,r){Pr.call(this,t,r),this._writableFactory=e,(!r||!r.noPing)&&(or("emitting ping request"),this.ping())}Dt.inherits(Sd,Pr);Sd.prototype._send=function(t,e){var r=this._registry.get(t),n=this._adapter,i=this;return process.nextTick(s),!0;function s(a){if(!i.destroyed){var o=i._createHandshakeRequest(n,!a),c=i._writableFactory.call(i,function(f,u){if(f){r(f);return}u.on("data",function(d){or("received response %s",d.id);var g=Buffer.concat(d.payload);try{var b=Wc(mo,g),S=b.head;S.serverHash&&(n=i._getAdapter(S))}catch(y){r(y);return}var _=S.match;or("handshake match: %s",_),i.emit("handshake",o,S),_==="NONE"?process.nextTick(function(){s(!0)}):(i._adapter=n,r(null,b.tail,n))})});if(!c){r(new Error("invalid writable stream"));return}c.write({id:t,payload:[bo.toBuffer(o),e]}),i._endWritable&&c.end()}}};function Vc(t,e,r,n){Pr.call(this,t,n),this._readable=e,this._writable=r,this._connected=!!(n&&n.noPing),this._readable.on("end",u),this._writable.on("finish",d);var i=this,s=null;this.once("eot",function(){s&&(clearTimeout(s),s=null),i._connected||i.emit("_ready"),this._writable.removeListener("finish",d),this._endWritable&&(or("ending transport"),this._writable.end()),this._readable.removeListener("data",c).removeListener("data",f).removeListener("end",u)});var a;this._connected?this._readable.on("data",f):(this._readable.on("data",c),process.nextTick(o),i.timeout&&(s=setTimeout(function(){i.destroy(new Error("timeout"))},i.timeout)));function o(g){if(!i.destroyed){a=i._createHandshakeRequest(i._adapter,!g);var b=[bo.toBuffer(a),jt.bufferFrom([0,0])];i._writable.write({id:i._prefix,payload:b})}}function c(g){if(!i._matchesPrefix(g.id)){or("discarding unscoped response %s (still connecting)",g.id);return}var b=Buffer.concat(g.payload);try{var S=Wc(mo,b).head;S.serverHash&&(i._adapter=i._getAdapter(S))}catch(y){i.destroy(y);return}var _=S.match;or("handshake match: %s",_),i.emit("handshake",a,S),_==="NONE"?process.nextTick(function(){o(!0)}):(or("successfully connected"),s&&(clearTimeout(s),s=null),i._readable.removeListener("data",c).on("data",f),i._connected=!0,i.emit("_ready"),a=null)}function f(g){var b=g.id;if(!i._matchesPrefix(b)){or("discarding unscoped message %s",b);return}var S=i._registry.get(b);S&&process.nextTick(function(){or("received message %s",b),S(null,Buffer.concat(g.payload),i._adapter)})}function u(){i.destroy(!0)}function d(){i.destroy()}}Dt.inherits(Vc,Pr);Vc.prototype._emit=function(){if(this._connected||this.draining)Pr.prototype._emit.apply(this,arguments);else{or("queuing request");var t=[],e,r;for(e=0,r=arguments.length;e<r;e++)t.push(arguments[e]);this.once("_ready",function(){this._emit.apply(this,t)})}};Vc.prototype._send=function(t,e,r){if(r){var n=this;process.nextTick(function(){n._registry.get(t)(null,jt.bufferFrom([0,0,0]),n._adapter)})}return this._writable.write({id:t,payload:[e]})};function Vr(t,e){e=e||{},zi.EventEmitter.call(this),this.server=t,this._endWritable=!!jt.getOption(e,"endWritable",!0),this._prefix=Xy(e.scope);var r=t._cache,n=t.service,i=n.hash;r[i]||(r[i]=new Gi(n,n,i)),this._adapter=null,this.destroyed=!1,this.draining=!1,this.pending=0,this.once("_eot",function(s,a){or("server channel EOT"),this.emit("eot",s,a)})}Dt.inherits(Vr,zi.EventEmitter);Vr.prototype.destroy=function(t){this.draining||(this.draining=!0,this.emit("_drain")),(t||!this.pending)&&(this.destroyed=!0,Pd(t)?(or("fatal server channel error: %s",t),this.emit("_eot",this.pending,t)):this.emit("_eot",this.pending))};Vr.prototype._createHandshakeResponse=function(t,e){var r=this.server.service,n=r.hash,i=e&&e.serverHash.equals(n);return{match:t?"NONE":i?"BOTH":"CLIENT",serverProtocol:i?null:JSON.stringify(r.protocol),serverHash:i?null:n}};Vr.prototype._getAdapter=function(t){var e=t.clientHash,r=this.server._cache[e];if(r)return r;if(!t.clientProtocol)throw Di("UNKNOWN_PROTOCOL");var n=JSON.parse(t.clientProtocol),i=Bt.forProtocol(n);return r=new Gi(i,this.server.service,e,!0),this.server._cache[e]=r};Vr.prototype._matchesPrefix=function(t){return Qy(t,this._prefix)};Vr.prototype._receive=function(t,e,r){var n=this,i;try{i=e._decodeRequest(t)}catch(g){r(n._encodeSystemError(Di("INVALID_REQUEST",g)));return}var s=i._msg,a=new Td(s,{});if(!s.name){a.response=null,r(a.toBuffer(),!1);return}var o=new kd(s,this);n.emit("incomingCall",o);var c=this.server._fns;or("starting server middleware chain (%s middleware)",c.length),n.pending++,tx({fns:c,ctx:o,wreq:i,wres:a,onTransition:f,onCompletion:u,onError:d});function f(g,b,S){var _=n.server._handlers[s.name];if(_){var A=!s.oneWay;try{A?_.call(o,g.request,function(M,B){A=!1,b.error=M,b.response=B,S()}):(_.call(o,g.request),S())}catch(M){A?(A=!1,S(M)):d(M)}}else{var y=n.server._defaultHandler;if(y)y.call(o,g,b,S);else{var E=new Error(br("no handler for %s",s.name));S(Di("NOT_IMPLEMENTED",E))}}}function u(g){n.pending--;var b=n.server,S;if(!g){var _=a.error,y=b._strict;y||(Pd(_)?a.error=s.errorType.clone(_.message,{wrapUnions:!0}):_===null&&(_=a.error=void 0),_===void 0&&a.response===void 0&&s.responseType.isValid(null)&&(a.response=null));try{S=a.toBuffer()}catch{a.error!==void 0?g=pl(br("invalid %j error",s.name),a,[{name:"headers",type:Zn},{name:"error",type:s.errorType}]):g=pl(br("invalid %j response",s.name),a,[{name:"headers",type:Zn},{name:"response",type:s.responseType}])}}S?_!==void 0&&b.emit("error",Di("APPLICATION_ERROR",_)):S=n._encodeSystemError(g,a.headers),r(S,s.oneWay),n.draining&&!n.pending&&n.destroy()}function d(g){n.server.emit("error",g,n)}};jt.addDeprecatedGetters(Vr,["pending"]);Vr.prototype.getCache=Dt.deprecate(function(){return this.server._cache},"use `.remoteProtocols()` instead of `.getCache()`");Vr.prototype.getProtocol=Dt.deprecate(function(){return this.server.service},"use `.service` instead of `.getProtocol()`");Vr.prototype.isDestroyed=Dt.deprecate(function(){return this.destroyed},"use `.destroyed` instead of `.isDestroyed`");Vr.prototype._encodeSystemError=function(t,e){var r=this.server;r.emit("error",t,this);var n;r._sysErrFormatter?n=r._sysErrFormatter.call(this,t):t.rpcCode&&(n=t.message);var i;if(e)try{i=Zn.toBuffer(e)}catch(s){r.emit("error",s,this)}return Buffer.concat([i||jt.bufferFrom([0]),jt.bufferFrom([1,0]),_d.toBuffer(n||"internal server error")])};function Gy(t,e,r){Vr.call(this,t,r),this._writable=void 0;var n=this,i;process.nextTick(function(){i=e.call(n,function(c,f){process.nextTick(function(){if(c){o(c);return}n._writable=f.on("finish",o),n.emit("_writable")})}).on("data",s).on("end",a)});function s(c){var f=c.id,u=Buffer.concat(c.payload),d;try{var g=Wc(bo,u),b=g.head,S=n._getAdapter(b)}catch(E){d=Di("INVALID_HANDSHAKE_REQUEST",E)}var _=n._createHandshakeResponse(d,b);n.emit("handshake",b,_),d?y(n._encodeSystemError(d)):n._receive(g.tail,S,y);function y(E){if(!n.destroyed){if(!n._writable){n.once("_writable",function(){y(E)});return}n._writable.write({id:f,payload:[mo.toBuffer(_),E]})}n._writable&&n._endWritable&&n._writable.end()}}function a(){n.destroy()}function o(c){i.removeListener("data",s).removeListener("end",a),n.destroy(c||!0)}}Dt.inherits(Gy,Vr);function Vy(t,e,r,n){Vr.call(this,t,n),this._adapter=void 0,this._writable=r.on("finish",c),this._readable=e.on("data",s).on("end",o),this.once("_drain",function(){this._readable.removeListener("data",s).removeListener("data",a).removeListener("end",o)}).once("eot",function(){this._writable.removeListener("finish",c),this._endWritable&&this._writable.end()});var i=this;function s(f){var u=f.id;if(!i._matchesPrefix(u))return;var d=Buffer.concat(f.payload),g;try{var b=Wc(bo,d),S=b.head;i._adapter=i._getAdapter(S)}catch(E){g=Di("INVALID_HANDSHAKE_REQUEST",E)}var _=i._createHandshakeResponse(g,S);i.emit("handshake",S,_),g?y(i._encodeSystemError(g)):(i._readable.removeListener("data",s).on("data",a),i._receive(b.tail,i._adapter,y));function y(E){i.destroyed||i._writable.write({id:u,payload:[mo.toBuffer(_),E]})}}function a(f){var u=f.id;if(i._matchesPrefix(u)){var d=Buffer.concat(f.payload);i._receive(d,i._adapter,function(g,b){i.destroyed||b||i._writable.write({id:u,payload:[g]})})}}function o(){i.destroy()}function c(){i.destroy(!0)}}Dt.inherits(Vy,Vr);function Jc(t,e,r){this._msg=t,this.headers=e||{},this.request=r||{}}Jc.prototype.toBuffer=function(){var t=this._msg;return Buffer.concat([Zn.toBuffer(this.headers),_d.toBuffer(t.name),t.requestType.toBuffer(this.request)])};function Td(t,e,r,n){this._msg=t,this.headers=e,this.error=r,this.response=n}Td.prototype.toBuffer=function(){var t=Zn.toBuffer(this.headers),e=this.error!==void 0;return Buffer.concat([t,zy.toBuffer(e),e?this._msg.errorType.toBuffer(this.error):this._msg.responseType.toBuffer(this.response)])};function kd(t,e){this.channel=e,this.locals={},this.message=t,Object.freeze(this)}function vo(t,e){this._ctx=t,this._mask=-1>>>(e|0),this._id=0,this._n=0,this._cbs={}}vo.prototype.get=function(t){return this._cbs[t&this._mask]};vo.prototype.add=function(t,e){this._id=this._id+1&this._mask;var r=this,n=this._id,i;return t>0&&(i=setTimeout(function(){s(new Error("timeout"))},t)),this._cbs[n]=s,this._n++,n;function s(){r._cbs[n]&&(delete r._cbs[n],r._n--,i&&clearTimeout(i),e.apply(r._ctx,arguments))}};vo.prototype.clear=function(){Object.keys(this._cbs).forEach(function(t){this._cbs[t](new Error("interrupted"))},this)};function Gi(t,e,r,n){this._clientSvc=t,this._serverSvc=e,this._hash=r,this._isRemote=!!n,this._readers=Jy(t,e)}Gi.prototype._decodeRequest=function(t){var e=new wd(t),r=Zn._read(e),n=_d._read(e),i,s;if(n?(i=this._serverSvc.message(n),s=this._readers[n+"?"]._read(e)):i=Ad,!e.isValid())throw new Error(br("truncated %s request",n||"ping$"));return new Jc(i,r,s)};Gi.prototype._decodeResponse=function(t,e,r){var n=new wd(t);jt.copyOwnProperties(Zn._read(n),e.headers,!0);var i=zy._read(n),s=r.name;if(s){var a=this._readers[s+(i?"*":"!")];if(r=this._clientSvc.message(s),i?e.error=a._read(n):e.response=a._read(n),!n.isValid())throw new Error(br("truncated %s response",s))}else r=Ad};function gs(){Qn.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._buf=jt.newBuffer(0),this._bufs=[],this.on("finish",function(){this.push(null)})}Dt.inherits(gs,Qn.Transform);gs.prototype._transform=function(t,e,r){t=Buffer.concat([this._buf,t]);for(var n;t.length>=4&&t.length>=(n=t.readInt32BE(0))+4;){if(n)this._bufs.push(t.slice(4,n+4));else{var i=this._bufs;this._bufs=[],this.push({id:null,payload:i})}t=t.slice(n+4)}this._buf=t,r()};gs.prototype._flush=function(){if(this._buf.length||this._bufs.length){var t=this._bufs.slice();t.unshift(this._buf);var e=Di("TRAILING_DATA");e.trailingData=Buffer.concat(t).toString(),this.emit("error",e)}};function wo(){Qn.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}Dt.inherits(wo,Qn.Transform);wo.prototype._transform=function(t,e,r){var n=t.payload,i,s,a;for(i=0,s=n.length;i<s;i++)a=n[i],this.push(hl(a.length)),this.push(a);this.push(hl(0)),r()};function ua(){Qn.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._frameCount=0,this._buf=jt.newBuffer(0),this._bufs=[],this.on("finish",function(){this.push(null)})}Dt.inherits(ua,Qn.Transform);ua.prototype._transform=function(t,e,r){for(t=Buffer.concat([this._buf,t]);;){if(this._id===void 0){if(t.length<8){this._buf=t,r();return}this._id=t.readInt32BE(0),this._frameCount=t.readInt32BE(4),t=t.slice(8)}for(var n;this._frameCount&&t.length>=4&&t.length>=(n=t.readInt32BE(0))+4;)this._frameCount--,this._bufs.push(t.slice(4,n+4)),t=t.slice(n+4);if(this._frameCount){this._buf=t,r();return}else{var i={id:this._id,payload:this._bufs};this._bufs=[],this._id=void 0,this.push(i)}}};ua.prototype._flush=gs.prototype._flush;function _o(){Qn.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}Dt.inherits(_o,Qn.Transform);_o.prototype._transform=function(t,e,r){var n=t.payload,i=n.length,s;s=jt.newBuffer(8),s.writeInt32BE(t.id,0),s.writeInt32BE(i,4),this.push(s);var a;for(a=0;a<i;a++)s=n[a],this.push(hl(s.length)),this.push(s);r()};function hl(t){var e=jt.newBuffer(4);return e.writeInt32BE(t),e}function Wc(t,e){var r=new wd(e),n=t._read(r);if(!r.isValid())throw new Error(br("truncated %s",t));return{head:n,tail:r.buf.slice(r.pos)}}function Zf(t,e){return t.equals(e)?t:t.createResolver(e)}function Jy(t,e){var r={};return t.messages.forEach(function(n){var i=n.name,s=e.message(i);try{if(!s)throw new Error(br("missing server message: %s",i));if(s.oneWay!==n.oneWay)throw new Error(br("inconsistent one-way message: %s",i));r[i+"?"]=Zf(s.requestType,n.requestType),r[i+"*"]=Zf(n.errorType,s.errorType),r[i+"!"]=Zf(n.responseType,s.responseType)}catch(a){throw Di("INCOMPATIBLE_PROTOCOL",a)}}),r}function Wy(t,e,r,n){Object.keys(e).forEach(function(i){var s=e[i],a,o;n?(a=r,o=Bt.forProtocol(s)):(a=Bt.forProtocol(s),o=r),t[i]=new Gi(a,o,i,!0)})}function Yy(t,e){var r={};return Object.keys(t).forEach(function(n){var i=t[n];if(i._isRemote){var s=e?i._serverSvc:i._clientSvc;r[n]=s.protocol}}),r}function Pd(t){return!!t&&Object.prototype.toString.call(t)==="[object Error]"}function Nw(t,e){return t.on("error",function(r){e.emit("error",r,t)})}function nc(t,e){var r=new Error(t);return r.cause=e,r}function Di(t,e){var r=nc(t.toLowerCase().replace(/_/g," "),e);return r.rpcCode=e&&e.rpcCode?e.rpcCode:t,r}function pl(t,e,r){var n=[],i,s,a;for(i=0,s=r.length;i<s;i++)a=r[i],a.type.isValid(e[a.name],{errorHook:f});var o=n.map(function(u){return br("%s = %j but expected %s",u.path,u.value,u.type)}).join(", "),c=new Error(br("%s (%s)",t,o));return c.details=n,c;function f(u,d,g){var b=[],S,_,y;for(S=0,_=u.length;S<_;S++)y=u[S],isNaN(y)?b.push("."+y):b.push("["+y+"]");n.push({path:a.name+b.join(""),value:d,type:g})}}function Xy(t){return t?jt.getHash(t).readInt16BE(0)<<32-Ed:0}function Qy(t,e){return(t^e)>>32-Ed===0}function Zy(t){return!!(t&&t.pipe)}function ex(t,e){var r=t.message(e);if(!r)throw new Error(br("unknown message: %s",e));return r}function tx(t){var e=[t.wreq,t.wres],r=[],n;i(0);function i(a){var o=!1;a<t.fns.length?t.fns[a].apply(t.ctx,e.concat(function(c,f){if(o){t.onError(nc("duplicate forward middleware call",c));return}if(o=!0,c||t.wres&&(t.wres.error!==void 0||t.wres.response!==void 0)){n=c,s();return}f&&r.push(f),i(++a)})):t.onTransition.apply(t.ctx,e.concat(function(c){if(o){t.onError(nc("duplicate handler call",c));return}o=!0,n=c,process.nextTick(s)}))}function s(){var a=r.pop();if(a){var o=!1;a.call(t.ctx,n,function(c){if(o){t.onError(nc("duplicate backward middleware call",c));return}n=c,o=!0,s()})}else t.onCompletion.call(t.ctx,n)}}var Rw={Adapter:Gi,HANDSHAKE_REQUEST_TYPE:bo,HANDSHAKE_RESPONSE_TYPE:mo,Message:xi,Registry:vo,Service:Bt,discoverProtocol:Iw,streams:{FrameDecoder:gs,FrameEncoder:wo,NettyDecoder:ua,NettyEncoder:_o}};function Cd(){return new Error("unsupported in the browser")}function Bw(){return function(t,e,r){r(Cd())}}function Mw(){return function(){throw Cd()}}var Ow={createImportHook:Bw,createSyncImportHook:Mw,existsSync:function(){return!1},readFileSync:function(){throw Cd()}},ic=Ow,rx=ca,gl=Gl,Dw=sa,Zs=Dw.format,Uw={date:{type:"int",logicalType:"date"},decimal:{type:"bytes",logicalType:"decimal"},time_ms:{type:"long",logicalType:"time-millis"},timestamp_ms:{type:"long",logicalType:"timestamp-millis"}};function Id(t,e,r){!r&&typeof e=="function"&&(r=e,e=void 0),e=e||{},e.importHook||(e.importHook=ic.createImportHook());var n=[],i,s;e.importHook(t,"idl",function(c,f){if(c){r(c);return}if(f===void 0){r(null,{});return}try{var u=new rr(f,e),d=u._readProtocol(f,e)}catch(g){g.path=t,r(g);return}i=d.protocol,s=d.imports,a()});function a(){var c=s.shift();if(!c)n.length&&(i.types=i.types?n.concat(i.types):n),r(null,i);else{var f=gl.join(gl.dirname(t),c.name);c.kind==="idl"?Id(f,e,o):e.importHook(f,c.kind,function(u,d){if(u){r(u);return}switch(c.kind){case"protocol":case"schema":if(d===void 0){o(null,{});return}try{var g=JSON.parse(d)}catch(S){S.path=f,r(S);return}var b=c.kind==="schema"?{types:[g]}:g;o(null,b);break;default:r(new Error(Zs("invalid import kind: %s",c.kind)))}})}}function o(c,f){if(c){r(c);return}(f.types||[]).forEach(function(u){if(u.namespace===void 0){var d=f.namespace;if(!d){var g=/^(.*)\.[^.]+$/.exec(f.protocol);g&&(d=g[1])}u.namespace=d||""}n.push(u)});try{Object.keys(f.messages||{}).forEach(function(u){if(i.messages||(i.messages={}),i.messages[u])throw new Error(Zs("duplicate message: %s",u));i.messages[u]=f.messages[u]})}catch(u){r(u);return}a()}}function Lw(t){var e;if(typeof t=="string"&&~t.indexOf(gl.sep)&&ic.existsSync(t)){var r=ic.readFileSync(t,{encoding:"utf8"});try{return JSON.parse(r)}catch{var n={importHook:ic.createSyncImportHook()};Id(t,n,function(s,a){e=s?r:a})}}else e=t;if(typeof e!="string"||e==="null")return e;try{return JSON.parse(e)}catch{try{return rr.readProtocol(e)}catch{try{return rr.readSchema(e)}catch{return e}}}}function rr(t,e){e=e||{},this._tk=new Vi(t),this._ackVoidMessages=!!e.ackVoidMessages,this._implicitTags=!e.delimitedCollections,this._typeRefs=e.typeRefs||Uw}rr.readProtocol=function(t,e){var r=new rr(t,e),n=r._readProtocol();if(n.imports.length)throw new Error("unresolvable import");return n.protocol};rr.readSchema=function(t,e){var r=new rr(t,e),n=r._readJavadoc(),i=r._readType(n===void 0?{}:{doc:n});return r._tk.next({id:"(eof)"}),i};rr.prototype._readProtocol=function(){var t=this._tk,e=[],r=[],n={},i;this._readImports(e);var s={},a=this._readJavadoc();for(a!==void 0&&(s.doc=a),this._readAnnotations(s),t.next({val:"protocol"}),t.next({val:"{",silent:!0})||(s.protocol=t.next({id:"name"}).val,t.next({val:"{"}));!t.next({val:"}",silent:!0});)if(!this._readImports(e)){var o=this._readJavadoc(),c=this._readType(),f=this._readImports(e,!0),u=void 0;if(i=t.pos,!f&&(u=this._readMessage(c))){o!==void 0&&u.schema.doc===void 0&&(u.schema.doc=o);var d=!1;if((u.schema.response==="void"||u.schema.response.type==="void")&&(d=!this._ackVoidMessages&&!u.schema.errors,u.schema.response==="void"?u.schema.response="null":u.schema.response.type="null"),d&&(u.schema["one-way"]=!0),n[u.name])throw new Error(Zs("duplicate message: %s",u.name));n[u.name]=u.schema}else o&&(typeof c=="string"?c={doc:o,type:c}:c.doc===void 0&&(c.doc=o)),r.push(c),t.pos=i,t.next({val:";",silent:!0});o=void 0}return t.next({id:"(eof)"}),r.length&&(s.types=r),Object.keys(n).length&&(s.messages=n),{protocol:s,imports:e}};rr.prototype._readAnnotations=function(t){for(var e=this._tk;e.next({val:"@",silent:!0});){for(var r=[];!e.next({val:"(",silent:!0});)r.push(e.next().val);t[r.join("")]=e.next({id:"json"}).val,e.next({val:")"})}};rr.prototype._readMessage=function(t){var e=this._tk,r={request:[],response:t};this._readAnnotations(r);var n=e.next().val;if(e.next().val==="("){if(!e.next({val:")",silent:!0}))do r.request.push(this._readField());while(!e.next({val:")",silent:!0})&&e.next({val:","}));var i=e.next();switch(i.val){case"throws":r.errors=[];do r.errors.push(this._readType());while(!e.next({val:";",silent:!0})&&e.next({val:","}));break;case"oneway":r["one-way"]=!0,e.next({val:";"});break;case";":break;default:throw e.error("invalid message suffix",i)}return{name:n,schema:r}}};rr.prototype._readJavadoc=function(){var t=this._tk.next({id:"javadoc",emitJavadoc:!0,silent:!0});if(t)return t.val};rr.prototype._readField=function(){var t=this._tk,e=this._readJavadoc(),r={type:this._readType()};return e!==void 0&&r.doc===void 0&&(r.doc=e),this._readAnnotations(r),r.name=t.next({id:"name"}).val,t.next({val:"=",silent:!0})&&(r.default=t.next({id:"json"}).val),r};rr.prototype._readType=function(t){switch(t=t||{},this._readAnnotations(t),t.type=this._tk.next({id:"name"}).val,t.type){case"record":case"error":return this._readRecord(t);case"fixed":return this._readFixed(t);case"enum":return this._readEnum(t);case"map":return this._readMap(t);case"array":return this._readArray(t);case"union":if(Object.keys(t).length>1)throw new Error("union annotations are not supported");return this._readUnion();default:var e=this._typeRefs[t.type];return e&&(delete t.type,rx.copyOwnProperties(e,t)),Object.keys(t).length>1?t:t.type}};rr.prototype._readFixed=function(t){var e=this._tk;return e.next({val:"(",silent:!0})||(t.name=e.next({id:"name"}).val,e.next({val:"("})),t.size=parseInt(e.next({id:"number"}).val),e.next({val:")"}),t};rr.prototype._readMap=function(t){var e=this._tk,r=this._implicitTags,n=e.next({val:"<",silent:r})===void 0;return t.values=this._readType(),e.next({val:">",silent:n}),t};rr.prototype._readArray=function(t){var e=this._tk,r=this._implicitTags,n=e.next({val:"<",silent:r})===void 0;return t.items=this._readType(),e.next({val:">",silent:n}),t};rr.prototype._readEnum=function(t){var e=this._tk;e.next({val:"{",silent:!0})||(t.name=e.next({id:"name"}).val,e.next({val:"{"})),t.symbols=[];do t.symbols.push(e.next().val);while(!e.next({val:"}",silent:!0})&&e.next({val:","}));return t};rr.prototype._readUnion=function(){var t=this._tk,e=[];t.next({val:"{"});do e.push(this._readType());while(!t.next({val:"}",silent:!0})&&t.next({val:","}));return e};rr.prototype._readRecord=function(t){var e=this._tk;for(e.next({val:"{",silent:!0})||(t.name=e.next({id:"name"}).val,e.next({val:"{"})),t.fields=[];!e.next({val:"}",silent:!0});)t.fields.push(this._readField()),e.next({val:";"});return t};rr.prototype._readImports=function(t,e){for(var r=this._tk,n=0,i=r.pos;r.next({val:"import",silent:!0});){if(!n&&e&&r.next({val:"(",silent:!0})){r.pos=i;return}var s=r.next({id:"name"}).val,a=JSON.parse(r.next({id:"string"}).val);r.next({val:";"}),t.push({kind:s,name:a}),n++}return n};function Vi(t){this._str=t,this.pos=0}Vi.prototype.next=function(t){var e={pos:this.pos,id:void 0,val:void 0},r=this._skip(t&&t.emitJavadoc);if(r)e.id="javadoc",e.val=r;else{var n=this.pos,i=this._str,s=i.charAt(n);if(!s)e.id="(eof)";else if(t&&t.id==="json"?(e.id="json",this.pos=this._endOfJson()):s==='"'?(e.id="string",this.pos=this._endOfString()):/[0-9]/.test(s)?(e.id="number",this.pos=this._endOf(/[0-9]/)):/[`A-Za-z_.]/.test(s)?(e.id="name",this.pos=this._endOf(/[`A-Za-z0-9_.]/)):(e.id="operator",this.pos=n+1),e.val=i.slice(n,this.pos),e.id==="json")try{e.val=JSON.parse(e.val)}catch{throw this.error("invalid JSON",e)}else e.id==="name"&&(e.val=e.val.replace(/`/g,""))}var a;if(t&&t.id&&t.id!==e.id?a=this.error(Zs("expected ID %s",t.id),e):t&&t.val&&t.val!==e.val&&(a=this.error(Zs("expected value %s",t.val),e)),a)if(t&&t.silent){this.pos=e.pos;return}else throw a;else return e};Vi.prototype.error=function(t,e){var r=typeof e!="number",n=r?e.pos:e,i=this._str,s=1,a=0,o;for(o=0;o<n;o++)i.charAt(o)===`
`&&(s++,a=o);var c=r?Zs("invalid token %j: %s",e,t):t,f=new Error(c);return f.token=r?e:void 0,f.lineNum=s,f.colNum=n-a,f};Vi.prototype._skip=function(t){for(var e=this._str,r=!1,n,i;(i=e.charAt(this.pos))&&/\s/.test(i);)this.pos++;if(n=this.pos,i==="/")switch(e.charAt(this.pos+1)){case"/":for(this.pos+=2;(i=e.charAt(this.pos))&&i!==`
`;)this.pos++;return this._skip(t);case"*":for(this.pos+=2,e.charAt(this.pos)==="*"&&(r=!0);i=e.charAt(this.pos++);)if(i==="*"&&e.charAt(this.pos)==="/")return this.pos++,r&&t?Fw(e.slice(n+3,this.pos-2)):this._skip(t);throw this.error("unterminated comment",n)}};Vi.prototype._endOf=function(t){for(var e=this.pos,r=this._str;t.test(r.charAt(e));)e++;return e};Vi.prototype._endOfString=function(){for(var t=this.pos+1,e=this._str,r;r=e.charAt(t);){if(r==='"')return t+1;r==="\\"?t+=2:t++}throw this.error("unterminated string",t-1)};Vi.prototype._endOfJson=function(){var t=rx.jsonEnd(this._str,this.pos);if(t<0)throw this.error("invalid JSON",t);return t};function Fw(t){for(var e=t.replace(/^[ \t]+|[ \t]+$/g,"").split(`
`).map(function(r,n){return n?r.replace(/^\s*\*\s?/,""):r});!e[0];)e.shift();for(;!e[e.length-1];)e.pop();return e.join(`
`)}var jw={Tokenizer:Vi,assembleProtocol:Id,read:Lw,readProtocol:rr.readProtocol,readSchema:rr.readSchema};(function(t){var e=Cw,r=Rw,n=jw,i=ca;function s(a,o){var c=n.read(a);return c.protocol?r.Service.forProtocol(c,o):e.Type.forSchema(c,o)}t.exports={Service:r.Service,assembleProtocol:n.assembleProtocol,discoverProtocol:r.discoverProtocol,parse:s,readProtocol:n.readProtocol,readSchema:n.readSchema},i.copyOwnProperties(e,t.exports)})(aw);var ei=md,kr=ca,Ji=Fc,Eo=sa,nx=Gl,Yc={namespace:"org.apache.avro.file"},A0=ei.Type.forSchema("long",Yc),ix=ei.Type.forSchema({type:"map",values:"bytes"},Yc),Nd=ei.Type.forSchema({name:"Header",type:"record",fields:[{name:"magic",type:{type:"fixed",name:"Magic",size:4}},{name:"meta",type:ix},{name:"sync",type:{type:"fixed",name:"Sync",size:16}}]},Yc),sx=ei.Type.forSchema({name:"Block",type:"record",fields:[{name:"count",type:"long"},{name:"data",type:"bytes"},{name:"sync",type:"Sync"}]},Yc),Ka=kr.bufferFrom("Obj"),Xc=Eo.format,Qa=kr.Tap;function Qc(t,e){e=e||{};var r=!!e.noDecode;Ji.Duplex.call(this,{readableObjectMode:!r,allowHalfOpen:!1}),this._type=ei.Type.forSchema(t),this._tap=new Qa(kr.newBuffer(0)),this._writeCb=null,this._needPush=!1,this._readValue=ox(r,this._type),this._finished=!1,this.on("finish",function(){this._finished=!0,this._read()})}Eo.inherits(Qc,Ji.Duplex);Qc.prototype._write=function(t,e,r){this._writeCb=r;var n=this._tap;n.buf=Buffer.concat([n.buf.slice(n.pos),t]),n.pos=0,this._needPush&&(this._needPush=!1,this._read())};Qc.prototype._read=function(){this._needPush=!1;var t=this._tap,e=t.pos,r=this._readValue(t);t.isValid()?this.push(r):this._finished?this.push(null):(t.pos=e,this._needPush=!0,this._writeCb&&this._writeCb())};function Un(t){t=t||{};var e=!!t.noDecode;Ji.Duplex.call(this,{allowHalfOpen:!0,readableObjectMode:!e}),this._rType=t.readerSchema!==void 0?ei.Type.forSchema(t.readerSchema):void 0,this._wType=null,this._codecs=t.codecs,this._codec=void 0,this._parseHook=t.parseHook,this._tap=new Qa(kr.newBuffer(0)),this._blockTap=new Qa(kr.newBuffer(0)),this._syncMarker=null,this._readValue=null,this._noDecode=e,this._queue=new kr.OrderedQueue,this._decompress=null,this._index=0,this._remaining=void 0,this._needPush=!1,this._finished=!1,this.on("finish",function(){this._finished=!0,this._needPush&&this._read()})}Eo.inherits(Un,Ji.Duplex);Un.defaultCodecs=function(){return{null:function(t,e){e(null,t)},deflate:nx.inflateRaw}};Un.getDefaultCodecs=Un.defaultCodecs;Un.prototype._decodeHeader=function(){var t=this._tap;if(t.buf.length<Ka.length)return!1;if(!Ka.equals(t.buf.slice(0,Ka.length)))return this.emit("error",new Error("invalid magic bytes")),!1;var e=Nd._read(t);if(!t.isValid())return!1;this._codec=(e.meta["avro.codec"]||"null").toString();var r=this._codecs||Un.getDefaultCodecs();if(this._decompress=r[this._codec],!this._decompress){this.emit("error",new Error(Xc("unknown codec: %s",this._codec)));return}try{var n=JSON.parse(e.meta["avro.schema"].toString());this._parseHook&&(n=this._parseHook(n)),this._wType=ei.Type.forSchema(n)}catch(i){this.emit("error",i);return}return this._readValue=ox(this._noDecode,this._wType,this._rType),this._syncMarker=e.sync,this.emit("metadata",this._wType,this._codec,e),!0};Un.prototype._write=function(t,e,r){var n=this._tap;if(n.buf=Buffer.concat([n.buf,t]),n.pos=0,!this._decodeHeader()){process.nextTick(r);return}this._write=this._writeChunk,this._write(kr.newBuffer(0),e,r)};Un.prototype._writeChunk=function(t,e,r){var n=this._tap;n.buf=Buffer.concat([n.buf.slice(n.pos),t]),n.pos=0;for(var i=1,s;s=Kw(n);){if(!this._syncMarker.equals(s.sync)){this.emit("error",new Error("invalid sync marker"));return}i++,this._decompress(s.data,this._createBlockCallback(s.count,a))}a();function a(){--i||r()}};Un.prototype._createBlockCallback=function(t,e){var r=this,n=this._index++;return function(i,s){if(i){var a=new Error(Xc("%s codec decompression error",r._codec));a.cause=i,r.emit("error",a),e()}else r._queue.push(new ax(n,s,e,t)),r._needPush&&r._read()}};Un.prototype._read=function(){this._needPush=!1;var t=this._blockTap;if(!this._remaining){var e=this._queue.pop();if(!e||!e.count){this._finished?this.push(null):this._needPush=!0,e&&e.cb();return}e.cb(),this._remaining=e.count,t.buf=e.buf,t.pos=0}this._remaining--,this.push(this._readValue(t))};function Zc(t,e){e=e||{},Ji.Transform.call(this,{writableObjectMode:!0,allowHalfOpen:!1}),this._type=ei.Type.forSchema(t),this._writeValue=function(r,n){try{this._type._write(r,n)}catch(i){this.emit("error",i)}},this._tap=new Qa(kr.newBuffer(e.batchSize||65536))}Eo.inherits(Zc,Ji.Transform);Zc.prototype._transform=function(t,e,r){var n=this._tap,i=n.buf,s=n.pos;if(this._writeValue(n,t),!n.isValid()){s&&this.push(qw(n.buf,0,s));var a=n.pos-s;a>i.length&&(n.buf=kr.newBuffer(2*a)),n.pos=0,this._writeValue(n,t)}r()};Zc.prototype._flush=function(t){var e=this._tap,r=e.pos;r&&this.push(e.buf.slice(0,r)),t()};function Ln(t,e){e=e||{},Ji.Duplex.call(this,{allowHalfOpen:!0,writableObjectMode:!0});var r;if(ei.Type.isType(t)?(r=t,t=void 0):r=ei.Type.forSchema(t),this._schema=t,this._type=r,this._writeValue=function(i,s){try{this._type._write(i,s)}catch(a){this.emit("error",a)}},this._blockSize=e.blockSize||65536,this._tap=new Qa(kr.newBuffer(this._blockSize)),this._codecs=e.codecs,this._codec=e.codec||"null",this._blockCount=0,this._syncMarker=e.syncMarker||new kr.Lcg().nextBuffer(16),this._queue=new kr.OrderedQueue,this._pending=0,this._finished=!1,this._needHeader=!1,this._needPush=!1,this._metadata=e.metadata||{},!ix.isValid(this._metadata))throw new Error("invalid metadata");var n=this._codec;if(this._compress=(this._codecs||Ln.getDefaultCodecs())[n],!this._compress)throw new Error(Xc("unsupported codec: %s",n));switch(e.omitHeader!==void 0&&(e.writeHeader=e.omitHeader?"never":"auto"),e.writeHeader){case!1:case"never":break;case void 0:case"auto":this._needHeader=!0;break;default:this._writeHeader()}this.on("finish",function(){this._finished=!0,this._blockCount?this._flushChunk():this._finished&&this._needPush&&this.push(null)})}Eo.inherits(Ln,Ji.Duplex);Ln.defaultCodecs=function(){return{null:function(t,e){e(null,t)},deflate:nx.deflateRaw}};Ln.getDefaultCodecs=Ln.defaultCodecs;Ln.prototype._writeHeader=function(){var t=JSON.stringify(this._schema?this._schema:this._type.getSchema({exportAttrs:!0})),e=kr.copyOwnProperties(this._metadata,{"avro.schema":kr.bufferFrom(t),"avro.codec":kr.bufferFrom(this._codec)},!0),r=Nd.getRecordConstructor(),n=new r(Ka,e,this._syncMarker);this.push(n.toBuffer())};Ln.prototype._write=function(t,e,r){this._needHeader&&(this._writeHeader(),this._needHeader=!1);var n=this._tap,i=n.pos,s=!1;if(this._writeValue(n,t),!n.isValid()){i&&(this._flushChunk(i,r),s=!0);var a=n.pos-i;a>this._blockSize&&(this._blockSize=a*2),n.buf=kr.newBuffer(this._blockSize),n.pos=0,this._writeValue(n,t)}this._blockCount++,s||r()};Ln.prototype._flushChunk=function(t,e){var r=this._tap;t=t||r.pos,this._compress(r.buf.slice(0,t),this._createBlockCallback(e)),this._blockCount=0};Ln.prototype._read=function(){var t=this,e=this._queue.pop();if(!e){this._finished&&!this._pending?process.nextTick(function(){t.push(null)}):this._needPush=!0;return}this.push(A0.toBuffer(e.count,!0)),this.push(A0.toBuffer(e.buf.length,!0)),this.push(e.buf),this.push(this._syncMarker),this._finished||e.cb()};Ln.prototype._createBlockCallback=function(t){var e=this,r=this._index++,n=this._blockCount;return this._pending++,function(i,s){if(i){var a=new Error(Xc("%s codec compression error",e._codec));a.cause=i,e.emit("error",a);return}e._pending--,e._queue.push(new ax(r,s,t,n)),e._needPush&&(e._needPush=!1,e._read())}};function ax(t,e,r,n){this.index=t,this.buf=e,this.cb=r,this.count=n|0}function Kw(t){var e=t.pos,r=sx._read(t);return t.isValid()?r:(t.pos=e,null)}function ox(t,e,r){if(t)return function(i){return function(s){var a=s.pos;return i(s),s.buf.slice(a,s.pos)}}(e._skip);if(r){var n=r.createResolver(e);return function(i){return n._read(i)}}else return function(i){return e._read(i)}}function qw(t,e,r){var n=kr.newBuffer(r);return t.copy(n,0,e,e+r),n}var $w={BLOCK_TYPE:sx,HEADER_TYPE:Nd,MAGIC_BYTES:Ka,streams:{BlockDecoder:Un,BlockEncoder:Ln,RawDecoder:Qc,RawEncoder:Zc}};(function(t){var e=fl,r=$w,n=ca,i=Fc,s=sa;function a(u,d){i.Readable.call(this),d=d||{},this._batchSize=d.batchSize||65536,this._blob=u,this._pos=0}s.inherits(a,i.Readable),a.prototype._read=function(){var u=this._pos;if(u>=this._blob.size){this.push(null);return}this._pos+=this._batchSize;var d=this._blob.slice(u,this._pos,this._blob.type),g=new FileReader,b=this;g.addEventListener("loadend",function S(_){g.removeEventListener("loadend",S,!1),_.error?b.emit("error",_.error):b.push(n.bufferFrom(g.result))},!1),g.readAsArrayBuffer(d)};function o(){i.Transform.call(this,{readableObjectMode:!0}),this._bufs=[]}s.inherits(o,i.Transform),o.prototype._transform=function(u,d,g){this._bufs.push(u),g()},o.prototype._flush=function(u){this.push(new Blob(this._bufs,{type:"application/octet-binary"})),u()};function c(u,d){return new a(u).pipe(new r.streams.BlockDecoder(d))}function f(u,d){var g=new r.streams.BlockEncoder(u,d),b=new o;return g.pipe(b),new i.Duplex({objectMode:!0,read:function(){var S=b.read();S?y(S):b.once("readable",y);var _=this;function y(E){_.push(E||b.read()),_.push(null)}},write:function(S,_,y){return g.write(S,_,y)}}).on("finish",function(){g.end()})}t.exports={createBlobDecoder:c,createBlobEncoder:f,streams:r.streams},n.copyOwnProperties(e,t.exports)})(sw);(function(t){var e=H&&H.__createBinding||(Object.create?function(a,o,c,f){f===void 0&&(f=c),Object.defineProperty(a,f,{enumerable:!0,get:function(){return o[c]}})}:function(a,o,c,f){f===void 0&&(f=c),a[f]=o[c]}),r=H&&H.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),n=H&&H.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var c in a)c!=="default"&&Object.prototype.hasOwnProperty.call(a,c)&&e(o,a,c);return r(o,a),o};Object.defineProperty(t,"__esModule",{value:!0}),t.serializeTags=t.tagsParser=t.tagParser=void 0;const i=n(cl);t.tagParser=i.Type.forSchema({type:"record",name:"Tag",fields:[{name:"name",type:"string"},{name:"value",type:"string"}]}),t.tagsParser=i.Type.forSchema({type:"array",items:t.tagParser});function s(a){if(a.length==0)return new Uint8Array(0);let o;try{o=t.tagsParser.toBuffer(a)}catch{throw new Error("Incorrect tag format used. Make sure your tags are { name: string!, value: string! }[]")}return Uint8Array.from(o)}t.serializeTags=s})(pd);var la={},ef={};Object.defineProperty(ef,"__esModule",{value:!0});ef.Signer=void 0;let Hw=class{static verify(e){throw new Error("You must implement verify method on child")}};ef.Signer=Hw;var tf={},Ao={};const cx=Hl(J1);var ys={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SIG_CONFIG=t.SignatureConfig=void 0;var e;(function(r){r[r.ARWEAVE=1]="ARWEAVE",r[r.ED25519=2]="ED25519",r[r.ETHEREUM=3]="ETHEREUM",r[r.SOLANA=4]="SOLANA"})(e=t.SignatureConfig||(t.SignatureConfig={})),t.SIG_CONFIG={[e.ARWEAVE]:{sigLength:512,pubLength:512,sigName:"arweave"},[e.ED25519]:{sigLength:64,pubLength:32,sigName:"ed25519"},[e.ETHEREUM]:{sigLength:65,pubLength:65,sigName:"ethereum"},[e.SOLANA]:{sigLength:64,pubLength:32,sigName:"solana"}}})(ys);var zw=H&&H.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Gw=H&&H.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Vw=H&&H.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&zw(e,t,r);return Gw(e,t),e},Jw=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ao,"__esModule",{value:!0});const Ww=Jw(wn),S0=Vw(cx),T0=ys;class Yw{constructor(e,r){this._key=e,this.pk=r,this.ownerLength=T0.SIG_CONFIG[2].pubLength,this.signatureLength=T0.SIG_CONFIG[2].sigLength,this.signatureType=2}get publicKey(){return this._publicKey}get key(){return new Uint8Array(0)}sign(e){return S0.sign(Buffer.from(e),Buffer.from(this.key))}static async verify(e,r,n){let i=e;return typeof e=="string"&&(i=Ww.default.toBuffer(e)),S0.verify(Buffer.from(n),Buffer.from(r),Buffer.from(i))}}Ao.default=Yw;var da={},Rd={},fx=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};const Xw=fx(Fe),Ci=zl,Qw=fx(ym);function ux(t){return t=Zw(t),Qw.default("keccak256").update(t).digest()}function Zw(t){if(!Ci.Buffer.isBuffer(t))if(Array.isArray(t))t=Ci.Buffer.from(t);else if(typeof t=="string")e2(t)?t=Ci.Buffer.from(lx(t2(t)),"hex"):t=Ci.Buffer.from(t);else if(typeof t=="number")t=n2(t);else if(t==null)t=Ci.Buffer.allocUnsafe(0);else if(Xw.default.isBN(t))t=t.toArrayLike(Ci.Buffer);else if(t.toArray)t=Ci.Buffer.from(t.toArray());else throw new Error("invalid type");return t}function e2(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}function lx(t){if(typeof t!="string")throw new Error(`while padding to even, value must be string, is currently ${typeof t}, while padToEven.`);return t.length%2&&(t=`0${t}`),t}function t2(t){return typeof t!="string"?t:r2(t)?t.slice(2):t}function r2(t){if(typeof t!="string")throw new Error("value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"}function n2(t){const e=i2(t);return Ci.Buffer.from(lx(e.slice(2)),"hex")}function i2(t){return`0x${t.toString(16)}`}typeof window<"u"&&(window.keccak256=ux);var dx=ux,Bd=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rd,"__esModule",{value:!0});const s2=Bd(wn),k0=Bd(ry),va=ys,P0=Bd(dx);class a2{constructor(e,r){this._key=e,this.ownerLength=va.SIG_CONFIG[va.SignatureConfig.ETHEREUM].pubLength,this.signatureLength=va.SIG_CONFIG[va.SignatureConfig.ETHEREUM].sigLength,this.signatureType=va.SignatureConfig.ETHEREUM,this.pk=r.toString("hex")}get publicKey(){return Buffer.alloc(0)}get key(){return Buffer.from(this._key,"hex")}static async verify(e,r,n){let i=e;typeof e=="string"&&(i=s2.default.toBuffer(e));let s=!1;try{s=k0.default.ecdsaVerify(n,P0.default(Buffer.from(r)),i)}catch{}return s}sign(e){return k0.default.ecdsaSign(P0.default(Buffer.from(e)),Buffer.from(this.key)).signature}}Rd.default=a2;const o2="logger/5.7.0";let C0=!1,I0=!1;const sc={debug:1,default:2,info:2,warning:3,error:4,off:5};let N0=sc.default,eu=null;function c2(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}const R0=c2();var yl;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(yl||(yl={}));var un;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(un||(un={}));const B0="0123456789abcdef";class j{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();sc[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(N0>sc[n])&&console.log.apply(console,r)}debug(...e){this._log(j.levels.DEBUG,e)}info(...e){this._log(j.levels.INFO,e)}warn(...e){this._log(j.levels.WARNING,e)}makeError(e,r,n){if(I0)return this.makeError("censored error",r,{});r||(r=j.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(c=>{const f=n[c];try{if(f instanceof Uint8Array){let u="";for(let d=0;d<f.length;d++)u+=B0[f[d]>>4],u+=B0[f[d]&15];i.push(c+"=Uint8Array(0x"+u+")")}else i.push(c+"="+JSON.stringify(f))}catch{i.push(c+"="+JSON.stringify(n[c].toString()))}}),i.push(`code=${r}`),i.push(`version=${this.version}`);const s=e;let a="";switch(r){case un.NUMERIC_FAULT:{a="NUMERIC_FAULT";const c=e;switch(c){case"overflow":case"underflow":case"division-by-zero":a+="-"+c;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result";break}break}case un.CALL_EXCEPTION:case un.INSUFFICIENT_FUNDS:case un.MISSING_NEW:case un.NONCE_EXPIRED:case un.REPLACEMENT_UNDERPRICED:case un.TRANSACTION_REPLACED:case un.UNPREDICTABLE_GAS_LIMIT:a=r;break}a&&(e+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const o=new Error(e);return o.reason=s,o.code=r,Object.keys(n).forEach(function(c){o[c]=n[c]}),o}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,j.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,i){e||this.throwError(r,n,i)}assertArgument(e,r,n,i){e||this.throwArgumentError(r,n,i)}checkNormalize(e){R0&&this.throwError("platform missing String.prototype.normalize",j.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:R0})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,j.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,j.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,j.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,j.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",j.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",j.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",j.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return eu||(eu=new j(o2)),eu}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",j.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),C0){if(!e)return;this.globalLogger().throwError("error censorship permanent",j.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}I0=!!e,C0=!!r}static setLogLevel(e){const r=sc[e.toLowerCase()];if(r==null){j.globalLogger().warn("invalid log level - "+e);return}N0=r}static from(e){return new j(e)}}j.errors=un;j.levels=yl;const f2="bytes/5.7.0",Zt=new j(f2);function hx(t){return!!t.toHexString}function Ws(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return Ws(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function So(t){return He(t)&&!(t.length%2)||Wi(t)}function M0(t){return typeof t=="number"&&t==t&&t%1===0}function Wi(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!M0(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!M0(r)||r<0||r>=256)return!1}return!0}function de(t,e){if(e||(e={}),typeof t=="number"){Zt.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),Ws(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),hx(t)&&(t=t.toHexString()),He(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":Zt.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let i=0;i<r.length;i+=2)n.push(parseInt(r.substring(i,i+2),16));return Ws(new Uint8Array(n))}return Wi(t)?Ws(new Uint8Array(t)):Zt.throwArgumentError("invalid arrayify value","value",t)}function qt(t){const e=t.map(i=>de(i)),r=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(r);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),Ws(n)}function Yn(t){let e=de(t);if(e.length===0)return e;let r=0;for(;r<e.length&&e[r]===0;)r++;return r&&(e=e.slice(r)),e}function qa(t,e){t=de(t),t.length>e&&Zt.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),Ws(r)}function He(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const tu="0123456789abcdef";function me(t,e){if(e||(e={}),typeof t=="number"){Zt.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=tu[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),hx(t))return t.toHexString();if(He(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":Zt.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(Wi(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=tu[(i&240)>>4]+tu[i&15]}return r}return Zt.throwArgumentError("invalid hexlify value","value",t)}function ti(t){if(typeof t!="string")t=me(t);else if(!He(t)||t.length%2)return null;return(t.length-2)/2}function ar(t,e,r){return typeof t!="string"?t=me(t):(!He(t)||t.length%2)&&Zt.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function $r(t){let e="0x";return t.forEach(r=>{e+=me(r).substring(2)}),e}function To(t){const e=px(me(t,{hexPad:"left"}));return e==="0x"?"0x0":e}function px(t){typeof t!="string"&&(t=me(t)),He(t)||Zt.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&t[e]==="0";)e++;return"0x"+t.substring(e)}function $t(t,e){for(typeof t!="string"?t=me(t):He(t)||Zt.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&Zt.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function xs(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(So(t)){let r=de(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=me(r.slice(0,32)),e.s=me(r.slice(32,64))):r.length===65?(e.r=me(r.slice(0,32)),e.s=me(r.slice(32,64)),e.v=r[64]):Zt.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:Zt.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=me(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const i=qa(de(e._vs),32);e._vs=me(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Zt.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const a=me(i);e.s==null?e.s=a:e.s!==a&&Zt.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?Zt.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Zt.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!He(e.r)?Zt.throwArgumentError("signature missing or invalid r","signature",t):e.r=$t(e.r,32),e.s==null||!He(e.s)?Zt.throwArgumentError("signature missing or invalid s","signature",t):e.s=$t(e.s,32);const r=de(e.s);r[0]>=128&&Zt.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=me(r);e._vs&&(He(e._vs)||Zt.throwArgumentError("signature invalid _vs","signature",t),e._vs=$t(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&Zt.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function xl(t){return t=xs(t),me(qt([t.r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}const gx="bignumber/5.7.0";var Za=Fe.BN;const li=new j(gx),ru={},O0=9007199254740991;function u2(t){return t!=null&&(le.isBigNumber(t)||typeof t=="number"&&t%1===0||typeof t=="string"&&!!t.match(/^-?[0-9]+$/)||He(t)||typeof t=="bigint"||Wi(t))}let D0=!1;class le{constructor(e,r){e!==ru&&li.throwError("cannot call constructor directly; use BigNumber.from",j.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Qr(rt(this).fromTwos(e))}toTwos(e){return Qr(rt(this).toTwos(e))}abs(){return this._hex[0]==="-"?le.from(this._hex.substring(1)):this}add(e){return Qr(rt(this).add(rt(e)))}sub(e){return Qr(rt(this).sub(rt(e)))}div(e){return le.from(e).isZero()&&bn("division-by-zero","div"),Qr(rt(this).div(rt(e)))}mul(e){return Qr(rt(this).mul(rt(e)))}mod(e){const r=rt(e);return r.isNeg()&&bn("division-by-zero","mod"),Qr(rt(this).umod(r))}pow(e){const r=rt(e);return r.isNeg()&&bn("negative-power","pow"),Qr(rt(this).pow(r))}and(e){const r=rt(e);return(this.isNegative()||r.isNeg())&&bn("unbound-bitwise-result","and"),Qr(rt(this).and(r))}or(e){const r=rt(e);return(this.isNegative()||r.isNeg())&&bn("unbound-bitwise-result","or"),Qr(rt(this).or(r))}xor(e){const r=rt(e);return(this.isNegative()||r.isNeg())&&bn("unbound-bitwise-result","xor"),Qr(rt(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&bn("negative-width","mask"),Qr(rt(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&bn("negative-width","shl"),Qr(rt(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&bn("negative-width","shr"),Qr(rt(this).shrn(e))}eq(e){return rt(this).eq(rt(e))}lt(e){return rt(this).lt(rt(e))}lte(e){return rt(this).lte(rt(e))}gt(e){return rt(this).gt(rt(e))}gte(e){return rt(this).gte(rt(e))}isNegative(){return this._hex[0]==="-"}isZero(){return rt(this).isZero()}toNumber(){try{return rt(this).toNumber()}catch{bn("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return li.throwError("this platform does not support BigInt",j.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?D0||(D0=!0,li.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?li.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",j.errors.UNEXPECTED_ARGUMENT,{}):li.throwError("BigNumber.toString does not accept parameters",j.errors.UNEXPECTED_ARGUMENT,{})),rt(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof le)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new le(ru,eo(e)):e.match(/^-?[0-9]+$/)?new le(ru,eo(new Za(e))):li.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&bn("underflow","BigNumber.from",e),(e>=O0||e<=-O0)&&bn("overflow","BigNumber.from",e),le.from(String(e));const r=e;if(typeof r=="bigint")return le.from(r.toString());if(Wi(r))return le.from(me(r));if(r)if(r.toHexString){const n=r.toHexString();if(typeof n=="string")return le.from(n)}else{let n=r._hex;if(n==null&&r.type==="BigNumber"&&(n=r.hex),typeof n=="string"&&(He(n)||n[0]==="-"&&He(n.substring(1))))return le.from(n)}return li.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function eo(t){if(typeof t!="string")return eo(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&li.throwArgumentError("invalid hex","value",t),t=eo(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function Qr(t){return le.from(eo(t))}function rt(t){const e=le.from(t).toHexString();return e[0]==="-"?new Za("-"+e.substring(3),16):new Za(e.substring(2),16)}function bn(t,e,r){const n={fault:t,operation:e};return r!=null&&(n.value=r),li.throwError(t,j.errors.NUMERIC_FAULT,n)}function l2(t){return new Za(t,36).toString(16)}function d2(t){return new Za(t,16).toString(36)}const Hr=new j(gx),$a={},yx=le.from(0),xx=le.from(-1);function bx(t,e,r,n){const i={fault:e,operation:r};return n!==void 0&&(i.value=n),Hr.throwError(t,j.errors.NUMERIC_FAULT,i)}let Ha="0";for(;Ha.length<256;)Ha+=Ha;function Md(t){if(typeof t!="number")try{t=le.from(t).toNumber()}catch{}return typeof t=="number"&&t>=0&&t<=256&&!(t%1)?"1"+Ha.substring(0,t):Hr.throwArgumentError("invalid decimal size","decimals",t)}function ac(t,e){e==null&&(e=0);const r=Md(e);t=le.from(t);const n=t.lt(yx);n&&(t=t.mul(xx));let i=t.mod(r).toString();for(;i.length<r.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=t.div(r).toString();return r.length===1?t=s:t=s+"."+i,n&&(t="-"+t),t}function qn(t,e){e==null&&(e=0);const r=Md(e);(typeof t!="string"||!t.match(/^-?[0-9.]+$/))&&Hr.throwArgumentError("invalid decimal value","value",t);const n=t.substring(0,1)==="-";n&&(t=t.substring(1)),t==="."&&Hr.throwArgumentError("missing value","value",t);const i=t.split(".");i.length>2&&Hr.throwArgumentError("too many decimal points","value",t);let s=i[0],a=i[1];for(s||(s="0"),a||(a="0");a[a.length-1]==="0";)a=a.substring(0,a.length-1);for(a.length>r.length-1&&bx("fractional component exceeds decimals","underflow","parseFixed"),a===""&&(a="0");a.length<r.length-1;)a+="0";const o=le.from(s),c=le.from(a);let f=o.mul(r).add(c);return n&&(f=f.mul(xx)),f}class Ys{constructor(e,r,n,i){e!==$a&&Hr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",j.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=n,this.decimals=i,this.name=(r?"":"u")+"fixed"+String(n)+"x"+String(i),this._multiplier=Md(i),Object.freeze(this)}static from(e){if(e instanceof Ys)return e;typeof e=="number"&&(e=`fixed128x${e}`);let r=!0,n=128,i=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")r=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);s||Hr.throwArgumentError("invalid fixed format","format",e),r=s[1]!=="u",n=parseInt(s[2]),i=parseInt(s[3])}}else if(e){const s=(a,o,c)=>e[a]==null?c:(typeof e[a]!==o&&Hr.throwArgumentError("invalid fixed format ("+a+" not "+o+")","format."+a,e[a]),e[a]);r=s("signed","boolean",r),n=s("width","number",n),i=s("decimals","number",i)}return n%8&&Hr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),i>80&&Hr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new Ys($a,r,n,i)}}class hr{constructor(e,r,n,i){e!==$a&&Hr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",j.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=r,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Hr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const r=qn(this._value,this.format.decimals),n=qn(e._value,e.format.decimals);return hr.fromValue(r.add(n),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const r=qn(this._value,this.format.decimals),n=qn(e._value,e.format.decimals);return hr.fromValue(r.sub(n),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const r=qn(this._value,this.format.decimals),n=qn(e._value,e.format.decimals);return hr.fromValue(r.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const r=qn(this._value,this.format.decimals),n=qn(e._value,e.format.decimals);return hr.fromValue(r.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=hr.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return this.isNegative()&&n&&(r=r.subUnsafe(U0.toFormat(r.format))),r}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=hr.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return!this.isNegative()&&n&&(r=r.addUnsafe(U0.toFormat(r.format))),r}round(e){e==null&&(e=0);const r=this.toString().split(".");if(r.length===1&&r.push("0"),(e<0||e>80||e%1)&&Hr.throwArgumentError("invalid decimal count","decimals",e),r[1].length<=e)return this;const n=hr.from("1"+Ha.substring(0,e),this.format),i=h2.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(i).floor().divUnsafe(n)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&Hr.throwArgumentError("invalid byte width","width",e);const r=le.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return $t(r,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return hr.fromString(this._value,e)}static fromValue(e,r,n){return n==null&&r!=null&&!u2(r)&&(n=r,r=null),r==null&&(r=0),n==null&&(n="fixed"),hr.fromString(ac(e,r),Ys.from(n))}static fromString(e,r){r==null&&(r="fixed");const n=Ys.from(r),i=qn(e,n.decimals);!n.signed&&i.lt(yx)&&bx("unsigned value cannot be negative","overflow","value",e);let s=null;n.signed?s=i.toTwos(n.width).toHexString():(s=i.toHexString(),s=$t(s,n.width/8));const a=ac(i,n.decimals);return new hr($a,s,a,n)}static fromBytes(e,r){r==null&&(r="fixed");const n=Ys.from(r);if(de(e).length>n.width/8)throw new Error("overflow");let i=le.from(e);n.signed&&(i=i.fromTwos(n.width));const s=i.toTwos((n.signed?0:1)+n.width).toHexString(),a=ac(i,n.decimals);return new hr($a,s,a,n)}static from(e,r){if(typeof e=="string")return hr.fromString(e,r);if(Wi(e))return hr.fromBytes(e,r);try{return hr.fromValue(e,0,r)}catch(n){if(n.code!==j.errors.INVALID_ARGUMENT)throw n}return Hr.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const U0=hr.from(1),h2=hr.from("0.5"),p2="properties/5.7.0";var g2=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const Ec=new j(p2);function te(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function Sr(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function er(t){return g2(this,void 0,void 0,function*(){const e=Object.keys(t).map(n=>{const i=t[n];return Promise.resolve(i).then(s=>({key:n,value:s}))});return(yield Promise.all(e)).reduce((n,i)=>(n[i.key]=i.value,n),{})})}function Od(t,e){(!t||typeof t!="object")&&Ec.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(r=>{e[r]||Ec.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)})}function Ht(t){const e={};for(const r in t)e[r]=t[r];return e}const y2={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function mx(t){if(t==null||y2[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch{continue}if(!mx(n))return!1}return!0}return Ec.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function x2(t){if(mx(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>zr(e)));if(typeof t=="object"){const e={};for(const r in t){const n=t[r];n!==void 0&&te(e,r,zr(n))}return e}return Ec.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function zr(t){return x2(t)}class bs{constructor(e){for(const r in e)this[r]=zr(e[r])}}const ko="abi/5.7.0",ot=new j(ko),fs={};let L0={calldata:!0,memory:!0,storage:!0},b2={calldata:!0,memory:!0};function Ho(t,e){if(t==="bytes"||t==="string"){if(L0[e])return!0}else if(t==="address"){if(e==="payable")return!0}else if((t.indexOf("[")>=0||t==="tuple")&&b2[e])return!0;return(L0[e]||e==="payable")&&ot.throwArgumentError("invalid modifier","name",e),!1}function m2(t,e){let r=t;function n(o){ot.throwArgumentError(`unexpected character at position ${o}`,"param",t)}t=t.replace(/\s/g," ");function i(o){let c={type:"",name:"",parent:o,state:{allowType:!0}};return e&&(c.indexed=!1),c}let s={type:"",name:"",state:{allowType:!0}},a=s;for(let o=0;o<t.length;o++){let c=t[o];switch(c){case"(":a.state.allowType&&a.type===""?a.type="tuple":a.state.allowParams||n(o),a.state.allowType=!1,a.type=qs(a.type),a.components=[i(a)],a=a.components[0];break;case")":delete a.state,a.name==="indexed"&&(e||n(o),a.indexed=!0,a.name=""),Ho(a.type,a.name)&&(a.name=""),a.type=qs(a.type);let f=a;a=a.parent,a||n(o),delete f.parent,a.state.allowParams=!1,a.state.allowName=!0,a.state.allowArray=!0;break;case",":delete a.state,a.name==="indexed"&&(e||n(o),a.indexed=!0,a.name=""),Ho(a.type,a.name)&&(a.name=""),a.type=qs(a.type);let u=i(a.parent);a.parent.components.push(u),delete a.parent,a=u;break;case" ":a.state.allowType&&a.type!==""&&(a.type=qs(a.type),delete a.state.allowType,a.state.allowName=!0,a.state.allowParams=!0),a.state.allowName&&a.name!==""&&(a.name==="indexed"?(e||n(o),a.indexed&&n(o),a.indexed=!0,a.name=""):Ho(a.type,a.name)?a.name="":a.state.allowName=!1);break;case"[":a.state.allowArray||n(o),a.type+=c,a.state.allowArray=!1,a.state.allowName=!1,a.state.readArray=!0;break;case"]":a.state.readArray||n(o),a.type+=c,a.state.readArray=!1,a.state.allowArray=!0,a.state.allowName=!0;break;default:a.state.allowType?(a.type+=c,a.state.allowParams=!0,a.state.allowArray=!0):a.state.allowName?(a.name+=c,delete a.state.allowArray):a.state.readArray?a.type+=c:n(o)}}return a.parent&&ot.throwArgumentError("unexpected eof","param",t),delete s.state,a.name==="indexed"?(e||n(r.length-7),a.indexed&&n(r.length-7),a.indexed=!0,a.name=""):Ho(a.type,a.name)&&(a.name=""),s.type=qs(s.type),s}function oc(t,e){for(let r in e)te(t,r,e[r])}const vt=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),v2=new RegExp(/^(.*)\[([0-9]*)\]$/);class pr{constructor(e,r){e!==fs&&ot.throwError("use fromString",j.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),oc(this,r);let n=this.type.match(v2);n?oc(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:pr.fromObject({type:n[1],components:this.components}),baseType:"array"}):oc(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=vt.sighash),vt[e]||ot.throwArgumentError("invalid format type","format",e),e===vt.json){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.components&&(n.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(n)}let r="";return this.baseType==="array"?(r+=this.arrayChildren.format(e),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==vt.sighash&&(r+=this.type),r+="("+this.components.map(n=>n.format(e)).join(e===vt.full?", ":",")+")"):r+=this.type,e!==vt.sighash&&(this.indexed===!0&&(r+=" indexed"),e===vt.full&&this.name&&(r+=" "+this.name)),r}static from(e,r){return typeof e=="string"?pr.fromString(e,r):pr.fromObject(e)}static fromObject(e){return pr.isParamType(e)?e:new pr(fs,{name:e.name||null,type:qs(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(pr.fromObject):null})}static fromString(e,r){function n(i){return pr.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return n(m2(e,!!r))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function to(t,e){return _2(t).map(r=>pr.fromString(r,e))}class Vn{constructor(e,r){e!==fs&&ot.throwError("use a static from method",j.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),oc(this,r),this._isFragment=!0,Object.freeze(this)}static from(e){return Vn.isFragment(e)?e:typeof e=="string"?Vn.fromString(e):Vn.fromObject(e)}static fromObject(e){if(Vn.isFragment(e))return e;switch(e.type){case"function":return On.fromObject(e);case"event":return Gn.fromObject(e);case"constructor":return Mn.fromObject(e);case"error":return pi.fromObject(e);case"fallback":case"receive":return null}return ot.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?Gn.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?On.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?Mn.fromString(e.trim()):e.split(" ")[0]==="error"?pi.fromString(e.substring(5).trim()):ot.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class Gn extends Vn{format(e){if(e||(e=vt.sighash),vt[e]||ot.throwArgumentError("invalid format type","format",e),e===vt.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==vt.sighash&&(r+="event "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===vt.full?", ":",")+") ",e!==vt.sighash&&this.anonymous&&(r+="anonymous "),r.trim()}static from(e){return typeof e=="string"?Gn.fromString(e):Gn.fromObject(e)}static fromObject(e){if(Gn.isEventFragment(e))return e;e.type!=="event"&&ot.throwArgumentError("invalid event object","value",e);const r={name:ro(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(pr.fromObject):[],type:"event"};return new Gn(fs,r)}static fromString(e){let r=e.match(no);r||ot.throwArgumentError("invalid event string","value",e);let n=!1;return r[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":n=!0;break;case"":break;default:ot.warn("unknown modifier: "+i)}}),Gn.fromObject({name:r[1].trim(),anonymous:n,inputs:to(r[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function vx(t,e){e.gas=null;let r=t.split("@");return r.length!==1?(r.length>2&&ot.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||ot.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=le.from(r[1]),r[0]):t}function wx(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach(r=>{switch(r.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+r)}})}function _x(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return t.stateMutability!=null?(e.stateMutability=t.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",t.constant!=null&&!!t.constant!==e.constant&&ot.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable=e.stateMutability==="payable",t.payable!=null&&!!t.payable!==e.payable&&ot.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):t.payable!=null?(e.payable=!!t.payable,t.constant==null&&!e.payable&&t.type!=="constructor"&&ot.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&ot.throwArgumentError("cannot have constant payable function","value",t)):t.constant!=null?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):t.type!=="constructor"&&ot.throwArgumentError("unable to determine stateMutability","value",t),e}class Mn extends Vn{format(e){if(e||(e=vt.sighash),vt[e]||ot.throwArgumentError("invalid format type","format",e),e===vt.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});e===vt.sighash&&ot.throwError("cannot format a constructor for sighash",j.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let r="constructor("+this.inputs.map(n=>n.format(e)).join(e===vt.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "),r.trim()}static from(e){return typeof e=="string"?Mn.fromString(e):Mn.fromObject(e)}static fromObject(e){if(Mn.isConstructorFragment(e))return e;e.type!=="constructor"&&ot.throwArgumentError("invalid constructor object","value",e);let r=_x(e);r.constant&&ot.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(pr.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?le.from(e.gas):null};return new Mn(fs,n)}static fromString(e){let r={type:"constructor"};e=vx(e,r);let n=e.match(no);return(!n||n[1].trim()!=="constructor")&&ot.throwArgumentError("invalid constructor string","value",e),r.inputs=to(n[2].trim(),!1),wx(n[3].trim(),r),Mn.fromObject(r)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class On extends Mn{format(e){if(e||(e=vt.sighash),vt[e]||ot.throwArgumentError("invalid format type","format",e),e===vt.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==vt.sighash&&(r+="function "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===vt.full?", ":",")+") ",e!==vt.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "):this.constant&&(r+="view "),this.outputs&&this.outputs.length&&(r+="returns ("+this.outputs.map(n=>n.format(e)).join(", ")+") "),this.gas!=null&&(r+="@"+this.gas.toString()+" ")),r.trim()}static from(e){return typeof e=="string"?On.fromString(e):On.fromObject(e)}static fromObject(e){if(On.isFunctionFragment(e))return e;e.type!=="function"&&ot.throwArgumentError("invalid function object","value",e);let r=_x(e);const n={type:e.type,name:ro(e.name),constant:r.constant,inputs:e.inputs?e.inputs.map(pr.fromObject):[],outputs:e.outputs?e.outputs.map(pr.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?le.from(e.gas):null};return new On(fs,n)}static fromString(e){let r={type:"function"};e=vx(e,r);let n=e.split(" returns ");n.length>2&&ot.throwArgumentError("invalid function string","value",e);let i=n[0].match(no);if(i||ot.throwArgumentError("invalid function signature","value",e),r.name=i[1].trim(),r.name&&ro(r.name),r.inputs=to(i[2],!1),wx(i[3].trim(),r),n.length>1){let s=n[1].match(no);(s[1].trim()!=""||s[3].trim()!="")&&ot.throwArgumentError("unexpected tokens","value",e),r.outputs=to(s[2],!1)}else r.outputs=[];return On.fromObject(r)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function F0(t){const e=t.format();return(e==="Error(string)"||e==="Panic(uint256)")&&ot.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class pi extends Vn{format(e){if(e||(e=vt.sighash),vt[e]||ot.throwArgumentError("invalid format type","format",e),e===vt.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==vt.sighash&&(r+="error "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===vt.full?", ":",")+") ",r.trim()}static from(e){return typeof e=="string"?pi.fromString(e):pi.fromObject(e)}static fromObject(e){if(pi.isErrorFragment(e))return e;e.type!=="error"&&ot.throwArgumentError("invalid error object","value",e);const r={type:e.type,name:ro(e.name),inputs:e.inputs?e.inputs.map(pr.fromObject):[]};return F0(new pi(fs,r))}static fromString(e){let r={type:"error"},n=e.match(no);return n||ot.throwArgumentError("invalid error signature","value",e),r.name=n[1].trim(),r.name&&ro(r.name),r.inputs=to(n[2],!1),F0(pi.fromObject(r))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function qs(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const w2=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function ro(t){return(!t||!t.match(w2))&&ot.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const no=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function _2(t){t=t.trim();let e=[],r="",n=0;for(let i=0;i<t.length;i++){let s=t[i];s===","&&n===0?(e.push(r),r=""):(r+=s,s==="("?n++:s===")"&&(n--,n===-1&&ot.throwArgumentError("unbalanced parenthesis","value",t)))}return r&&e.push(r),e}const Dd=new j(ko);function Ex(t){const e=[],r=function(n,i){if(Array.isArray(i))for(let s in i){const a=n.slice();a.push(s);try{r(a,i[s])}catch(o){e.push({path:a,error:o})}}};return r([],t),e}class _i{constructor(e,r,n,i){this.name=e,this.type=r,this.localName=n,this.dynamic=i}_throwError(e,r){Dd.throwArgumentError(e,this.localName,r)}}class bl{constructor(e){te(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return $r(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(qt(e._data))}writeBytes(e){let r=de(e);const n=r.length%this.wordSize;return n&&(r=qt([r,this._padding.slice(n)])),this._writeData(r)}_getValue(e){let r=de(le.from(e));return r.length>this.wordSize&&Dd.throwError("value out-of-bounds",j.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:r.length}),r.length%this.wordSize&&(r=qt([this._padding.slice(r.length%this.wordSize),r])),r}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,r=>{this._data[e]=this._getValue(r)}}}class Ac{constructor(e,r,n,i){te(this,"_data",de(e)),te(this,"wordSize",r||32),te(this,"_coerceFunc",n),te(this,"allowLoose",i),this._offset=0}get data(){return me(this._data)}get consumed(){return this._offset}static coerce(e,r){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(r=r.toNumber()),r}coerce(e,r){return this._coerceFunc?this._coerceFunc(e,r):Ac.coerce(e,r)}_peekBytes(e,r,n){let i=Math.ceil(r/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&n&&this._offset+r<=this._data.length?i=r:Dd.throwError("data out-of-bounds",j.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new Ac(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,r){let n=this._peekBytes(0,e,!!r);return this._offset+=n.length,n.slice(0,e)}readValue(){return le.from(this.readBytes(this.wordSize))}}var ml={},E2={get exports(){return ml},set exports(t){ml=t}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",r="finalize already called",n=typeof window=="object",i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",a=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;a?i=H:s&&(i=self);var o=!i.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,c=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",f="0123456789abcdef".split(""),u=[31,7936,2031616,520093696],d=[4,1024,262144,67108864],g=[1,256,65536,16777216],b=[6,1536,393216,100663296],S=[0,8,16,24],_=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],y=[224,256,384,512],E=[128,256],A=["hex","buffer","arrayBuffer","array","digest"],M={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(x){return Object.prototype.toString.call(x)==="[object Array]"}),c&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(x){return typeof x=="object"&&x.buffer&&x.buffer.constructor===ArrayBuffer});for(var B=function(x,K,J){return function(W){return new h(x,K,x).update(W)[J]()}},D=function(x,K,J){return function(W,X){return new h(x,K,X).update(W)[J]()}},L=function(x,K,J){return function(W,X,ye,pe){return l["cshake"+x].update(W,X,ye,pe)[J]()}},z=function(x,K,J){return function(W,X,ye,pe){return l["kmac"+x].update(W,X,ye,pe)[J]()}},Y=function(x,K,J,W){for(var X=0;X<A.length;++X){var ye=A[X];x[ye]=K(J,W,ye)}return x},ie=function(x,K){var J=B(x,K,"hex");return J.create=function(){return new h(x,K,x)},J.update=function(W){return J.create().update(W)},Y(J,B,x,K)},oe=function(x,K){var J=D(x,K,"hex");return J.create=function(W){return new h(x,K,W)},J.update=function(W,X){return J.create(X).update(W)},Y(J,D,x,K)},ge=function(x,K){var J=M[x],W=L(x,K,"hex");return W.create=function(X,ye,pe){return!ye&&!pe?l["shake"+x].create(X):new h(x,K,X).bytepad([ye,pe],J)},W.update=function(X,ye,pe,be){return W.create(ye,pe,be).update(X)},Y(W,L,x,K)},re=function(x,K){var J=M[x],W=z(x,K,"hex");return W.create=function(X,ye,pe){return new C(x,K,ye).bytepad(["KMAC",pe],J).bytepad([X],J)},W.update=function(X,ye,pe,be){return W.create(X,pe,be).update(ye)},Y(W,z,x,K)},P=[{name:"keccak",padding:g,bits:y,createMethod:ie},{name:"sha3",padding:b,bits:y,createMethod:ie},{name:"shake",padding:u,bits:E,createMethod:oe},{name:"cshake",padding:d,bits:E,createMethod:ge},{name:"kmac",padding:d,bits:E,createMethod:re}],l={},m=[],T=0;T<P.length;++T)for(var N=P[T],O=N.bits,U=0;U<O.length;++U){var $=N.name+"_"+O[U];if(m.push($),l[$]=N.createMethod(O[U],N.padding),N.name!=="sha3"){var v=N.name+O[U];m.push(v),l[v]=l[$]}}function h(x,K,J){this.blocks=[],this.s=[],this.padding=K,this.outputBits=J,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(x<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=J>>5,this.extraBytes=(J&31)>>3;for(var W=0;W<50;++W)this.s[W]=0}h.prototype.update=function(x){if(this.finalized)throw new Error(r);var K,J=typeof x;if(J!=="string"){if(J==="object"){if(x===null)throw new Error(e);if(c&&x.constructor===ArrayBuffer)x=new Uint8Array(x);else if(!Array.isArray(x)&&(!c||!ArrayBuffer.isView(x)))throw new Error(e)}else throw new Error(e);K=!0}for(var W=this.blocks,X=this.byteCount,ye=x.length,pe=this.blockCount,be=0,Qe=this.s,Ee,Ue;be<ye;){if(this.reset)for(this.reset=!1,W[0]=this.block,Ee=1;Ee<pe+1;++Ee)W[Ee]=0;if(K)for(Ee=this.start;be<ye&&Ee<X;++be)W[Ee>>2]|=x[be]<<S[Ee++&3];else for(Ee=this.start;be<ye&&Ee<X;++be)Ue=x.charCodeAt(be),Ue<128?W[Ee>>2]|=Ue<<S[Ee++&3]:Ue<2048?(W[Ee>>2]|=(192|Ue>>6)<<S[Ee++&3],W[Ee>>2]|=(128|Ue&63)<<S[Ee++&3]):Ue<55296||Ue>=57344?(W[Ee>>2]|=(224|Ue>>12)<<S[Ee++&3],W[Ee>>2]|=(128|Ue>>6&63)<<S[Ee++&3],W[Ee>>2]|=(128|Ue&63)<<S[Ee++&3]):(Ue=65536+((Ue&1023)<<10|x.charCodeAt(++be)&1023),W[Ee>>2]|=(240|Ue>>18)<<S[Ee++&3],W[Ee>>2]|=(128|Ue>>12&63)<<S[Ee++&3],W[Ee>>2]|=(128|Ue>>6&63)<<S[Ee++&3],W[Ee>>2]|=(128|Ue&63)<<S[Ee++&3]);if(this.lastByteIndex=Ee,Ee>=X){for(this.start=Ee-X,this.block=W[pe],Ee=0;Ee<pe;++Ee)Qe[Ee]^=W[Ee];q(Qe),this.reset=!0}else this.start=Ee}return this},h.prototype.encode=function(x,K){var J=x&255,W=1,X=[J];for(x=x>>8,J=x&255;J>0;)X.unshift(J),x=x>>8,J=x&255,++W;return K?X.push(W):X.unshift(W),this.update(X),X.length},h.prototype.encodeString=function(x){var K,J=typeof x;if(J!=="string"){if(J==="object"){if(x===null)throw new Error(e);if(c&&x.constructor===ArrayBuffer)x=new Uint8Array(x);else if(!Array.isArray(x)&&(!c||!ArrayBuffer.isView(x)))throw new Error(e)}else throw new Error(e);K=!0}var W=0,X=x.length;if(K)W=X;else for(var ye=0;ye<x.length;++ye){var pe=x.charCodeAt(ye);pe<128?W+=1:pe<2048?W+=2:pe<55296||pe>=57344?W+=3:(pe=65536+((pe&1023)<<10|x.charCodeAt(++ye)&1023),W+=4)}return W+=this.encode(W*8),this.update(x),W},h.prototype.bytepad=function(x,K){for(var J=this.encode(K),W=0;W<x.length;++W)J+=this.encodeString(x[W]);var X=K-J%K,ye=[];return ye.length=X,this.update(ye),this},h.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var x=this.blocks,K=this.lastByteIndex,J=this.blockCount,W=this.s;if(x[K>>2]|=this.padding[K&3],this.lastByteIndex===this.byteCount)for(x[0]=x[J],K=1;K<J+1;++K)x[K]=0;for(x[J-1]|=2147483648,K=0;K<J;++K)W[K]^=x[K];q(W)}},h.prototype.toString=h.prototype.hex=function(){this.finalize();for(var x=this.blockCount,K=this.s,J=this.outputBlocks,W=this.extraBytes,X=0,ye=0,pe="",be;ye<J;){for(X=0;X<x&&ye<J;++X,++ye)be=K[X],pe+=f[be>>4&15]+f[be&15]+f[be>>12&15]+f[be>>8&15]+f[be>>20&15]+f[be>>16&15]+f[be>>28&15]+f[be>>24&15];ye%x===0&&(q(K),X=0)}return W&&(be=K[X],pe+=f[be>>4&15]+f[be&15],W>1&&(pe+=f[be>>12&15]+f[be>>8&15]),W>2&&(pe+=f[be>>20&15]+f[be>>16&15])),pe},h.prototype.arrayBuffer=function(){this.finalize();var x=this.blockCount,K=this.s,J=this.outputBlocks,W=this.extraBytes,X=0,ye=0,pe=this.outputBits>>3,be;W?be=new ArrayBuffer(J+1<<2):be=new ArrayBuffer(pe);for(var Qe=new Uint32Array(be);ye<J;){for(X=0;X<x&&ye<J;++X,++ye)Qe[ye]=K[X];ye%x===0&&q(K)}return W&&(Qe[X]=K[X],be=be.slice(0,pe)),be},h.prototype.buffer=h.prototype.arrayBuffer,h.prototype.digest=h.prototype.array=function(){this.finalize();for(var x=this.blockCount,K=this.s,J=this.outputBlocks,W=this.extraBytes,X=0,ye=0,pe=[],be,Qe;ye<J;){for(X=0;X<x&&ye<J;++X,++ye)be=ye<<2,Qe=K[X],pe[be]=Qe&255,pe[be+1]=Qe>>8&255,pe[be+2]=Qe>>16&255,pe[be+3]=Qe>>24&255;ye%x===0&&q(K)}return W&&(be=ye<<2,Qe=K[X],pe[be]=Qe&255,W>1&&(pe[be+1]=Qe>>8&255),W>2&&(pe[be+2]=Qe>>16&255)),pe};function C(x,K,J){h.call(this,x,K,J)}C.prototype=new h,C.prototype.finalize=function(){return this.encode(this.outputBits,!0),h.prototype.finalize.call(this)};var q=function(x){var K,J,W,X,ye,pe,be,Qe,Ee,Ue,Wt,Tt,kt,yr,dt,Pt,Jr,wt,ht,Wr,pt,_t,jr,Et,Ct,Kr,gt,ct,wr,tt,nt,Ir,it,st,qr,At,It,on,Je,Ze,xr,yt,xt,Yr,Nt,Ke,Xr,w,k,I,p,R,V,G,ee,fe,xe,ue,Le,ve,Ce,Ie,Ne;for(W=0;W<48;W+=2)X=x[0]^x[10]^x[20]^x[30]^x[40],ye=x[1]^x[11]^x[21]^x[31]^x[41],pe=x[2]^x[12]^x[22]^x[32]^x[42],be=x[3]^x[13]^x[23]^x[33]^x[43],Qe=x[4]^x[14]^x[24]^x[34]^x[44],Ee=x[5]^x[15]^x[25]^x[35]^x[45],Ue=x[6]^x[16]^x[26]^x[36]^x[46],Wt=x[7]^x[17]^x[27]^x[37]^x[47],Tt=x[8]^x[18]^x[28]^x[38]^x[48],kt=x[9]^x[19]^x[29]^x[39]^x[49],K=Tt^(pe<<1|be>>>31),J=kt^(be<<1|pe>>>31),x[0]^=K,x[1]^=J,x[10]^=K,x[11]^=J,x[20]^=K,x[21]^=J,x[30]^=K,x[31]^=J,x[40]^=K,x[41]^=J,K=X^(Qe<<1|Ee>>>31),J=ye^(Ee<<1|Qe>>>31),x[2]^=K,x[3]^=J,x[12]^=K,x[13]^=J,x[22]^=K,x[23]^=J,x[32]^=K,x[33]^=J,x[42]^=K,x[43]^=J,K=pe^(Ue<<1|Wt>>>31),J=be^(Wt<<1|Ue>>>31),x[4]^=K,x[5]^=J,x[14]^=K,x[15]^=J,x[24]^=K,x[25]^=J,x[34]^=K,x[35]^=J,x[44]^=K,x[45]^=J,K=Qe^(Tt<<1|kt>>>31),J=Ee^(kt<<1|Tt>>>31),x[6]^=K,x[7]^=J,x[16]^=K,x[17]^=J,x[26]^=K,x[27]^=J,x[36]^=K,x[37]^=J,x[46]^=K,x[47]^=J,K=Ue^(X<<1|ye>>>31),J=Wt^(ye<<1|X>>>31),x[8]^=K,x[9]^=J,x[18]^=K,x[19]^=J,x[28]^=K,x[29]^=J,x[38]^=K,x[39]^=J,x[48]^=K,x[49]^=J,yr=x[0],dt=x[1],Ke=x[11]<<4|x[10]>>>28,Xr=x[10]<<4|x[11]>>>28,ct=x[20]<<3|x[21]>>>29,wr=x[21]<<3|x[20]>>>29,ve=x[31]<<9|x[30]>>>23,Ce=x[30]<<9|x[31]>>>23,yt=x[40]<<18|x[41]>>>14,xt=x[41]<<18|x[40]>>>14,st=x[2]<<1|x[3]>>>31,qr=x[3]<<1|x[2]>>>31,Pt=x[13]<<12|x[12]>>>20,Jr=x[12]<<12|x[13]>>>20,w=x[22]<<10|x[23]>>>22,k=x[23]<<10|x[22]>>>22,tt=x[33]<<13|x[32]>>>19,nt=x[32]<<13|x[33]>>>19,Ie=x[42]<<2|x[43]>>>30,Ne=x[43]<<2|x[42]>>>30,G=x[5]<<30|x[4]>>>2,ee=x[4]<<30|x[5]>>>2,At=x[14]<<6|x[15]>>>26,It=x[15]<<6|x[14]>>>26,wt=x[25]<<11|x[24]>>>21,ht=x[24]<<11|x[25]>>>21,I=x[34]<<15|x[35]>>>17,p=x[35]<<15|x[34]>>>17,Ir=x[45]<<29|x[44]>>>3,it=x[44]<<29|x[45]>>>3,Et=x[6]<<28|x[7]>>>4,Ct=x[7]<<28|x[6]>>>4,fe=x[17]<<23|x[16]>>>9,xe=x[16]<<23|x[17]>>>9,on=x[26]<<25|x[27]>>>7,Je=x[27]<<25|x[26]>>>7,Wr=x[36]<<21|x[37]>>>11,pt=x[37]<<21|x[36]>>>11,R=x[47]<<24|x[46]>>>8,V=x[46]<<24|x[47]>>>8,Yr=x[8]<<27|x[9]>>>5,Nt=x[9]<<27|x[8]>>>5,Kr=x[18]<<20|x[19]>>>12,gt=x[19]<<20|x[18]>>>12,ue=x[29]<<7|x[28]>>>25,Le=x[28]<<7|x[29]>>>25,Ze=x[38]<<8|x[39]>>>24,xr=x[39]<<8|x[38]>>>24,_t=x[48]<<14|x[49]>>>18,jr=x[49]<<14|x[48]>>>18,x[0]=yr^~Pt&wt,x[1]=dt^~Jr&ht,x[10]=Et^~Kr&ct,x[11]=Ct^~gt&wr,x[20]=st^~At&on,x[21]=qr^~It&Je,x[30]=Yr^~Ke&w,x[31]=Nt^~Xr&k,x[40]=G^~fe&ue,x[41]=ee^~xe&Le,x[2]=Pt^~wt&Wr,x[3]=Jr^~ht&pt,x[12]=Kr^~ct&tt,x[13]=gt^~wr&nt,x[22]=At^~on&Ze,x[23]=It^~Je&xr,x[32]=Ke^~w&I,x[33]=Xr^~k&p,x[42]=fe^~ue&ve,x[43]=xe^~Le&Ce,x[4]=wt^~Wr&_t,x[5]=ht^~pt&jr,x[14]=ct^~tt&Ir,x[15]=wr^~nt&it,x[24]=on^~Ze&yt,x[25]=Je^~xr&xt,x[34]=w^~I&R,x[35]=k^~p&V,x[44]=ue^~ve&Ie,x[45]=Le^~Ce&Ne,x[6]=Wr^~_t&yr,x[7]=pt^~jr&dt,x[16]=tt^~Ir&Et,x[17]=nt^~it&Ct,x[26]=Ze^~yt&st,x[27]=xr^~xt&qr,x[36]=I^~R&Yr,x[37]=p^~V&Nt,x[46]=ve^~Ie&G,x[47]=Ce^~Ne&ee,x[8]=_t^~yr&Pt,x[9]=jr^~dt&Jr,x[18]=Ir^~Et&Kr,x[19]=it^~Ct&gt,x[28]=yt^~st&At,x[29]=xt^~qr&It,x[38]=R^~Yr&Ke,x[39]=V^~Nt&Xr,x[48]=Ie^~G&fe,x[49]=Ne^~ee&xe,x[0]^=_[W],x[1]^=_[W+1]};if(o)t.exports=l;else for(T=0;T<m.length;++T)i[m[T]]=l[m[T]]})()})(E2);const A2=ml;function Lt(t){return"0x"+A2.keccak_256(de(t))}const S2="rlp/5.7.0",Hn=new j(S2);function j0(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function K0(t,e,r){let n=0;for(let i=0;i<r;i++)n=n*256+t[e+i];return n}function Ax(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(s){n=n.concat(Ax(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=j0(n.length);return i.unshift(247+i.length),i.concat(n)}So(t)||Hn.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(de(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=j0(e.length);return r.unshift(183+r.length),r.concat(e)}function us(t){return me(Ax(t))}function q0(t,e,r,n){const i=[];for(;r<e+1+n;){const s=Sx(t,r);i.push(s.result),r+=s.consumed,r>e+1+n&&Hn.throwError("child data too short",j.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function Sx(t,e){if(t.length===0&&Hn.throwError("data too short",j.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&Hn.throwError("data short segment too short",j.errors.BUFFER_OVERRUN,{});const n=K0(t,e+1,r);return e+1+r+n>t.length&&Hn.throwError("data long segment too short",j.errors.BUFFER_OVERRUN,{}),q0(t,e,e+1+r,r+n)}else if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&Hn.throwError("data array too short",j.errors.BUFFER_OVERRUN,{}),q0(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&Hn.throwError("data array too short",j.errors.BUFFER_OVERRUN,{});const n=K0(t,e+1,r);e+1+r+n>t.length&&Hn.throwError("data array too short",j.errors.BUFFER_OVERRUN,{});const i=me(t.slice(e+1+r,e+1+r+n));return{consumed:1+r+n,result:i}}else if(t[e]>=128){const r=t[e]-128;e+1+r>t.length&&Hn.throwError("data too short",j.errors.BUFFER_OVERRUN,{});const n=me(t.slice(e+1,e+1+r));return{consumed:1+r,result:n}}return{consumed:1,result:me(t[e])}}function rf(t){const e=de(t),r=Sx(e,0);return r.consumed!==e.length&&Hn.throwArgumentError("invalid rlp data","data",t),r.result}const T2=Object.freeze(Object.defineProperty({__proto__:null,decode:rf,encode:us},Symbol.toStringTag,{value:"Module"})),k2="address/5.7.0",Mi=new j(k2);function $0(t){He(t,20)||Mi.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=e[i].charCodeAt(0);const n=de(Lt(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const P2=9007199254740991;function C2(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const Ud={};for(let t=0;t<10;t++)Ud[String(t)]=String(t);for(let t=0;t<26;t++)Ud[String.fromCharCode(65+t)]=String(10+t);const H0=Math.floor(C2(P2));function Tx(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>Ud[n]).join("");for(;e.length>=H0;){let n=e.substring(0,H0);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function Ot(t){let e=null;if(typeof t!="string"&&Mi.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=$0(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&Mi.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==Tx(t)&&Mi.throwArgumentError("bad icap checksum","address",t),e=l2(t.substring(4));e.length<40;)e="0"+e;e=$0("0x"+e)}else Mi.throwArgumentError("invalid address","address",t);return e}function I2(t){try{return Ot(t),!0}catch{}return!1}function N2(t){let e=d2(Ot(t).substring(2)).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+Tx("XE00"+e)+e}function nf(t){let e=null;try{e=Ot(t.from)}catch{Mi.throwArgumentError("missing from address","transaction",t)}const r=Yn(de(le.from(t.nonce).toHexString()));return Ot(ar(Lt(us([e,r])),12))}function R2(t,e,r){return ti(e)!==32&&Mi.throwArgumentError("salt must be 32 bytes","salt",e),ti(r)!==32&&Mi.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",r),Ot(ar(Lt(qt(["0xff",Ot(t),e,r])),12))}class B2 extends _i{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,r){try{r=Ot(r)}catch(n){this._throwError(n.message,r)}return e.writeValue(r)}decode(e){return Ot($t(e.readValue().toHexString(),20))}}class M2 extends _i{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,r){return this.coder.encode(e,r)}decode(e){return this.coder.decode(e)}}const zs=new j(ko);function kx(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&typeof r=="object"){let c={};n=e.map(f=>{const u=f.localName;return u||zs.throwError("cannot encode object for signature with missing names",j.errors.INVALID_ARGUMENT,{argument:"values",coder:f,value:r}),c[u]&&zs.throwError("cannot encode object for signature with duplicate names",j.errors.INVALID_ARGUMENT,{argument:"values",coder:f,value:r}),c[u]=!0,r[u]})}else zs.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&zs.throwArgumentError("types/value length mismatch","tuple",r);let i=new bl(t.wordSize),s=new bl(t.wordSize),a=[];e.forEach((c,f)=>{let u=n[f];if(c.dynamic){let d=s.length;c.encode(s,u);let g=i.writeUpdatableValue();a.push(b=>{g(b+d)})}else c.encode(i,u)}),a.forEach(c=>{c(i.length)});let o=t.appendWriter(i);return o+=t.appendWriter(s),o}function Px(t,e){let r=[],n=t.subReader(0);e.forEach(s=>{let a=null;if(s.dynamic){let o=t.readValue(),c=n.subReader(o.toNumber());try{a=s.decode(c)}catch(f){if(f.code===j.errors.BUFFER_OVERRUN)throw f;a=f,a.baseType=s.name,a.name=s.localName,a.type=s.type}}else try{a=s.decode(t)}catch(o){if(o.code===j.errors.BUFFER_OVERRUN)throw o;a=o,a.baseType=s.name,a.name=s.localName,a.type=s.type}a!=null&&r.push(a)});const i=e.reduce((s,a)=>{const o=a.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});e.forEach((s,a)=>{let o=s.localName;if(!o||i[o]!==1||(o==="length"&&(o="_length"),r[o]!=null))return;const c=r[a];c instanceof Error?Object.defineProperty(r,o,{enumerable:!0,get:()=>{throw c}}):r[o]=c});for(let s=0;s<r.length;s++){const a=r[s];a instanceof Error&&Object.defineProperty(r,s,{enumerable:!0,get:()=>{throw a}})}return Object.freeze(r)}class O2 extends _i{constructor(e,r,n){const i=e.type+"["+(r>=0?r:"")+"]",s=r===-1||e.dynamic;super("array",i,n,s),this.coder=e,this.length=r}defaultValue(){const e=this.coder.defaultValue(),r=[];for(let n=0;n<this.length;n++)r.push(e);return r}encode(e,r){Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;n===-1&&(n=r.length,e.writeValue(r.length)),zs.checkArgumentCount(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<r.length;s++)i.push(this.coder);return kx(e,i,r)}decode(e){let r=this.length;r===-1&&(r=e.readValue().toNumber(),r*32>e._data.length&&zs.throwError("insufficient data length",j.errors.BUFFER_OVERRUN,{length:e._data.length,count:r}));let n=[];for(let i=0;i<r;i++)n.push(new M2(this.coder));return e.coerce(this.name,Px(e,n))}}class D2 extends _i{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,r){return e.writeValue(r?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class Cx extends _i{constructor(e,r){super(e,e,r,!0)}defaultValue(){return"0x"}encode(e,r){r=de(r);let n=e.writeValue(r.length);return n+=e.writeBytes(r),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class U2 extends Cx{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,me(super.decode(e)))}}class L2 extends _i{constructor(e,r){let n="bytes"+String(e);super(n,n,r,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,r){let n=de(r);return n.length!==this.size&&this._throwError("incorrect data length",r),e.writeBytes(n)}decode(e){return e.coerce(this.name,me(e.readBytes(this.size)))}}class F2 extends _i{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,r){return r!=null&&this._throwError("not null",r),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const Ix="0x0000000000000000000000000000000000000000",Nx=le.from(-1),Ld=le.from(0),Rx=le.from(1),j2=le.from(2),K2=le.from("1000000000000000000"),Bx=le.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),q2=le.from("-0x8000000000000000000000000000000000000000000000000000000000000000"),$2=le.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Fd="0x0000000000000000000000000000000000000000000000000000000000000000",H2="",Mx=Object.freeze(Object.defineProperty({__proto__:null,AddressZero:Ix,EtherSymbol:H2,HashZero:Fd,MaxInt256:$2,MaxUint256:Bx,MinInt256:q2,NegativeOne:Nx,One:Rx,Two:j2,WeiPerEther:K2,Zero:Ld},Symbol.toStringTag,{value:"Module"}));class z2 extends _i{constructor(e,r,n){const i=(r?"int":"uint")+e*8;super(i,i,n,!1),this.size=e,this.signed=r}defaultValue(){return 0}encode(e,r){let n=le.from(r),i=Bx.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(n.gt(s)||n.lt(s.add(Rx).mul(Nx)))&&this._throwError("value out-of-bounds",r)}else(n.lt(Ld)||n.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",r);return n=n.toTwos(this.size*8).mask(this.size*8),this.signed&&(n=n.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let r=e.readValue().mask(this.size*8);return this.signed&&(r=r.fromTwos(this.size*8)),e.coerce(this.name,r)}}const G2="strings/5.7.0",Ox=new j(G2);var ri;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(ri||(ri={}));var en;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(en||(en={}));function V2(t,e,r,n,i){return Ox.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function Dx(t,e,r,n,i){if(t===en.BAD_PREFIX||t===en.UNEXPECTED_CONTINUE){let s=0;for(let a=e+1;a<r.length&&r[a]>>6===2;a++)s++;return s}return t===en.OVERRUN?r.length-e-1:0}function J2(t,e,r,n,i){return t===en.OVERLONG?(n.push(i),0):(n.push(65533),Dx(t,e,r))}const Ux=Object.freeze({error:V2,ignore:Dx,replace:J2});function jd(t,e){e==null&&(e=Ux.error),t=de(t);const r=[];let n=0;for(;n<t.length;){const i=t[n++];if(!(i>>7)){r.push(i);continue}let s=null,a=null;if((i&224)===192)s=1,a=127;else if((i&240)===224)s=2,a=2047;else if((i&248)===240)s=3,a=65535;else{(i&192)===128?n+=e(en.UNEXPECTED_CONTINUE,n-1,t,r):n+=e(en.BAD_PREFIX,n-1,t,r);continue}if(n-1+s>=t.length){n+=e(en.OVERRUN,n-1,t,r);continue}let o=i&(1<<8-s-1)-1;for(let c=0;c<s;c++){let f=t[n];if((f&192)!=128){n+=e(en.MISSING_CONTINUE,n,t,r),o=null;break}o=o<<6|f&63,n++}if(o!==null){if(o>1114111){n+=e(en.OUT_OF_RANGE,n-1-s,t,r,o);continue}if(o>=55296&&o<=57343){n+=e(en.UTF16_SURROGATE,n-1-s,t,r,o);continue}if(o<=a){n+=e(en.OVERLONG,n-1-s,t,r,o);continue}r.push(o)}}return r}function cr(t,e=ri.current){e!=ri.current&&(Ox.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;const s=t.charCodeAt(n);if(n>=t.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const a=65536+((i&1023)<<10)+(s&1023);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(a&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return de(r)}function nu(t){const e="0000"+t.toString(16);return"\\u"+e.substring(e.length-4)}function W2(t,e){return'"'+jd(t,e).map(r=>{if(r<256){switch(r){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(r>=32&&r<127)return String.fromCharCode(r)}return r<=65535?nu(r):(r-=65536,nu((r>>10&1023)+55296)+nu((r&1023)+56320))}).join("")+'"'}function vl(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function ms(t,e){return vl(jd(t,e))}function Sc(t,e=ri.current){return jd(cr(t,e))}function Y2(t){const e=cr(t);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return me(qt([e,Fd]).slice(0,32))}function X2(t){const e=de(t);if(e.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(e[31]!==0)throw new Error("invalid bytes32 string - no null terminator");let r=31;for(;e[r-1]===0;)r--;return ms(e.slice(0,r))}function Q2(t){if(t.length%4!==0)throw new Error("bad data");let e=[];for(let r=0;r<t.length;r+=4)e.push(parseInt(t.substring(r,r+4),16));return e}function Kd(t,e){e||(e=function(i){return[parseInt(i,16)]});let r=0,n={};return t.split(",").forEach(i=>{let s=i.split(":");r+=parseInt(s[0],16),n[r]=e(s[1])}),n}function Lx(t){let e=0;return t.split(",").map(r=>{let n=r.split("-");n.length===1?n[1]="0":n[1]===""&&(n[1]="1");let i=e+parseInt(n[0],16);return e=parseInt(n[1],16),{l:i,h:e}})}function qd(t,e){let r=0;for(let n=0;n<e.length;n++){let i=e[n];if(r+=i.l,t>=r&&t<=r+i.h&&(t-r)%(i.d||1)===0){if(i.e&&i.e.indexOf(t-r)!==-1)continue;return i}}return null}const Z2=Lx("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),e_="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(t=>parseInt(t,16)),t_=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],r_=Kd("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),n_=Kd("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),i_=Kd("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",Q2),s_=Lx("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function a_(t){return t.reduce((e,r)=>(r.forEach(n=>{e.push(n)}),e),[])}function o_(t){return!!qd(t,Z2)}function c_(t){let e=qd(t,t_);if(e)return[t+e.s];let r=r_[t];if(r)return r;let n=n_[t];if(n)return[t+n[0]];let i=i_[t];return i||null}function f_(t){return!!qd(t,s_)}function u_(t){if(t.match(/^[a-z0-9-]*$/i)&&t.length<=59)return t.toLowerCase();let e=Sc(t);e=a_(e.map(n=>{if(e_.indexOf(n)>=0)return[];if(n>=65024&&n<=65039)return[];let i=c_(n);return i||[n]})),e=Sc(vl(e),ri.NFKC),e.forEach(n=>{if(f_(n))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}),e.forEach(n=>{if(o_(n))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")});let r=vl(e);if(r.substring(0,1)==="-"||r.substring(2,4)==="--"||r.substring(r.length-1)==="-")throw new Error("invalid hyphen");return r}class l_ extends Cx{constructor(e){super("string",e)}defaultValue(){return""}encode(e,r){return super.encode(e,cr(r))}decode(e){return ms(super.decode(e))}}class zo extends _i{constructor(e,r){let n=!1;const i=[];e.forEach(a=>{a.dynamic&&(n=!0),i.push(a.type)});const s="tuple("+i.join(",")+")";super("tuple",s,r,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const r=this.coders.reduce((n,i)=>{const s=i.localName;return s&&(n[s]||(n[s]=0),n[s]++),n},{});return this.coders.forEach((n,i)=>{let s=n.localName;!s||r[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,r){return kx(e,this.coders,r)}decode(e){return e.coerce(this.name,Px(e,this.coders))}}const Go=new j(ko),d_=new RegExp(/^bytes([0-9]*)$/),h_=new RegExp(/^(u?int)([0-9]*)$/);class Fx{constructor(e){te(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new B2(e.name);case"bool":return new D2(e.name);case"string":return new l_(e.name);case"bytes":return new U2(e.name);case"array":return new O2(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new zo((e.components||[]).map(n=>this._getCoder(n)),e.name);case"":return new F2(e.name)}let r=e.type.match(h_);if(r){let n=parseInt(r[2]||"256");return(n===0||n>256||n%8!==0)&&Go.throwArgumentError("invalid "+r[1]+" bit length","param",e),new z2(n/8,r[1]==="int",e.name)}if(r=e.type.match(d_),r){let n=parseInt(r[1]);return(n===0||n>32)&&Go.throwArgumentError("invalid bytes length","param",e),new L2(n,e.name)}return Go.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,r){return new Ac(e,this._getWordSize(),this.coerceFunc,r)}_getWriter(){return new bl(this._getWordSize())}getDefaultValue(e){const r=e.map(i=>this._getCoder(pr.from(i)));return new zo(r,"_").defaultValue()}encode(e,r){e.length!==r.length&&Go.throwError("types/values length mismatch",j.errors.INVALID_ARGUMENT,{count:{types:e.length,values:r.length},value:{types:e,values:r}});const n=e.map(a=>this._getCoder(pr.from(a))),i=new zo(n,"_"),s=this._getWriter();return i.encode(s,r),s.data}decode(e,r,n){const i=e.map(a=>this._getCoder(pr.from(a)));return new zo(i,"_").decode(this._getReader(de(r),n))}}const jx=new Fx;function Oi(t){return Lt(cr(t))}const Kx="hash/5.7.0";function $d(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return de(e)}function Hd(t){t=de(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}const p_=Object.freeze(Object.defineProperty({__proto__:null,decode:$d,encode:Hd},Symbol.toStringTag,{value:"Module"}));function qx(t,e){e==null&&(e=1);const r=[],n=r.forEach,i=function(s,a){n.call(s,function(o){a>0&&Array.isArray(o)?i(o,a-1):r.push(o)})};return i(t,e),r}function g_(t){const e={};for(let r=0;r<t.length;r++){const n=t[r];e[n[0]]=n[1]}return e}function y_(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),i=1,s=[0,1];for(let D=1;D<n;D++)s.push(i+=r());let a=r(),o=e;e+=a;let c=0,f=0;function u(){return c==0&&(f=f<<8|t[e++],c=8),f>>--c&1}const d=31,g=Math.pow(2,d),b=g>>>1,S=b>>1,_=g-1;let y=0;for(let D=0;D<d;D++)y=y<<1|u();let E=[],A=0,M=g;for(;;){let D=Math.floor(((y-A+1)*i-1)/M),L=0,z=n;for(;z-L>1;){let oe=L+z>>>1;D<s[oe]?z=oe:L=oe}if(L==0)break;E.push(L);let Y=A+Math.floor(M*s[L]/i),ie=A+Math.floor(M*s[L+1]/i)-1;for(;!((Y^ie)&b);)y=y<<1&_|u(),Y=Y<<1&_,ie=ie<<1&_|1;for(;Y&~ie&S;)y=y&b|y<<1&_>>>1|u(),Y=Y<<1^b,ie=(ie^b)<<1|b|1;A=Y,M=1+ie-Y}let B=n-4;return E.map(D=>{switch(D-B){case 3:return B+65792+(t[o++]<<16|t[o++]<<8|t[o++]);case 2:return B+256+(t[o++]<<8|t[o++]);case 1:return B+t[o++];default:return D-1}})}function x_(t){let e=0;return()=>t[e++]}function b_(t){return x_(y_(t))}function m_(t){return t&1?~t>>1:t>>1}function v_(t,e){let r=Array(t);for(let n=0;n<t;n++)r[n]=1+e();return r}function z0(t,e){let r=Array(t);for(let n=0,i=-1;n<t;n++)r[n]=i+=1+e();return r}function w_(t,e){let r=Array(t);for(let n=0,i=0;n<t;n++)r[n]=i+=m_(e());return r}function Tc(t,e){let r=z0(t(),t),n=t(),i=z0(n,t),s=v_(n,t);for(let a=0;a<n;a++)for(let o=0;o<s[a];o++)r.push(i[a]+o);return e?r.map(a=>e[a]):r}function __(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(A_(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(S_(r,t))}return g_(qx(e))}function E_(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(r)}return e}function $x(t,e,r){let n=Array(t).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)w_(t,r).forEach((s,a)=>n[a].push(s));return n}function A_(t,e){let r=1+e(),n=e(),i=E_(e),s=$x(i.length,1+t,e);return qx(s.map((a,o)=>{const c=a[0],f=a.slice(1);return Array(i[o]).fill(void 0).map((u,d)=>{let g=d*n;return[c+d*r,f.map(b=>b+g)]})}))}function S_(t,e){let r=1+e();return $x(r,1+t,e).map(i=>[i[0],i.slice(1)])}function T_(t){let e=Tc(t).sort((n,i)=>n-i);return r();function r(){let n=[];for(;;){let f=Tc(t,e);if(f.length==0)break;n.push({set:new Set(f),node:r()})}n.sort((f,u)=>u.set.size-f.set.size);let i=t(),s=i%3;i=i/3|0;let a=!!(i&1);i>>=1;let o=i==1,c=i==2;return{branches:n,valid:s,fe0f:a,save:o,check:c}}}function k_(){return b_($d("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const sf=k_(),P_=new Set(Tc(sf)),C_=new Set(Tc(sf)),I_=__(sf),N_=T_(sf),G0=45,V0=95;function Hx(t){return Sc(t)}function R_(t){return t.filter(e=>e!=65039)}function zx(t){for(let e of t.split(".")){let r=Hx(e);try{for(let n=r.lastIndexOf(V0)-1;n>=0;n--)if(r[n]!==V0)throw new Error("underscore only allowed at start");if(r.length>=4&&r.every(n=>n<128)&&r[2]===G0&&r[3]===G0)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${e}": ${n.message}`)}}return t}function B_(t){return zx(M_(t,R_))}function M_(t,e){let r=Hx(t).reverse(),n=[];for(;r.length;){let i=D_(r);if(i){n.push(...e(i));continue}let s=r.pop();if(P_.has(s)){n.push(s);continue}if(C_.has(s))continue;let a=I_[s];if(a){n.push(...a);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return zx(O_(String.fromCodePoint(...n)))}function O_(t){return t.normalize("NFC")}function D_(t,e){var r;let n=N_,i,s,a=[],o=t.length;for(e&&(e.length=0);o;){let c=t[--o];if(n=(r=n.branches.find(f=>f.set.has(c)))===null||r===void 0?void 0:r.node,!n)break;if(n.save)s=c;else if(n.check&&c===s)break;a.push(c),n.fe0f&&(a.push(65039),o>0&&t[o-1]==65039&&o--),n.valid&&(i=a.slice(),n.valid==2&&i.splice(1,1),e&&e.push(...t.slice(o).reverse()),t.length=o)}return i}const U_=new j(Kx),Gx=new Uint8Array(32);Gx.fill(0);function J0(t){if(t.length===0)throw new Error("invalid ENS name; empty component");return t}function zd(t){const e=cr(B_(t)),r=[];if(t.length===0)return r;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(r.push(J0(e.slice(n,i))),n=i+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return r.push(J0(e.slice(n))),r}function L_(t){try{return zd(t).length!==0}catch{}return!1}function za(t){typeof t!="string"&&U_.throwArgumentError("invalid ENS name; not a string","name",t);let e=Gx;const r=zd(t);for(;r.length;)e=Lt(qt([e,Lt(r.pop())]));return me(e)}function Vx(t){return me(qt(zd(t).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const r=new Uint8Array(e.length+1);return r.set(e,1),r[0]=r.length-1,r})))+"00"}const F_=`Ethereum Signed Message:
`;function Gd(t){return typeof t=="string"&&(t=cr(t)),Lt(qt([cr(F_),cr(String(t.length)),t]))}var j_=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const Gt=new j(Kx),Jx=new Uint8Array(32);Jx.fill(0);const K_=le.from(-1),Wx=le.from(0),Yx=le.from(1),q_=le.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function $_(t){const e=de(t),r=e.length%32;return r?$r([e,Jx.slice(r)]):me(e)}const H_=$t(Yx.toHexString(),32),z_=$t(Wx.toHexString(),32),W0={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},iu=["name","version","chainId","verifyingContract","salt"];function Y0(t){return function(e){return typeof e!="string"&&Gt.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const G_={name:Y0("name"),version:Y0("version"),chainId:function(t){try{return le.from(t).toString()}catch{}return Gt.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return Ot(t).toLowerCase()}catch{}return Gt.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=de(t);if(e.length!==32)throw new Error("bad length");return me(e)}catch{}return Gt.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function su(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&Gt.throwArgumentError("invalid numeric width","type",t);const i=q_.mask(r?n-1:n),s=r?i.add(Yx).mul(K_):Wx;return function(a){const o=le.from(a);return(o.lt(s)||o.gt(i))&&Gt.throwArgumentError(`value out-of-bounds for ${t}`,"value",a),$t(o.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(r===0||r>32||e[1]!==String(r))&&Gt.throwArgumentError("invalid bytes width","type",t),function(n){return de(n).length!==r&&Gt.throwArgumentError(`invalid length for ${t}`,"value",n),$_(n)}}}switch(t){case"address":return function(e){return $t(Ot(e),32)};case"bool":return function(e){return e?H_:z_};case"bytes":return function(e){return Lt(e)};case"string":return function(e){return Oi(e)}}return null}function X0(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}class _r{constructor(e){te(this,"types",Object.freeze(zr(e))),te(this,"_encoderCache",{}),te(this,"_types",{});const r={},n={},i={};Object.keys(e).forEach(o=>{r[o]={},n[o]=[],i[o]={}});for(const o in e){const c={};e[o].forEach(f=>{c[f.name]&&Gt.throwArgumentError(`duplicate variable name ${JSON.stringify(f.name)} in ${JSON.stringify(o)}`,"types",e),c[f.name]=!0;const u=f.type.match(/^([^\x5b]*)(\x5b|$)/)[1];u===o&&Gt.throwArgumentError(`circular type reference to ${JSON.stringify(u)}`,"types",e),!su(u)&&(n[u]||Gt.throwArgumentError(`unknown type ${JSON.stringify(u)}`,"types",e),n[u].push(o),r[o][u]=!0)})}const s=Object.keys(n).filter(o=>n[o].length===0);s.length===0?Gt.throwArgumentError("missing primary type","types",e):s.length>1&&Gt.throwArgumentError(`ambiguous primary types or unused types: ${s.map(o=>JSON.stringify(o)).join(", ")}`,"types",e),te(this,"primaryType",s[0]);function a(o,c){c[o]&&Gt.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",e),c[o]=!0,Object.keys(r[o]).forEach(f=>{n[f]&&(a(f,c),Object.keys(c).forEach(u=>{i[u][f]=!0}))}),delete c[o]}a(this.primaryType,{});for(const o in i){const c=Object.keys(i[o]);c.sort(),this._types[o]=X0(o,e[o])+c.map(f=>X0(f,e[f])).join("")}}getEncoder(e){let r=this._encoderCache[e];return r||(r=this._encoderCache[e]=this._getEncoder(e)),r}_getEncoder(e){{const i=su(e);if(i)return i}const r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const i=r[1],s=this.getEncoder(i),a=parseInt(r[3]);return o=>{a>=0&&o.length!==a&&Gt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",o);let c=o.map(s);return this._types[i]&&(c=c.map(Lt)),Lt($r(c))}}const n=this.types[e];if(n){const i=Oi(this._types[e]);return s=>{const a=n.map(({name:o,type:c})=>{const f=this.getEncoder(c)(s[o]);return this._types[c]?Lt(f):f});return a.unshift(i),$r(a)}}return Gt.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const r=this._types[e];return r||Gt.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return Lt(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(su(e))return n(e,r);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const a=i[1],o=parseInt(i[3]);return o>=0&&r.length!==o&&Gt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(c=>this._visit(a,c,n))}const s=this.types[e];return s?s.reduce((a,{name:o,type:c})=>(a[o]=this._visit(c,r[o],n),a),{}):Gt.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new _r(e)}static getPrimaryType(e){return _r.from(e).primaryType}static hashStruct(e,r,n){return _r.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){const i=W0[n];i||Gt.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:i})}return r.sort((n,i)=>iu.indexOf(n.name)-iu.indexOf(i.name)),_r.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return $r(["0x1901",_r.hashDomain(e),_r.from(r).hash(n)])}static hash(e,r,n){return Lt(_r.encode(e,r,n))}static resolveNames(e,r,n,i){return j_(this,void 0,void 0,function*(){e=Ht(e);const s={};e.verifyingContract&&!He(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const a=_r.from(r);a.visit(n,(o,c)=>(o==="address"&&!He(c,20)&&(s[c]="0x"),c));for(const o in s)s[o]=yield i(o);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=a.visit(n,(o,c)=>o==="address"&&s[c]?s[c]:c),{domain:e,value:n}})}static getPayload(e,r,n){_r.hashDomain(e);const i={},s=[];iu.forEach(c=>{const f=e[c];f!=null&&(i[c]=G_[c](f),s.push({name:c,type:W0[c]}))});const a=_r.from(r),o=Ht(r);return o.EIP712Domain?Gt.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):o.EIP712Domain=s,a.encode(n),{types:o,domain:i,primaryType:a.primaryType,message:a.visit(n,(c,f)=>{if(c.match(/^bytes(\d*)/))return me(de(f));if(c.match(/^u?int/))return le.from(f).toString();switch(c){case"address":return f.toLowerCase();case"bool":return!!f;case"string":return typeof f!="string"&&Gt.throwArgumentError("invalid string","value",f),f}return Gt.throwArgumentError("unsupported type","type",c)})}}}const zt=new j(ko);class Xx extends bs{}class Qx extends bs{}class V_ extends bs{}class kc extends bs{static isIndexed(e){return!!(e&&e._isIndexed)}}const J_={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function Q0(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class wl{constructor(e){let r=[];typeof e=="string"?r=JSON.parse(e):r=e,te(this,"fragments",r.map(n=>Vn.from(n)).filter(n=>n!=null)),te(this,"_abiCoder",Sr(new.target,"getAbiCoder")()),te(this,"functions",{}),te(this,"errors",{}),te(this,"events",{}),te(this,"structs",{}),this.fragments.forEach(n=>{let i=null;switch(n.type){case"constructor":if(this.deploy){zt.warn("duplicate definition - constructor");return}te(this,"deploy",n);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=n.format();if(i[s]){zt.warn("duplicate definition - "+s);return}i[s]=n}),this.deploy||te(this,"deploy",Mn.from({payable:!1,type:"constructor"})),te(this,"_isInterface",!0)}format(e){e||(e=vt.full),e===vt.sighash&&zt.throwArgumentError("interface does not support formatting sighash","format",e);const r=this.fragments.map(n=>n.format(e));return e===vt.json?JSON.stringify(r.map(n=>JSON.parse(n))):r}static getAbiCoder(){return jx}static getAddress(e){return Ot(e)}static getSighash(e){return ar(Oi(e.format()),0,4)}static getEventTopic(e){return Oi(e.format())}getFunction(e){if(He(e)){for(const n in this.functions)if(e===this.getSighash(n))return this.functions[n];zt.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===n);return i.length===0?zt.throwArgumentError("no matching function","name",n):i.length>1&&zt.throwArgumentError("multiple matching functions","name",n),this.functions[i[0]]}const r=this.functions[On.fromString(e).format()];return r||zt.throwArgumentError("no matching function","signature",e),r}getEvent(e){if(He(e)){const n=e.toLowerCase();for(const i in this.events)if(n===this.getEventTopic(i))return this.events[i];zt.throwArgumentError("no matching event","topichash",n)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===n);return i.length===0?zt.throwArgumentError("no matching event","name",n):i.length>1&&zt.throwArgumentError("multiple matching events","name",n),this.events[i[0]]}const r=this.events[Gn.fromString(e).format()];return r||zt.throwArgumentError("no matching event","signature",e),r}getError(e){if(He(e)){const n=Sr(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===n(s))return this.errors[i]}zt.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===n);return i.length===0?zt.throwArgumentError("no matching error","name",n):i.length>1&&zt.throwArgumentError("multiple matching errors","name",n),this.errors[i[0]]}const r=this.errors[On.fromString(e).format()];return r||zt.throwArgumentError("no matching error","signature",e),r}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(r){try{e=this.getError(e)}catch{throw r}}return Sr(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),Sr(this.constructor,"getEventTopic")(e)}_decodeParams(e,r){return this._abiCoder.decode(e,r)}_encodeParams(e,r){return this._abiCoder.encode(e,r)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,r){typeof e=="string"&&(e=this.getError(e));const n=de(r);return me(n.slice(0,4))!==this.getSighash(e)&&zt.throwArgumentError(`data signature does not match error ${e.name}.`,"data",me(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,r){return typeof e=="string"&&(e=this.getError(e)),me(qt([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionData(e,r){typeof e=="string"&&(e=this.getFunction(e));const n=de(r);return me(n.slice(0,4))!==this.getSighash(e)&&zt.throwArgumentError(`data signature does not match function ${e.name}.`,"data",me(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,r){return typeof e=="string"&&(e=this.getFunction(e)),me(qt([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionResult(e,r){typeof e=="string"&&(e=this.getFunction(e));let n=de(r),i=null,s="",a=null,o=null,c=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch{}break;case 4:{const f=me(n.slice(0,4)),u=J_[f];if(u)a=this._abiCoder.decode(u.inputs,n.slice(4)),o=u.name,c=u.signature,u.reason&&(i=a[0]),o==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(a[0])}`:o==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${a[0]}`);else try{const d=this.getError(f);a=this._abiCoder.decode(d.inputs,n.slice(4)),o=d.name,c=d.format()}catch{}break}}return zt.throwError("call revert exception"+s,j.errors.CALL_EXCEPTION,{method:e.format(),data:me(r),errorArgs:a,errorName:o,errorSignature:c,reason:i})}encodeFunctionResult(e,r){return typeof e=="string"&&(e=this.getFunction(e)),me(this._abiCoder.encode(e.outputs,r||[]))}encodeFilterTopics(e,r){typeof e=="string"&&(e=this.getEvent(e)),r.length>e.inputs.length&&zt.throwError("too many arguments for "+e.format(),j.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:r});let n=[];e.anonymous||n.push(this.getEventTopic(e));const i=(s,a)=>s.type==="string"?Oi(a):s.type==="bytes"?Lt(me(a)):(s.type==="bool"&&typeof a=="boolean"&&(a=a?"0x01":"0x00"),s.type.match(/^u?int/)&&(a=le.from(a).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[a]),$t(me(a),32));for(r.forEach((s,a)=>{let o=e.inputs[a];if(!o.indexed){s!=null&&zt.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+o.name,s);return}s==null?n.push(null):o.baseType==="array"||o.baseType==="tuple"?zt.throwArgumentError("filtering with tuples or arrays not supported","contract."+o.name,s):Array.isArray(s)?n.push(s.map(c=>i(o,c))):n.push(i(o,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,r){typeof e=="string"&&(e=this.getEvent(e));const n=[],i=[],s=[];return e.anonymous||n.push(this.getEventTopic(e)),r.length!==e.inputs.length&&zt.throwArgumentError("event arguments/values mismatch","values",r),e.inputs.forEach((a,o)=>{const c=r[o];if(a.indexed)if(a.type==="string")n.push(Oi(c));else if(a.type==="bytes")n.push(Lt(c));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");n.push(this._abiCoder.encode([a.type],[c]))}else i.push(a),s.push(c)}),{data:this._abiCoder.encode(i,s),topics:n}}decodeEventLog(e,r,n){if(typeof e=="string"&&(e=this.getEvent(e)),n!=null&&!e.anonymous){let g=this.getEventTopic(e);(!He(n[0],32)||n[0].toLowerCase()!==g)&&zt.throwError("fragment/topic mismatch",j.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:g,value:n[0]}),n=n.slice(1)}let i=[],s=[],a=[];e.inputs.forEach((g,b)=>{g.indexed?g.type==="string"||g.type==="bytes"||g.baseType==="tuple"||g.baseType==="array"?(i.push(pr.fromObject({type:"bytes32",name:g.name})),a.push(!0)):(i.push(g),a.push(!1)):(s.push(g),a.push(!1))});let o=n!=null?this._abiCoder.decode(i,qt(n)):null,c=this._abiCoder.decode(s,r,!0),f=[],u=0,d=0;e.inputs.forEach((g,b)=>{if(g.indexed)if(o==null)f[b]=new kc({_isIndexed:!0,hash:null});else if(a[b])f[b]=new kc({_isIndexed:!0,hash:o[d++]});else try{f[b]=o[d++]}catch(S){f[b]=S}else try{f[b]=c[u++]}catch(S){f[b]=S}if(g.name&&f[g.name]==null){const S=f[b];S instanceof Error?Object.defineProperty(f,g.name,{enumerable:!0,get:()=>{throw Q0(`property ${JSON.stringify(g.name)}`,S)}}):f[g.name]=S}});for(let g=0;g<f.length;g++){const b=f[g];b instanceof Error&&Object.defineProperty(f,g,{enumerable:!0,get:()=>{throw Q0(`index ${g}`,b)}})}return Object.freeze(f)}parseTransaction(e){let r=this.getFunction(e.data.substring(0,10).toLowerCase());return r?new Qx({args:this._abiCoder.decode(r.inputs,"0x"+e.data.substring(10)),functionFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r),value:le.from(e.value||"0")}):null}parseLog(e){let r=this.getEvent(e.topics[0]);return!r||r.anonymous?null:new Xx({eventFragment:r,name:r.name,signature:r.format(),topic:this.getEventTopic(r),args:this.decodeEventLog(r,e.data,e.topics)})}parseError(e){const r=me(e);let n=this.getError(r.substring(0,10).toLowerCase());return n?new V_({args:this._abiCoder.decode(n.inputs,"0x"+r.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const W_="abstract-provider/5.7.0";var Y_=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const X_=new j(W_);class Q_ extends bs{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class vs{constructor(){X_.checkAbstract(new.target,vs),te(this,"_isProvider",!0)}getFeeData(){return Y_(this,void 0,void 0,function*(){const{block:e,gasPrice:r}=yield er({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(a=>null)});let n=null,i=null,s=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,s=le.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:r}})}addListener(e,r){return this.on(e,r)}removeListener(e,r){return this.off(e,r)}static isProvider(e){return!!(e&&e._isProvider)}}const Z_="abstract-signer/5.7.0";var Nn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const mn=new j(Z_),e3=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],t3=[j.errors.INSUFFICIENT_FUNDS,j.errors.NONCE_EXPIRED,j.errors.REPLACEMENT_UNDERPRICED];let ws=class Zx{constructor(){mn.checkAbstract(new.target,Zx),te(this,"_isSigner",!0)}getBalance(e){return Nn(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return Nn(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return Nn(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const r=yield er(this.checkTransaction(e));return yield this.provider.estimateGas(r)})}call(e,r){return Nn(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield er(this.checkTransaction(e));return yield this.provider.call(n,r)})}sendTransaction(e){return Nn(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const r=yield this.populateTransaction(e),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return Nn(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Nn(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Nn(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return Nn(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)e3.indexOf(n)===-1&&mn.throwArgumentError("invalid transaction key: "+n,"transaction",e);const r=Ht(e);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&mn.throwArgumentError("from address mismatch","transaction",e),n[0])),r}populateTransaction(e){return Nn(this,void 0,void 0,function*(){const r=yield er(this.checkTransaction(e));r.to!=null&&(r.to=Promise.resolve(r.to).then(i=>Nn(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&mn.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),r.to.catch(i=>{}));const n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?mn.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(r.type===0||r.type===1)&&n&&mn.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const s=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=s,r.maxPriorityFeePerGas=s}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&mn.throwError("network does not support EIP-1559",j.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):mn.throwError("failed to get consistent fee data",j.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(i=>{if(t3.indexOf(i.code)>=0)throw i;return mn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",j.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&mn.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield er(r)})}_checkProvider(e){this.provider||mn.throwError("missing provider",j.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}};class Po extends ws{constructor(e,r){super(),te(this,"address",e),te(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,r){return Promise.resolve().then(()=>{mn.throwError(e,j.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new Po(this.address,e)}}function ha(t,e,r){return r={path:e,exports:{},require:function(n,i){return r3(n,i??r.path)}},t(r,r.exports),r.exports}function r3(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Vd=eb;function eb(t,e){if(!t)throw new Error(e||"Assertion failed")}eb.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Dn=ha(function(t,e){var r=e;function n(a,o){if(Array.isArray(a))return a.slice();if(!a)return[];var c=[];if(typeof a!="string"){for(var f=0;f<a.length;f++)c[f]=a[f]|0;return c}if(o==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var f=0;f<a.length;f+=2)c.push(parseInt(a[f]+a[f+1],16))}else for(var f=0;f<a.length;f++){var u=a.charCodeAt(f),d=u>>8,g=u&255;d?c.push(d,g):c.push(g)}return c}r.toArray=n;function i(a){return a.length===1?"0"+a:a}r.zero2=i;function s(a){for(var o="",c=0;c<a.length;c++)o+=i(a[c].toString(16));return o}r.toHex=s,r.encode=function(o,c){return c==="hex"?s(o):o}}),yn=ha(function(t,e){var r=e;r.assert=Vd,r.toArray=Dn.toArray,r.zero2=Dn.zero2,r.toHex=Dn.toHex,r.encode=Dn.encode;function n(c,f,u){var d=new Array(Math.max(c.bitLength(),u)+1);d.fill(0);for(var g=1<<f+1,b=c.clone(),S=0;S<d.length;S++){var _,y=b.andln(g-1);b.isOdd()?(y>(g>>1)-1?_=(g>>1)-y:_=y,b.isubn(_)):_=0,d[S]=_,b.iushrn(1)}return d}r.getNAF=n;function i(c,f){var u=[[],[]];c=c.clone(),f=f.clone();for(var d=0,g=0,b;c.cmpn(-d)>0||f.cmpn(-g)>0;){var S=c.andln(3)+d&3,_=f.andln(3)+g&3;S===3&&(S=-1),_===3&&(_=-1);var y;S&1?(b=c.andln(7)+d&7,(b===3||b===5)&&_===2?y=-S:y=S):y=0,u[0].push(y);var E;_&1?(b=f.andln(7)+g&7,(b===3||b===5)&&S===2?E=-_:E=_):E=0,u[1].push(E),2*d===y+1&&(d=1-d),2*g===E+1&&(g=1-g),c.iushrn(1),f.iushrn(1)}return u}r.getJSF=i;function s(c,f,u){var d="_"+f;c.prototype[f]=function(){return this[d]!==void 0?this[d]:this[d]=u.call(this)}}r.cachedProperty=s;function a(c){return typeof c=="string"?r.toArray(c,"hex"):c}r.parseBytes=a;function o(c){return new Fe(c,"hex","le")}r.intFromLE=o}),Pc=yn.getNAF,n3=yn.getJSF,Cc=yn.assert;function Yi(t,e){this.type=t,this.p=new Fe(e.p,16),this.red=e.prime?Fe.red(e.prime):Fe.mont(this.p),this.zero=new Fe(0).toRed(this.red),this.one=new Fe(1).toRed(this.red),this.two=new Fe(2).toRed(this.red),this.n=e.n&&new Fe(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var _s=Yi;Yi.prototype.point=function(){throw new Error("Not implemented")};Yi.prototype.validate=function(){throw new Error("Not implemented")};Yi.prototype._fixedNafMul=function(e,r){Cc(e.precomputed);var n=e._getDoubles(),i=Pc(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var a=[],o,c;for(o=0;o<i.length;o+=n.step){c=0;for(var f=o+n.step-1;f>=o;f--)c=(c<<1)+i[f];a.push(c)}for(var u=this.jpoint(null,null,null),d=this.jpoint(null,null,null),g=s;g>0;g--){for(o=0;o<a.length;o++)c=a[o],c===g?d=d.mixedAdd(n.points[o]):c===-g&&(d=d.mixedAdd(n.points[o].neg()));u=u.add(d)}return u.toP()};Yi.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,a=Pc(r,n,this._bitLength),o=this.jpoint(null,null,null),c=a.length-1;c>=0;c--){for(var f=0;c>=0&&a[c]===0;c--)f++;if(c>=0&&f++,o=o.dblp(f),c<0)break;var u=a[c];Cc(u!==0),e.type==="affine"?u>0?o=o.mixedAdd(s[u-1>>1]):o=o.mixedAdd(s[-u-1>>1].neg()):u>0?o=o.add(s[u-1>>1]):o=o.add(s[-u-1>>1].neg())}return e.type==="affine"?o.toP():o};Yi.prototype._wnafMulAdd=function(e,r,n,i,s){var a=this._wnafT1,o=this._wnafT2,c=this._wnafT3,f=0,u,d,g;for(u=0;u<i;u++){g=r[u];var b=g._getNAFPoints(e);a[u]=b.wnd,o[u]=b.points}for(u=i-1;u>=1;u-=2){var S=u-1,_=u;if(a[S]!==1||a[_]!==1){c[S]=Pc(n[S],a[S],this._bitLength),c[_]=Pc(n[_],a[_],this._bitLength),f=Math.max(c[S].length,f),f=Math.max(c[_].length,f);continue}var y=[r[S],null,null,r[_]];r[S].y.cmp(r[_].y)===0?(y[1]=r[S].add(r[_]),y[2]=r[S].toJ().mixedAdd(r[_].neg())):r[S].y.cmp(r[_].y.redNeg())===0?(y[1]=r[S].toJ().mixedAdd(r[_]),y[2]=r[S].add(r[_].neg())):(y[1]=r[S].toJ().mixedAdd(r[_]),y[2]=r[S].toJ().mixedAdd(r[_].neg()));var E=[-3,-1,-5,-7,0,7,5,1,3],A=n3(n[S],n[_]);for(f=Math.max(A[0].length,f),c[S]=new Array(f),c[_]=new Array(f),d=0;d<f;d++){var M=A[0][d]|0,B=A[1][d]|0;c[S][d]=E[(M+1)*3+(B+1)],c[_][d]=0,o[S]=y}}var D=this.jpoint(null,null,null),L=this._wnafT4;for(u=f;u>=0;u--){for(var z=0;u>=0;){var Y=!0;for(d=0;d<i;d++)L[d]=c[d][u]|0,L[d]!==0&&(Y=!1);if(!Y)break;z++,u--}if(u>=0&&z++,D=D.dblp(z),u<0)break;for(d=0;d<i;d++){var ie=L[d];ie!==0&&(ie>0?g=o[d][ie-1>>1]:ie<0&&(g=o[d][-ie-1>>1].neg()),g.type==="affine"?D=D.mixedAdd(g):D=D.add(g))}}for(u=0;u<i;u++)o[u]=null;return s?D:D.toP()};function Tn(t,e){this.curve=t,this.type=e,this.precomputed=null}Yi.BasePoint=Tn;Tn.prototype.eq=function(){throw new Error("Not implemented")};Tn.prototype.validate=function(){return this.curve.validate(this)};Yi.prototype.decodePoint=function(e,r){e=yn.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?Cc(e[e.length-1]%2===0):e[0]===7&&Cc(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Tn.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Tn.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Tn.prototype.encode=function(e,r){return yn.encode(this._encode(r),e)};Tn.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Tn.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Tn.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var a=0;a<e;a++)i=i.dbl();n.push(i)}return{step:e,points:n}};Tn.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};Tn.prototype._getBeta=function(){return null};Tn.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var Jd=ha(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),i3=yn.assert;function kn(t){_s.call(this,"short",t),this.a=new Fe(t.a,16).toRed(this.red),this.b=new Fe(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Jd(kn,_s);var s3=kn;kn.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new Fe(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new Fe(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],i3(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var a;return e.basis?a=e.basis.map(function(o){return{a:new Fe(o.a,16),b:new Fe(o.b,16)}}):a=this._getEndoBasis(n),{beta:r,lambda:n,basis:a}}};kn.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Fe.mont(e),n=new Fe(2).toRed(r).redInvm(),i=n.redNeg(),s=new Fe(3).toRed(r).redNeg().redSqrt().redMul(n),a=i.redAdd(s).fromRed(),o=i.redSub(s).fromRed();return[a,o]};kn.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new Fe(1),a=new Fe(0),o=new Fe(0),c=new Fe(1),f,u,d,g,b,S,_,y=0,E,A;n.cmpn(0)!==0;){var M=i.div(n);E=i.sub(M.mul(n)),A=o.sub(M.mul(s));var B=c.sub(M.mul(a));if(!d&&E.cmp(r)<0)f=_.neg(),u=s,d=E.neg(),g=A;else if(d&&++y===2)break;_=E,i=n,n=E,o=s,s=A,c=a,a=B}b=E.neg(),S=A;var D=d.sqr().add(g.sqr()),L=b.sqr().add(S.sqr());return L.cmp(D)>=0&&(b=f,S=u),d.negative&&(d=d.neg(),g=g.neg()),b.negative&&(b=b.neg(),S=S.neg()),[{a:d,b:g},{a:b,b:S}]};kn.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),a=n.b.neg().mul(e).divRound(this.n),o=s.mul(n.a),c=a.mul(i.a),f=s.mul(n.b),u=a.mul(i.b),d=e.sub(o).sub(c),g=f.add(u).neg();return{k1:d,k2:g}};kn.prototype.pointFromX=function(e,r){e=new Fe(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};kn.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};kn.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,a=0;a<e.length;a++){var o=this._endoSplit(r[a]),c=e[a],f=c._getBeta();o.k1.negative&&(o.k1.ineg(),c=c.neg(!0)),o.k2.negative&&(o.k2.ineg(),f=f.neg(!0)),i[a*2]=c,i[a*2+1]=f,s[a*2]=o.k1,s[a*2+1]=o.k2}for(var u=this._wnafMulAdd(1,i,s,a*2,n),d=0;d<a*2;d++)i[d]=null,s[d]=null;return u};function vr(t,e,r,n){_s.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Fe(e,16),this.y=new Fe(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Jd(vr,_s.BasePoint);kn.prototype.point=function(e,r,n){return new vr(this,e,r,n)};kn.prototype.pointFromJSON=function(e,r){return vr.fromJSON(this,e,r)};vr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};vr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};vr.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(o){return e.point(o[0],o[1],n)}var a=r[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}},i};vr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};vr.prototype.isInfinity=function(){return this.inf};vr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};vr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),a=s.redSqr().redISub(this.x.redAdd(this.x)),o=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};vr.prototype.getX=function(){return this.x.fromRed()};vr.prototype.getY=function(){return this.y.fromRed()};vr.prototype.mul=function(e){return e=new Fe(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};vr.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};vr.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};vr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};vr.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};vr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Cr(t,e,r,n){_s.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Fe(0)):(this.x=new Fe(e,16),this.y=new Fe(r,16),this.z=new Fe(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Jd(Cr,_s.BasePoint);kn.prototype.jpoint=function(e,r,n){return new Cr(this,e,r,n)};Cr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};Cr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Cr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),a=this.y.redMul(r.redMul(e.z)),o=e.y.redMul(n.redMul(this.z)),c=i.redSub(s),f=a.redSub(o);if(c.cmpn(0)===0)return f.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=c.redSqr(),d=u.redMul(c),g=i.redMul(u),b=f.redSqr().redIAdd(d).redISub(g).redISub(g),S=f.redMul(g.redISub(b)).redISub(a.redMul(d)),_=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(b,S,_)};Cr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,a=e.y.redMul(r).redMul(this.z),o=n.redSub(i),c=s.redSub(a);if(o.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=o.redSqr(),u=f.redMul(o),d=n.redMul(f),g=c.redSqr().redIAdd(u).redISub(d).redISub(d),b=c.redMul(d.redISub(g)).redISub(s.redMul(u)),S=this.z.redMul(o);return this.curve.jpoint(g,b,S)};Cr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,a=this.x,o=this.y,c=this.z,f=c.redSqr().redSqr(),u=o.redAdd(o);for(r=0;r<e;r++){var d=a.redSqr(),g=u.redSqr(),b=g.redSqr(),S=d.redAdd(d).redIAdd(d).redIAdd(i.redMul(f)),_=a.redMul(g),y=S.redSqr().redISub(_.redAdd(_)),E=_.redISub(y),A=S.redMul(E);A=A.redIAdd(A).redISub(b);var M=u.redMul(c);r+1<e&&(f=f.redMul(b)),a=y,c=M,u=A}return this.curve.jpoint(a,u.redMul(s),c)};Cr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Cr.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var c=i.redAdd(i).redIAdd(i),f=c.redSqr().redISub(o).redISub(o),u=a.redIAdd(a);u=u.redIAdd(u),u=u.redIAdd(u),e=f,r=c.redMul(o.redISub(f)).redISub(u),n=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),g=this.y.redSqr(),b=g.redSqr(),S=this.x.redAdd(g).redSqr().redISub(d).redISub(b);S=S.redIAdd(S);var _=d.redAdd(d).redIAdd(d),y=_.redSqr(),E=b.redIAdd(b);E=E.redIAdd(E),E=E.redIAdd(E),e=y.redISub(S).redISub(S),r=_.redMul(S.redISub(e)).redISub(E),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};Cr.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),f=c.redSqr().redISub(o).redISub(o);e=f;var u=a.redIAdd(a);u=u.redIAdd(u),u=u.redIAdd(u),r=c.redMul(o.redISub(f)).redISub(u),n=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),g=this.y.redSqr(),b=this.x.redMul(g),S=this.x.redSub(d).redMul(this.x.redAdd(d));S=S.redAdd(S).redIAdd(S);var _=b.redIAdd(b);_=_.redIAdd(_);var y=_.redAdd(_);e=S.redSqr().redISub(y),n=this.y.redAdd(this.z).redSqr().redISub(g).redISub(d);var E=g.redSqr();E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E),r=S.redMul(_.redISub(e)).redISub(E)}return this.curve.jpoint(e,r,n)};Cr.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),a=r.redSqr(),o=n.redSqr(),c=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(s)),f=r.redAdd(r);f=f.redIAdd(f);var u=f.redMul(o),d=c.redSqr().redISub(u.redAdd(u)),g=u.redISub(d),b=o.redSqr();b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var S=c.redMul(g).redISub(b),_=n.redAdd(n).redMul(i);return this.curve.jpoint(d,S,_)};Cr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),a=s.redSqr(),o=this.x.redAdd(r).redSqr().redISub(e).redISub(i);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(a);var c=o.redSqr(),f=i.redIAdd(i);f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var u=s.redIAdd(o).redSqr().redISub(a).redISub(c).redISub(f),d=r.redMul(u);d=d.redIAdd(d),d=d.redIAdd(d);var g=this.x.redMul(c).redISub(d);g=g.redIAdd(g),g=g.redIAdd(g);var b=this.y.redMul(u.redMul(f.redISub(u)).redISub(o.redMul(c)));b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var S=this.z.redAdd(o).redSqr().redISub(n).redISub(c);return this.curve.jpoint(g,b,S)};Cr.prototype.mul=function(e,r){return e=new Fe(e,r),this.curve._wnafMul(this,e)};Cr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};Cr.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};Cr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Cr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var cc=ha(function(t,e){var r=e;r.base=_s,r.short=s3,r.mont=null,r.edwards=null}),fc=ha(function(t,e){var r=e,n=yn.assert;function i(o){o.type==="short"?this.curve=new cc.short(o):o.type==="edwards"?this.curve=new cc.edwards(o):this.curve=new cc.mont(o),this.g=this.curve.g,this.n=this.curve.n,this.hash=o.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(o,c){Object.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){var f=new i(c);return Object.defineProperty(r,o,{configurable:!0,enumerable:!0,value:f}),f}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Zr.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Zr.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Zr.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Zr.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Zr.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Zr.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Zr.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=null.crash()}catch{a=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Zr.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})});function Li(t){if(!(this instanceof Li))return new Li(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Dn.toArray(t.entropy,t.entropyEnc||"hex"),r=Dn.toArray(t.nonce,t.nonceEnc||"hex"),n=Dn.toArray(t.pers,t.persEnc||"hex");Vd(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var tb=Li;Li.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Li.prototype._hmac=function(){return new Zr.hmac(this.hash,this.K)};Li.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Li.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=Dn.toArray(e,r),n=Dn.toArray(n,i),Vd(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};Li.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Dn.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,e);return this._update(n),this._reseed++,Dn.encode(a,r)};var _l=yn.assert;function Ur(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Wd=Ur;Ur.fromPublic=function(e,r,n){return r instanceof Ur?r:new Ur(e,{pub:r,pubEnc:n})};Ur.fromPrivate=function(e,r,n){return r instanceof Ur?r:new Ur(e,{priv:r,privEnc:n})};Ur.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Ur.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Ur.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Ur.prototype._importPrivate=function(e,r){this.priv=new Fe(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Ur.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?_l(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&_l(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Ur.prototype.derive=function(e){return e.validate()||_l(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Ur.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};Ur.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};Ur.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var a3=yn.assert;function af(t,e){if(t instanceof af)return t;this._importDER(t,e)||(a3(t.r&&t.s,"Signature without r or s"),this.r=new Fe(t.r,16),this.s=new Fe(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var of=af;function o3(){this.place=0}function au(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,a=e.place;s<n;s++,a++)i<<=8,i|=t[a],i>>>=0;return i<=127?!1:(e.place=a,i)}function Z0(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}af.prototype._importDER=function(e,r){e=yn.toArray(e,r);var n=new o3;if(e[n.place++]!==48)return!1;var i=au(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=au(e,n);if(s===!1)return!1;var a=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var o=au(e,n);if(o===!1||e.length!==o+n.place)return!1;var c=e.slice(n.place,o+n.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Fe(a),this.s=new Fe(c),this.recoveryParam=null,!0};function ou(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}af.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=Z0(r),n=Z0(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];ou(i,r.length),i=i.concat(r),i.push(2),ou(i,n.length);var s=i.concat(n),a=[48];return ou(a,s.length),a=a.concat(s),yn.encode(a,e)};var c3=function(){throw new Error("unsupported")},rb=yn.assert;function An(t){if(!(this instanceof An))return new An(t);typeof t=="string"&&(rb(Object.prototype.hasOwnProperty.call(fc,t),"Unknown curve "+t),t=fc[t]),t instanceof fc.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var f3=An;An.prototype.keyPair=function(e){return new Wd(this,e)};An.prototype.keyFromPrivate=function(e,r){return Wd.fromPrivate(this,e,r)};An.prototype.keyFromPublic=function(e,r){return Wd.fromPublic(this,e,r)};An.prototype.genKeyPair=function(e){e||(e={});for(var r=new tb({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||c3(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Fe(2));;){var s=new Fe(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};An.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};An.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new Fe(e,16));for(var s=this.n.byteLength(),a=r.getPrivate().toArray("be",s),o=e.toArray("be",s),c=new tb({hash:this.hash,entropy:a,nonce:o,pers:i.pers,persEnc:i.persEnc||"utf8"}),f=this.n.sub(new Fe(1)),u=0;;u++){var d=i.k?i.k(u):new Fe(c.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(f)>=0)){var g=this.g.mul(d);if(!g.isInfinity()){var b=g.getX(),S=b.umod(this.n);if(S.cmpn(0)!==0){var _=d.invm(this.n).mul(S.mul(r.getPrivate()).iadd(e));if(_=_.umod(this.n),_.cmpn(0)!==0){var y=(g.getY().isOdd()?1:0)|(b.cmp(S)!==0?2:0);return i.canonical&&_.cmp(this.nh)>0&&(_=this.n.sub(_),y^=1),new of({r:S,s:_,recoveryParam:y})}}}}}};An.prototype.verify=function(e,r,n,i){e=this._truncateToN(new Fe(e,16)),n=this.keyFromPublic(n,i),r=new of(r,"hex");var s=r.r,a=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var o=a.invm(this.n),c=o.mul(e).umod(this.n),f=o.mul(s).umod(this.n),u;return this.curve._maxwellTrick?(u=this.g.jmulAdd(c,n.getPublic(),f),u.isInfinity()?!1:u.eqXToP(s)):(u=this.g.mulAdd(c,n.getPublic(),f),u.isInfinity()?!1:u.getX().umod(this.n).cmp(s)===0)};An.prototype.recoverPubKey=function(t,e,r,n){rb((3&r)===r,"The recovery param is more than two bits"),e=new of(e,n);var i=this.n,s=new Fe(t),a=e.r,o=e.s,c=r&1,f=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");f?a=this.curve.pointFromX(a.add(this.curve.n),c):a=this.curve.pointFromX(a,c);var u=e.r.invm(i),d=i.sub(s).mul(u).umod(i),g=o.mul(u).umod(i);return this.g.mulAdd(d,a,g)};An.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new of(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var u3=ha(function(t,e){var r=e;r.version="6.5.4",r.utils=yn,r.rand=function(){throw new Error("unsupported")},r.curve=cc,r.curves=fc,r.ec=f3,r.eddsa=null}),l3=u3.ec;const d3="signing-key/5.7.0",El=new j(d3);let cu=null;function zn(){return cu||(cu=new l3("secp256k1")),cu}class as{constructor(e){te(this,"curve","secp256k1"),te(this,"privateKey",me(e)),ti(this.privateKey)!==32&&El.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=zn().keyFromPrivate(de(this.privateKey));te(this,"publicKey","0x"+r.getPublic(!1,"hex")),te(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),te(this,"_isSigningKey",!0)}_addPoint(e){const r=zn().keyFromPublic(de(this.publicKey)),n=zn().keyFromPublic(de(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=zn().keyFromPrivate(de(this.privateKey)),n=de(e);n.length!==32&&El.throwArgumentError("bad digest length","digest",e);const i=r.sign(n,{canonical:!0});return xs({recoveryParam:i.recoveryParam,r:$t("0x"+i.r.toString(16),32),s:$t("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const r=zn().keyFromPrivate(de(this.privateKey)),n=zn().keyFromPublic(de(Yd(e)));return $t("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function nb(t,e){const r=xs(e),n={r:de(r.r),s:de(r.s)};return"0x"+zn().recoverPubKey(de(t),n,r.recoveryParam).encode("hex",!1)}function Yd(t,e){const r=de(t);if(r.length===32){const n=new as(r);return e?"0x"+zn().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return e?me(r):"0x"+zn().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return e?"0x"+zn().keyFromPublic(r).getPublic(!0,"hex"):me(r)}return El.throwArgumentError("invalid public or private key","key","[REDACTED]")}const h3="transactions/5.7.0",Dr=new j(h3);var Al;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(Al||(Al={}));function Xd(t){return t==="0x"?null:Ot(t)}function Or(t){return t==="0x"?Ld:le.from(t)}const p3=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],g3={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Ui(t){const e=Yd(t);return Ot(ar(Lt(ar(e,1)),12))}function Co(t,e){return Ui(nb(de(t),e))}function ln(t,e){const r=Yn(le.from(t).toHexString());return r.length>32&&Dr.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function fu(t,e){return{address:Ot(t),storageKeys:(e||[]).map((r,n)=>(ti(r)!==32&&Dr.throwArgumentError("invalid access list storageKey",`accessList[${t}:${n}]`,r),r.toLowerCase()))}}function Xi(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(r.length>2&&Dr.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),fu(r[0],r[1])):fu(r.address,r.storageKeys));const e=Object.keys(t).map(r=>{const n=t[r].reduce((i,s)=>(i[s]=!0,i),{});return fu(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function ib(t){return Xi(t).map(e=>[e.address,e.storageKeys])}function sb(t,e){if(t.gasPrice!=null){const n=le.from(t.gasPrice),i=le.from(t.maxFeePerGas||0);n.eq(i)||Dr.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}const r=[ln(t.chainId||0,"chainId"),ln(t.nonce||0,"nonce"),ln(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ln(t.maxFeePerGas||0,"maxFeePerGas"),ln(t.gasLimit||0,"gasLimit"),t.to!=null?Ot(t.to):"0x",ln(t.value||0,"value"),t.data||"0x",ib(t.accessList||[])];if(e){const n=xs(e);r.push(ln(n.recoveryParam,"recoveryParam")),r.push(Yn(n.r)),r.push(Yn(n.s))}return $r(["0x02",us(r)])}function ab(t,e){const r=[ln(t.chainId||0,"chainId"),ln(t.nonce||0,"nonce"),ln(t.gasPrice||0,"gasPrice"),ln(t.gasLimit||0,"gasLimit"),t.to!=null?Ot(t.to):"0x",ln(t.value||0,"value"),t.data||"0x",ib(t.accessList||[])];if(e){const n=xs(e);r.push(ln(n.recoveryParam,"recoveryParam")),r.push(Yn(n.r)),r.push(Yn(n.s))}return $r(["0x01",us(r)])}function y3(t,e){Od(t,g3);const r=[];p3.forEach(function(a){let o=t[a.name]||[];const c={};a.numeric&&(c.hexPad="left"),o=de(me(o,c)),a.length&&o.length!==a.length&&o.length>0&&Dr.throwArgumentError("invalid length for "+a.name,"transaction:"+a.name,o),a.maxLength&&(o=Yn(o),o.length>a.maxLength&&Dr.throwArgumentError("invalid length for "+a.name,"transaction:"+a.name,o)),r.push(me(o))});let n=0;if(t.chainId!=null?(n=t.chainId,typeof n!="number"&&Dr.throwArgumentError("invalid transaction.chainId","transaction",t)):e&&!So(e)&&e.v>28&&(n=Math.floor((e.v-35)/2)),n!==0&&(r.push(me(n)),r.push("0x"),r.push("0x")),!e)return us(r);const i=xs(e);let s=27+i.recoveryParam;return n!==0?(r.pop(),r.pop(),r.pop(),s+=n*2+8,i.v>28&&i.v!==s&&Dr.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):i.v!==s&&Dr.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),r.push(me(s)),r.push(Yn(de(i.r))),r.push(Yn(de(i.s))),us(r)}function Sl(t,e){if(t.type==null||t.type===0)return t.accessList!=null&&Dr.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),y3(t,e);switch(t.type){case 1:return ab(t,e);case 2:return sb(t,e)}return Dr.throwError(`unsupported transaction type: ${t.type}`,j.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}function ob(t,e,r){try{const n=Or(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");t.v=n}catch{Dr.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=$t(e[1],32),t.s=$t(e[2],32);try{const n=Lt(r(t));t.from=Co(n,{r:t.r,s:t.s,recoveryParam:t.v})}catch{}}function x3(t){const e=rf(t.slice(1));e.length!==9&&e.length!==12&&Dr.throwArgumentError("invalid component count for transaction type: 2","payload",me(t));const r=Or(e[2]),n=Or(e[3]),i={type:2,chainId:Or(e[0]).toNumber(),nonce:Or(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:Or(e[4]),to:Xd(e[5]),value:Or(e[6]),data:e[7],accessList:Xi(e[8])};return e.length===9||(i.hash=Lt(t),ob(i,e.slice(9),sb)),i}function b3(t){const e=rf(t.slice(1));e.length!==8&&e.length!==11&&Dr.throwArgumentError("invalid component count for transaction type: 1","payload",me(t));const r={type:1,chainId:Or(e[0]).toNumber(),nonce:Or(e[1]).toNumber(),gasPrice:Or(e[2]),gasLimit:Or(e[3]),to:Xd(e[4]),value:Or(e[5]),data:e[6],accessList:Xi(e[7])};return e.length===8||(r.hash=Lt(t),ob(r,e.slice(8),ab)),r}function m3(t){const e=rf(t);e.length!==9&&e.length!==6&&Dr.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:Or(e[0]).toNumber(),gasPrice:Or(e[1]),gasLimit:Or(e[2]),to:Xd(e[3]),value:Or(e[4]),data:e[5],chainId:0};if(e.length===6)return r;try{r.v=le.from(e[6]).toNumber()}catch{return r}if(r.r=$t(e[7],32),r.s=$t(e[8],32),le.from(r.r).isZero()&&le.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=e.slice(0,6);r.chainId!==0&&(i.push(me(r.chainId)),i.push("0x"),i.push("0x"),n-=r.chainId*2+8);const s=Lt(us(i));try{r.from=Co(s,{r:me(r.r),s:me(r.s),recoveryParam:n})}catch{}r.hash=Lt(t)}return r.type=null,r}function cb(t){const e=de(t);if(e[0]>127)return m3(e);switch(e[0]){case 1:return b3(e);case 2:return x3(e)}return Dr.throwError(`unsupported transaction type: ${e[0]}`,j.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const v3="contracts/5.7.0";var Fi=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const Ut=new j(v3),w3={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0,ccipReadEnabled:!0};function Ic(t,e){return Fi(this,void 0,void 0,function*(){const r=yield e;typeof r!="string"&&Ut.throwArgumentError("invalid address or ENS name","name",r);try{return Ot(r)}catch{}t||Ut.throwError("a provider or signer is needed to resolve ENS names",j.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield t.resolveName(r);return n==null&&Ut.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n})}function Ga(t,e,r){return Fi(this,void 0,void 0,function*(){return Array.isArray(r)?yield Promise.all(r.map((n,i)=>Ga(t,Array.isArray(e)?e[i]:e[n.name],n))):r.type==="address"?yield Ic(t,e):r.type==="tuple"?yield Ga(t,e,r.components):r.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>Ga(t,n,r.arrayChildren))):Promise.reject(Ut.makeError("invalid value for array",j.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function cf(t,e,r){return Fi(this,void 0,void 0,function*(){let n={};r.length===e.inputs.length+1&&typeof r[r.length-1]=="object"&&(n=Ht(r.pop())),Ut.checkArgumentCount(r.length,e.inputs.length,"passed to contract"),t.signer?n.from?n.from=er({override:Ic(t.signer,n.from),signer:t.signer.getAddress()}).then(f=>Fi(this,void 0,void 0,function*(){return Ot(f.signer)!==f.override&&Ut.throwError("Contract with a Signer cannot override from",j.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),f.override})):n.from=t.signer.getAddress():n.from&&(n.from=Ic(t.provider,n.from));const i=yield er({args:Ga(t.signer||t.provider,r,e.inputs),address:t.resolvedAddress,overrides:er(n)||{}}),s=t.interface.encodeFunctionData(e,i.args),a={data:s,to:i.address},o=i.overrides;if(o.nonce!=null&&(a.nonce=le.from(o.nonce).toNumber()),o.gasLimit!=null&&(a.gasLimit=le.from(o.gasLimit)),o.gasPrice!=null&&(a.gasPrice=le.from(o.gasPrice)),o.maxFeePerGas!=null&&(a.maxFeePerGas=le.from(o.maxFeePerGas)),o.maxPriorityFeePerGas!=null&&(a.maxPriorityFeePerGas=le.from(o.maxPriorityFeePerGas)),o.from!=null&&(a.from=o.from),o.type!=null&&(a.type=o.type),o.accessList!=null&&(a.accessList=Xi(o.accessList)),a.gasLimit==null&&e.gas!=null){let f=21e3;const u=de(s);for(let d=0;d<u.length;d++)f+=4,u[d]&&(f+=64);a.gasLimit=le.from(e.gas).add(f)}if(o.value){const f=le.from(o.value);!f.isZero()&&!e.payable&&Ut.throwError("non-payable method cannot override value",j.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),a.value=f}o.customData&&(a.customData=Ht(o.customData)),o.ccipReadEnabled&&(a.ccipReadEnabled=!!o.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const c=Object.keys(n).filter(f=>n[f]!=null);return c.length&&Ut.throwError(`cannot override ${c.map(f=>JSON.stringify(f)).join(",")}`,j.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:c}),a})}function _3(t,e){return function(...r){return cf(t,e,r)}}function E3(t,e){const r=t.signer||t.provider;return function(...n){return Fi(this,void 0,void 0,function*(){r||Ut.throwError("estimate require a provider or signer",j.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield cf(t,e,n);return yield r.estimateGas(i)})}}function fb(t,e){const r=e.wait.bind(e);e.wait=n=>r(n).then(i=>(i.events=i.logs.map(s=>{let a=zr(s),o=null;try{o=t.interface.parseLog(s)}catch{}return o&&(a.args=o.args,a.decode=(c,f)=>t.interface.decodeEventLog(o.eventFragment,c,f),a.event=o.name,a.eventSignature=o.signature),a.removeListener=()=>t.provider,a.getBlock=()=>t.provider.getBlock(i.blockHash),a.getTransaction=()=>t.provider.getTransaction(i.transactionHash),a.getTransactionReceipt=()=>Promise.resolve(i),a}),i))}function ub(t,e,r){const n=t.signer||t.provider;return function(...i){return Fi(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const c=Ht(i.pop());c.blockTag!=null&&(s=yield c.blockTag),delete c.blockTag,i.push(c)}t.deployTransaction!=null&&(yield t._deployed(s));const a=yield cf(t,e,i),o=yield n.call(a,s);try{let c=t.interface.decodeFunctionResult(e,o);return r&&e.outputs.length===1&&(c=c[0]),c}catch(c){throw c.code===j.errors.CALL_EXCEPTION&&(c.address=t.address,c.args=i,c.transaction=a),c}})}}function A3(t,e){return function(...r){return Fi(this,void 0,void 0,function*(){t.signer||Ut.throwError("sending a transaction requires a signer",j.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),t.deployTransaction!=null&&(yield t._deployed());const n=yield cf(t,e,r),i=yield t.signer.sendTransaction(n);return fb(t,i),i})}}function ep(t,e,r){return e.constant?ub(t,e,r):A3(t,e)}function lb(t){return t.address&&(t.topics==null||t.topics.length===0)?"*":(t.address||"*")+"@"+(t.topics?t.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class io{constructor(e,r){te(this,"tag",e),te(this,"filter",r),this._listeners=[]}addListener(e,r){this._listeners.push({listener:e,once:r})}removeListener(e){let r=!1;this._listeners=this._listeners.filter(n=>r||n.listener!==e?!0:(r=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const r=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const i=e.slice();return setTimeout(()=>{n.listener.apply(this,i)},0),!n.once}),r}prepareEvent(e){}getEmit(e){return[e]}}class S3 extends io{constructor(){super("error",null)}}class tp extends io{constructor(e,r,n,i){const s={address:e};let a=r.getEventTopic(n);i?(a!==i[0]&&Ut.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[a],super(lb(s),s),te(this,"address",e),te(this,"interface",r),te(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(r,n)=>this.interface.decodeEventLog(this.fragment,r,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(r){e.args=null,e.decodeError=r}}getEmit(e){const r=Ex(e.args);if(r.length)throw r[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class rp extends io{constructor(e,r){super("*",{address:e}),te(this,"address",e),te(this,"interface",r)}prepareEvent(e){super.prepareEvent(e);try{const r=this.interface.parseLog(e);e.event=r.name,e.eventSignature=r.signature,e.decode=(n,i)=>this.interface.decodeEventLog(r.eventFragment,n,i),e.args=r.args}catch{}}}class Qd{constructor(e,r,n){te(this,"interface",Sr(new.target,"getInterface")(r)),n==null?(te(this,"provider",null),te(this,"signer",null)):ws.isSigner(n)?(te(this,"provider",n.provider||null),te(this,"signer",n)):vs.isProvider(n)?(te(this,"provider",n),te(this,"signer",null)):Ut.throwArgumentError("invalid signer or provider","signerOrProvider",n),te(this,"callStatic",{}),te(this,"estimateGas",{}),te(this,"functions",{}),te(this,"populateTransaction",{}),te(this,"filters",{});{const a={};Object.keys(this.interface.events).forEach(o=>{const c=this.interface.events[o];te(this.filters,o,(...f)=>({address:this.address,topics:this.interface.encodeFilterTopics(c,f)})),a[c.name]||(a[c.name]=[]),a[c.name].push(o)}),Object.keys(a).forEach(o=>{const c=a[o];c.length===1?te(this.filters,o,this.filters[c[0]]):Ut.warn(`Duplicate definition of ${o} (${c.join(", ")})`)})}if(te(this,"_runningEvents",{}),te(this,"_wrappedEmits",{}),e==null&&Ut.throwArgumentError("invalid contract address or ENS name","addressOrName",e),te(this,"address",e),this.provider)te(this,"resolvedAddress",Ic(this.provider,e));else try{te(this,"resolvedAddress",Promise.resolve(Ot(e)))}catch{Ut.throwError("provider is required to use ENS name as contract address",j.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(a=>{});const i={},s={};Object.keys(this.interface.functions).forEach(a=>{const o=this.interface.functions[a];if(s[a]){Ut.warn(`Duplicate ABI entry for ${JSON.stringify(a)}`);return}s[a]=!0;{const c=o.name;i[`%${c}`]||(i[`%${c}`]=[]),i[`%${c}`].push(a)}this[a]==null&&te(this,a,ep(this,o,!0)),this.functions[a]==null&&te(this.functions,a,ep(this,o,!1)),this.callStatic[a]==null&&te(this.callStatic,a,ub(this,o,!0)),this.populateTransaction[a]==null&&te(this.populateTransaction,a,_3(this,o)),this.estimateGas[a]==null&&te(this.estimateGas,a,E3(this,o))}),Object.keys(i).forEach(a=>{const o=i[a];if(o.length>1)return;a=a.substring(1);const c=o[0];try{this[a]==null&&te(this,a,this[c])}catch{}this.functions[a]==null&&te(this.functions,a,this.functions[c]),this.callStatic[a]==null&&te(this.callStatic,a,this.callStatic[c]),this.populateTransaction[a]==null&&te(this.populateTransaction,a,this.populateTransaction[c]),this.estimateGas[a]==null&&te(this.estimateGas,a,this.estimateGas[c])})}static getContractAddress(e){return nf(e)}static getInterface(e){return wl.isInterface(e)?e:new wl(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(r=>(r==="0x"&&Ut.throwError("contract not deployed",j.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||Ut.throwError("sending a transactions require a signer",j.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const r=Ht(e||{});return["from","to"].forEach(function(n){r[n]!=null&&Ut.throwError("cannot override "+n,j.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(r))}connect(e){typeof e=="string"&&(e=new Po(e,this.provider));const r=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&te(r,"deployTransaction",this.deployTransaction),r}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return kc.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new S3);if(e==="event")return this._normalizeRunningEvent(new io("event",null));if(e==="*")return this._normalizeRunningEvent(new rp(this.address,this.interface));const r=this.interface.getEvent(e);return this._normalizeRunningEvent(new tp(this.address,this.interface,r))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const i=this.interface.getEvent(n);return this._normalizeRunningEvent(new tp(this.address,this.interface,i,e.topics))}catch{}const r={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new io(lb(r),r))}return this._normalizeRunningEvent(new rp(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const r=this._wrappedEmits[e.tag];r&&e.filter&&(this.provider.off(e.filter,r),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,r,n){const i=zr(r);return i.removeListener=()=>{n&&(e.removeListener(n),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(r.blockHash),i.getTransaction=()=>this.provider.getTransaction(r.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(r.transactionHash),e.prepareEvent(i),i}_addEventListener(e,r,n){if(this.provider||Ut.throwError("events require a provider or a signer with a provider",j.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(r,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let a=this._wrapEvent(e,s,r);if(a.decodeError==null)try{const o=e.getEmit(a);this.emit(e.filter,...o)}catch(o){a.decodeError=o.error}e.filter!=null&&this.emit("event",a),a.decodeError!=null&&this.emit("error",a.decodeError,a)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,r,n){const i=this._getRunningEvent(e),s=Ht(i.filter);return typeof r=="string"&&He(r,32)?(n!=null&&Ut.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),s.blockHash=r):(s.fromBlock=r??0,s.toBlock=n??"latest"),this.provider.getLogs(s).then(a=>a.map(o=>this._wrapEvent(i,o,null)))}on(e,r){return this._addEventListener(this._getRunningEvent(e),r,!1),this}once(e,r){return this._addEventListener(this._getRunningEvent(e),r,!0),this}emit(e,...r){if(!this.provider)return!1;const n=this._getRunningEvent(e),i=n.run(r)>0;return this._checkRunningEvents(n),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((r,n)=>r+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const r=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(i=>{r.push(i)});return r}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const i=this._runningEvents[n];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const r=this._getRunningEvent(e);return r.removeAllListeners(),this._checkRunningEvents(r),this}off(e,r){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(r),this._checkRunningEvents(n),this}removeListener(e,r){return this.off(e,r)}}class Nc extends Qd{}class db{constructor(e,r,n){let i=null;typeof r=="string"?i=r:Wi(r)?i=me(r):r&&typeof r.object=="string"?i=r.object:i="!",i.substring(0,2)!=="0x"&&(i="0x"+i),(!He(i)||i.length%2)&&Ut.throwArgumentError("invalid bytecode","bytecode",r),n&&!ws.isSigner(n)&&Ut.throwArgumentError("invalid signer","signer",n),te(this,"bytecode",i),te(this,"interface",Sr(new.target,"getInterface")(e)),te(this,"signer",n||null)}getDeployTransaction(...e){let r={};if(e.length===this.interface.deploy.inputs.length+1&&typeof e[e.length-1]=="object"){r=Ht(e.pop());for(const n in r)if(!w3[n])throw new Error("unknown transaction override "+n)}return["data","from","to"].forEach(n=>{r[n]!=null&&Ut.throwError("cannot override "+n,j.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.value&&!le.from(r.value).isZero()&&!this.interface.deploy.payable&&Ut.throwError("non-payable constructor cannot override value",j.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),Ut.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor"),r.data=me(qt([this.bytecode,this.interface.encodeDeploy(e)])),r}deploy(...e){return Fi(this,void 0,void 0,function*(){let r={};e.length===this.interface.deploy.inputs.length+1&&(r=e.pop()),Ut.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor");const n=yield Ga(this.signer,e,this.interface.deploy.inputs);n.push(r);const i=this.getDeployTransaction(...n),s=yield this.signer.sendTransaction(i),a=Sr(this.constructor,"getContractAddress")(s),o=Sr(this.constructor,"getContract")(a,this.interface,this.signer);return fb(o,s),te(o,"deployTransaction",s),o})}attach(e){return this.constructor.getContract(e,this.interface,this.signer)}connect(e){return new this.constructor(this.interface,this.bytecode,e)}static fromSolidity(e,r){e==null&&Ut.throwError("missing compiler output",j.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),typeof e=="string"&&(e=JSON.parse(e));const n=e.abi;let i=null;return e.bytecode?i=e.bytecode:e.evm&&e.evm.bytecode&&(i=e.evm.bytecode),new this(n,i,r)}static getInterface(e){return Nc.getInterface(e)}static getContractAddress(e){return nf(e)}static getContract(e,r,n){return new Nc(e,r,n)}}class hb{constructor(e){te(this,"alphabet",e),te(this,"base",e.length),te(this,"_alphabetMap",{}),te(this,"_leader",e.charAt(0));for(let r=0;r<e.length;r++)this._alphabetMap[e.charAt(r)]=r}encode(e){let r=de(e);if(r.length===0)return"";let n=[0];for(let s=0;s<r.length;++s){let a=r[s];for(let o=0;o<n.length;++o)a+=n[o]<<8,n[o]=a%this.base,a=a/this.base|0;for(;a>0;)n.push(a%this.base),a=a/this.base|0}let i="";for(let s=0;r[s]===0&&s<r.length-1;++s)i+=this._leader;for(let s=n.length-1;s>=0;--s)i+=this.alphabet[n[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let r=[];if(e.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let a=0;a<r.length;++a)s+=r[a]*this.base,r[a]=s&255,s>>=8;for(;s>0;)r.push(s&255),s>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)r.push(0);return de(new Uint8Array(r.reverse()))}}new hb("abcdefghijklmnopqrstuvwxyz234567");const ea=new hb("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var ta;(function(t){t.sha256="sha256",t.sha512="sha512"})(ta||(ta={}));const T3="sha2/5.7.0",k3=new j(T3);function pb(t){return"0x"+Zr.ripemd160().update(de(t)).digest("hex")}function bi(t){return"0x"+Zr.sha256().update(de(t)).digest("hex")}function P3(t){return"0x"+Zr.sha512().update(de(t)).digest("hex")}function so(t,e,r){return ta[t]||k3.throwError("unsupported algorithm "+t,j.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+Zr.hmac(Zr[t],de(e)).update(de(r)).digest("hex")}function Zd(t,e,r,n,i){t=de(t),e=de(e);let s,a=1;const o=new Uint8Array(n),c=new Uint8Array(e.length+4);c.set(e);let f,u;for(let d=1;d<=a;d++){c[e.length]=d>>24&255,c[e.length+1]=d>>16&255,c[e.length+2]=d>>8&255,c[e.length+3]=d&255;let g=de(so(i,t,c));s||(s=g.length,u=new Uint8Array(s),a=Math.ceil(n/s),f=n-(a-1)*s),u.set(g);for(let _=1;_<r;_++){g=de(so(i,t,g));for(let y=0;y<s;y++)u[y]^=g[y]}const b=(d-1)*s,S=d===a?f:s;o.set(de(u).slice(0,S),b)}return me(o)}const C3="wordlists/5.7.0",I3=new j(C3);class Es{constructor(e){I3.checkAbstract(new.target,Es),te(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const r=[];for(let n=0;n<2048;n++){const i=e.getWord(n);if(n!==e.getWordIndex(i))return"0x";r.push(i)}return Oi(r.join(`
`)+`
`)}static register(e,r){r||(r=e.locale)}}const N3="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let Va=null;function np(t){if(Va==null&&(Va=N3.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),Es.check(t)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw Va=null,new Error("BIP39 Wordlist for en (English) FAILED")}class R3 extends Es{constructor(){super("en")}getWord(e){return np(this),Va[e]}getWordIndex(e){return np(this),Va.indexOf(e)}}const gb=new R3;Es.register(gb);const Rc={en:gb},B3="hdnode/5.7.0",ao=new j(B3),M3=le.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),O3=cr("Bitcoin seed"),$s=2147483648;function yb(t){return(1<<t)-1<<8-t}function D3(t){return(1<<t)-1}function Vo(t){return $t(me(t),32)}function ip(t){return ea.encode(qt([t,ar(bi(bi(t)),0,4)]))}function eh(t){if(t==null)return Rc.en;if(typeof t=="string"){const e=Rc[t];return e==null&&ao.throwArgumentError("unknown locale","wordlist",t),e}return t}const Ns={},ra="m/44'/60'/0'/0/0";class dn{constructor(e,r,n,i,s,a,o,c){if(e!==Ns)throw new Error("HDNode constructor cannot be called directly");if(r){const f=new as(r);te(this,"privateKey",f.privateKey),te(this,"publicKey",f.compressedPublicKey)}else te(this,"privateKey",null),te(this,"publicKey",me(n));te(this,"parentFingerprint",i),te(this,"fingerprint",ar(pb(bi(this.publicKey)),0,4)),te(this,"address",Ui(this.publicKey)),te(this,"chainCode",s),te(this,"index",a),te(this,"depth",o),c==null?(te(this,"mnemonic",null),te(this,"path",null)):typeof c=="string"?(te(this,"mnemonic",null),te(this,"path",c)):(te(this,"mnemonic",c),te(this,"path",c.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return ip(qt([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",me(this.depth),this.parentFingerprint,$t(me(this.index),4),this.chainCode,this.privateKey!=null?qt(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new dn(Ns,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let r=this.path;r&&(r+="/"+(e&~$s));const n=new Uint8Array(37);if(e&$s){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set(de(this.privateKey),1),r&&(r+="'")}else n.set(de(this.publicKey));for(let d=24;d>=0;d-=8)n[33+(d>>3)]=e>>24-d&255;const i=de(so(ta.sha512,this.chainCode,n)),s=i.slice(0,32),a=i.slice(32);let o=null,c=null;this.privateKey?o=Vo(le.from(s).add(this.privateKey).mod(M3)):c=new as(me(s))._addPoint(this.publicKey);let f=r;const u=this.mnemonic;return u&&(f=Object.freeze({phrase:u.phrase,path:r,locale:u.locale||"en"})),new dn(Ns,o,c,this.fingerprint,Vo(a),e,this.depth+1,f)}derivePath(e){const r=e.split("/");if(r.length===0||r[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);r[0]==="m"&&r.shift();let n=this;for(let i=0;i<r.length;i++){const s=r[i];if(s.match(/^[0-9]+'$/)){const a=parseInt(s.substring(0,s.length-1));if(a>=$s)throw new Error("invalid path index - "+s);n=n._derive($s+a)}else if(s.match(/^[0-9]+$/)){const a=parseInt(s);if(a>=$s)throw new Error("invalid path index - "+s);n=n._derive(a)}else throw new Error("invalid path component - "+s)}return n}static _fromSeed(e,r){const n=de(e);if(n.length<16||n.length>64)throw new Error("invalid seed");const i=de(so(ta.sha512,O3,n));return new dn(Ns,Vo(i.slice(0,32)),null,"0x00000000",Vo(i.slice(32)),0,0,r)}static fromMnemonic(e,r,n){return n=eh(n),e=uf(ff(e,n),n),dn._fromSeed(xb(e,r),{phrase:e,path:"m",locale:n.locale})}static fromSeed(e){return dn._fromSeed(e,null)}static fromExtendedKey(e){const r=ea.decode(e);(r.length!==82||ip(r.slice(0,78))!==e)&&ao.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const n=r[4],i=me(r.slice(5,9)),s=parseInt(me(r.slice(9,13)).substring(2),16),a=me(r.slice(13,45)),o=r.slice(45,78);switch(me(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new dn(Ns,null,me(o),i,a,s,n,null);case"0x0488ade4":case"0x04358394 ":if(o[0]!==0)break;return new dn(Ns,me(o.slice(1)),null,i,a,s,n,null)}return ao.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function xb(t,e){e||(e="");const r=cr("mnemonic"+e,ri.NFKD);return Zd(cr(t,ri.NFKD),r,2048,64,"sha512")}function ff(t,e){e=eh(e),ao.checkNormalize();const r=e.split(t);if(r.length%3!==0)throw new Error("invalid mnemonic");const n=de(new Uint8Array(Math.ceil(11*r.length/8)));let i=0;for(let f=0;f<r.length;f++){let u=e.getWordIndex(r[f].normalize("NFKD"));if(u===-1)throw new Error("invalid mnemonic");for(let d=0;d<11;d++)u&1<<10-d&&(n[i>>3]|=1<<7-i%8),i++}const s=32*r.length/3,a=r.length/3,o=yb(a);if((de(bi(n.slice(0,s/8)))[0]&o)!==(n[n.length-1]&o))throw new Error("invalid checksum");return me(n.slice(0,s/8))}function uf(t,e){if(e=eh(e),t=de(t),t.length%4!==0||t.length<16||t.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let a=0;a<t.length;a++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=t[a],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=t[a]>>8-n,r.push(t[a]&D3(8-n)),n+=3);const i=t.length/4,s=de(bi(t))[0]&yb(i);return r[r.length-1]<<=i,r[r.length-1]|=s>>8-i,e.join(r.map(a=>e.getWord(a)))}function U3(t,e){try{return ff(t,e),!0}catch{}return!1}function L3(t){return(typeof t!="number"||t<0||t>=$s||t%1)&&ao.throwArgumentError("invalid account index","index",t),`m/44'/60'/${t}'/0/0`}const F3="random/5.7.0",Tl=new j(F3);function j3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const sp=j3();let uc=sp.crypto||sp.msCrypto;(!uc||!uc.getRandomValues)&&(Tl.warn("WARNING: Missing strong random number source"),uc={getRandomValues:function(t){return Tl.throwError("no secure random source avaialble",j.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function Gs(t){(t<=0||t>1024||t%1||t!=t)&&Tl.throwArgumentError("invalid length","length",t);const e=new Uint8Array(t);return uc.getRandomValues(e),de(e)}function bb(t){t=t.slice();for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t}var kl={},K3={get exports(){return kl},set exports(t){kl=t}};(function(t,e){(function(r){function n(v){return parseInt(v)===v}function i(v){if(!n(v.length))return!1;for(var h=0;h<v.length;h++)if(!n(v[h])||v[h]<0||v[h]>255)return!1;return!0}function s(v,h){if(v.buffer&&ArrayBuffer.isView(v)&&v.name==="Uint8Array")return h&&(v.slice?v=v.slice():v=Array.prototype.slice.call(v)),v;if(Array.isArray(v)){if(!i(v))throw new Error("Array contains invalid value: "+v);return new Uint8Array(v)}if(n(v.length)&&i(v))return new Uint8Array(v);throw new Error("unsupported array-like object")}function a(v){return new Uint8Array(v)}function o(v,h,C,q,x){(q!=null||x!=null)&&(v.slice?v=v.slice(q,x):v=Array.prototype.slice.call(v,q,x)),h.set(v,C)}var c=function(){function v(C){var q=[],x=0;for(C=encodeURI(C);x<C.length;){var K=C.charCodeAt(x++);K===37?(q.push(parseInt(C.substr(x,2),16)),x+=2):q.push(K)}return s(q)}function h(C){for(var q=[],x=0;x<C.length;){var K=C[x];K<128?(q.push(String.fromCharCode(K)),x++):K>191&&K<224?(q.push(String.fromCharCode((K&31)<<6|C[x+1]&63)),x+=2):(q.push(String.fromCharCode((K&15)<<12|(C[x+1]&63)<<6|C[x+2]&63)),x+=3)}return q.join("")}return{toBytes:v,fromBytes:h}}(),f=function(){function v(q){for(var x=[],K=0;K<q.length;K+=2)x.push(parseInt(q.substr(K,2),16));return x}var h="0123456789abcdef";function C(q){for(var x=[],K=0;K<q.length;K++){var J=q[K];x.push(h[(J&240)>>4]+h[J&15])}return x.join("")}return{toBytes:v,fromBytes:C}}(),u={16:10,24:12,32:14},d=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],g=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],b=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],S=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],_=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],y=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],E=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],A=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],M=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],B=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],D=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],L=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],z=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],Y=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],ie=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function oe(v){for(var h=[],C=0;C<v.length;C+=4)h.push(v[C]<<24|v[C+1]<<16|v[C+2]<<8|v[C+3]);return h}var ge=function(v){if(!(this instanceof ge))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:s(v,!0)}),this._prepare()};ge.prototype._prepare=function(){var v=u[this.key.length];if(v==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var h=0;h<=v;h++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var C=(v+1)*4,q=this.key.length/4,x=oe(this.key),K,h=0;h<q;h++)K=h>>2,this._Ke[K][h%4]=x[h],this._Kd[v-K][h%4]=x[h];for(var J=0,W=q,X;W<C;){if(X=x[q-1],x[0]^=g[X>>16&255]<<24^g[X>>8&255]<<16^g[X&255]<<8^g[X>>24&255]^d[J]<<24,J+=1,q!=8)for(var h=1;h<q;h++)x[h]^=x[h-1];else{for(var h=1;h<q/2;h++)x[h]^=x[h-1];X=x[q/2-1],x[q/2]^=g[X&255]^g[X>>8&255]<<8^g[X>>16&255]<<16^g[X>>24&255]<<24;for(var h=q/2+1;h<q;h++)x[h]^=x[h-1]}for(var h=0,ye,pe;h<q&&W<C;)ye=W>>2,pe=W%4,this._Ke[ye][pe]=x[h],this._Kd[v-ye][pe]=x[h++],W++}for(var ye=1;ye<v;ye++)for(var pe=0;pe<4;pe++)X=this._Kd[ye][pe],this._Kd[ye][pe]=L[X>>24&255]^z[X>>16&255]^Y[X>>8&255]^ie[X&255]},ge.prototype.encrypt=function(v){if(v.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var h=this._Ke.length-1,C=[0,0,0,0],q=oe(v),x=0;x<4;x++)q[x]^=this._Ke[0][x];for(var K=1;K<h;K++){for(var x=0;x<4;x++)C[x]=S[q[x]>>24&255]^_[q[(x+1)%4]>>16&255]^y[q[(x+2)%4]>>8&255]^E[q[(x+3)%4]&255]^this._Ke[K][x];q=C.slice()}for(var J=a(16),W,x=0;x<4;x++)W=this._Ke[h][x],J[4*x]=(g[q[x]>>24&255]^W>>24)&255,J[4*x+1]=(g[q[(x+1)%4]>>16&255]^W>>16)&255,J[4*x+2]=(g[q[(x+2)%4]>>8&255]^W>>8)&255,J[4*x+3]=(g[q[(x+3)%4]&255]^W)&255;return J},ge.prototype.decrypt=function(v){if(v.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var h=this._Kd.length-1,C=[0,0,0,0],q=oe(v),x=0;x<4;x++)q[x]^=this._Kd[0][x];for(var K=1;K<h;K++){for(var x=0;x<4;x++)C[x]=A[q[x]>>24&255]^M[q[(x+3)%4]>>16&255]^B[q[(x+2)%4]>>8&255]^D[q[(x+1)%4]&255]^this._Kd[K][x];q=C.slice()}for(var J=a(16),W,x=0;x<4;x++)W=this._Kd[h][x],J[4*x]=(b[q[x]>>24&255]^W>>24)&255,J[4*x+1]=(b[q[(x+3)%4]>>16&255]^W>>16)&255,J[4*x+2]=(b[q[(x+2)%4]>>8&255]^W>>8)&255,J[4*x+3]=(b[q[(x+1)%4]&255]^W)&255;return J};var re=function(v){if(!(this instanceof re))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new ge(v)};re.prototype.encrypt=function(v){if(v=s(v),v.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var h=a(v.length),C=a(16),q=0;q<v.length;q+=16)o(v,C,0,q,q+16),C=this._aes.encrypt(C),o(C,h,q);return h},re.prototype.decrypt=function(v){if(v=s(v),v.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var h=a(v.length),C=a(16),q=0;q<v.length;q+=16)o(v,C,0,q,q+16),C=this._aes.decrypt(C),o(C,h,q);return h};var P=function(v,h){if(!(this instanceof P))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!h)h=a(16);else if(h.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=s(h,!0),this._aes=new ge(v)};P.prototype.encrypt=function(v){if(v=s(v),v.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var h=a(v.length),C=a(16),q=0;q<v.length;q+=16){o(v,C,0,q,q+16);for(var x=0;x<16;x++)C[x]^=this._lastCipherblock[x];this._lastCipherblock=this._aes.encrypt(C),o(this._lastCipherblock,h,q)}return h},P.prototype.decrypt=function(v){if(v=s(v),v.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var h=a(v.length),C=a(16),q=0;q<v.length;q+=16){o(v,C,0,q,q+16),C=this._aes.decrypt(C);for(var x=0;x<16;x++)h[q+x]=C[x]^this._lastCipherblock[x];o(v,this._lastCipherblock,0,q,q+16)}return h};var l=function(v,h,C){if(!(this instanceof l))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!h)h=a(16);else if(h.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");C||(C=1),this.segmentSize=C,this._shiftRegister=s(h,!0),this._aes=new ge(v)};l.prototype.encrypt=function(v){if(v.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var h=s(v,!0),C,q=0;q<h.length;q+=this.segmentSize){C=this._aes.encrypt(this._shiftRegister);for(var x=0;x<this.segmentSize;x++)h[q+x]^=C[x];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(h,this._shiftRegister,16-this.segmentSize,q,q+this.segmentSize)}return h},l.prototype.decrypt=function(v){if(v.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var h=s(v,!0),C,q=0;q<h.length;q+=this.segmentSize){C=this._aes.encrypt(this._shiftRegister);for(var x=0;x<this.segmentSize;x++)h[q+x]^=C[x];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(v,this._shiftRegister,16-this.segmentSize,q,q+this.segmentSize)}return h};var m=function(v,h){if(!(this instanceof m))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!h)h=a(16);else if(h.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=s(h,!0),this._lastPrecipherIndex=16,this._aes=new ge(v)};m.prototype.encrypt=function(v){for(var h=s(v,!0),C=0;C<h.length;C++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),h[C]^=this._lastPrecipher[this._lastPrecipherIndex++];return h},m.prototype.decrypt=m.prototype.encrypt;var T=function(v){if(!(this instanceof T))throw Error("Counter must be instanitated with `new`");v!==0&&!v&&(v=1),typeof v=="number"?(this._counter=a(16),this.setValue(v)):this.setBytes(v)};T.prototype.setValue=function(v){if(typeof v!="number"||parseInt(v)!=v)throw new Error("invalid counter value (must be an integer)");for(var h=15;h>=0;--h)this._counter[h]=v%256,v=v>>8},T.prototype.setBytes=function(v){if(v=s(v,!0),v.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=v},T.prototype.increment=function(){for(var v=15;v>=0;v--)if(this._counter[v]===255)this._counter[v]=0;else{this._counter[v]++;break}};var N=function(v,h){if(!(this instanceof N))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",h instanceof T||(h=new T(h)),this._counter=h,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new ge(v)};N.prototype.encrypt=function(v){for(var h=s(v,!0),C=0;C<h.length;C++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),h[C]^=this._remainingCounter[this._remainingCounterIndex++];return h},N.prototype.decrypt=N.prototype.encrypt;function O(v){v=s(v,!0);var h=16-v.length%16,C=a(v.length+h);o(v,C);for(var q=v.length;q<C.length;q++)C[q]=h;return C}function U(v){if(v=s(v,!0),v.length<16)throw new Error("PKCS#7 invalid length");var h=v[v.length-1];if(h>16)throw new Error("PKCS#7 padding byte out of range");for(var C=v.length-h,q=0;q<h;q++)if(v[C+q]!==h)throw new Error("PKCS#7 invalid padding byte");var x=a(C);return o(v,x,0,0,C),x}var $={AES:ge,Counter:T,ModeOfOperation:{ecb:re,cbc:P,cfb:l,ofb:m,ctr:N},utils:{hex:f,utf8:c},padding:{pkcs7:{pad:O,strip:U}},_arrayTest:{coerceArray:s,createArray:a,copyArray:o}};t.exports=$})()})(K3);const Jn=kl,mb="json-wallets/5.7.0";function os(t){return typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),de(t)}function wa(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function th(t){return typeof t=="string"?cr(t,ri.NFKC):de(t)}function sr(t,e){let r=t;const n=e.toLowerCase().split("/");for(let i=0;i<n.length;i++){let s=null;for(const a in r)if(a.toLowerCase()===n[i]){s=r[a];break}if(s===null)return null;r=s}return r}function q3(t){const e=de(t);e[6]=e[6]&15|64,e[8]=e[8]&63|128;const r=me(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const $3=new j(mb);class H3 extends bs{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function vb(t,e){const r=JSON.parse(t);e=th(e);const n=Ot(sr(r,"ethaddr")),i=os(sr(r,"encseed"));(!i||i.length%16!==0)&&$3.throwArgumentError("invalid encseed","json",t);const s=de(Zd(e,e,2e3,32,"sha256")).slice(0,16),a=i.slice(0,16),o=i.slice(16),c=new Jn.ModeOfOperation.cbc(s,a),f=Jn.padding.pkcs7.strip(de(c.decrypt(o)));let u="";for(let b=0;b<f.length;b++)u+=String.fromCharCode(f[b]);const d=cr(u),g=Lt(d);return new H3({_isCrowdsaleAccount:!0,address:n,privateKey:g})}function rh(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return e.encseed&&e.ethaddr}function nh(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}function z3(t){if(rh(t))try{return Ot(JSON.parse(t).ethaddr)}catch{return null}if(nh(t))try{return Ot(JSON.parse(t).address)}catch{return null}return null}var Pl={},G3={get exports(){return Pl},set exports(t){Pl=t}};(function(t,e){(function(r){function i(_){const y=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let E=1779033703,A=3144134277,M=1013904242,B=2773480762,D=1359893119,L=2600822924,z=528734635,Y=1541459225;const ie=new Uint32Array(64);function oe(N){let O=0,U=N.length;for(;U>=64;){let $=E,v=A,h=M,C=B,q=D,x=L,K=z,J=Y,W,X,ye,pe,be;for(X=0;X<16;X++)ye=O+X*4,ie[X]=(N[ye]&255)<<24|(N[ye+1]&255)<<16|(N[ye+2]&255)<<8|N[ye+3]&255;for(X=16;X<64;X++)W=ie[X-2],pe=(W>>>17|W<<32-17)^(W>>>19|W<<32-19)^W>>>10,W=ie[X-15],be=(W>>>7|W<<32-7)^(W>>>18|W<<32-18)^W>>>3,ie[X]=(pe+ie[X-7]|0)+(be+ie[X-16]|0)|0;for(X=0;X<64;X++)pe=(((q>>>6|q<<32-6)^(q>>>11|q<<32-11)^(q>>>25|q<<32-25))+(q&x^~q&K)|0)+(J+(y[X]+ie[X]|0)|0)|0,be=(($>>>2|$<<32-2)^($>>>13|$<<32-13)^($>>>22|$<<32-22))+($&v^$&h^v&h)|0,J=K,K=x,x=q,q=C+pe|0,C=h,h=v,v=$,$=pe+be|0;E=E+$|0,A=A+v|0,M=M+h|0,B=B+C|0,D=D+q|0,L=L+x|0,z=z+K|0,Y=Y+J|0,O+=64,U-=64}}oe(_);let ge,re=_.length%64,P=_.length/536870912|0,l=_.length<<3,m=re<56?56:120,T=_.slice(_.length-re,_.length);for(T.push(128),ge=re+1;ge<m;ge++)T.push(0);return T.push(P>>>24&255),T.push(P>>>16&255),T.push(P>>>8&255),T.push(P>>>0&255),T.push(l>>>24&255),T.push(l>>>16&255),T.push(l>>>8&255),T.push(l>>>0&255),oe(T),[E>>>24&255,E>>>16&255,E>>>8&255,E>>>0&255,A>>>24&255,A>>>16&255,A>>>8&255,A>>>0&255,M>>>24&255,M>>>16&255,M>>>8&255,M>>>0&255,B>>>24&255,B>>>16&255,B>>>8&255,B>>>0&255,D>>>24&255,D>>>16&255,D>>>8&255,D>>>0&255,L>>>24&255,L>>>16&255,L>>>8&255,L>>>0&255,z>>>24&255,z>>>16&255,z>>>8&255,z>>>0&255,Y>>>24&255,Y>>>16&255,Y>>>8&255,Y>>>0&255]}function s(_,y,E){_=_.length<=64?_:i(_);const A=64+y.length+4,M=new Array(A),B=new Array(64);let D,L=[];for(D=0;D<64;D++)M[D]=54;for(D=0;D<_.length;D++)M[D]^=_[D];for(D=0;D<y.length;D++)M[64+D]=y[D];for(D=A-4;D<A;D++)M[D]=0;for(D=0;D<64;D++)B[D]=92;for(D=0;D<_.length;D++)B[D]^=_[D];function z(){for(let Y=A-1;Y>=A-4;Y--){if(M[Y]++,M[Y]<=255)return;M[Y]=0}}for(;E>=32;)z(),L=L.concat(i(B.concat(i(M)))),E-=32;return E>0&&(z(),L=L.concat(i(B.concat(i(M))).slice(0,E))),L}function a(_,y,E,A,M){let B;for(u(_,(2*E-1)*16,M,0,16),B=0;B<2*E;B++)f(_,B*16,M,16),c(M,A),u(M,0,_,y+B*16,16);for(B=0;B<E;B++)u(_,y+B*2*16,_,B*16,16);for(B=0;B<E;B++)u(_,y+(B*2+1)*16,_,(B+E)*16,16)}function o(_,y){return _<<y|_>>>32-y}function c(_,y){u(_,0,y,0,16);for(let E=8;E>0;E-=2)y[4]^=o(y[0]+y[12],7),y[8]^=o(y[4]+y[0],9),y[12]^=o(y[8]+y[4],13),y[0]^=o(y[12]+y[8],18),y[9]^=o(y[5]+y[1],7),y[13]^=o(y[9]+y[5],9),y[1]^=o(y[13]+y[9],13),y[5]^=o(y[1]+y[13],18),y[14]^=o(y[10]+y[6],7),y[2]^=o(y[14]+y[10],9),y[6]^=o(y[2]+y[14],13),y[10]^=o(y[6]+y[2],18),y[3]^=o(y[15]+y[11],7),y[7]^=o(y[3]+y[15],9),y[11]^=o(y[7]+y[3],13),y[15]^=o(y[11]+y[7],18),y[1]^=o(y[0]+y[3],7),y[2]^=o(y[1]+y[0],9),y[3]^=o(y[2]+y[1],13),y[0]^=o(y[3]+y[2],18),y[6]^=o(y[5]+y[4],7),y[7]^=o(y[6]+y[5],9),y[4]^=o(y[7]+y[6],13),y[5]^=o(y[4]+y[7],18),y[11]^=o(y[10]+y[9],7),y[8]^=o(y[11]+y[10],9),y[9]^=o(y[8]+y[11],13),y[10]^=o(y[9]+y[8],18),y[12]^=o(y[15]+y[14],7),y[13]^=o(y[12]+y[15],9),y[14]^=o(y[13]+y[12],13),y[15]^=o(y[14]+y[13],18);for(let E=0;E<16;++E)_[E]+=y[E]}function f(_,y,E,A){for(let M=0;M<A;M++)E[M]^=_[y+M]}function u(_,y,E,A,M){for(;M--;)E[A++]=_[y++]}function d(_){if(!_||typeof _.length!="number")return!1;for(let y=0;y<_.length;y++){const E=_[y];if(typeof E!="number"||E%1||E<0||E>=256)return!1}return!0}function g(_,y){if(typeof _!="number"||_%1)throw new Error("invalid "+y);return _}function b(_,y,E,A,M,B,D){if(E=g(E,"N"),A=g(A,"r"),M=g(M,"p"),B=g(B,"dkLen"),E===0||E&E-1)throw new Error("N must be power of 2");if(E>2147483647/128/A)throw new Error("N too large");if(A>2147483647/128/M)throw new Error("r too large");if(!d(_))throw new Error("password must be an array or buffer");if(_=Array.prototype.slice.call(_),!d(y))throw new Error("salt must be an array or buffer");y=Array.prototype.slice.call(y);let L=s(_,y,M*128*A);const z=new Uint32Array(M*32*A);for(let q=0;q<z.length;q++){const x=q*4;z[q]=(L[x+3]&255)<<24|(L[x+2]&255)<<16|(L[x+1]&255)<<8|(L[x+0]&255)<<0}const Y=new Uint32Array(64*A),ie=new Uint32Array(32*A*E),oe=32*A,ge=new Uint32Array(16),re=new Uint32Array(16),P=M*E*2;let l=0,m=null,T=!1,N=0,O=0,U,$;const v=D?parseInt(1e3/A):4294967295,h=typeof setImmediate<"u"?setImmediate:setTimeout,C=function(){if(T)return D(new Error("cancelled"),l/P);let q;switch(N){case 0:$=O*32*A,u(z,$,Y,0,oe),N=1,U=0;case 1:q=E-U,q>v&&(q=v);for(let K=0;K<q;K++)u(Y,0,ie,(U+K)*oe,oe),a(Y,oe,A,ge,re);if(U+=q,l+=q,D){const K=parseInt(1e3*l/P);if(K!==m){if(T=D(null,l/P),T)break;m=K}}if(U<E)break;U=0,N=2;case 2:q=E-U,q>v&&(q=v);for(let K=0;K<q;K++){const J=(2*A-1)*16,W=Y[J]&E-1;f(ie,W*oe,Y,oe),a(Y,oe,A,ge,re)}if(U+=q,l+=q,D){const K=parseInt(1e3*l/P);if(K!==m){if(T=D(null,l/P),T)break;m=K}}if(U<E)break;if(u(Y,0,z,$,oe),O++,O<M){N=0;break}L=[];for(let K=0;K<z.length;K++)L.push(z[K]>>0&255),L.push(z[K]>>8&255),L.push(z[K]>>16&255),L.push(z[K]>>24&255);const x=s(_,L,B);return D&&D(null,1,x),x}D&&h(C)};if(!D)for(;;){const q=C();if(q!=null)return q}C()}const S={scrypt:function(_,y,E,A,M,B,D){return new Promise(function(L,z){let Y=0;D&&D(0),b(_,y,E,A,M,B,function(ie,oe,ge){if(ie)z(ie);else if(ge)D&&Y!==1&&D(1),L(new Uint8Array(ge));else if(D&&oe!==Y)return Y=oe,D(oe)})})},syncScrypt:function(_,y,E,A,M,B){return new Uint8Array(b(_,y,E,A,M,B))}};t.exports=S})()})(G3);const ih=Pl;var V3=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const Cl=new j(mb);function ap(t){return t!=null&&t.mnemonic&&t.mnemonic.phrase}class J3 extends bs{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function W3(t,e,r){if(sr(t,"crypto/cipher")==="aes-128-ctr"){const i=os(sr(t,"crypto/cipherparams/iv")),s=new Jn.Counter(i),a=new Jn.ModeOfOperation.ctr(e,s);return de(a.decrypt(r))}return null}function wb(t,e){const r=os(sr(t,"crypto/ciphertext"));if(me(Lt(qt([e.slice(16,32),r]))).substring(2)!==sr(t,"crypto/mac").toLowerCase())throw new Error("invalid password");const i=W3(t,e.slice(0,16),r);i||Cl.throwError("unsupported cipher",j.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const s=e.slice(32,64),a=Ui(i);if(t.address){let c=t.address.toLowerCase();if(c.substring(0,2)!=="0x"&&(c="0x"+c),Ot(c)!==a)throw new Error("address mismatch")}const o={_isKeystoreAccount:!0,address:a,privateKey:me(i)};if(sr(t,"x-ethers/version")==="0.1"){const c=os(sr(t,"x-ethers/mnemonicCiphertext")),f=os(sr(t,"x-ethers/mnemonicCounter")),u=new Jn.Counter(f),d=new Jn.ModeOfOperation.ctr(s,u),g=sr(t,"x-ethers/path")||ra,b=sr(t,"x-ethers/locale")||"en",S=de(d.decrypt(c));try{const _=uf(S,b),y=dn.fromMnemonic(_,null,b).derivePath(g);if(y.privateKey!=o.privateKey)throw new Error("mnemonic mismatch");o.mnemonic=y.mnemonic}catch(_){if(_.code!==j.errors.INVALID_ARGUMENT||_.argument!=="wordlist")throw _}}return new J3(o)}function _b(t,e,r,n,i){return de(Zd(t,e,r,n,i))}function Y3(t,e,r,n,i){return Promise.resolve(_b(t,e,r,n,i))}function Eb(t,e,r,n,i){const s=th(e),a=sr(t,"crypto/kdf");if(a&&typeof a=="string"){const o=function(c,f){return Cl.throwArgumentError("invalid key-derivation function parameters",c,f)};if(a.toLowerCase()==="scrypt"){const c=os(sr(t,"crypto/kdfparams/salt")),f=parseInt(sr(t,"crypto/kdfparams/n")),u=parseInt(sr(t,"crypto/kdfparams/r")),d=parseInt(sr(t,"crypto/kdfparams/p"));(!f||!u||!d)&&o("kdf",a),f&f-1&&o("N",f);const g=parseInt(sr(t,"crypto/kdfparams/dklen"));return g!==32&&o("dklen",g),n(s,c,f,u,d,64,i)}else if(a.toLowerCase()==="pbkdf2"){const c=os(sr(t,"crypto/kdfparams/salt"));let f=null;const u=sr(t,"crypto/kdfparams/prf");u==="hmac-sha256"?f="sha256":u==="hmac-sha512"?f="sha512":o("prf",u);const d=parseInt(sr(t,"crypto/kdfparams/c")),g=parseInt(sr(t,"crypto/kdfparams/dklen"));return g!==32&&o("dklen",g),r(s,c,d,g,f)}}return Cl.throwArgumentError("unsupported key-derivation function","kdf",a)}function X3(t,e){const r=JSON.parse(t),n=Eb(r,e,_b,ih.syncScrypt);return wb(r,n)}function Q3(t,e,r){return V3(this,void 0,void 0,function*(){const n=JSON.parse(t),i=yield Eb(n,e,Y3,ih.scrypt,r);return wb(n,i)})}function Z3(t,e,r,n){try{if(Ot(t.address)!==Ui(t.privateKey))throw new Error("address/privateKey mismatch");if(ap(t)){const y=t.mnemonic;if(dn.fromMnemonic(y.phrase,null,y.locale).derivePath(y.path||ra).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(y){return Promise.reject(y)}typeof r=="function"&&!n&&(n=r,r={}),r||(r={});const i=de(t.privateKey),s=th(e);let a=null,o=null,c=null;if(ap(t)){const y=t.mnemonic;a=de(ff(y.phrase,y.locale||"en")),o=y.path||ra,c=y.locale||"en"}let f=r.client;f||(f="ethers.js");let u=null;r.salt?u=de(r.salt):u=Gs(32);let d=null;if(r.iv){if(d=de(r.iv),d.length!==16)throw new Error("invalid iv")}else d=Gs(16);let g=null;if(r.uuid){if(g=de(r.uuid),g.length!==16)throw new Error("invalid uuid")}else g=Gs(16);let b=1<<17,S=8,_=1;return r.scrypt&&(r.scrypt.N&&(b=r.scrypt.N),r.scrypt.r&&(S=r.scrypt.r),r.scrypt.p&&(_=r.scrypt.p)),ih.scrypt(s,u,b,S,_,64,n).then(y=>{y=de(y);const E=y.slice(0,16),A=y.slice(16,32),M=y.slice(32,64),B=new Jn.Counter(d),D=new Jn.ModeOfOperation.ctr(E,B),L=de(D.encrypt(i)),z=Lt(qt([A,L])),Y={address:t.address.substring(2).toLowerCase(),id:q3(g),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:me(d).substring(2)},ciphertext:me(L).substring(2),kdf:"scrypt",kdfparams:{salt:me(u).substring(2),n:b,dklen:32,p:_,r:S},mac:z.substring(2)}};if(a){const ie=Gs(16),oe=new Jn.Counter(ie),ge=new Jn.ModeOfOperation.ctr(M,oe),re=de(ge.encrypt(a)),P=new Date,l=P.getUTCFullYear()+"-"+wa(P.getUTCMonth()+1,2)+"-"+wa(P.getUTCDate(),2)+"T"+wa(P.getUTCHours(),2)+"-"+wa(P.getUTCMinutes(),2)+"-"+wa(P.getUTCSeconds(),2)+".0Z";Y["x-ethers"]={client:f,gethFilename:"UTC--"+l+"--"+Y.address,mnemonicCounter:me(ie).substring(2),mnemonicCiphertext:me(re).substring(2),path:o,locale:c,version:"0.1"}}return JSON.stringify(Y)})}function e6(t,e,r){if(rh(t)){r&&r(0);const n=vb(t,e);return r&&r(1),Promise.resolve(n)}return nh(t)?Q3(t,e,r):Promise.reject(new Error("invalid JSON wallet"))}function t6(t,e){if(rh(t))return vb(t,e);if(nh(t))return X3(t,e);throw new Error("invalid JSON wallet")}const r6="wallet/5.7.0";var op=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const Rs=new j(r6);function n6(t){return t!=null&&He(t.privateKey,32)&&t.address!=null}function i6(t){const e=t.mnemonic;return e&&e.phrase}class Ni extends ws{constructor(e,r){if(super(),n6(e)){const n=new as(e.privateKey);if(te(this,"_signingKey",()=>n),te(this,"address",Ui(this.publicKey)),this.address!==Ot(e.address)&&Rs.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),i6(e)){const i=e.mnemonic;te(this,"_mnemonic",()=>({phrase:i.phrase,path:i.path||ra,locale:i.locale||"en"}));const s=this.mnemonic,a=dn.fromMnemonic(s.phrase,null,s.locale).derivePath(s.path);Ui(a.privateKey)!==this.address&&Rs.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else te(this,"_mnemonic",()=>null)}else{if(as.isSigningKey(e))e.curve!=="secp256k1"&&Rs.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),te(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);const n=new as(e);te(this,"_signingKey",()=>n)}te(this,"_mnemonic",()=>null),te(this,"address",Ui(this.publicKey))}r&&!vs.isProvider(r)&&Rs.throwArgumentError("invalid provider","provider",r),te(this,"provider",r||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new Ni(this,e)}signTransaction(e){return er(e).then(r=>{r.from!=null&&(Ot(r.from)!==this.address&&Rs.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete r.from);const n=this._signingKey().signDigest(Lt(Sl(r)));return Sl(r,n)})}signMessage(e){return op(this,void 0,void 0,function*(){return xl(this._signingKey().signDigest(Gd(e)))})}_signTypedData(e,r,n){return op(this,void 0,void 0,function*(){const i=yield _r.resolveNames(e,r,n,s=>(this.provider==null&&Rs.throwError("cannot resolve ENS names without a provider",j.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:s}),this.provider.resolveName(s)));return xl(this._signingKey().signDigest(_r.hash(i.domain,r,i.value)))})}encrypt(e,r,n){if(typeof r=="function"&&!n&&(n=r,r={}),n&&typeof n!="function")throw new Error("invalid callback");return r||(r={}),Z3(this,e,r,n)}static createRandom(e){let r=Gs(16);e||(e={}),e.extraEntropy&&(r=de(ar(Lt(qt([r,e.extraEntropy])),0,16)));const n=uf(r,e.locale);return Ni.fromMnemonic(n,e.path,e.locale)}static fromEncryptedJson(e,r,n){return e6(e,r,n).then(i=>new Ni(i))}static fromEncryptedJsonSync(e,r){return new Ni(t6(e,r))}static fromMnemonic(e,r,n){return r||(r=ra),new Ni(dn.fromMnemonic(e,null,n).derivePath(r))}}function s6(t,e){return Co(Gd(t),e)}function a6(t,e,r,n){return Co(_r.hash(t,e,r),n)}const o6="networks/5.7.1",cp=new j(o6);function c6(t){return t&&typeof t.renetwork=="function"}function hi(t){const e=function(r,n){n==null&&(n={});const i=[];if(r.InfuraProvider&&n.infura!=="-")try{i.push(new r.InfuraProvider(t,n.infura))}catch{}if(r.EtherscanProvider&&n.etherscan!=="-")try{i.push(new r.EtherscanProvider(t,n.etherscan))}catch{}if(r.AlchemyProvider&&n.alchemy!=="-")try{i.push(new r.AlchemyProvider(t,n.alchemy))}catch{}if(r.PocketProvider&&n.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const a=new r.PocketProvider(t,n.pocket);a.network&&s.indexOf(a.network.name)===-1&&i.push(a)}catch{}}if(r.CloudflareProvider&&n.cloudflare!=="-")try{i.push(new r.CloudflareProvider(t))}catch{}if(r.AnkrProvider&&n.ankr!=="-")try{const s=["ropsten"],a=new r.AnkrProvider(t,n.ankr);a.network&&s.indexOf(a.network.name)===-1&&i.push(a)}catch{}if(i.length===0)return null;if(r.FallbackProvider){let s=1;return n.quorum!=null?s=n.quorum:t==="homestead"&&(s=2),new r.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(r){return hi(r)},e}function Bc(t,e){const r=function(n,i){return n.JsonRpcProvider?new n.JsonRpcProvider(t,e):null};return r.renetwork=function(n){return Bc(t,n)},r}const fp={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:hi("homestead")},up={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:hi("ropsten")},lp={chainId:63,name:"classicMordor",_defaultProvider:Bc("https://www.ethercluster.com/mordor","classicMordor")},Jo={unspecified:{chainId:0,name:"unspecified"},homestead:fp,mainnet:fp,morden:{chainId:2,name:"morden"},ropsten:up,testnet:up,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:hi("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:hi("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:hi("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:hi("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:Bc("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:lp,classicTestnet:lp,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Bc("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:hi("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:hi("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function sh(t){if(t==null)return null;if(typeof t=="number"){for(const n in Jo){const i=Jo[n];if(i.chainId===t)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:t,name:"unknown"}}if(typeof t=="string"){const n=Jo[t];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=Jo[t.name];if(!e)return typeof t.chainId!="number"&&cp.throwArgumentError("invalid network chainId","network",t),t;t.chainId!==0&&t.chainId!==e.chainId&&cp.throwArgumentError("network chainId mismatch","network",t);let r=t._defaultProvider||null;return r==null&&e._defaultProvider&&(c6(e._defaultProvider)?r=e._defaultProvider.renetwork(t):r=e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}const f6="web/5.7.1";var u6=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};function l6(t,e){return u6(this,void 0,void 0,function*(){e==null&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),e.fetchOptions!=null){const a=e.fetchOptions;a.mode&&(r.mode=a.mode),a.cache&&(r.cache=a.cache),a.credentials&&(r.credentials=a.credentials),a.redirect&&(r.redirect=a.redirect),a.referrer&&(r.referrer=a.referrer)}const n=yield fetch(t,r),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach((a,o)=>{s[o.toLowerCase()]=a}):n.headers.keys().forEach(a=>{s[a.toLowerCase()]=n.headers.get(a)}),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:de(new Uint8Array(i))}})}var d6=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const Rn=new j(f6);function dp(t){return new Promise(e=>{setTimeout(e,t)})}function ki(t,e){if(t==null)return null;if(typeof t=="string")return t;if(So(t)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return ms(t)}catch{}return me(t)}return t}function h6(t){return cr(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,r)=>String.fromCharCode(parseInt(r,16))))}function Ab(t,e,r){const n=typeof t=="object"&&t.throttleLimit!=null?t.throttleLimit:12;Rn.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof t=="object"?t.throttleCallback:null,s=typeof t=="object"&&typeof t.throttleSlotInterval=="number"?t.throttleSlotInterval:100;Rn.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const a=typeof t=="object"?!!t.errorPassThrough:!1,o={};let c=null;const f={method:"GET"};let u=!1,d=2*60*1e3;if(typeof t=="string")c=t;else if(typeof t=="object"){if((t==null||t.url==null)&&Rn.throwArgumentError("missing URL","connection.url",t),c=t.url,typeof t.timeout=="number"&&t.timeout>0&&(d=t.timeout),t.headers)for(const E in t.headers)o[E.toLowerCase()]={key:E,value:String(t.headers[E])},["if-none-match","if-modified-since"].indexOf(E.toLowerCase())>=0&&(u=!0);if(f.allowGzip=!!t.allowGzip,t.user!=null&&t.password!=null){c.substring(0,6)!=="https:"&&t.allowInsecureAuthentication!==!0&&Rn.throwError("basic authentication requires a secure https url",j.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:t.user,password:"[REDACTED]"});const E=t.user+":"+t.password;o.authorization={key:"Authorization",value:"Basic "+Hd(cr(E))}}t.skipFetchSetup!=null&&(f.skipFetchSetup=!!t.skipFetchSetup),t.fetchOptions!=null&&(f.fetchOptions=Ht(t.fetchOptions))}const g=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),b=c?c.match(g):null;if(b)try{const E={statusCode:200,statusMessage:"OK",headers:{"content-type":b[1]||"text/plain"},body:b[2]?$d(b[3]):h6(b[3])};let A=E.body;return r&&(A=r(E.body,E)),Promise.resolve(A)}catch(E){Rn.throwError("processing response error",j.errors.SERVER_ERROR,{body:ki(b[1],b[2]),error:E,requestBody:null,requestMethod:"GET",url:c})}e&&(f.method="POST",f.body=e,o["content-type"]==null&&(o["content-type"]={key:"Content-Type",value:"application/octet-stream"}),o["content-length"]==null&&(o["content-length"]={key:"Content-Length",value:String(e.length)}));const S={};Object.keys(o).forEach(E=>{const A=o[E];S[A.key]=A.value}),f.headers=S;const _=function(){let E=null;return{promise:new Promise(function(B,D){d&&(E=setTimeout(()=>{E!=null&&(E=null,D(Rn.makeError("timeout",j.errors.TIMEOUT,{requestBody:ki(f.body,S["content-type"]),requestMethod:f.method,timeout:d,url:c})))},d))}),cancel:function(){E!=null&&(clearTimeout(E),E=null)}}}(),y=function(){return d6(this,void 0,void 0,function*(){for(let E=0;E<n;E++){let A=null;try{if(A=yield l6(c,f),E<n){if(A.statusCode===301||A.statusCode===302){const B=A.headers.location||"";if(f.method==="GET"&&B.match(/^https:/)){c=A.headers.location;continue}}else if(A.statusCode===429){let B=!0;if(i&&(B=yield i(E,c)),B){let D=0;const L=A.headers["retry-after"];typeof L=="string"&&L.match(/^[1-9][0-9]*$/)?D=parseInt(L)*1e3:D=s*parseInt(String(Math.random()*Math.pow(2,E))),yield dp(D);continue}}}}catch(B){A=B.response,A==null&&(_.cancel(),Rn.throwError("missing response",j.errors.SERVER_ERROR,{requestBody:ki(f.body,S["content-type"]),requestMethod:f.method,serverError:B,url:c}))}let M=A.body;if(u&&A.statusCode===304?M=null:!a&&(A.statusCode<200||A.statusCode>=300)&&(_.cancel(),Rn.throwError("bad response",j.errors.SERVER_ERROR,{status:A.statusCode,headers:A.headers,body:ki(M,A.headers?A.headers["content-type"]:null),requestBody:ki(f.body,S["content-type"]),requestMethod:f.method,url:c})),r)try{const B=yield r(M,A);return _.cancel(),B}catch(B){if(B.throttleRetry&&E<n){let D=!0;if(i&&(D=yield i(E,c)),D){const L=s*parseInt(String(Math.random()*Math.pow(2,E)));yield dp(L);continue}}_.cancel(),Rn.throwError("processing response error",j.errors.SERVER_ERROR,{body:ki(M,A.headers?A.headers["content-type"]:null),error:B,requestBody:ki(f.body,S["content-type"]),requestMethod:f.method,url:c})}return _.cancel(),M}return Rn.throwError("failed response",j.errors.SERVER_ERROR,{requestBody:ki(f.body,S["content-type"]),requestMethod:f.method,url:c})})}();return Promise.race([_.promise,y])}function pa(t,e,r){let n=(s,a)=>{let o=null;if(s!=null)try{o=JSON.parse(ms(s))}catch(c){Rn.throwError("invalid JSON",j.errors.SERVER_ERROR,{body:s,error:c})}return r&&(o=r(o,a)),o},i=null;if(e!=null){i=cr(e);const s=typeof t=="string"?{url:t}:Ht(t);s.headers?Object.keys(s.headers).filter(o=>o.toLowerCase()==="content-type").length!==0||(s.headers=Ht(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},t=s}return Ab(t,i,n)}function ss(t,e){return e||(e={}),e=Ht(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(r,n){let i=null,s=!1;const a=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{a()&&n(new Error("timeout"))},e.timeout));const o=e.retryLimit;let c=0;function f(){return t().then(function(u){if(u!==void 0)a()&&r(u);else if(e.oncePoll)e.oncePoll.once("poll",f);else if(e.onceBlock)e.onceBlock.once("block",f);else if(!s){if(c++,c>o){a()&&n(new Error("retry limit reached"));return}let d=e.interval*parseInt(String(Math.random()*Math.pow(2,c)));d<e.floor&&(d=e.floor),d>e.ceiling&&(d=e.ceiling),setTimeout(f,d)}return null},function(u){a()&&n(u)})}f()})}var Mc="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Il={};for(var Wo=0;Wo<Mc.length;Wo++){var uu=Mc.charAt(Wo);if(Il[uu]!==void 0)throw new TypeError(uu+" is ambiguous");Il[uu]=Wo}function Xs(t){var e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function Sb(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=Xs(e)^n>>5}for(e=Xs(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=Xs(e)^i&31}return e}function p6(t,e,r){if(r=r||90,t.length+7+e.length>r)throw new TypeError("Exceeds length limit");t=t.toLowerCase();var n=Sb(t);if(typeof n=="string")throw new Error(n);for(var i=t+"1",s=0;s<e.length;++s){var a=e[s];if(a>>5)throw new Error("Non 5-bit word");n=Xs(n)^a,i+=Mc.charAt(a)}for(s=0;s<6;++s)n=Xs(n);for(n^=1,s=0;s<6;++s){var o=n>>(5-s)*5&31;i+=Mc.charAt(o)}return i}function Tb(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase(),n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;t=r;var i=t.lastIndexOf("1");if(i===-1)return"No separator character for "+t;if(i===0)return"Missing prefix for "+t;var s=t.slice(0,i),a=t.slice(i+1);if(a.length<6)return"Data too short";var o=Sb(s);if(typeof o=="string")return o;for(var c=[],f=0;f<a.length;++f){var u=a.charAt(f),d=Il[u];if(d===void 0)return"Unknown character "+u;o=Xs(o)^d,!(f+6>=a.length)&&c.push(d)}return o!==1?"Invalid checksum for "+t:{prefix:s,words:c}}function g6(){var t=Tb.apply(null,arguments);if(typeof t=="object")return t}function y6(t){var e=Tb.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function lf(t,e,r,n){for(var i=0,s=0,a=(1<<r)-1,o=[],c=0;c<t.length;++c)for(i=i<<e|t[c],s+=e;s>=r;)s-=r,o.push(i>>s&a);if(n)s>0&&o.push(i<<r-s&a);else{if(s>=e)return"Excess padding";if(i<<r-s&a)return"Non-zero padding"}return o}function x6(t){var e=lf(t,8,5,!0);if(Array.isArray(e))return e}function b6(t){var e=lf(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function m6(t){var e=lf(t,5,8,!1);if(Array.isArray(e))return e}function v6(t){var e=lf(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var w6={decodeUnsafe:g6,decode:y6,encode:p6,toWordsUnsafe:x6,toWords:b6,fromWordsUnsafe:m6,fromWords:v6};const hp=w6,Fr="providers/5.7.2",_a=new j(Fr);class Pe{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},r=this.address.bind(this),n=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),a=this.hash.bind(this),o=this.hex.bind(this),c=this.number.bind(this),f=this.type.bind(this),u=d=>this.data(d,!0);return e.transaction={hash:a,type:f,accessList:Pe.allowNull(this.accessList.bind(this),null),blockHash:Pe.allowNull(a,null),blockNumber:Pe.allowNull(c,null),transactionIndex:Pe.allowNull(c,null),confirmations:Pe.allowNull(c,null),from:r,gasPrice:Pe.allowNull(n),maxPriorityFeePerGas:Pe.allowNull(n),maxFeePerGas:Pe.allowNull(n),gasLimit:n,to:Pe.allowNull(r,null),value:n,nonce:c,data:s,r:Pe.allowNull(this.uint256),s:Pe.allowNull(this.uint256),v:Pe.allowNull(c),creates:Pe.allowNull(r,null),raw:Pe.allowNull(s)},e.transactionRequest={from:Pe.allowNull(r),nonce:Pe.allowNull(c),gasLimit:Pe.allowNull(n),gasPrice:Pe.allowNull(n),maxPriorityFeePerGas:Pe.allowNull(n),maxFeePerGas:Pe.allowNull(n),to:Pe.allowNull(r),value:Pe.allowNull(n),data:Pe.allowNull(u),type:Pe.allowNull(c),accessList:Pe.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:c,blockNumber:c,transactionHash:a,address:r,topics:Pe.arrayOf(a),data:s,logIndex:c,blockHash:a},e.receipt={to:Pe.allowNull(this.address,null),from:Pe.allowNull(this.address,null),contractAddress:Pe.allowNull(r,null),transactionIndex:c,root:Pe.allowNull(o),gasUsed:n,logsBloom:Pe.allowNull(s),blockHash:a,transactionHash:a,logs:Pe.arrayOf(this.receiptLog.bind(this)),blockNumber:c,confirmations:Pe.allowNull(c,null),cumulativeGasUsed:n,effectiveGasPrice:Pe.allowNull(n),status:Pe.allowNull(c),type:f},e.block={hash:Pe.allowNull(a),parentHash:a,number:c,timestamp:c,nonce:Pe.allowNull(o),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:Pe.allowNull(r),extraData:s,transactions:Pe.allowNull(Pe.arrayOf(a)),baseFeePerGas:Pe.allowNull(n)},e.blockWithTransactions=Ht(e.block),e.blockWithTransactions.transactions=Pe.allowNull(Pe.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Pe.allowNull(i,void 0),toBlock:Pe.allowNull(i,void 0),blockHash:Pe.allowNull(a,void 0),address:Pe.allowNull(r,void 0),topics:Pe.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Pe.allowNull(c),blockHash:Pe.allowNull(a),transactionIndex:c,removed:Pe.allowNull(this.boolean.bind(this)),address:r,data:Pe.allowFalsish(s,"0x"),topics:Pe.arrayOf(a),transactionHash:a,logIndex:c},e}accessList(e){return Xi(e||[])}number(e){return e==="0x"?0:le.from(e).toNumber()}type(e){return e==="0x"||e==null?0:le.from(e).toNumber()}bigNumber(e){return le.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,r){return typeof e=="string"&&(!r&&e.substring(0,2)!=="0x"&&(e="0x"+e),He(e))?e.toLowerCase():_a.throwArgumentError("invalid hash","value",e)}data(e,r){const n=this.hex(e,r);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return Ot(e)}callAddress(e){if(!He(e,32))return null;const r=Ot(ar(e,12));return r===Ix?null:r}contractAddress(e){return nf(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||He(e))return To(e);throw new Error("invalid blockTag")}hash(e,r){const n=this.hex(e,r);return ti(n)!==32?_a.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const r=le.from(e);try{return r.toNumber()}catch{}return null}uint256(e){if(!He(e))throw new Error("invalid uint256");return $t(e,32)}_block(e,r){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,i=Pe.check(r,e);return i._difficulty=n==null?null:le.from(n),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Pe.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&le.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const r=Pe.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;He(n)&&(n=le.from(n).toNumber()),r.chainId=n}else{let n=e.networkId;n==null&&r.v==null&&(n=e.chainId),He(n)&&(n=le.from(n).toNumber()),typeof n!="number"&&r.v!=null&&(n=(r.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),r.chainId=n}return r.blockHash&&r.blockHash.replace(/0/g,"")==="x"&&(r.blockHash=null),r}transaction(e){return cb(e)}receiptLog(e){return Pe.check(this.formats.receiptLog,e)}receipt(e){const r=Pe.check(this.formats.receipt,e);if(r.root!=null)if(r.root.length<=4){const n=le.from(r.root).toNumber();n===0||n===1?(r.status!=null&&r.status!==n&&_a.throwArgumentError("alt-root-status/status mismatch","value",{root:r.root,status:r.status}),r.status=n,delete r.root):_a.throwArgumentError("invalid alt-root-status","value.root",r.root)}else r.root.length!==66&&_a.throwArgumentError("invalid root hash","value.root",r.root);return r.status!=null&&(r.byzantium=!0),r}topics(e){return Array.isArray(e)?e.map(r=>this.topics(r)):e!=null?this.hash(e,!0):null}filter(e){return Pe.check(this.formats.filter,e)}filterLog(e){return Pe.check(this.formats.filterLog,e)}static check(e,r){const n={};for(const i in e)try{const s=e[i](r[i]);s!==void 0&&(n[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=r[i],s}return n}static allowNull(e,r){return function(n){return n==null?r:e(n)}}static allowFalsish(e,r){return function(n){return n?e(n):r}}static arrayOf(e){return function(r){if(!Array.isArray(r))throw new Error("not an array");const n=[];return r.forEach(function(i){n.push(e(i))}),n}}}function kb(t){return t&&typeof t.isCommunityResource=="function"}function Nl(t){return kb(t)&&t.isCommunityResource()}let pp=!1;function Io(){pp||(pp=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var je=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const Ye=new j(Fr),_6=10;function gp(t){return t==null?"null":(ti(t)!==32&&Ye.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function yp(t){for(t=t.slice();t.length>0&&t[t.length-1]==null;)t.pop();return t.map(e=>{if(Array.isArray(e)){const r={};e.forEach(i=>{r[gp(i)]=!0});const n=Object.keys(r);return n.sort(),n.join("|")}else return gp(e)}).join("&")}function E6(t){return t===""?[]:t.split(/&/g).map(e=>{if(e==="")return[];const r=e.split("|").map(n=>n==="null"?null:n);return r.length===1?r[0]:r})}function Bs(t){if(typeof t=="string"){if(t=t.toLowerCase(),ti(t)===32)return"tx:"+t;if(t.indexOf(":")===-1)return t}else{if(Array.isArray(t))return"filter:*:"+yp(t);if(Q_.isForkEvent(t))throw Ye.warn("not implemented"),new Error("not implemented");if(t&&typeof t=="object")return"filter:"+(t.address||"*")+":"+yp(t.topics||[])}throw new Error("invalid event - "+t)}function Ea(){return new Date().getTime()}function xp(t){return new Promise(e=>{setTimeout(e,t)})}const A6=["block","network","pending","poll"];class S6{constructor(e,r,n){te(this,"tag",e),te(this,"listener",r),te(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const r=e[1],n=E6(e[2]),i={};return n.length>0&&(i.topics=n),r&&r!=="*"&&(i.address=r),i}pollable(){return this.tag.indexOf(":")>=0||A6.indexOf(this.tag)>=0}}const T6={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function lu(t){return $t(le.from(t).toHexString(),32)}function bp(t){return ea.encode(qt([t,ar(bi(bi(t)),0,4)]))}const Pb=new RegExp("^(ipfs)://(.*)$","i"),mp=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Pb,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function lc(t,e){try{return ms(oo(t,e))}catch{}return null}function oo(t,e){if(t==="0x")return null;const r=le.from(ar(t,e,e+32)).toNumber(),n=le.from(ar(t,r,r+32)).toNumber();return ar(t,r+32,r+32+n)}function du(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):Ye.throwArgumentError("unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}function vp(t){const e=de(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function k6(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}function Cb(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(null),r+=32;for(let n=0;n<t.length;n++){const i=de(t[n]);e[n]=vp(r),e.push(vp(i.length)),e.push(k6(i)),r+=32+Math.ceil(i.length/32)*32}return $r(e)}class Rl{constructor(e,r,n,i){te(this,"provider",e),te(this,"name",n),te(this,"address",e.formatter.address(r)),te(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>le.from(e).eq(1)).catch(e=>{if(e.code===j.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,r){return je(this,void 0,void 0,function*(){const n={to:this.address,ccipReadEnabled:!0,data:$r([e,za(this.name),r||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,n.data=$r(["0x9061b923",Cb([Vx(this.name),n.data])]));try{let s=yield this.provider.call(n);return de(s).length%32===4&&Ye.throwError("resolver threw error",j.errors.CALL_EXCEPTION,{transaction:n,data:s}),i&&(s=oo(s,0)),s}catch(s){if(s.code===j.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,r){return je(this,void 0,void 0,function*(){const n=yield this._fetch(e,r);return n!=null?oo(n,0):null})}_getAddress(e,r){const n=T6[String(e)];if(n==null&&Ye.throwError(`unsupported coin type: ${e}`,j.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(r);const i=de(r);if(n.p2pkh!=null){const s=r.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const a=parseInt(s[1],16);if(s[2].length===a*2&&a>=1&&a<=75)return bp(qt([[n.p2pkh],"0x"+s[2]]))}}if(n.p2sh!=null){const s=r.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const a=parseInt(s[1],16);if(s[2].length===a*2&&a>=1&&a<=75)return bp(qt([[n.p2sh],"0x"+s[2]]))}}if(n.prefix!=null){const s=i[1];let a=i[0];if(a===0?s!==20&&s!==32&&(a=-1):a=-1,a>=0&&i.length===2+s&&s>=1&&s<=75){const o=hp.toWords(i.slice(2));return o.unshift(a),hp.encode(n.prefix,o)}}return null}getAddress(e){return je(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===Fd?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===j.errors.CALL_EXCEPTION)return null;throw i}const r=yield this._fetchBytes("0xf1cb7e06",lu(e));if(r==null||r==="0x")return null;const n=this._getAddress(e,r);return n==null&&Ye.throwError("invalid or unsupported coin data",j.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:r}),n})}getAvatar(){return je(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const r=yield this.getText("avatar");if(r==null)return null;for(let n=0;n<mp.length;n++){const i=r.match(mp[n]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:r}),{linkage:e,url:r};case"data":return e.push({type:"data",content:r}),{linkage:e,url:r};case"ipfs":return e.push({type:"ipfs",content:r}),{linkage:e,url:du(r)};case"erc721":case"erc1155":{const a=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:r});const o=this._resolvedAddress||(yield this.getAddress()),c=(i[2]||"").split("/");if(c.length!==2)return null;const f=yield this.provider.formatter.address(c[0]),u=$t(le.from(c[1]).toHexString(),32);if(s==="erc721"){const _=this.provider.formatter.callAddress(yield this.provider.call({to:f,data:$r(["0x6352211e",u])}));if(o!==_)return null;e.push({type:"owner",content:_})}else if(s==="erc1155"){const _=le.from(yield this.provider.call({to:f,data:$r(["0x00fdd58e",$t(o,32),u])}));if(_.isZero())return null;e.push({type:"balance",content:_.toString()})}const d={to:this.provider.formatter.address(c[0]),data:$r([a,u])};let g=lc(yield this.provider.call(d),0);if(g==null)return null;e.push({type:"metadata-url-base",content:g}),s==="erc1155"&&(g=g.replace("{id}",u.substring(2)),e.push({type:"metadata-url-expanded",content:g})),g.match(/^ipfs:/i)&&(g=du(g)),e.push({type:"metadata-url",content:g});const b=yield pa(g);if(!b)return null;e.push({type:"metadata",content:JSON.stringify(b)});let S=b.image;if(typeof S!="string")return null;if(!S.match(/^(https:\/\/|data:)/i)){if(S.match(Pb)==null)return null;e.push({type:"url-ipfs",content:S}),S=du(S)}return e.push({type:"url",content:S}),{linkage:e,url:S}}}}}catch{}return null})}getContentHash(){return je(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const r=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const a=parseInt(r[3],16);if(r[4].length===a*2)return"ipfs://"+ea.encode("0x"+r[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const a=parseInt(n[3],16);if(n[4].length===a*2)return"ipns://"+ea.encode("0x"+n[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const a={"=":"","+":"-","/":"_"};return"sia://"+Hd("0x"+s[1]).replace(/[=+\/]/g,c=>a[c])}return Ye.throwError("invalid or unsupported content hash data",j.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return je(this,void 0,void 0,function*(){let r=cr(e);r=qt([lu(64),lu(r.length),r]),r.length%32!==0&&(r=qt([r,$t("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",me(r));return n==null||n==="0x"?null:ms(n)})}}let hu=null,P6=1;class df extends vs{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),te(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(r=>{}),this._ready().catch(r=>{});else{const r=Sr(new.target,"getNetwork")(e);r?(te(this,"_network",r),this.emit("network",r,null)):Ye.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return je(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||Ye.throwError("no network detected",j.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:te(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return ss(()=>this._ready().then(e=>e,e=>{if(!(e.code===j.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return hu==null&&(hu=new Pe),hu}static getNetwork(e){return sh(e??"homestead")}ccipReadFetch(e,r,n){return je(this,void 0,void 0,function*(){if(this.disableCcipRead||n.length===0)return null;const i=e.to.toLowerCase(),s=r.toLowerCase(),a=[];for(let o=0;o<n.length;o++){const c=n[o],f=c.replace("{sender}",i).replace("{data}",s),u=c.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),d=yield pa({url:f,errorPassThrough:!0},u,(b,S)=>(b.status=S.statusCode,b));if(d.data)return d.data;const g=d.message||"unknown error";if(d.status>=400&&d.status<500)return Ye.throwError(`response not found during CCIP fetch: ${g}`,j.errors.SERVER_ERROR,{url:c,errorMessage:g});a.push(g)}return Ye.throwError(`error encountered during CCIP fetch: ${a.map(o=>JSON.stringify(o)).join(", ")}`,j.errors.SERVER_ERROR,{urls:n,errorMessages:a})})}_getInternalBlockNumber(e){return je(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(Ea()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const r=Ea(),n=er({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),s;const a=Ea();return i=le.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:r,respTime:a}});return this._internalBlockNumber=n,n.catch(i=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return je(this,void 0,void 0,function*(){const e=P6++,r=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)Ye.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",Ye.makeError("network block skew detected",j.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let i=this._emitted.block+1;i<=n;i++)this.emit("block",i);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&n-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let a=this.getTransactionReceipt(s).then(o=>(!o||o.blockNumber==null||(this._emitted["t:"+s]=o.blockNumber,this.emit(s,o)),null)).catch(o=>{this.emit("error",o)});r.push(a);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=n-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=n;const a=s.toBlock-this._maxFilterBlockRange;a>s.fromBlock&&(s.fromBlock=a),s.fromBlock<0&&(s.fromBlock=0);const o=this.getLogs(s).then(c=>{i._inflight=!1,c.length!==0&&c.forEach(f=>{f.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=f.blockNumber),this._emitted["b:"+f.blockHash]=f.blockNumber,this._emitted["t:"+f.transactionHash]=f.blockNumber,this.emit(s,f)})}).catch(c=>{this.emit("error",c),i._inflight=!1});r.push(o)}break}}}),this._lastBlockNumber=n,Promise.all(r).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return je(this,void 0,void 0,function*(){return Ye.throwError("provider does not support network detection",j.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return je(this,void 0,void 0,function*(){const e=yield this._ready(),r=yield this.detectNetwork();if(e.chainId!==r.chainId){if(this.anyNetwork)return this._network=r,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",r,e),yield xp(0),this._network;const n=Ye.makeError("underlying network changed",j.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:r});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Ea();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(r=>((this._fastBlockNumber==null||r>this._fastBlockNumber)&&(this._fastBlockNumber=r),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=Ea(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,r,n){return je(this,void 0,void 0,function*(){return this._waitForTransaction(e,r??1,n||0,null)})}_waitForTransaction(e,r,n,i){return je(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=r?s:new Promise((a,o)=>{const c=[];let f=!1;const u=function(){return f?!0:(f=!0,c.forEach(g=>{g()}),!1)},d=g=>{g.confirmations<r||u()||a(g)};if(this.on(e,d),c.push(()=>{this.removeListener(e,d)}),i){let g=i.startBlock,b=null;const S=_=>je(this,void 0,void 0,function*(){f||(yield xp(1e3),this.getTransactionCount(i.from).then(y=>je(this,void 0,void 0,function*(){if(!f){if(y<=i.nonce)g=_;else{{const E=yield this.getTransaction(e);if(E&&E.blockNumber!=null)return}for(b==null&&(b=g-3,b<i.startBlock&&(b=i.startBlock));b<=_;){if(f)return;const E=yield this.getBlockWithTransactions(b);for(let A=0;A<E.transactions.length;A++){const M=E.transactions[A];if(M.hash===e)return;if(M.from===i.from&&M.nonce===i.nonce){if(f)return;const B=yield this.waitForTransaction(M.hash,r);if(u())return;let D="replaced";M.data===i.data&&M.to===i.to&&M.value.eq(i.value)?D="repriced":M.data==="0x"&&M.from===M.to&&M.value.isZero()&&(D="cancelled"),o(Ye.makeError("transaction was replaced",j.errors.TRANSACTION_REPLACED,{cancelled:D==="replaced"||D==="cancelled",reason:D,replacement:this._wrapTransaction(M),hash:e,receipt:B}));return}}b++}}f||this.once("block",S)}}),y=>{f||this.once("block",S)}))});if(f)return;this.once("block",S),c.push(()=>{this.removeListener("block",S)})}if(typeof n=="number"&&n>0){const g=setTimeout(()=>{u()||o(Ye.makeError("timeout exceeded",j.errors.TIMEOUT,{timeout:n}))},n);g.unref&&g.unref(),c.push(()=>{clearTimeout(g)})}})})}getBlockNumber(){return je(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return je(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return le.from(e)}catch(r){return Ye.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:r})}})}getBalance(e,r){return je(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield er({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getBalance",n);try{return le.from(i)}catch(s){return Ye.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getBalance",params:n,result:i,error:s})}})}getTransactionCount(e,r){return je(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield er({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getTransactionCount",n);try{return le.from(i).toNumber()}catch(s){return Ye.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:i,error:s})}})}getCode(e,r){return je(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield er({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getCode",n);try{return me(i)}catch(s){return Ye.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getCode",params:n,result:i,error:s})}})}getStorageAt(e,r,n){return je(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield er({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(r).then(a=>To(a))}),s=yield this.perform("getStorageAt",i);try{return me(s)}catch(a){return Ye.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:a})}})}_wrapTransaction(e,r,n){if(r!=null&&ti(r)!==32)throw new Error("invalid response - sendTransaction");const i=e;return r!=null&&e.hash!==r&&Ye.throwError("Transaction hash mismatch from Provider.sendTransaction.",j.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:r}),i.wait=(s,a)=>je(this,void 0,void 0,function*(){s==null&&(s=1),a==null&&(a=0);let o;s!==0&&n!=null&&(o={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const c=yield this._waitForTransaction(e.hash,s,a,o);return c==null&&s===0?null:(this._emitted["t:"+e.hash]=c.blockNumber,c.status===0&&Ye.throwError("transaction failed",j.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:c}),c)}),i}sendTransaction(e){return je(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Promise.resolve(e).then(s=>me(s)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:r});return this._wrapTransaction(n,s,i)}catch(s){throw s.transaction=n,s.transactionHash=n.hash,s}})}_getTransactionRequest(e){return je(this,void 0,void 0,function*(){const r=yield e,n={};return["from","to"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?le.from(s):null))}),["type"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s??null))}),r.accessList&&(n.accessList=this.formatter.accessList(r.accessList)),["data"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?me(s):null))}),this.formatter.transactionRequest(yield er(n))})}_getFilter(e){return je(this,void 0,void 0,function*(){e=yield e;const r={};return e.address!=null&&(r.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(r[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(r[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield er(r))})}_call(e,r,n){return je(this,void 0,void 0,function*(){n>=_6&&Ye.throwError("CCIP read exceeded maximum redirections",j.errors.SERVER_ERROR,{redirects:n,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:r});if(n>=0&&r==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&ti(s)%32===4)try{const a=ar(s,4),o=ar(a,0,32);le.from(o).eq(i)||Ye.throwError("CCIP Read sender did not match",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const c=[],f=le.from(ar(a,32,64)).toNumber(),u=le.from(ar(a,f,f+32)).toNumber(),d=ar(a,f+32);for(let E=0;E<u;E++){const A=lc(d,E*32);A==null&&Ye.throwError("CCIP Read contained corrupt URL string",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),c.push(A)}const g=oo(a,64);le.from(ar(a,100,128)).isZero()||Ye.throwError("CCIP Read callback selector included junk",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const b=ar(a,96,100),S=oo(a,128),_=yield this.ccipReadFetch(e,g,c);_==null&&Ye.throwError("CCIP Read disabled or provided no URLs",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const y={to:i,data:$r([b,Cb([_,S])])};return this._call(y,r,n+1)}catch(a){if(a.code===j.errors.SERVER_ERROR)throw a}try{return me(s)}catch(a){return Ye.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:r},result:s,error:a})}})}call(e,r){return je(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield er({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(r),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)})}estimateGas(e){return je(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield er({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",r);try{return le.from(n)}catch(i){return Ye.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"estimateGas",params:r,result:n,error:i})}})}_getAddress(e){return je(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&Ye.throwArgumentError("invalid address or ENS name","name",e);const r=yield this.resolveName(e);return r==null&&Ye.throwError("ENS name not configured",j.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),r})}_getBlock(e,r){return je(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const i={includeTransactions:!!r};if(He(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),He(i.blockTag)&&(n=parseInt(i.blockTag.substring(2),16))}catch{Ye.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return ss(()=>je(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&n>this._emitted.block?null:void 0;if(r){let a=null;for(let c=0;c<s.transactions.length;c++){const f=s.transactions[c];if(f.blockNumber==null)f.confirmations=0;else if(f.confirmations==null){a==null&&(a=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let u=a-f.blockNumber+1;u<=0&&(u=1),f.confirmations=u}}const o=this.formatter.blockWithTransactions(s);return o.transactions=o.transactions.map(c=>this._wrapTransaction(c)),o}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return je(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return ss(()=>je(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let a=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;a<=0&&(a=1),i.confirmations=a}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return je(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return ss(()=>je(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const i=this.formatter.receipt(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let a=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;a<=0&&(a=1),i.confirmations=a}return i}),{oncePoll:this})})}getLogs(e){return je(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield er({filter:this._getFilter(e)}),n=yield this.perform("getLogs",r);return n.forEach(i=>{i.removed==null&&(i.removed=!1)}),Pe.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return je(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return je(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&Ye.throwArgumentError("invalid BlockTag","blockTag",e);let r=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return r+=e,r<0&&(r=0),this.formatter.blockTag(r)}return this.formatter.blockTag(e)})}getResolver(e){return je(this,void 0,void 0,function*(){let r=e;for(;;){if(r===""||r==="."||e!=="eth"&&r==="eth")return null;const n=yield this._getResolver(r,"getResolver");if(n!=null){const i=new Rl(this,n,e);return r!==e&&!(yield i.supportsWildcard())?null:i}r=r.split(".").slice(1).join(".")}})}_getResolver(e,r){return je(this,void 0,void 0,function*(){r==null&&(r="ENS");const n=yield this.getNetwork();n.ensAddress||Ye.throwError("network does not support ENS",j.errors.UNSUPPORTED_OPERATION,{operation:r,network:n.name});try{const i=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+za(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return je(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if(He(e))throw n}typeof e!="string"&&Ye.throwArgumentError("invalid ENS name","name",e);const r=yield this.getResolver(e);return r?yield r.getAddress():null})}lookupAddress(e){return je(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const r=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"lookupAddress");if(n==null)return null;const i=lc(yield this.call({to:n,data:"0x691f3431"+za(r).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return je(this,void 0,void 0,function*(){let r=null;if(He(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",a=yield this._getResolver(s,"getAvatar");if(!a)return null;r=new Rl(this,a,s);try{const o=yield r.getAvatar();if(o)return o.url}catch(o){if(o.code!==j.errors.CALL_EXCEPTION)throw o}try{const o=lc(yield this.call({to:a,data:"0x691f3431"+za(s).substring(2)}),0);r=yield this.getResolver(o)}catch(o){if(o.code!==j.errors.CALL_EXCEPTION)throw o;return null}}else if(r=yield this.getResolver(e),!r)return null;const n=yield r.getAvatar();return n==null?null:n.url})}perform(e,r){return Ye.throwError(e+" not implemented",j.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_addEventListener(e,r,n){const i=new S6(Bs(e),r,n);return this._events.push(i),this._startEvent(i),this}on(e,r){return this._addEventListener(e,r,!1)}once(e,r){return this._addEventListener(e,r,!0)}emit(e,...r){let n=!1,i=[],s=Bs(e);return this._events=this._events.filter(a=>a.tag!==s?!0:(setTimeout(()=>{a.listener.apply(this,r)},0),n=!0,a.once?(i.push(a),!1):!0)),i.forEach(a=>{this._stopEvent(a)}),n}listenerCount(e){if(!e)return this._events.length;let r=Bs(e);return this._events.filter(n=>n.tag===r).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let r=Bs(e);return this._events.filter(n=>n.tag===r).map(n=>n.listener)}off(e,r){if(r==null)return this.removeAllListeners(e);const n=[];let i=!1,s=Bs(e);return this._events=this._events.filter(a=>a.tag!==s||a.listener!=r||i?!0:(i=!0,n.push(a),!1)),n.forEach(a=>{this._stopEvent(a)}),this}removeAllListeners(e){let r=[];if(e==null)r=this._events,this._events=[];else{const n=Bs(e);this._events=this._events.filter(i=>i.tag!==n?!0:(r.push(i),!1))}return r.forEach(n=>{this._stopEvent(n)}),this}}var di=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const fr=new j(Fr),C6=["call","estimateGas"];function Ja(t,e){if(t==null)return null;if(typeof t.message=="string"&&t.message.match("reverted")){const r=He(t.data)?t.data:null;if(!e||r)return{message:t.message,data:r}}if(typeof t=="object"){for(const r in t){const n=Ja(t[r],e);if(n)return n}return null}if(typeof t=="string")try{return Ja(JSON.parse(t),e)}catch{}return null}function Ib(t,e,r){const n=r.transaction||r.signedTransaction;if(t==="call"){const s=Ja(e,!0);if(s)return s.data;fr.throwError("missing revert data in call exception; Transaction reverted without a reason string",j.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if(t==="estimateGas"){let s=Ja(e.body,!1);s==null&&(s=Ja(e,!1)),s&&fr.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",j.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:t,transaction:n,error:e})}let i=e.message;throw e.code===j.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&fr.throwError("insufficient funds for intrinsic transaction cost",j.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:n}),i.match(/nonce (is )?too low/i)&&fr.throwError("nonce has already been used",j.errors.NONCE_EXPIRED,{error:e,method:t,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&fr.throwError("replacement fee too low",j.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:n}),i.match(/only replay-protected/i)&&fr.throwError("legacy pre-eip-155 transactions not supported",j.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:n}),C6.indexOf(t)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&fr.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",j.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:n}),e}function wp(t){return new Promise(function(e){setTimeout(e,t)})}function I6(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function Aa(t){return t&&t.toLowerCase()}const Bl={};class ah extends ws{constructor(e,r,n){if(super(),e!==Bl)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");te(this,"provider",r),n==null&&(n=0),typeof n=="string"?(te(this,"_address",this.provider.formatter.address(n)),te(this,"_index",null)):typeof n=="number"?(te(this,"_index",n),te(this,"_address",null)):fr.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return fr.throwError("cannot alter JSON-RPC Signer connection",j.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new N6(Bl,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&fr.throwError("unknown account #"+this._index,j.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Ht(e);const r=this.getAddress().then(n=>(n&&(n=n.toLowerCase()),n));if(e.gasLimit==null){const n=Ht(e);n.from=r,e.gasLimit=this.provider.estimateGas(n)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(n=>di(this,void 0,void 0,function*(){if(n==null)return null;const i=yield this.provider.resolveName(n);return i==null&&fr.throwArgumentError("provided ENS name resolves to null","tx.to",n),i}))),er({tx:er(e),sender:r}).then(({tx:n,sender:i})=>{n.from!=null?n.from.toLowerCase()!==i&&fr.throwArgumentError("from address mismatch","transaction",e):n.from=i;const s=this.provider.constructor.hexlifyTransaction(n,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(a=>a,a=>(typeof a.message=="string"&&a.message.match(/user denied/i)&&fr.throwError("user rejected transaction",j.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),Ib("sendTransaction",a,s)))})}signTransaction(e){return fr.throwError("signing transactions is unsupported",j.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return di(this,void 0,void 0,function*(){const r=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield ss(()=>di(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(n);if(i!==null)return this.provider._wrapTransaction(i,n,r)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=n,i}})}signMessage(e){return di(this,void 0,void 0,function*(){const r=typeof e=="string"?cr(e):e,n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[me(r),n.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&fr.throwError("user rejected signing",j.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),i}})}_legacySignMessage(e){return di(this,void 0,void 0,function*(){const r=typeof e=="string"?cr(e):e,n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),me(r)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&fr.throwError("user rejected signing",j.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),i}})}_signTypedData(e,r,n){return di(this,void 0,void 0,function*(){const i=yield _r.resolveNames(e,r,n,a=>this.provider.resolveName(a)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(_r.getPayload(i.domain,r,i.value))])}catch(a){throw typeof a.message=="string"&&a.message.match(/user denied/i)&&fr.throwError("user rejected signing",j.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:r,value:i.value}}),a}})}unlock(e){return di(this,void 0,void 0,function*(){const r=this.provider,n=yield this.getAddress();return r.send("personal_unlockAccount",[n.toLowerCase(),e,null])})}}class N6 extends ah{sendTransaction(e){return this.sendUncheckedTransaction(e).then(r=>({hash:r,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:n=>this.provider.waitForTransaction(r,n)}))}}const R6={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class ls extends df{constructor(e,r){let n=r;n==null&&(n=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(a=>{i(a)},a=>{s(a)})},0)})),super(n),e||(e=Sr(this.constructor,"defaultUrl")()),typeof e=="string"?te(this,"connection",Object.freeze({url:e})):te(this,"connection",Object.freeze(Ht(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return di(this,void 0,void 0,function*(){yield wp(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const r=Sr(this.constructor,"getNetwork");try{return r(le.from(e).toNumber())}catch(n){return fr.throwError("could not detect network",j.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return fr.throwError("could not detect network",j.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new ah(Bl,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(r=>this.formatter.address(r)))}send(e,r){const n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:zr(n),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=pa(this.connection,JSON.stringify(n),I6).then(a=>(this.emit("debug",{action:"response",request:n,response:a,provider:this}),a),a=>{throw this.emit("debug",{action:"response",error:a,request:n,provider:this}),a});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,r){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Aa(r.address),r.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Aa(r.address),r.blockTag]];case"getCode":return["eth_getCode",[Aa(r.address),r.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Aa(r.address),$t(r.position,32),r.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[r.signedTransaction]];case"getBlock":return r.blockTag?["eth_getBlockByNumber",[r.blockTag,!!r.includeTransactions]]:r.blockHash?["eth_getBlockByHash",[r.blockHash,!!r.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[r.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[r.transactionHash]];case"call":return["eth_call",[Sr(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0}),r.blockTag]];case"estimateGas":return["eth_estimateGas",[Sr(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0})]];case"getLogs":return r.filter&&r.filter.address!=null&&(r.filter.address=Aa(r.filter.address)),["eth_getLogs",[r.filter]]}return null}perform(e,r){return di(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=r.transaction;if(i&&i.type!=null&&le.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(r=Ht(r),r.transaction=Ht(i),delete r.transaction.type)}}const n=this.prepareRequest(e,r);n==null&&fr.throwError(e+" not implemented",j.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(i){return Ib(e,i,r)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,r=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=r,r.then(function(n){function i(){e.send("eth_getFilterChanges",[n]).then(function(s){if(e._pendingFilter!=r)return null;let a=Promise.resolve();return s.forEach(function(o){e._emitted["t:"+o.toLowerCase()]="pending",a=a.then(function(){return e.getTransaction(o).then(function(c){return e.emit("pending",c),null})})}),a.then(function(){return wp(1e3)})}).then(function(){if(e._pendingFilter!=r){e.send("eth_uninstallFilter",[n]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),n}).catch(n=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,r){const n=Ht(R6);if(r)for(const s in r)r[s]&&(n[s]=!0);Od(e,n);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const a=To(le.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=a}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=me(e[s]))}),e.accessList&&(i.accessList=Xi(e.accessList)),i}}let Wa=null;try{if(Wa=WebSocket,Wa==null)throw new Error("inject please")}catch{const e=new j(Fr);Wa=function(){e.throwError("WebSockets not supported in this environment",j.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var pu=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const Yo=new j(Fr);let B6=1;class hf extends ls{constructor(e,r){r==="any"&&Yo.throwError("WebSocketProvider does not support 'any' network yet",j.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof e=="string"?super(e,r):super("_websocket",r),this._pollingInterval=-1,this._wsReady=!1,typeof e=="string"?te(this,"_websocket",new Wa(this.connection.url)):te(this,"_websocket",e),te(this,"_requests",{}),te(this,"_subs",{}),te(this,"_subIds",{}),te(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(i=>{this.websocket.send(this._requests[i].payload)})},this.websocket.onmessage=i=>{const s=i.data,a=JSON.parse(s);if(a.id!=null){const o=String(a.id),c=this._requests[o];if(delete this._requests[o],a.result!==void 0)c.callback(null,a.result),this.emit("debug",{action:"response",request:JSON.parse(c.payload),response:a.result,provider:this});else{let f=null;a.error?(f=new Error(a.error.message||"unknown error"),te(f,"code",a.error.code||null),te(f,"response",s)):f=new Error("unknown error"),c.callback(f,void 0),this.emit("debug",{action:"response",error:f,request:JSON.parse(c.payload),provider:this})}}else if(a.method==="eth_subscription"){const o=this._subs[a.params.subscription];o&&o.processFunc(a.params.result)}else console.warn("this should not happen")};const n=setInterval(()=>{this.emit("poll")},1e3);n.unref&&n.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){Yo.throwError("cannot reset events block on WebSocketProvider",j.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){Yo.throwError("cannot set polling interval on WebSocketProvider",j.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return pu(this,void 0,void 0,function*(){return null})}set polling(e){e&&Yo.throwError("cannot set polling on WebSocketProvider",j.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,r){const n=B6++;return new Promise((i,s)=>{function a(c,f){return c?s(c):i(f)}const o=JSON.stringify({method:e,params:r,id:n,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(o),provider:this}),this._requests[String(n)]={callback:a,payload:o},this._wsReady&&this.websocket.send(o)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,r,n){return pu(this,void 0,void 0,function*(){let i=this._subIds[e];i==null&&(i=Promise.all(r).then(a=>this.send("eth_subscribe",a)),this._subIds[e]=i);const s=yield i;this._subs[s]={tag:e,processFunc:n}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],r=>{const n=le.from(r.number).toNumber();this._emitted.block=n,this.emit("block",n)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],r=>{this.emit("pending",r)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],r=>{r.removed==null&&(r.removed=!1),this.emit(e.filter,this.formatter.filterLog(r))});break;case"tx":{const r=n=>{const i=n.hash;this.getTransactionReceipt(i).then(s=>{s&&this.emit(i,s)})};r(e),this._subscribe("tx",["newHeads"],n=>{this._events.filter(i=>i.type==="tx").forEach(r)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e);break}}_stopEvent(e){let r=e.tag;if(e.type==="tx"){if(this._events.filter(i=>i.type==="tx").length)return;r="tx"}else if(this.listenerCount(e.event))return;const n=this._subIds[r];n&&(delete this._subIds[r],n.then(i=>{this._subs[i]&&(delete this._subs[i],this.send("eth_unsubscribe",[i]))}))}destroy(){return pu(this,void 0,void 0,function*(){this.websocket.readyState===Wa.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}var M6=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const La=new j(Fr);class Nb extends ls{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return M6(this,void 0,void 0,function*(){let r=this.network;return r==null&&(r=yield e.detectNetwork.call(this),r||La.throwError("no network detected",j.errors.UNKNOWN_ERROR,{}),this._network==null&&(te(this,"_network",r),this.emit("network",r,null))),r})}}class Ei extends Nb{constructor(e,r){La.checkAbstract(new.target,Ei),e=Sr(new.target,"getNetwork")(e),r=Sr(new.target,"getApiKey")(r);const n=Sr(new.target,"getUrl")(e,r);super(n,e),typeof r=="string"?te(this,"apiKey",r):r!=null&&Object.keys(r).forEach(i=>{te(this,i,r[i])})}_startPending(){La.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return La.throwError("API provider does not support signing",j.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,r){return La.throwError("not implemented; sub-classes must override getUrl",j.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const _p=new j(Fr),dc="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class Rb extends hf{constructor(e,r){const n=new oh(e,r),i=n.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(i,n.network),te(this,"apiKey",n.apiKey)}isCommunityResource(){return this.apiKey===dc}}class oh extends Ei{static getWebSocketProvider(e,r){return new Rb(e,r)}static getApiKey(e){return e==null?dc:(e&&typeof e!="string"&&_p.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,r){let n=null;switch(e.name){case"homestead":n="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":n="eth-goerli.g.alchemy.com/v2/";break;case"matic":n="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":n="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":n="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":n="arb-goerli.g.alchemy.com/v2/";break;case"optimism":n="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":n="opt-goerli.g.alchemy.com/v2/";break;default:_p.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+n+r,throttleCallback:(i,s)=>(r===dc&&Io(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===dc}}const O6=new j(Fr),Xo="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function D6(t){switch(t){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return O6.throwArgumentError("unsupported network","name",t)}class Bb extends Ei{isCommunityResource(){return this.apiKey===Xo}static getApiKey(e){return e??Xo}static getUrl(e,r){r==null&&(r=Xo);const n={allowGzip:!0,url:"https://"+D6(e.name)+r,throttleCallback:(i,s)=>(r.apiKey===Xo&&Io(),Promise.resolve(!0))};return r.projectSecret!=null&&(n.user="",n.password=r.projectSecret),n}}var U6=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const Ep=new j(Fr);class Mb extends Ei{static getApiKey(e){return e!=null&&Ep.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,r){let n=null;switch(e.name){case"homestead":n="https://cloudflare-eth.com/";break;default:Ep.throwArgumentError("unsupported network","network",arguments[0])}return n}perform(e,r){const n=Object.create(null,{perform:{get:()=>super.perform}});return U6(this,void 0,void 0,function*(){return e==="getBlockNumber"?(yield n.perform.call(this,"getBlock",{blockTag:"latest"})).number:n.perform.call(this,e,r)})}}var Qo=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const Ri=new j(Fr);function Ap(t){const e={};for(let r in t){if(t[r]==null)continue;let n=t[r];r==="type"&&n===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r]?n=To(me(n)):r==="accessList"?n="["+Xi(n).map(i=>`{address:"${i.address}",storageKeys:["${i.storageKeys.join('","')}"]}`).join(",")+"]":n=me(n),e[r]=n)}return e}function L6(t){if(t.status==0&&(t.message==="No records found"||t.message==="No transactions found"))return t.result;if(t.status!=1||typeof t.message!="string"||!t.message.match(/^OK/)){const e=new Error("invalid response");throw e.result=JSON.stringify(t),(t.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return t.result}function Sp(t){if(t&&t.status==0&&t.message=="NOTOK"&&(t.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");throw e.result=JSON.stringify(t),e.throttleRetry=!0,e}if(t.jsonrpc!="2.0"){const e=new Error("invalid response");throw e.result=JSON.stringify(t),e}if(t.error){const e=new Error(t.error.message||"unknown error");throw t.error.code&&(e.code=t.error.code),t.error.data&&(e.data=t.error.data),e}return t.result}function Tp(t){if(t==="pending")throw new Error("pending not supported");return t==="latest"?t:parseInt(t.substring(2),16)}function gu(t,e,r){if(t==="call"&&e.code===j.errors.SERVER_ERROR){const i=e.error;if(i&&(i.message.match(/reverted/i)||i.message.match(/VM execution error/i))){let s=i.data;if(s&&(s="0x"+s.replace(/^.*0x/i,"")),He(s))return s;Ri.throwError("missing revert data in call exception",j.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let n=e.message;throw e.code===j.errors.SERVER_ERROR&&(e.error&&typeof e.error.message=="string"?n=e.error.message:typeof e.body=="string"?n=e.body:typeof e.responseText=="string"&&(n=e.responseText)),n=(n||"").toLowerCase(),n.match(/insufficient funds/)&&Ri.throwError("insufficient funds for intrinsic transaction cost",j.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:r}),n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&Ri.throwError("nonce has already been used",j.errors.NONCE_EXPIRED,{error:e,method:t,transaction:r}),n.match(/another transaction with same nonce/)&&Ri.throwError("replacement fee too low",j.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:r}),n.match(/execution failed due to an exception|execution reverted/)&&Ri.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",j.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:r}),e}class Ob extends df{constructor(e,r){super(e),te(this,"baseUrl",this.getBaseUrl()),te(this,"apiKey",r||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return Ri.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,r){const n=Object.keys(r).reduce((s,a)=>{const o=r[a];return o!=null&&(s+=`&${a}=${o}`),s},""),i=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${n}${i}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,r){return r.module=e,r.apikey=this.apiKey,r}fetch(e,r,n){return Qo(this,void 0,void 0,function*(){const i=n?this.getPostUrl():this.getUrl(e,r),s=n?this.getPostData(e,r):null,a=e==="proxy"?Sp:L6;this.emit("debug",{action:"request",request:i,provider:this});const o={url:i,throttleSlotInterval:1e3,throttleCallback:(u,d)=>(this.isCommunityResource()&&Io(),Promise.resolve(!0))};let c=null;s&&(o.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},c=Object.keys(s).map(u=>`${u}=${s[u]}`).join("&"));const f=yield pa(o,c,a||Sp);return this.emit("debug",{action:"response",request:i,response:zr(f),provider:this}),f})}detectNetwork(){return Qo(this,void 0,void 0,function*(){return this.network})}perform(e,r){const n=Object.create(null,{perform:{get:()=>super.perform}});return Qo(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:r.address,tag:r.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:r.address,tag:r.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:r.address,tag:r.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:r.address,position:r.position,tag:r.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:r.signedTransaction},!0).catch(i=>gu("sendTransaction",i,r.signedTransaction));case"getBlock":if(r.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:r.blockTag,boolean:r.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:r.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:r.transactionHash});case"call":{if(r.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const i=Ap(r.transaction);i.module="proxy",i.action="eth_call";try{return yield this.fetch("proxy",i,!0)}catch(s){return gu("call",s,r.transaction)}}case"estimateGas":{const i=Ap(r.transaction);i.module="proxy",i.action="eth_estimateGas";try{return yield this.fetch("proxy",i,!0)}catch(s){return gu("estimateGas",s,r.transaction)}}case"getLogs":{const i={action:"getLogs"};if(r.filter.fromBlock&&(i.fromBlock=Tp(r.filter.fromBlock)),r.filter.toBlock&&(i.toBlock=Tp(r.filter.toBlock)),r.filter.address&&(i.address=r.filter.address),r.filter.topics&&r.filter.topics.length>0&&(r.filter.topics.length>1&&Ri.throwError("unsupported topic count",j.errors.UNSUPPORTED_OPERATION,{topics:r.filter.topics}),r.filter.topics.length===1)){const o=r.filter.topics[0];(typeof o!="string"||o.length!==66)&&Ri.throwError("unsupported topic format",j.errors.UNSUPPORTED_OPERATION,{topic0:o}),i.topic0=o}const s=yield this.fetch("logs",i);let a={};for(let o=0;o<s.length;o++){const c=s[o];if(c.blockHash==null){if(a[c.blockNumber]==null){const f=yield this.getBlock(c.blockNumber);f&&(a[c.blockNumber]=f.hash)}c.blockHash=a[c.blockNumber]}}return s}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return n.perform.call(this,e,r)})}getHistory(e,r,n){return Qo(this,void 0,void 0,function*(){const i={action:"txlist",address:yield this.resolveName(e),startblock:r??0,endblock:n??99999999,sort:"asc"};return(yield this.fetch("account",i)).map(a=>{["contractAddress","to"].forEach(function(c){a[c]==""&&delete a[c]}),a.creates==null&&a.contractAddress!=null&&(a.creates=a.contractAddress);const o=this.formatter.transactionResponse(a);return a.timeStamp&&(o.timestamp=parseInt(a.timeStamp)),o})})}isCommunityResource(){return this.apiKey==null}}var Oc=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const is=new j(Fr);function Zo(){return new Date().getTime()}function kp(t){let e=null;for(let r=0;r<t.length;r++){const n=t[r];if(n==null)return null;e?e.name===n.name&&e.chainId===n.chainId&&(e.ensAddress===n.ensAddress||e.ensAddress==null&&n.ensAddress==null)||is.throwArgumentError("provider mismatch","networks",t):e=n}return e}function Pp(t,e){t=t.slice().sort();const r=Math.floor(t.length/2);if(t.length%2)return t[r];const n=t[r-1],i=t[r];return e!=null&&Math.abs(n-i)>e?null:(n+i)/2}function Vs(t){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return JSON.stringify(t);if(typeof t=="string")return t;if(le.isBigNumber(t))return t.toString();if(Array.isArray(t))return JSON.stringify(t.map(e=>Vs(e)));if(typeof t=="object"){const e=Object.keys(t);return e.sort(),"{"+e.map(r=>{let n=t[r];return typeof n=="function"?n="[function]":n=Vs(n),JSON.stringify(r)+":"+n}).join(",")+"}"}throw new Error("unknown value type: "+typeof t)}let F6=1;function Cp(t){let e=null,r=null,n=new Promise(a=>{e=function(){r&&(clearTimeout(r),r=null),a()},r=setTimeout(e,t)});const i=a=>(n=n.then(a),n);function s(){return n}return{cancel:e,getPromise:s,wait:i}}const j6=[j.errors.CALL_EXCEPTION,j.errors.INSUFFICIENT_FUNDS,j.errors.NONCE_EXPIRED,j.errors.REPLACEMENT_UNDERPRICED,j.errors.UNPREDICTABLE_GAS_LIMIT],K6=["address","args","errorArgs","errorSignature","method","transaction"];function ec(t,e){const r={weight:t.weight};return Object.defineProperty(r,"provider",{get:()=>t.provider}),t.start&&(r.start=t.start),e&&(r.duration=e-t.start),t.done&&(t.error?r.error=t.error:r.result=t.result||null),r}function q6(t,e){return function(r){const n={};r.forEach(s=>{const a=t(s.result);n[a]||(n[a]={count:0,result:s.result}),n[a].count++});const i=Object.keys(n);for(let s=0;s<i.length;s++){const a=n[i[s]];if(a.count>=e)return a.result}}}function $6(t,e,r){let n=Vs;switch(e){case"getBlockNumber":return function(i){const s=i.map(o=>o.result);let a=Pp(i.map(o=>o.result),2);if(a!=null)return a=Math.ceil(a),s.indexOf(a+1)>=0&&a++,a>=t._highestBlockNumber&&(t._highestBlockNumber=a),t._highestBlockNumber};case"getGasPrice":return function(i){const s=i.map(a=>a.result);return s.sort(),s[Math.floor(s.length/2)]};case"getEtherPrice":return function(i){return Pp(i.map(s=>s.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(i){return i==null?null:(i=Ht(i),i.confirmations=-1,Vs(i))};break;case"getBlock":r.includeTransactions?n=function(i){return i==null?null:(i=Ht(i),i.transactions=i.transactions.map(s=>(s=Ht(s),s.confirmations=-1,s)),Vs(i))}:n=function(i){return i==null?null:Vs(i)};break;default:throw new Error("unknown method: "+e)}return q6(n,t.quorum)}function Sa(t,e){return Oc(this,void 0,void 0,function*(){const r=t.provider;return r.blockNumber!=null&&r.blockNumber>=e||e===-1?r:ss(()=>new Promise((n,i)=>{setTimeout(function(){return r.blockNumber>=e?n(r):t.cancelled?n(null):n(void 0)},0)}),{oncePoll:r})})}function H6(t,e,r,n){return Oc(this,void 0,void 0,function*(){let i=t.provider;switch(r){case"getBlockNumber":case"getGasPrice":return i[r]();case"getEtherPrice":if(i.getEtherPrice)return i.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return n.blockTag&&He(n.blockTag)&&(i=yield Sa(t,e)),i[r](n.address,n.blockTag||"latest");case"getStorageAt":return n.blockTag&&He(n.blockTag)&&(i=yield Sa(t,e)),i.getStorageAt(n.address,n.position,n.blockTag||"latest");case"getBlock":return n.blockTag&&He(n.blockTag)&&(i=yield Sa(t,e)),i[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash);case"call":case"estimateGas":return n.blockTag&&He(n.blockTag)&&(i=yield Sa(t,e)),r==="call"&&n.blockTag?i[r](n.transaction,n.blockTag):i[r](n.transaction);case"getTransaction":case"getTransactionReceipt":return i[r](n.transactionHash);case"getLogs":{let s=n.filter;return(s.fromBlock&&He(s.fromBlock)||s.toBlock&&He(s.toBlock))&&(i=yield Sa(t,e)),i.getLogs(s)}}return is.throwError("unknown method error",j.errors.UNKNOWN_ERROR,{method:r,params:n})})}class Db extends df{constructor(e,r){e.length===0&&is.throwArgumentError("missing providers","providers",e);const n=e.map((a,o)=>{if(vs.isProvider(a)){const u=Nl(a)?2e3:750;return Object.freeze({provider:a,weight:1,stallTimeout:u,priority:1})}const c=Ht(a);c.priority==null&&(c.priority=1),c.stallTimeout==null&&(c.stallTimeout=Nl(a)?2e3:750),c.weight==null&&(c.weight=1);const f=c.weight;return(f%1||f>512||f<1)&&is.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${o}].weight`,f),Object.freeze(c)}),i=n.reduce((a,o)=>a+o.weight,0);r==null?r=i/2:r>i&&is.throwArgumentError("quorum will always fail; larger than total weight","quorum",r);let s=kp(n.map(a=>a.provider.network));s==null&&(s=new Promise((a,o)=>{setTimeout(()=>{this.detectNetwork().then(a,o)},0)})),super(s),te(this,"providerConfigs",Object.freeze(n)),te(this,"quorum",r),this._highestBlockNumber=-1}detectNetwork(){return Oc(this,void 0,void 0,function*(){const e=yield Promise.all(this.providerConfigs.map(r=>r.provider.getNetwork()));return kp(e)})}perform(e,r){return Oc(this,void 0,void 0,function*(){if(e==="sendTransaction"){const c=yield Promise.all(this.providerConfigs.map(f=>f.provider.sendTransaction(r.signedTransaction).then(u=>u.hash,u=>u)));for(let f=0;f<c.length;f++){const u=c[f];if(typeof u=="string")return u}throw c[0]}this._highestBlockNumber===-1&&e!=="getBlockNumber"&&(yield this.getBlockNumber());const n=$6(this,e,r),i=bb(this.providerConfigs.map(Ht));i.sort((c,f)=>c.priority-f.priority);const s=this._highestBlockNumber;let a=0,o=!0;for(;;){const c=Zo();let f=i.filter(b=>b.runner&&c-b.start<b.stallTimeout).reduce((b,S)=>b+S.weight,0);for(;f<this.quorum&&a<i.length;){const b=i[a++],S=F6++;b.start=Zo(),b.staller=Cp(b.stallTimeout),b.staller.wait(()=>{b.staller=null}),b.runner=H6(b,s,e,r).then(_=>{b.done=!0,b.result=_,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:S,backend:ec(b,Zo()),request:{method:e,params:zr(r)},provider:this})},_=>{b.done=!0,b.error=_,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:S,backend:ec(b,Zo()),request:{method:e,params:zr(r)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:S,backend:ec(b,null),request:{method:e,params:zr(r)},provider:this}),f+=b.weight}const u=[];i.forEach(b=>{b.done||!b.runner||(u.push(b.runner),b.staller&&u.push(b.staller.getPromise()))}),u.length&&(yield Promise.race(u));const d=i.filter(b=>b.done&&b.error==null);if(d.length>=this.quorum){const b=n(d);if(b!==void 0)return i.forEach(S=>{S.staller&&S.staller.cancel(),S.cancelled=!0}),b;o||(yield Cp(100).getPromise()),o=!1}const g=i.reduce((b,S)=>{if(!S.done||S.error==null)return b;const _=S.error.code;return j6.indexOf(_)>=0&&(b[_]||(b[_]={error:S.error,weight:0}),b[_].weight+=S.weight),b},{});if(Object.keys(g).forEach(b=>{const S=g[b];if(S.weight<this.quorum)return;i.forEach(E=>{E.staller&&E.staller.cancel(),E.cancelled=!0});const _=S.error,y={};K6.forEach(E=>{_[E]!=null&&(y[E]=_[E])}),is.throwError(_.reason||_.message,b,y)}),i.filter(b=>!b.done).length===0)break}return i.forEach(c=>{c.staller&&c.staller.cancel(),c.cancelled=!0}),is.throwError("failed to meet quorum",j.errors.SERVER_ERROR,{method:e,params:r,results:i.map(c=>ec(c)),provider:this})})}}const Ub=null,hc=new j(Fr),Fa="84842078b09946638c03157f83405213";class Lb extends hf{constructor(e,r){const n=new ch(e,r),i=n.connection;i.password&&hc.throwError("INFURA WebSocket project secrets unsupported",j.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const s=i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(s,e),te(this,"apiKey",n.projectId),te(this,"projectId",n.projectId),te(this,"projectSecret",n.projectSecret)}isCommunityResource(){return this.projectId===Fa}}class ch extends Ei{static getWebSocketProvider(e,r){return new Lb(e,r)}static getApiKey(e){const r={apiKey:Fa,projectId:Fa,projectSecret:null};return e==null||(typeof e=="string"?r.projectId=e:e.projectSecret!=null?(hc.assertArgument(typeof e.projectId=="string","projectSecret requires a projectId","projectId",e.projectId),hc.assertArgument(typeof e.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),r.projectId=e.projectId,r.projectSecret=e.projectSecret):e.projectId&&(r.projectId=e.projectId),r.apiKey=r.projectId),r}static getUrl(e,r){let n=null;switch(e?e.name:"unknown"){case"homestead":n="mainnet.infura.io";break;case"goerli":n="goerli.infura.io";break;case"sepolia":n="sepolia.infura.io";break;case"matic":n="polygon-mainnet.infura.io";break;case"maticmum":n="polygon-mumbai.infura.io";break;case"optimism":n="optimism-mainnet.infura.io";break;case"optimism-goerli":n="optimism-goerli.infura.io";break;case"arbitrum":n="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":n="arbitrum-goerli.infura.io";break;default:hc.throwError("unsupported network",j.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i={allowGzip:!0,url:"https://"+n+"/v3/"+r.projectId,throttleCallback:(s,a)=>(r.projectId===Fa&&Io(),Promise.resolve(!0))};return r.projectSecret!=null&&(i.user="",i.password=r.projectSecret),i}isCommunityResource(){return this.projectId===Fa}}class z6 extends ls{send(e,r){const n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch==null&&(this._pendingBatch=[]);const i={request:n,resolve:null,reject:null},s=new Promise((a,o)=>{i.resolve=a,i.reject=o});return this._pendingBatch.push(i),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const a=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const o=a.map(c=>c.request);return this.emit("debug",{action:"requestBatch",request:zr(o),provider:this}),pa(this.connection,JSON.stringify(o)).then(c=>{this.emit("debug",{action:"response",request:o,response:c,provider:this}),a.forEach((f,u)=>{const d=c[u];if(d.error){const g=new Error(d.error.message);g.code=d.error.code,g.data=d.error.data,f.reject(g)}else f.resolve(d.result)})},c=>{this.emit("debug",{action:"response",error:c,request:o,provider:this}),a.forEach(f=>{f.reject(c)})})},10)),s}}const yu=new j(Fr),G6="ETHERS_JS_SHARED";class Fb extends Ei{static getApiKey(e){return e&&typeof e!="string"&&yu.throwArgumentError("invalid apiKey","apiKey",e),e||G6}static getUrl(e,r){yu.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let n=null;switch(e.name){case"homestead":n="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":n="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":n="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":n="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":n="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:yu.throwArgumentError("unsupported network","network",arguments[0])}return n+"?apiKey="+r}}const Ip=new j(Fr),Np="62e1ad51b37b8e00394bda3b";class jb extends Ei{static getApiKey(e){const r={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return e==null?r.applicationId=Np:typeof e=="string"?r.applicationId=e:e.applicationSecretKey!=null?(r.applicationId=e.applicationId,r.applicationSecretKey=e.applicationSecretKey):e.applicationId?r.applicationId=e.applicationId:Ip.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),r}static getUrl(e,r){let n=null;switch(e?e.name:"unknown"){case"goerli":n="eth-goerli.gateway.pokt.network";break;case"homestead":n="eth-mainnet.gateway.pokt.network";break;case"kovan":n="poa-kovan.gateway.pokt.network";break;case"matic":n="poly-mainnet.gateway.pokt.network";break;case"maticmum":n="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":n="eth-rinkeby.gateway.pokt.network";break;case"ropsten":n="eth-ropsten.gateway.pokt.network";break;default:Ip.throwError("unsupported network",j.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i=`https://${n}/v1/lb/${r.applicationId}`,s={headers:{},url:i};return r.applicationSecretKey!=null&&(s.user="",s.password=r.applicationSecretKey),s}isCommunityResource(){return this.applicationId===Np}}const Rp=new j(Fr);let V6=1;function Bp(t,e){const r="Web3LegacyFetcher";return function(n,i){const s={method:n,params:i,id:V6++,jsonrpc:"2.0"};return new Promise((a,o)=>{this.emit("debug",{action:"request",fetcher:r,request:zr(s),provider:this}),e(s,(c,f)=>{if(c)return this.emit("debug",{action:"response",fetcher:r,error:c,request:s,provider:this}),o(c);if(this.emit("debug",{action:"response",fetcher:r,request:s,response:f,provider:this}),f.error){const u=new Error(f.error.message);return u.code=f.error.code,u.data=f.error.data,o(u)}a(f.result)})})}}function J6(t){return function(e,r){r==null&&(r=[]);const n={method:e,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:zr(n),provider:this}),t.request(n).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:i,provider:this}),i})}}class Kb extends ls{constructor(e,r){e==null&&Rp.throwArgumentError("missing provider","provider",e);let n=null,i=null,s=null;typeof e=="function"?(n="unknown:",i=e):(n=e.host||e.path||"",!n&&e.isMetaMask&&(n="metamask"),s=e,e.request?(n===""&&(n="eip-1193:"),i=J6(e)):e.sendAsync?i=Bp(e,e.sendAsync.bind(e)):e.send?i=Bp(e,e.send.bind(e)):Rp.throwArgumentError("unsupported provider","provider",e),n||(n="unknown:")),super(n,r),te(this,"jsonRpcFetchFunc",i),te(this,"provider",s)}send(e,r){return this.jsonRpcFetchFunc(e,r)}}const Mp=new j(Fr);function fh(t,e){if(t==null&&(t="homestead"),typeof t=="string"){const n=t.match(/^(ws|http)s?:/i);if(n)switch(n[1].toLowerCase()){case"http":case"https":return new ls(t);case"ws":case"wss":return new hf(t);default:Mp.throwArgumentError("unsupported URL scheme","network",t)}}const r=sh(t);return(!r||!r._defaultProvider)&&Mp.throwError("unsupported getDefaultProvider network",j.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:t}),r._defaultProvider({FallbackProvider:Db,AlchemyProvider:oh,AnkrProvider:Bb,CloudflareProvider:Mb,EtherscanProvider:Ob,InfuraProvider:ch,JsonRpcProvider:ls,NodesmithProvider:Fb,PocketProvider:jb,Web3Provider:Kb,IpcProvider:Ub},e)}const qb=Object.freeze(Object.defineProperty({__proto__:null,AlchemyProvider:oh,AlchemyWebSocketProvider:Rb,AnkrProvider:Bb,BaseProvider:df,CloudflareProvider:Mb,EtherscanProvider:Ob,FallbackProvider:Db,Formatter:Pe,InfuraProvider:ch,InfuraWebSocketProvider:Lb,IpcProvider:Ub,JsonRpcBatchProvider:z6,JsonRpcProvider:ls,JsonRpcSigner:ah,NodesmithProvider:Fb,PocketProvider:jb,Provider:vs,Resolver:Rl,StaticJsonRpcProvider:Nb,UrlJsonRpcProvider:Ei,Web3Provider:Kb,WebSocketProvider:hf,getDefaultProvider:fh,getNetwork:sh,isCommunityResourcable:kb,isCommunityResource:Nl,showThrottleMessage:Io},Symbol.toStringTag,{value:"Module"})),W6="solidity/5.7.0",Y6=new RegExp("^bytes([0-9]+)$"),X6=new RegExp("^(u?int)([0-9]*)$"),Q6=new RegExp("^(.*)\\[([0-9]*)\\]$"),Z6="0000000000000000000000000000000000000000000000000000000000000000",Hs=new j(W6);function $b(t,e,r){switch(t){case"address":return r?qa(e,32):de(e);case"string":return cr(e);case"bytes":return de(e);case"bool":return e=e?"0x01":"0x00",r?qa(e,32):de(e)}let n=t.match(X6);if(n){let i=parseInt(n[2]||"256");return(n[2]&&String(i)!==n[2]||i%8!==0||i===0||i>256)&&Hs.throwArgumentError("invalid number type","type",t),r&&(i=256),e=le.from(e).toTwos(i),qa(e,i/8)}if(n=t.match(Y6),n){const i=parseInt(n[1]);return(String(i)!==n[1]||i===0||i>32)&&Hs.throwArgumentError("invalid bytes type","type",t),de(e).byteLength!==i&&Hs.throwArgumentError(`invalid value for ${t}`,"value",e),r?de((e+Z6).substring(0,66)):e}if(n=t.match(Q6),n&&Array.isArray(e)){const i=n[1];parseInt(n[2]||String(e.length))!=e.length&&Hs.throwArgumentError(`invalid array length for ${t}`,"value",e);const a=[];return e.forEach(function(o){a.push($b(i,o,!0))}),qt(a)}return Hs.throwArgumentError("invalid type","type",t)}function uh(t,e){t.length!=e.length&&Hs.throwArgumentError("wrong number of values; expected ${ types.length }","values",e);const r=[];return t.forEach(function(n,i){r.push($b(n,e[i]))}),me(qt(r))}function eE(t,e){return Lt(uh(t,e))}function tE(t,e){return bi(uh(t,e))}const rE="units/5.7.0",Hb=new j(rE),zb=["wei","kwei","mwei","gwei","szabo","finney","ether"];function nE(t){const e=String(t).split(".");(e.length>2||!e[0].match(/^-?[0-9]*$/)||e[1]&&!e[1].match(/^[0-9]*$/)||t==="."||t==="-.")&&Hb.throwArgumentError("invalid value","value",t);let r=e[0],n="";for(r.substring(0,1)==="-"&&(n="-",r=r.substring(1));r.substring(0,1)==="0";)r=r.substring(1);r===""&&(r="0");let i="";for(e.length===2&&(i="."+(e[1]||"0"));i.length>2&&i[i.length-1]==="0";)i=i.substring(0,i.length-1);const s=[];for(;r.length;)if(r.length<=3){s.unshift(r);break}else{const a=r.length-3;s.unshift(r.substring(a)),r=r.substring(0,a)}return n+s.join(",")+i}function Gb(t,e){if(typeof e=="string"){const r=zb.indexOf(e);r!==-1&&(e=3*r)}return ac(t,e??18)}function Vb(t,e){if(typeof t!="string"&&Hb.throwArgumentError("value must be a string","value",t),typeof e=="string"){const r=zb.indexOf(e);r!==-1&&(e=3*r)}return qn(t,e??18)}function iE(t){return Gb(t,18)}function sE(t){return Vb(t,18)}const Jb=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:Fx,ConstructorFragment:Mn,ErrorFragment:pi,EventFragment:Gn,FormatTypes:vt,Fragment:Vn,FunctionFragment:On,HDNode:dn,Indexed:kc,Interface:wl,LogDescription:Xx,Logger:j,ParamType:pr,RLP:T2,SigningKey:as,get SupportedAlgorithm(){return ta},TransactionDescription:Qx,get TransactionTypes(){return Al},get UnicodeNormalizationForm(){return ri},Utf8ErrorFuncs:Ux,get Utf8ErrorReason(){return en},_TypedDataEncoder:_r,_fetchData:Ab,_toEscapedUtf8String:W2,accessListify:Xi,arrayify:de,base58:ea,base64:p_,checkProperties:Od,checkResultErrors:Ex,commify:nE,computeAddress:Ui,computeHmac:so,computePublicKey:Yd,concat:qt,deepCopy:zr,defaultAbiCoder:jx,defaultPath:ra,defineReadOnly:te,dnsEncode:Vx,entropyToMnemonic:uf,fetchJson:pa,formatBytes32String:Y2,formatEther:iE,formatUnits:Gb,getAccountPath:L3,getAddress:Ot,getContractAddress:nf,getCreate2Address:R2,getIcapAddress:N2,getJsonWalletAddress:z3,getStatic:Sr,hashMessage:Gd,hexConcat:$r,hexDataLength:ti,hexDataSlice:ar,hexStripZeros:px,hexValue:To,hexZeroPad:$t,hexlify:me,id:Oi,isAddress:I2,isBytes:Wi,isBytesLike:So,isHexString:He,isValidMnemonic:U3,isValidName:L_,joinSignature:xl,keccak256:Lt,mnemonicToEntropy:ff,mnemonicToSeed:xb,namehash:za,nameprep:u_,parseBytes32String:X2,parseEther:sE,parseTransaction:cb,parseUnits:Vb,poll:ss,randomBytes:Gs,recoverAddress:Co,recoverPublicKey:nb,resolveProperties:er,ripemd160:pb,serializeTransaction:Sl,sha256:bi,sha512:P3,shallowCopy:Ht,shuffled:bb,solidityKeccak256:eE,solidityPack:uh,soliditySha256:tE,splitSignature:xs,stripZeros:Yn,toUtf8Bytes:cr,toUtf8CodePoints:Sc,toUtf8String:ms,verifyMessage:s6,verifyTypedData:a6,zeroPad:qa},Symbol.toStringTag,{value:"Module"})),lh="ethers/5.7.2",Wb=new j(lh),Yb=Object.freeze(Object.defineProperty({__proto__:null,BaseContract:Qd,BigNumber:le,Contract:Nc,ContractFactory:db,FixedNumber:hr,Signer:ws,VoidSigner:Po,Wallet:Ni,Wordlist:Es,constants:Mx,get errors(){return un},getDefaultProvider:fh,logger:Wb,providers:qb,utils:Jb,version:lh,wordlists:Rc},Symbol.toStringTag,{value:"Module"}));try{const t=window;t._ethers==null&&(t._ethers=Yb)}catch{}const aE=Object.freeze(Object.defineProperty({__proto__:null,BaseContract:Qd,BigNumber:le,Contract:Nc,ContractFactory:db,FixedNumber:hr,Signer:ws,VoidSigner:Po,Wallet:Ni,Wordlist:Es,constants:Mx,get errors(){return un},ethers:Yb,getDefaultProvider:fh,logger:Wb,providers:qb,utils:Jb,version:lh,wordlists:Rc},Symbol.toStringTag,{value:"Module"})),pf=Hl(aE);var Xb=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(da,"__esModule",{value:!0});const oE=Xb(Rd),cE=Xb(ry),xu=pf;class fE extends oE.default{get publicKey(){return Buffer.from(this.pk,"hex")}constructor(e){const r=Buffer.from(e,"hex"),n=cE.default.publicKeyCreate(r,!1);super(e,Buffer.from(n))}sign(e){return new xu.ethers.Wallet(this._key).signMessage(e).then(n=>Buffer.from(n.slice(2),"hex"))}static async verify(e,r,n){const i=xu.ethers.utils.computeAddress(e);return xu.ethers.utils.verifyMessage(r,n)===i}}da.default=fE;var dh={},hh={},gf={},Qb=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gf,"__esModule",{value:!0});const bu=Ki(),uE=Qb(hs),lE=Qb(wn),Op=ys;class dE{constructor(e,r){this._key=e,this.pk=r,this.signatureType=1,this.ownerLength=Op.SIG_CONFIG[1].pubLength,this.signatureLength=Op.SIG_CONFIG[1].sigLength,r||(this.pk=bu.createPublicKey({key:e,type:"pkcs1",format:"pem"}).export({format:"pem",type:"pkcs1"}).toString())}get publicKey(){return this._publicKey}sign(e){return bu.createSign("sha256").update(e).sign({key:this._key,padding:bu.constants.RSA_PKCS1_PSS_PADDING})}static async verify(e,r,n){return await uE.default.crypto.verify(Buffer.isBuffer(e)?lE.default.encode(e):e,r,n)}}gf.default=dE;var na={},hE=H&&H.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pE=H&&H.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gE=H&&H.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&hE(e,t,r);return pE(e,t),e};Object.defineProperty(na,"__esModule",{value:!0});na.jwkTopem=na.pemTojwk=void 0;const Ai=gE(W1);function yE(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function ph(t){return yE(Buffer.from(t,"hex").toString("base64"))}var Zb=Ai.define("RSAPublicKey",function(){this.seq().obj(this.key("n").int(),this.key("e").int())}),e1=Ai.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())}),xE=Ai.define("PublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(e1),this.key("publicKey").bitstr())}),t1=Ai.define("Version",function(){this.int({0:"two-prime",1:"multi"})}),bE=Ai.define("OtherPrimeInfos",function(){this.seq().obj(this.key("ri").int(),this.key("di").int(),this.key("ti").int())}),r1=Ai.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").use(t1),this.key("n").int(),this.key("e").int(),this.key("d").int(),this.key("p").int(),this.key("q").int(),this.key("dp").int(),this.key("dq").int(),this.key("qi").int(),this.key("other").optional().use(bE))}),mE=Ai.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").use(t1),this.key("algorithm").use(e1),this.key("privateKey").bitstr())});function n1(t,e){return e=e||{},Object.keys(e).forEach(function(r){t[r]=e[r]}),t}function gh(t){return t.length%2===1?"0"+t:t}function i1(t,e){var r=Zb.decode(t,"der"),n=gh(r.e.toString(16)),i={kty:"RSA",n:Ii(r.n),e:ph(n)};return n1(i,e)}function s1(t,e){var r=r1.decode(t,"der"),n=gh(r.e.toString(16)),i={kty:"RSA",n:Ii(r.n),e:ph(n),d:Ii(r.d),p:Ii(r.p),q:Ii(r.q),dp:Ii(r.dp),dq:Ii(r.dq),qi:Ii(r.qi)};return n1(i,e)}function vE(t,e){var r=xE.decode(t,"der");return i1(r.publicKey.data,e)}function wE(t,e){var r=mE.decode(t,"der");return s1(r.privateKey.data,e)}function _E(t){var e=/^-----BEGIN (RSA )?(PUBLIC|PRIVATE) KEY-----$/.exec(t);if(!e)return null;var r=!!e[1],n=e[2]==="PRIVATE";return n?r?s1:wE:r?i1:vE}function EE(t){return{n:Pi(t.n),e:Pi(t.e),d:t.d&&Pi(t.d),p:t.p&&Pi(t.p),q:t.q&&Pi(t.q),dp:t.dp&&Pi(t.dp),dq:t.dq&&Pi(t.dq),qi:t.qi&&Pi(t.qi)}}function Ii(t){return ph(gh(t.toString(16)))}function AE(t){return new Ai.bignum(Buffer.from(t,"base64"))}function Pi(t){return/^[0-9]+$/.test(t)?new Ai.bignum(t,10):AE(t)}function SE(t,e){var r=t.toString().split(/(\r\n|\r|\n)+/g);r=r.filter(function(i){return i.trim().length!==0});var n=_E(r[0]);return r=r.slice(1,-1).join(""),n(Buffer.from(r.replace(/[^\w\d\+\/=]+/g,""),"base64"),e)}na.pemTojwk=SE;function TE(t){var e=EE(t),r=!!e.d,n=r?"PRIVATE":"PUBLIC",i="-----BEGIN RSA "+n+` KEY-----
`,s=`
-----END RSA `+n+` KEY-----
`,a=Buffer.alloc(0);r?(e.version="two-prime",a=r1.encode(e,"der")):a=Zb.encode(e,"der");var o=a.toString("base64").match(/.{1,64}/g).join(`
`);return i+o+s}na.jwkTopem=TE;var yh=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hh,"__esModule",{value:!0});const kE=yh(gf),PE=na,CE=yh(wn),Dp=yh(hs);class IE extends kE.default{constructor(e){super(PE.jwkTopem(e),e.n),this.jwk=e}get publicKey(){return CE.default.toBuffer(this.pk)}sign(e){return Dp.default.crypto.sign(this.jwk,e)}static async verify(e,r,n){return await Dp.default.crypto.verify(e,r,n)}}hh.default=IE;var xh={},NE=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xh,"__esModule",{value:!0});const RE=NE(da);class BE extends RE.default{}xh.default=BE;var ga={},a1=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ga,"__esModule",{value:!0});const ME=a1(Ao),Ta=a1(Vl);class OE extends ME.default{get publicKey(){return Ta.default.decode(this.pk)}get key(){return Ta.default.decode(this._key)}constructor(e){const r=Ta.default.decode(e);super(Ta.default.encode(r.subarray(0,32)),Ta.default.encode(r.subarray(32,64)))}}ga.default=OE;var bh={};Object.defineProperty(bh,"__esModule",{value:!0});const Ms=pf,ka=ys;class DE{constructor(e){this.ownerLength=ka.SIG_CONFIG[ka.SignatureConfig.ETHEREUM].pubLength,this.signatureLength=ka.SIG_CONFIG[ka.SignatureConfig.ETHEREUM].sigLength,this.signatureType=ka.SignatureConfig.ETHEREUM,this.signer=e.getSigner()}async setPublicKey(){const e="sign this message to connect to Bundlr.Network",r=await this.signer.signMessage(e),n=await Ms.ethers.utils.hashMessage(e),i=Ms.ethers.utils.recoverPublicKey(Ms.ethers.utils.arrayify(n),r);this.publicKey=Buffer.from(Ms.ethers.utils.arrayify(i))}async sign(e){this.publicKey||await this.setPublicKey();const r=await this.signer.signMessage(e);return Buffer.from(r.slice(2),"hex")}static verify(e,r,n){const i=Ms.ethers.utils.computeAddress(e);return Ms.ethers.utils.verifyMessage(r,n)===i}}bh.default=DE;var yf={},UE=H&&H.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),LE=H&&H.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),FE=H&&H.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&UE(e,t,r);return LE(e,t),e},jE=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yf,"__esModule",{value:!0});const KE=FE(cx),qE=jE(wn),Up=ys;class $E{constructor(e){this.ownerLength=Up.SIG_CONFIG[2].pubLength,this.signatureLength=Up.SIG_CONFIG[2].sigLength,this.signatureType=2,this.provider=e,this._publicKey=this.provider.publicKey.toBuffer()}get publicKey(){return this._publicKey}async sign(e){if(!this.provider.signMessage)throw new Error("Selected Wallet does not support message signing");return await this.provider.signMessage(e)}static async verify(e,r,n){let i=e;return typeof e=="string"&&(i=qE.default.toBuffer(e)),KE.verify(Buffer.from(n),Buffer.from(r),Buffer.from(i))}}yf.default=$E;var mh={},HE=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mh,"__esModule",{value:!0});const zE=HE(ga);class GE extends zE.default{constructor(e){super(e.replace("ed25519:",""))}}mh.default=GE;var vh={},VE=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vh,"__esModule",{value:!0});const JE=VE(Ao);class WE extends JE.default{get publicKey(){return Buffer.from(this.pk)}get key(){return Buffer.from(this._key)}constructor(e,r){super(e.subarray(0,32),r)}}vh.default=WE;var wh={},YE=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wh,"__esModule",{value:!0});const XE=YE(yf);let QE=class extends XE.default{constructor(e){super(e),this.signatureType=4}async sign(e){return super.sign(Buffer.from(Buffer.from(e).toString("hex")))}static async verify(e,r,n){return super.verify(e,Buffer.from(Buffer.from(r).toString("hex")),n)}};wh.default=QE;var _h={},ZE=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_h,"__esModule",{value:!0});const e4=ZE(ga);class t4 extends e4.default{constructor(e){super(e),this.signatureType=4}async sign(e){return super.sign(Buffer.from(Buffer.from(e).toString("hex")))}static async verify(e,r,n){return super.verify(e,Buffer.from(Buffer.from(r).toString("hex")),n)}}_h.default=t4;(function(t){var e=H&&H.__createBinding||(Object.create?function(g,b,S,_){_===void 0&&(_=S),Object.defineProperty(g,_,{enumerable:!0,get:function(){return b[S]}})}:function(g,b,S,_){_===void 0&&(_=S),g[_]=b[S]}),r=H&&H.__exportStar||function(g,b){for(var S in g)S!=="default"&&!Object.prototype.hasOwnProperty.call(b,S)&&e(b,g,S)},n=H&&H.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(t,"__esModule",{value:!0}),t.HexSolanaSigner=t.HexInjectedSolanaSigner=t.AlgorandSigner=t.NearSigner=t.InjectedEthereumSigner=t.PolygonSigner=t.ArweaveSigner=t.InjectedSolanaSigner=void 0;const i=n(hh);t.ArweaveSigner=i.default,r(da,t);const s=n(xh);t.PolygonSigner=s.default,r(ga,t);const a=n(bh);t.InjectedEthereumSigner=a.default;var o=yf;Object.defineProperty(t,"InjectedSolanaSigner",{enumerable:!0,get:function(){return n(o).default}});var c=mh;Object.defineProperty(t,"NearSigner",{enumerable:!0,get:function(){return n(c).default}});var f=vh;Object.defineProperty(t,"AlgorandSigner",{enumerable:!0,get:function(){return n(f).default}});var u=wh;Object.defineProperty(t,"HexInjectedSolanaSigner",{enumerable:!0,get:function(){return n(u).default}});var d=_h;Object.defineProperty(t,"HexSolanaSigner",{enumerable:!0,get:function(){return n(d).default}})})(dh);var o1=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tf,"__esModule",{value:!0});tf.indexToType=void 0;const r4=o1(Ao),n4=o1(da),Lp=dh;tf.indexToType={1:Lp.ArweaveSigner,2:r4.default,3:n4.default,4:Lp.HexInjectedSolanaSigner};var c1={};(function(t){var e=H&&H.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s),Object.defineProperty(n,a,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),r=H&&H.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(gf,t)})(c1);(function(t){var e=H&&H.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s),Object.defineProperty(n,a,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),r=H&&H.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ef,t),r(tf,t),r(c1,t),r(dh,t)})(la);var Ml={},i4={get exports(){return Ml},set exports(t){Ml=t}},Dc={},s4={get exports(){return Dc},set exports(t){Dc=t}},f1=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},a4=f1,As=Object.prototype.toString;function Eh(t){return As.call(t)==="[object Array]"}function Ol(t){return typeof t>"u"}function o4(t){return t!==null&&!Ol(t)&&t.constructor!==null&&!Ol(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function c4(t){return As.call(t)==="[object ArrayBuffer]"}function f4(t){return typeof FormData<"u"&&t instanceof FormData}function u4(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function l4(t){return typeof t=="string"}function d4(t){return typeof t=="number"}function u1(t){return t!==null&&typeof t=="object"}function pc(t){if(As.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function h4(t){return As.call(t)==="[object Date]"}function p4(t){return As.call(t)==="[object File]"}function g4(t){return As.call(t)==="[object Blob]"}function l1(t){return As.call(t)==="[object Function]"}function y4(t){return u1(t)&&l1(t.pipe)}function x4(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function b4(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function m4(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Ah(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Eh(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Dl(){var t={};function e(i,s){pc(t[s])&&pc(i)?t[s]=Dl(t[s],i):pc(i)?t[s]=Dl({},i):Eh(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)Ah(arguments[r],e);return t}function v4(t,e,r){return Ah(e,function(i,s){r&&typeof i=="function"?t[s]=a4(i,r):t[s]=i}),t}function w4(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var xn={isArray:Eh,isArrayBuffer:c4,isBuffer:o4,isFormData:f4,isArrayBufferView:u4,isString:l4,isNumber:d4,isObject:u1,isPlainObject:pc,isUndefined:Ol,isDate:h4,isFile:p4,isBlob:g4,isFunction:l1,isStream:y4,isURLSearchParams:x4,isStandardBrowserEnv:m4,forEach:Ah,merge:Dl,extend:v4,trim:b4,stripBOM:w4},Os=xn;function Fp(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var d1=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Os.isURLSearchParams(r))i=r.toString();else{var s=[];Os.forEach(r,function(c,f){c===null||typeof c>"u"||(Os.isArray(c)?f=f+"[]":c=[c],Os.forEach(c,function(d){Os.isDate(d)?d=d.toISOString():Os.isObject(d)&&(d=JSON.stringify(d)),s.push(Fp(f)+"="+Fp(d))}))}),i=s.join("&")}if(i){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},_4=xn;function xf(){this.handlers=[]}xf.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};xf.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};xf.prototype.forEach=function(e){_4.forEach(this.handlers,function(n){n!==null&&e(n)})};var E4=xf,A4=xn,S4=function(e,r){A4.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},h1=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},mu,jp;function p1(){if(jp)return mu;jp=1;var t=h1;return mu=function(r,n,i,s,a){var o=new Error(r);return t(o,n,i,s,a)},mu}var vu,Kp;function T4(){if(Kp)return vu;Kp=1;var t=p1();return vu=function(r,n,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},vu}var wu,qp;function k4(){if(qp)return wu;qp=1;var t=xn;return wu=t.isStandardBrowserEnv()?function(){return{write:function(n,i,s,a,o,c){var f=[];f.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&f.push("expires="+new Date(s).toGMTString()),t.isString(a)&&f.push("path="+a),t.isString(o)&&f.push("domain="+o),c===!0&&f.push("secure"),document.cookie=f.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),wu}var _u,$p;function P4(){return $p||($p=1,_u=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),_u}var Eu,Hp;function C4(){return Hp||(Hp=1,Eu=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Eu}var Au,zp;function I4(){if(zp)return Au;zp=1;var t=P4(),e=C4();return Au=function(n,i){return n&&!t(i)?e(n,i):i},Au}var Su,Gp;function N4(){if(Gp)return Su;Gp=1;var t=xn,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Su=function(n){var i={},s,a,o;return n&&t.forEach(n.split(`
`),function(f){if(o=f.indexOf(":"),s=t.trim(f.substr(0,o)).toLowerCase(),a=t.trim(f.substr(o+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([a]):i[s]=i[s]?i[s]+", "+a:a}}),i},Su}var Tu,Vp;function R4(){if(Vp)return Tu;Vp=1;var t=xn;return Tu=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(a){var o=a;return r&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(o){var c=t.isString(o)?s(o):o;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),Tu}var ku,Jp;function Wp(){if(Jp)return ku;Jp=1;var t=xn,e=T4(),r=k4(),n=d1,i=I4(),s=N4(),a=R4(),o=p1();return ku=function(f){return new Promise(function(d,g){var b=f.data,S=f.headers,_=f.responseType;t.isFormData(b)&&delete S["Content-Type"];var y=new XMLHttpRequest;if(f.auth){var E=f.auth.username||"",A=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";S.Authorization="Basic "+btoa(E+":"+A)}var M=i(f.baseURL,f.url);y.open(f.method.toUpperCase(),n(M,f.params,f.paramsSerializer),!0),y.timeout=f.timeout;function B(){if(y){var L="getAllResponseHeaders"in y?s(y.getAllResponseHeaders()):null,z=!_||_==="text"||_==="json"?y.responseText:y.response,Y={data:z,status:y.status,statusText:y.statusText,headers:L,config:f,request:y};e(d,g,Y),y=null}}if("onloadend"in y?y.onloadend=B:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(B)},y.onabort=function(){y&&(g(o("Request aborted",f,"ECONNABORTED",y)),y=null)},y.onerror=function(){g(o("Network Error",f,null,y)),y=null},y.ontimeout=function(){var z="timeout of "+f.timeout+"ms exceeded";f.timeoutErrorMessage&&(z=f.timeoutErrorMessage),g(o(z,f,f.transitional&&f.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",y)),y=null},t.isStandardBrowserEnv()){var D=(f.withCredentials||a(M))&&f.xsrfCookieName?r.read(f.xsrfCookieName):void 0;D&&(S[f.xsrfHeaderName]=D)}"setRequestHeader"in y&&t.forEach(S,function(z,Y){typeof b>"u"&&Y.toLowerCase()==="content-type"?delete S[Y]:y.setRequestHeader(Y,z)}),t.isUndefined(f.withCredentials)||(y.withCredentials=!!f.withCredentials),_&&_!=="json"&&(y.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&y.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&y.upload&&y.upload.addEventListener("progress",f.onUploadProgress),f.cancelToken&&f.cancelToken.promise.then(function(z){y&&(y.abort(),g(z),y=null)}),b||(b=null),y.send(b)})},ku}var Er=xn,Yp=S4,B4=h1,M4={"Content-Type":"application/x-www-form-urlencoded"};function Xp(t,e){!Er.isUndefined(t)&&Er.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function O4(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=Wp()),t}function D4(t,e,r){if(Er.isString(t))try{return(e||JSON.parse)(t),Er.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var bf={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:O4(),transformRequest:[function(e,r){return Yp(r,"Accept"),Yp(r,"Content-Type"),Er.isFormData(e)||Er.isArrayBuffer(e)||Er.isBuffer(e)||Er.isStream(e)||Er.isFile(e)||Er.isBlob(e)?e:Er.isArrayBufferView(e)?e.buffer:Er.isURLSearchParams(e)?(Xp(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Er.isObject(e)||r&&r["Content-Type"]==="application/json"?(Xp(r,"application/json"),D4(e)):e}],transformResponse:[function(e){var r=this.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&Er.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(s)throw a.name==="SyntaxError"?B4(a,this,"E_JSON_PARSE"):a}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};bf.headers={common:{Accept:"application/json, text/plain, */*"}};Er.forEach(["delete","get","head"],function(e){bf.headers[e]={}});Er.forEach(["post","put","patch"],function(e){bf.headers[e]=Er.merge(M4)});var Sh=bf,U4=xn,L4=Sh,F4=function(e,r,n){var i=this||L4;return U4.forEach(n,function(a){e=a.call(i,e,r)}),e},Pu,Qp;function g1(){return Qp||(Qp=1,Pu=function(e){return!!(e&&e.__CANCEL__)}),Pu}var Zp=xn,Cu=F4,j4=g1(),K4=Sh;function Iu(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var q4=function(e){Iu(e),e.headers=e.headers||{},e.data=Cu.call(e,e.data,e.headers,e.transformRequest),e.headers=Zp.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Zp.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||K4.adapter;return r(e).then(function(i){return Iu(e),i.data=Cu.call(e,i.data,i.headers,e.transformResponse),i},function(i){return j4(i)||(Iu(e),i&&i.response&&(i.response.data=Cu.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Mr=xn,y1=function(e,r){r=r||{};var n={},i=["url","method","data"],s=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function c(g,b){return Mr.isPlainObject(g)&&Mr.isPlainObject(b)?Mr.merge(g,b):Mr.isPlainObject(b)?Mr.merge({},b):Mr.isArray(b)?b.slice():b}function f(g){Mr.isUndefined(r[g])?Mr.isUndefined(e[g])||(n[g]=c(void 0,e[g])):n[g]=c(e[g],r[g])}Mr.forEach(i,function(b){Mr.isUndefined(r[b])||(n[b]=c(void 0,r[b]))}),Mr.forEach(s,f),Mr.forEach(a,function(b){Mr.isUndefined(r[b])?Mr.isUndefined(e[b])||(n[b]=c(void 0,e[b])):n[b]=c(void 0,r[b])}),Mr.forEach(o,function(b){b in r?n[b]=c(e[b],r[b]):b in e&&(n[b]=c(void 0,e[b]))});var u=i.concat(s).concat(a).concat(o),d=Object.keys(e).concat(Object.keys(r)).filter(function(b){return u.indexOf(b)===-1});return Mr.forEach(d,f),n};const $4="axios",H4="0.21.4",z4="Promise based HTTP client for the browser and node.js",G4="index.js",V4={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},J4={type:"git",url:"https://github.com/axios/axios.git"},W4=["xhr","http","ajax","promise","node"],Y4="Matt Zabriskie",X4="MIT",Q4={url:"https://github.com/axios/axios/issues"},Z4="https://axios-http.com",eA={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},tA={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},rA="dist/axios.min.js",nA="dist/axios.min.js",iA="./index.d.ts",sA={"follow-redirects":"^1.14.0"},aA=[{path:"./dist/axios.min.js",threshold:"5kB"}],oA={name:$4,version:H4,description:z4,main:G4,scripts:V4,repository:J4,keywords:W4,author:Y4,license:X4,bugs:Q4,homepage:Z4,devDependencies:eA,browser:tA,jsdelivr:rA,unpkg:nA,typings:iA,dependencies:sA,bundlesize:aA};var x1=oA,Th={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Th[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var eg={},cA=x1.version.split(".");function b1(t,e){for(var r=e?e.split("."):cA,n=t.split("."),i=0;i<3;i++){if(r[i]>n[i])return!0;if(r[i]<n[i])return!1}return!1}Th.transitional=function(e,r,n){var i=r&&b1(r);function s(a,o){return"[Axios v"+x1.version+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,c){if(e===!1)throw new Error(s(o," has been removed in "+r));return i&&!eg[o]&&(eg[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,o,c):!0}};function fA(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],a=e[s];if(a){var o=t[s],c=o===void 0||a(o,s,t);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+s)}}var uA={isOlderVersion:b1,assertOptions:fA,validators:Th},m1=xn,lA=d1,tg=E4,rg=q4,mf=y1,v1=uA,Ds=v1.validators;function No(t){this.defaults=t,this.interceptors={request:new tg,response:new tg}}No.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=mf(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&v1.assertOptions(r,{silentJSONParsing:Ds.transitional(Ds.boolean,"1.0.0"),forcedJSONParsing:Ds.transitional(Ds.boolean,"1.0.0"),clarifyTimeoutError:Ds.transitional(Ds.boolean,"1.0.0")},!1);var n=[],i=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(e)===!1||(i=i&&g.synchronous,n.unshift(g.fulfilled,g.rejected))});var s=[];this.interceptors.response.forEach(function(g){s.push(g.fulfilled,g.rejected)});var a;if(!i){var o=[rg,void 0];for(Array.prototype.unshift.apply(o,n),o=o.concat(s),a=Promise.resolve(e);o.length;)a=a.then(o.shift(),o.shift());return a}for(var c=e;n.length;){var f=n.shift(),u=n.shift();try{c=f(c)}catch(d){u(d);break}}try{a=rg(c)}catch(d){return Promise.reject(d)}for(;s.length;)a=a.then(s.shift(),s.shift());return a};No.prototype.getUri=function(e){return e=mf(this.defaults,e),lA(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};m1.forEach(["delete","get","head","options"],function(e){No.prototype[e]=function(r,n){return this.request(mf(n||{},{method:e,url:r,data:(n||{}).data}))}});m1.forEach(["post","put","patch"],function(e){No.prototype[e]=function(r,n,i){return this.request(mf(i||{},{method:e,url:r,data:n}))}});var dA=No,Nu,ng;function w1(){if(ng)return Nu;ng=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Nu=t,Nu}var Ru,ig;function hA(){if(ig)return Ru;ig=1;var t=w1();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(a){n=a});var i=this;r(function(a){i.reason||(i.reason=new t(a),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.source=function(){var n,i=new e(function(a){n=a});return{token:i,cancel:n}},Ru=e,Ru}var Bu,sg;function pA(){return sg||(sg=1,Bu=function(e){return function(n){return e.apply(null,n)}}),Bu}var Mu,ag;function gA(){return ag||(ag=1,Mu=function(e){return typeof e=="object"&&e.isAxiosError===!0}),Mu}var og=xn,yA=f1,gc=dA,xA=y1,bA=Sh;function _1(t){var e=new gc(t),r=yA(gc.prototype.request,e);return og.extend(r,gc.prototype,e),og.extend(r,e),r}var Fn=_1(bA);Fn.Axios=gc;Fn.create=function(e){return _1(xA(Fn.defaults,e))};Fn.Cancel=w1();Fn.CancelToken=hA();Fn.isCancel=g1();Fn.all=function(e){return Promise.all(e)};Fn.spread=pA();Fn.isAxiosError=gA();s4.exports=Fn;Dc.default=Fn;(function(t){t.exports=Dc})(i4);var cg;function kh(){return cg||(cg=1,function(t){var e=H&&H.__createBinding||(Object.create?function(E,A,M,B){B===void 0&&(B=M),Object.defineProperty(E,B,{enumerable:!0,get:function(){return A[M]}})}:function(E,A,M,B){B===void 0&&(B=M),E[B]=A[M]}),r=H&&H.__setModuleDefault||(Object.create?function(E,A){Object.defineProperty(E,"default",{enumerable:!0,value:A})}:function(E,A){E.default=A}),n=H&&H.__importStar||function(E){if(E&&E.__esModule)return E;var A={};if(E!=null)for(var M in E)M!=="default"&&Object.prototype.hasOwnProperty.call(E,M)&&e(A,E,M);return r(A,E),A},i=H&&H.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(t,"__esModule",{value:!0}),t.MIN_BINARY_SIZE=void 0;const s=ur,a=pd,o=i(wn),c=zl,f=A1(),u=la,d=go,g=i(Ml),b=ys,S=n(Ki()),_=i(hs);t.MIN_BINARY_SIZE=80;class y{constructor(A){this.binary=A}static isDataItem(A){return A.binary!==void 0}get signatureType(){const A=s.byteArrayToLong(this.binary.subarray(0,2));switch(A){case 1:return b.SignatureConfig.ARWEAVE;case 2:return b.SignatureConfig.ED25519;case 3:return b.SignatureConfig.ETHEREUM;case 4:return b.SignatureConfig.SOLANA;default:throw new Error("Unknown signature type: "+A)}}async isValid(){return y.verify(this.binary)}get id(){return o.default.encode(this.rawId)}set id(A){this._id=o.default.toBuffer(A)}get rawId(){return S.createHash("sha256").update(this.rawSignature).digest()}set rawId(A){this._id=A}get rawSignature(){return this.binary.subarray(2,2+this.signatureLength)}get signature(){return o.default.encode(this.rawSignature)}get signatureLength(){return b.SIG_CONFIG[this.signatureType].sigLength}get rawOwner(){return this.binary.subarray(2+this.signatureLength,2+this.signatureLength+this.ownerLength)}get owner(){return o.default.encode(this.rawOwner)}get ownerLength(){return b.SIG_CONFIG[this.signatureType].pubLength}get rawTarget(){const A=this.getTargetStart();return this.binary[A]==1?this.binary.subarray(A+1,A+33):c.Buffer.alloc(0)}get target(){return o.default.encode(this.rawTarget)}get rawAnchor(){const A=this.getAnchorStart();return this.binary[A]==1?this.binary.subarray(A+1,A+33):c.Buffer.alloc(0)}get anchor(){return this.rawAnchor.toString()}get rawTags(){const A=this.getTagsStart(),M=s.byteArrayToLong(this.binary.subarray(A+8,A+16));return this.binary.subarray(A+16,A+16+M)}get tags(){const A=this.getTagsStart();if(s.byteArrayToLong(this.binary.subarray(A,A+8))==0)return[];const B=s.byteArrayToLong(this.binary.subarray(A+8,A+16));return a.tagsParser.fromBuffer(c.Buffer.from(this.binary.subarray(A+16,A+16+B)))}get tagsB64Url(){return this.tags.map(M=>({name:o.default.encode(M.name),value:o.default.encode(M.value)}))}getStartOfData(){const A=this.getTagsStart(),M=this.binary.subarray(A+8,A+16),B=s.byteArrayToLong(M);return A+16+B}get rawData(){const A=this.getTagsStart(),M=this.binary.subarray(A+8,A+16),B=s.byteArrayToLong(M),D=A+16+B;return this.binary.subarray(D,this.binary.length)}get data(){return o.default.encode(this.rawData)}getRaw(){return this.binary}async sign(A){return this._id=await f.sign(this,A),this.rawId}async setSignature(A){this.binary.set(A,2),this._id=c.Buffer.from(await _.default.crypto.hash(A))}isSigned(){var A,M;return((M=(A=this._id)===null||A===void 0?void 0:A.length)!==null&&M!==void 0?M:0)>0}toJSON(){return{signature:this.signature,owner:this.owner,target:this.target,tags:this.tags.map(A=>({name:o.default.encode(A.name),value:o.default.encode(A.value)})),data:this.data}}async sendToBundler(A){const M={"Content-Type":"application/octet-stream"};if(!this.isSigned())throw new Error("You must sign before sending to bundler");const B=await g.default.post(`${A}/tx`,this.getRaw(),{headers:M,timeout:1e5,maxBodyLength:1/0,validateStatus:D=>D>200&&D<300||D!==402});if(B.status===402)throw new Error("Not enough funds to send data");return B}static async verify(A){if(A.byteLength<t.MIN_BINARY_SIZE)return!1;const M=new y(A),B=M.signatureType,D=M.getTagsStart(),L=s.byteArrayToLong(A.subarray(D,D+8)),z=A.subarray(D+8,D+16),Y=s.byteArrayToLong(z);if(Y>4096)return!1;if(L>0)try{if(a.tagsParser.fromBuffer(c.Buffer.from(A.subarray(D+16,D+16+Y))).length!==L)return!1}catch{return!1}const ie=u.indexToType[B],oe=await d.getSignatureData(M);return await ie.verify(M.rawOwner,oe,M.rawSignature)}async getSignatureData(){return d.getSignatureData(this)}getTagsStart(){const A=this.getTargetStart(),M=this.binary[A]==1;let B=A+(M?33:1);const D=this.binary[B]==1;return B+=D?33:1,B}getTargetStart(){return 2+this.signatureLength+this.ownerLength}getAnchorStart(){let A=this.getTargetStart()+1;const M=this.binary[this.getTargetStart()]==1;return A+=M?32:0,A}}t.default=y}(Qf)),Qf}var fg;function E1(){if(fg)return $o;fg=1;var t=H&&H.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty($o,"__esModule",{value:!0});const e=t(wn),r=ur,n=t(kh()),i=Ki(),s=32;let a=class{constructor(c){this.binary=c,this.length=this.getDataItemCount(),this.items=this.getItems()}getRaw(){return this.binary}get(c){if(typeof c=="number"){if(c>=this.length)throw new RangeError("Index out of range");return this.getByIndex(c)}else return this.getById(c)}getSizes(){const c=[];for(let f=s;f<s+64*this.length;f+=64)c.push(r.byteArrayToLong(this.binary.subarray(f,f+32)));return c}getIds(){const c=[];for(let f=s;f<s+64*this.length;f+=64)c.push(e.default.encode(this.binary.subarray(f+32,f+64)));return c}getIdBy(c){if(c>this.length-1)throw new RangeError("Index of bundle out of range");const f=64+64*c;return e.default.encode(this.binary.subarray(f,f+32))}async toTransaction(c,f,u){const d=await f.createTransaction({data:this.binary,...c},u);return d.addTag("Bundle-Format","binary"),d.addTag("Bundle-Version","2.0.0"),d}async verify(){for(const c of this.items){const f=await c.isValid(),u=e.default(i.createHash("sha256").update(c.rawSignature).digest());if(!(f&&c.id===u))return!1}return!0}getOffset(c){let f=0;for(let u=s;u<s+64*this.length;u+=64){const d=r.byteArrayToLong(this.binary.subarray(u,u+32));f+=d;const g=this.binary.subarray(u+32,u+64);if(r.arraybufferEqual(g,c))return{startOffset:f,size:d}}return{startOffset:-1,size:-1}}getByIndex(c){let f=0;const u=32+64*c,d=r.byteArrayToLong(this.binary.subarray(u,u+32));let g=0;for(let E=s;E<s+64*this.length&&g!=c;E+=64){const A=r.byteArrayToLong(this.binary.subarray(E,E+32));f+=A,g++}const S=this.getBundleStart()+f,_=this.binary.subarray(S,S+d+200),y=new n.default(_);return y.rawId=this.binary.slice(32+64*c,64+64*c),y}getById(c){const f=e.default.toBuffer(c),u=this.getOffset(f);if(u.startOffset===-1)throw new Error("Transaction not found");const g=this.getBundleStart()+u.startOffset;return new n.default(this.binary.subarray(g,g+u.size))}getDataItemCount(){return r.byteArrayToLong(this.binary.subarray(0,32))}getBundleStart(){return 32+64*this.length}getItems(){const c=new Array(this.length);let f=0;const u=this.getBundleStart();let d=0;for(let g=s;g<s+64*this.length;g+=64){const b=r.byteArrayToLong(this.binary.subarray(g,g+32)),S=this.binary.subarray(g+32,g+64),_=u+f,y=this.binary.subarray(_,_+b);f+=b;const E=new n.default(y);E.rawId=S,c[d]=E,d++}return c}};return $o.default=a,$o}var ug;function A1(){if(ug)return In;ug=1;var t=H&&H.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(In,"__esModule",{value:!0}),In.sign=In.getSignatureAndId=In.bundleAndSignData=In.unbundleData=void 0;const e=go,r=ur,n=t(hs),i=t(E1());function s(f){return new i.default(f)}In.unbundleData=s;async function a(f,u){const d=new Uint8Array(64*f.length),g=await Promise.all(f.map(async(S,_)=>{const y=S.isSigned()?S.rawId:await c(S,u),E=new Uint8Array(64);return E.set(r.longTo32ByteArray(S.getRaw().byteLength),0),E.set(y,32),d.set(E,64*_),S.getRaw()})).then(S=>Buffer.concat(S)),b=Buffer.concat([r.longTo32ByteArray(f.length),d,g]);return new i.default(b)}In.bundleAndSignData=a;async function o(f,u){const d=await e.getSignatureData(f),g=await u.sign(d),b=await n.default.crypto.hash(g);return{signature:Buffer.from(g),id:Buffer.from(b)}}In.getSignatureAndId=o;async function c(f,u){const{signature:d,id:g}=await o(f,u);return f.getRaw().set(d,2),g}return In.sign=c,In}var vf={},Ph=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vf,"__esModule",{value:!0});vf.createData=void 0;const Ou=Ph(Y1()),mA=Ph(wn),Du=ur,vA=Ph(kh()),wA=pd;function _A(t,e,r){var n,i,s,a,o,c,f;const u=e.publicKey,d=r?.target?mA.default.toBuffer(r.target):null,g=1+((n=d?.byteLength)!==null&&n!==void 0?n:0),b=r?.anchor?Buffer.from(r.anchor):null,S=1+((i=b?.byteLength)!==null&&i!==void 0?i:0),_=((a=(s=r?.tags)===null||s===void 0?void 0:s.length)!==null&&a!==void 0?a:0)>0?wA.serializeTags(r.tags):null,y=16+(_?_.byteLength:0),E=Buffer.from(t),A=E.byteLength,M=2+e.signatureLength+e.ownerLength+g+S+y+A,B=Buffer.alloc(M);B.set(Du.shortTo2ByteArray(e.signatureType),0),B.set(new Uint8Array(e.signatureLength).fill(0),2),Ou.default(u.byteLength==e.ownerLength,new Error(`Owner must be ${e.ownerLength} bytes, but was incorrectly ${u.byteLength}`)),B.set(u,2+e.signatureLength);const D=2+e.signatureLength+e.ownerLength;B[D]=d?1:0,d&&(Ou.default(d.byteLength==32,new Error("Target must be 32 bytes but was incorrectly ${_target.byteLength}")),B.set(d,D+1));const L=D+g;let z=L+1;B[L]=b?1:0,b&&(z+=b.byteLength,Ou.default(b.byteLength==32,new Error("Anchor must be 32 bytes")),B.set(b,L+1)),B.set(Du.longTo8ByteArray((c=(o=r?.tags)===null||o===void 0?void 0:o.length)!==null&&c!==void 0?c:0),z);const Y=Du.longTo8ByteArray((f=_?.byteLength)!==null&&f!==void 0?f:0);B.set(Y,z+8),_&&B.set(_,z+16);const ie=z+y;return B.set(E,ie),new vA.default(B)}vf.createData=_A;(function(t){var e=H&&H.__createBinding||(Object.create?function(S,_,y,E){E===void 0&&(E=y),Object.defineProperty(S,E,{enumerable:!0,get:function(){return _[y]}})}:function(S,_,y,E){E===void 0&&(E=y),S[E]=_[y]}),r=H&&H.__setModuleDefault||(Object.create?function(S,_){Object.defineProperty(S,"default",{enumerable:!0,value:_})}:function(S,_){S.default=_}),n=H&&H.__importStar||function(S){if(S&&S.__esModule)return S;var _={};if(S!=null)for(var y in S)y!=="default"&&Object.prototype.hasOwnProperty.call(S,y)&&e(_,S,y);return r(_,S),_},i=H&&H.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(t,"__esModule",{value:!0}),t.signers=t.deepHash=t.unbundleData=t.bundleAndSignData=t.createData=t.DataItem=t.Bundle=t.MIN_BINARY_SIZE=void 0;const s=A1();Object.defineProperty(t,"bundleAndSignData",{enumerable:!0,get:function(){return s.bundleAndSignData}}),Object.defineProperty(t,"unbundleData",{enumerable:!0,get:function(){return s.unbundleData}});const a=i(E1());t.Bundle=a.default;const o=n(kh());t.DataItem=o.default,Object.defineProperty(t,"MIN_BINARY_SIZE",{enumerable:!0,get:function(){return o.MIN_BINARY_SIZE}});const c=gi;Object.defineProperty(t,"deepHash",{enumerable:!0,get:function(){return c.deepHash}});const f=vf;Object.defineProperty(t,"createData",{enumerable:!0,get:function(){return f.createData}});const u=la,d=i(ga),g=i(da),b={ArweaveSigner:u.ArweaveSigner,SolanaSigner:d.default,EthereumSigner:g.default};t.signers=b})(po);var Ss={};(function(t){var e=H&&H.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=void 0;const r=e(qi);r.default.set({DECIMAL_PLACES:50});const n=s=>new Promise(a=>setTimeout(a,s));t.sleep=n;class i{constructor(a,o,c){this.api=a,this.currency=o,this.currencyConfig=c}static checkAndThrow(a,o,c){if(a?.status&&!(c??[]).includes(a.status)&&a.status!=200)throw new Error(`HTTP Error: ${o}: ${a.status} ${typeof a.data!="string"?a.statusText:a.data}`)}async getNonce(){const a=await this.api.get(`/account/withdrawals/${this.currency}?address=${this.currencyConfig.address}`);return i.checkAndThrow(a,"Getting withdrawal nonce"),a.data}async getBalance(a){const o=await this.api.get(`/account/balance/${this.currency}?address=${a}`);return i.checkAndThrow(o,"Getting balance"),new r.default(o.data.balance)}async getBundlerAddress(a){const o=await this.api.get("/info");i.checkAndThrow(o,"Getting Bundler address");const c=o.data.addresses[a];if(!c)throw new Error(`Specified bundler does not support currency ${a}`);return c}async getPrice(a,o){const c=await this.api.get(`/price/${a}/${o}`);return i.checkAndThrow(c,"Getting storage cost"),new r.default(c.data)}async confirmationPoll(a){if(!this.currencyConfig.isSlow){for(let o=0;o<30;o++)if(await(0,t.sleep)(1e3),await this.currencyConfig.getTx(a).then(c=>c?.confirmed).catch(c=>!1))return;console.warn(`Tx ${a} didn't finalize after 30 seconds`)}}unitConverter(a){return new r.default(a).dividedBy(this.currencyConfig.base[1])}}t.default=i})(Ss);var Ch=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hc,"__esModule",{value:!0});Hc.withdrawBalance=void 0;const lg=po,Us=Vt,EA=Ch(Ss),AA=Ch(qi),Ls=Ch(wn);async function SA(t,e,r){const n=t.currencyConfig,s={publicKey:await n.getPublicKey(),currency:t.currency,amount:new AA.default(r).toString(),nonce:await t.getNonce(),signature:void 0,sigType:n.getSigner().signatureType},a=await(0,lg.deepHash)([(0,Us.stringToBuffer)(s.currency),(0,Us.stringToBuffer)(s.amount.toString()),(0,Us.stringToBuffer)(s.nonce.toString())]);Buffer.isBuffer(s.publicKey)||(s.publicKey=Buffer.from(s.publicKey)),s.signature=await n.sign(a);const o=await n.verify(s.publicKey,a,s.signature);s.publicKey=Ls.default.encode(s.publicKey),s.signature=Ls.default.encode(s.signature);const c=Ls.default.toBuffer(s.publicKey),f=Ls.default.toBuffer(s.signature),u=await(0,lg.deepHash)([(0,Us.stringToBuffer)(s.currency),(0,Us.stringToBuffer)(s.amount.toString()),(0,Us.stringToBuffer)(s.nonce.toString())]),d=await n.verify(c,u,f),g=n.ownerToAddress(n.name=="arweave"?Ls.default.decode(s.publicKey):Ls.default.toBuffer(s.publicKey))===n.address;if(!(o||d||g))throw new Error(`Internal withdrawal validation failed - please report this!
Debug Info:${JSON.stringify(s)}`);const b=await e.post("/account/withdraw",s);return EA.default.checkAndThrow(b,"Withdrawing balance"),b}Hc.withdrawBalance=SA;var Ih={},TA=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ih,"__esModule",{value:!0});const dg=po,kA=TA(Ki());class PA extends dg.DataItem{constructor(e,r,n){var i;super((0,dg.createData)(e,r.currencyConfig.getSigner(),{...n,anchor:(i=n?.anchor)!==null&&i!==void 0?i:kA.default.randomBytes(32).toString("base64").slice(0,32)}).getRaw()),this.bundlr=r,this.signer=r.currencyConfig.getSigner()}sign(){return super.sign(this.signer)}get size(){return this.getRaw().length}async upload(){return this.bundlr.uploader.transactionUploader(this)}}Ih.default=PA;var CA=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nd,"__esModule",{value:!0});const IA=Hc,NA=CA(Ih);class RA{constructor(){}get signer(){return this.currencyConfig.getSigner()}async withdrawBalance(e){return await(0,IA.withdrawBalance)(this.utils,this.api,e)}async getLoadedBalance(){return this.utils.getBalance(this.address)}async getBalance(e){return this.utils.getBalance(e)}async fund(e,r){return this.funder.fund(e,r)}async getPrice(e){return this.utils.getPrice(this.currency,e)}createTransaction(e,r){return new NA.default(e,this,r)}getSigner(){return this.currencyConfig.getSigner()}}nd.default=RA;var Nh={},Ul={},BA={get exports(){return Ul},set exports(t){Ul=t}},S1={};function Sn(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var MA=Sn;Sn.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};Sn.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};Sn.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0};Sn.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};Sn.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};Sn.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};Sn.prototype.start=Sn.prototype.try;Sn.prototype.errors=function(){return this._errors};Sn.prototype.attempts=function(){return this._attempts};Sn.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],s=i.message,a=(t[s]||0)+1;t[s]=a,a>=r&&(e=i,r=a)}return e};(function(t){var e=MA;t.operation=function(r){var n=t.timeouts(r);return new e(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},t.timeouts=function(r){if(r instanceof Array)return[].concat(r);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in r)n[i]=r[i];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],a=0;a<n.retries;a++)s.push(this.createTimeout(a,n));return r&&r.forever&&!s.length&&s.push(this.createTimeout(a,n)),s.sort(function(o,c){return o-c}),s},t.createTimeout=function(r,n){var i=n.randomize?Math.random()+1:1,s=Math.round(i*Math.max(n.minTimeout,1)*Math.pow(n.factor,r));return s=Math.min(s,n.maxTimeout),s},t.wrap=function(r,n,i){if(n instanceof Array&&(i=n,n=null),!i){i=[];for(var s in r)typeof r[s]=="function"&&i.push(s)}for(var a=0;a<i.length;a++){var o=i[a],c=r[o];r[o]=function(u){var d=t.operation(n),g=Array.prototype.slice.call(arguments,1),b=g.pop();g.push(function(S){d.retry(S)||(S&&(arguments[0]=d.mainError()),b.apply(this,arguments))}),d.attempt(function(){u.apply(r,g)})}.bind(r,c),r[o].options=n}}})(S1);(function(t){t.exports=S1})(BA);var OA=Ul;function DA(t,e){function r(n,i){var s=e||{},a;"randomize"in s||(s.randomize=!0),a=OA.operation(s);function o(u){i(u||new Error("Aborted"))}function c(u,d){if(u.bail){o(u);return}a.retry(u)?s.onRetry&&s.onRetry(u,d):i(a.mainError())}function f(u){var d;try{d=t(o,u)}catch(g){c(g,u);return}Promise.resolve(d).then(n).catch(function(b){c(b,u)})}a.attempt(f)}return new Promise(r)}var wf=DA,Rh=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nh,"__esModule",{value:!0});const UA=Rh(wf),LA=Rh(qi),hg=Rh(Ss);class FA{constructor(e){this.utils=e}async fund(e,r=1){const n=new LA.default(e);if(!n.isInteger())throw new Error("must use an integer for funding amount");const i=this.utils.currencyConfig,s=await this.utils.getBundlerAddress(this.utils.currency);let a="0";i.needsFee&&(a=(await i.getFee(i.base[0]==="winston"?0:n,s)).multipliedBy(r).toFixed(0).toString());const o=await i.createTx(n,s,a);let c;try{c=await i.sendTx(o.tx)}catch(u){throw u}if(o.txId||(o.txId=c),hg.default.checkAndThrow(c,`Sending transaction to the ${this.utils.currency} network`),await this.utils.confirmationPoll(o.txId),!await(0,UA.default)(async u=>{const d=await this.utils.api.post(`/account/balance/${this.utils.currency}`,{tx_id:o.txId});return d.status==400&&u(new Error(`failed to post funding tx - ${o.txId} (keep this id!) - ${d.data}`)),hg.default.checkAndThrow(d,`Posting transaction ${o.txId} information to the bundler`,[202]),d},{retries:5,maxTimeout:1e3,minTimeout:100,randomize:!0}))throw new Error(`failed to post funding tx - ${o.txId} - keep this id!`);return{reward:a,target:s,quantity:n.toString(),id:o.txId}}}Nh.default=FA;var Ro={},T1={},Pa={},Ca={},Bo={};Object.defineProperty(Bo,"__esModule",{value:!0});Bo.PromisePoolError=void 0;class jA extends Error{constructor(e,r){super(),this.raw=e,this.item=r,this.name=this.constructor.name,this.message=this.messageFrom(e),Error.captureStackTrace(this,this.constructor)}static createFrom(e,r){return new this(e,r)}messageFrom(e){return e instanceof Error||typeof e=="object"?e.message:typeof e=="string"||typeof e=="number"?e.toString():""}}Bo.PromisePoolError=jA;var Mo={};Object.defineProperty(Mo,"__esModule",{value:!0});Mo.StopThePromisePoolError=void 0;class KA extends Error{}Mo.StopThePromisePoolError=KA;var Oo={};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.ValidationError=void 0;class qA extends Error{constructor(e){super(e),Error.captureStackTrace(this,this.constructor)}static createFrom(e){return new this(e)}}Oo.ValidationError=qA;var pg;function $A(){if(pg)return Ca;pg=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.PromisePoolExecutor=void 0;const t=Ll(),e=Bo,r=Mo,n=Oo;class i{constructor(){this.meta={tasks:[],items:[],errors:[],results:[],stopped:!1,concurrency:10,shouldResultsCorrespond:!1,processedItems:[],taskTimeout:0},this.handler=()=>{},this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[]}useConcurrency(a){if(!this.isValidConcurrency(a))throw n.ValidationError.createFrom(`"concurrency" must be a number, 1 or up. Received "${a}" (${typeof a})`);return this.meta.concurrency=a,this}isValidConcurrency(a){return typeof a=="number"&&a>=1}withTaskTimeout(a){return this.meta.taskTimeout=a,this}concurrency(){return this.meta.concurrency}useCorrespondingResults(a){return this.meta.shouldResultsCorrespond=a,this}shouldUseCorrespondingResults(){return this.meta.shouldResultsCorrespond}taskTimeout(){return this.meta.taskTimeout}for(a){return this.meta.items=a,this}items(){return this.meta.items}itemsCount(){return this.items().length}tasks(){return this.meta.tasks}activeTaskCount(){return this.activeTasksCount()}activeTasksCount(){return this.tasks().length}processedItems(){return this.meta.processedItems}processedCount(){return this.processedItems().length}processedPercentage(){return this.processedCount()/this.itemsCount()*100}results(){return this.meta.results}errors(){return this.meta.errors}withHandler(a){return this.handler=a,this}hasErrorHandler(){return!!this.errorHandler}handleError(a){return this.errorHandler=a,this}onTaskStarted(a){return this.onTaskStartedHandlers=a,this}onTaskFinished(a){return this.onTaskFinishedHandlers=a,this}hasReachedConcurrencyLimit(){return this.activeTasksCount()>=this.concurrency()}stop(){throw this.markAsStopped(),new r.StopThePromisePoolError}markAsStopped(){return this.meta.stopped=!0,this}isStopped(){return this.meta.stopped}async start(){return await this.validateInputs().prepareResultsArray().process()}validateInputs(){if(typeof this.handler!="function")throw n.ValidationError.createFrom("The first parameter for the .process(fn) method must be a function");const a=this.taskTimeout();if(!(a==null||typeof a=="number"&&a>=0))throw n.ValidationError.createFrom(`"timeout" must be undefined or a number. A number must be 0 or up. Received "${String(a)}" (${typeof a})`);if(!Array.isArray(this.items()))throw n.ValidationError.createFrom(`"items" must be an array. Received "${typeof this.items()}"`);if(this.errorHandler&&typeof this.errorHandler!="function")throw n.ValidationError.createFrom(`The error handler must be a function. Received "${typeof this.errorHandler}"`);return this.onTaskStartedHandlers.forEach(o=>{if(o&&typeof o!="function")throw n.ValidationError.createFrom(`The onTaskStarted handler must be a function. Received "${typeof o}"`)}),this.onTaskFinishedHandlers.forEach(o=>{if(o&&typeof o!="function")throw n.ValidationError.createFrom(`The error handler must be a function. Received "${typeof o}"`)}),this}prepareResultsArray(){return this.shouldUseCorrespondingResults()&&(this.meta.results=Array(this.items().length).fill(t.PromisePool.notRun)),this}async process(){for(const[a,o]of this.items().entries()){if(this.isStopped())break;await this.waitForProcessingSlot(),this.startProcessing(o,a)}return await this.drained()}async waitForProcessingSlot(){for(;this.hasReachedConcurrencyLimit();)await this.waitForActiveTaskToFinish()}async waitForActiveTaskToFinish(){await Promise.race(this.tasks())}startProcessing(a,o){const c=this.createTaskFor(a,o).then(f=>{this.save(f,o).removeActive(c)}).catch(async f=>{await this.handleErrorFor(f,a,o),this.removeActive(c)}).finally(()=>{this.processedItems().push(a),this.runOnTaskFinishedHandlers(a)});this.tasks().push(c),this.runOnTaskStartedHandlers(a)}async createTaskFor(a,o){return this.taskTimeout()===void 0?this.handler(a,o,this):Promise.race([this.handler(a,o,this),this.createTaskTimeout(a)])}async createTaskTimeout(a){return new Promise((o,c)=>{setTimeout(()=>{c(new e.PromisePoolError(`Promise in pool timed out after ${this.taskTimeout()}ms`,a))},this.taskTimeout())})}save(a,o){return this.shouldUseCorrespondingResults()?this.results()[o]=a:this.results().push(a),this}removeActive(a){return this.tasks().splice(this.tasks().indexOf(a),1),this}async handleErrorFor(a,o,c){if(this.shouldUseCorrespondingResults()&&(this.results()[c]=t.PromisePool.failed),!this.isStoppingThePoolError(a)){if(this.isValidationError(a))throw this.markAsStopped(),a;this.hasErrorHandler()?await this.runErrorHandlerFor(a,o):this.saveErrorFor(a,o)}}isStoppingThePoolError(a){return a instanceof r.StopThePromisePoolError}isValidationError(a){return a instanceof n.ValidationError}async runErrorHandlerFor(a,o){var c;try{await((c=this.errorHandler)===null||c===void 0?void 0:c.call(this,a,o,this))}catch(f){this.rethrowIfNotStoppingThePool(f)}}runOnTaskStartedHandlers(a){this.onTaskStartedHandlers.forEach(o=>{o(a,this)})}runOnTaskFinishedHandlers(a){this.onTaskFinishedHandlers.forEach(o=>{o(a,this)})}rethrowIfNotStoppingThePool(a){if(!this.isStoppingThePoolError(a))throw a}saveErrorFor(a,o){this.errors().push(e.PromisePoolError.createFrom(a,o))}async drained(){return await this.drainActiveTasks(),{errors:this.errors(),results:this.results()}}async drainActiveTasks(){await Promise.all(this.tasks())}}return Ca.PromisePoolExecutor=i,Ca}var gg;function Ll(){if(gg)return Pa;gg=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.PromisePool=void 0;const t=$A();class e{constructor(n){this.timeout=void 0,this.concurrency=10,this.shouldResultsCorrespond=!1,this.items=n??[],this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[]}withConcurrency(n){return this.concurrency=n,this}static withConcurrency(n){return new this().withConcurrency(n)}withTaskTimeout(n){return this.timeout=n,this}static withTaskTimeout(n){return new this().withTaskTimeout(n)}for(n){return typeof this.timeout=="number"?new e(n).withConcurrency(this.concurrency).withTaskTimeout(this.timeout):new e(n).withConcurrency(this.concurrency)}static for(n){return new this().for(n)}handleError(n){return this.errorHandler=n,this}onTaskStarted(n){return this.onTaskStartedHandlers.push(n),this}onTaskFinished(n){return this.onTaskFinishedHandlers.push(n),this}useCorrespondingResults(){return this.shouldResultsCorrespond=!0,this}async process(n){return new t.PromisePoolExecutor().useConcurrency(this.concurrency).useCorrespondingResults(this.shouldResultsCorrespond).withTaskTimeout(this.timeout).withHandler(n).handleError(this.errorHandler).onTaskStarted(this.onTaskStartedHandlers).onTaskFinished(this.onTaskFinishedHandlers).for(this.items).start()}}return Pa.PromisePool=e,e.notRun=Symbol("notRun"),e.failed=Symbol("failed"),Pa}var k1={};Object.defineProperty(k1,"__esModule",{value:!0});var P1={};Object.defineProperty(P1,"__esModule",{value:!0});(function(t){var e=H&&H.__createBinding||(Object.create?function(i,s,a,o){o===void 0&&(o=a);var c=Object.getOwnPropertyDescriptor(s,a);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(i,o,c)}:function(i,s,a,o){o===void 0&&(o=a),i[o]=s[a]}),r=H&&H.__exportStar||function(i,s){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,i,a)};Object.defineProperty(t,"__esModule",{value:!0});const n=Ll();t.default=n.PromisePool,r(k1,t),r(Ll(),t),r(Bo,t),r(P1,t),r(Mo,t),r(Oo,t)})(T1);var _f={},C1={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.STATES=void 0;const e=Symbol("not readable"),r=Symbol("readable"),n=Symbol("ended"),i=Symbol("errored");t.STATES={notReadable:e,readable:r,ended:n,errored:i};class s{constructor(o,{size:c}={}){this._state=t.STATES.notReadable,this._rejections=new Set,this._stream=o,this._size=c;const f=["_handleStreamEnd","_handleStreamError"];for(const u of f)Object.defineProperty(this,u,{configurable:!0,writable:!0,value:this[u].bind(this)});o.once("error",this._handleStreamError),o.once("end",this._handleStreamEnd),o.on("readable",()=>{this._state=t.STATES.readable})}get closed(){return this._state===t.STATES.ended}[Symbol.asyncIterator](){return this}async next(){switch(this._state){case t.STATES.notReadable:{let o,c;try{o=this._untilReadable(),c=this._untilEnd(),await Promise.race([o.promise,c.promise])}finally{o?.close(),c?.close()}return this.next()}case t.STATES.ended:return this.close(),{done:!0,value:void 0};case t.STATES.errored:throw this.close(),this._error;case t.STATES.readable:{const o=this._size?this._stream.read(this._size):this._stream.read();return o!==null?{done:!1,value:o}:(this._state=t.STATES.notReadable,await new Promise(c=>setTimeout(f=>f(!0),0,c)),this.next())}}}_untilReadable(){let o;const c=new Promise((u,d)=>{o=()=>{this._state=t.STATES.readable,this._rejections.delete(d),u()},this._state,t.STATES.readable,this._stream.once("readable",o),this._rejections.add(d)});return{close:()=>{o!=null&&this._stream.removeListener("readable",o)},promise:c}}_untilEnd(){let o;const c=new Promise((u,d)=>{o=()=>{this._state=t.STATES.ended,this._rejections.delete(d),u()},this._stream.once("end",o),this._rejections.add(d)});return{close:()=>{o!=null&&this._stream.removeListener("end",o)},promise:c}}return(){return this._state=t.STATES.ended,this.next()}throw(o){return this._error=o,this._state=t.STATES.errored,this.next()}close(o){this._stream.removeListener("end",this._handleStreamEnd),this._stream.removeListener("error",this._handleStreamError),this._state=t.STATES.ended,this._stream.destroy(o)}_handleStreamError(o){this._error=o,this._state=t.STATES.errored;for(const c of this._rejections)c(o)}_handleStreamEnd(){this._state=t.STATES.ended}get state(){return this._state}}t.default=s})(C1);var Ef=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_f,"__esModule",{value:!0});_f.ChunkingUploader=void 0;const Uu=po,yg=Fc,HA=Xg,Lu=Ef(Ss),zA=Ef(Ki()),Fu=Rt,GA=Ef(wf),VA=Ef(C1);class JA extends HA.EventEmitter{constructor(e,r){super({captureRejections:!0}),this.paused=!1,this.isResume=!1,this.currencyConfig=e,this.api=r,this.currency=this.currencyConfig.name,this.chunkSize=25e6,this.batchSize=5,this.uploadID=""}setResumeData(e){return e&&(this.uploadID=e,this.isResume=!0),this}getResumeData(){return this.uploadID}setChunkSize(e){if(e<1)throw new Error("Invalid chunk size (must be >=1)");return this.chunkSize=e,this}setBatchSize(e){if(e<1)throw new Error("Invalid batch size (must be >=1)");return this.batchSize=e,this}pause(){this.emit("pause"),this.paused=!0}resume(){this.paused=!1,this.emit("resume")}async uploadTransaction(e){return Uu.DataItem.isDataItem(e)?this.runUpload(e.getRaw()):this.runUpload(e)}async uploadData(e,r){return this.runUpload(e,{...r})}async runUpload(e,r){var n,i,s;let a=this.uploadID;const o=r===void 0,c={"x-chunking-version":"2"};let f;if(!a)f=await this.api.get(`/chunks/${this.currency}/-1/-1`,{headers:c}),Lu.default.checkAndThrow(f,"Getting upload token"),this.uploadID=a=f.data.id;else{if(f=await this.api.get(`/chunks/${this.currency}/${a}/-1`,{headers:c}),f.status===404)throw new Error("Upload ID not found - your upload has probably expired.");if(Lu.default.checkAndThrow(f,"Getting upload info"),this.chunkSize!=+f.data.size)throw new Error(`Chunk size not equal to that of a previous upload (${+f.data.size}).`)}const{max:u,min:d}=f.data;if(this.chunkSize<+d||this.chunkSize>+u)throw new Error(`Chunk size out of allowed range: ${d} - ${u}`);let g=0;const b=(P,l,m)=>new Promise(T=>{(0,GA.default)(async()=>{await this.api.post(`/chunks/${this.currency}/${a}/${l}`,P,{headers:{"Content-Type":"application/octet-stream",...c},maxBodyLength:1/0,maxContentLength:1/0}).then(N=>{if(N?.status>=300){const O={res:N,id:m,offset:l,size:P.length};throw this.emit("chunkError",O),O}this.emit("chunkUpload",{id:m,offset:l,size:P.length,totalUploaded:g+=P.length}),T({o:l,d:N})})})}),S=(n=f.data.chunks)!==null&&n!==void 0?n:[],_=new yg.PassThrough;let y=Buffer.alloc(0),E=!1,A=!0;_.on("end",()=>E=!0),_.on("error",P=>{throw new Error(`Error processing readable: ${P}`)});const M=async P=>{for(;!E;){if(y.length>=P)return l=Buffer.from(y.slice(0,P)),y=y.slice(P),l;var l=_.read(P);if(l===null){await new Promise(m=>setTimeout(T=>T(!0),0,m));continue}if(l.length===P)return l;y=Buffer.concat([y,l])}for(;y.length>=P;)return l=Buffer.from(y.slice(0,P)),y=y.slice(P),l;return A=!1,y};let B;o||(B=(0,Uu.createData)("",this.currencyConfig.getSigner(),{...r,anchor:(i=r?.anchor)!==null&&i!==void 0?i:zA.default.randomBytes(32).toString("base64").slice(0,32)}),_.write(B.getRaw()),g-=B.getRaw().length),Buffer.isBuffer(e)?(_.write(e),_.end()):e.pipe(_);let D=0,L=[],z=0,Y,ie,oe;if(!o){ie=new yg.PassThrough;const P=B.getRaw().length;Y=await M(this.chunkSize),z++,D+=Y.length,ie.write(Y.slice(P));const l=[(0,Fu.stringToBuffer)("dataitem"),(0,Fu.stringToBuffer)("1"),(0,Fu.stringToBuffer)(B.signatureType.toString()),B.rawOwner,B.rawTarget,B.rawAnchor,B.rawTags,new VA.default(ie)];oe=(0,Uu.deepHash)(l)}let ge=S.pop();for(;A;){if(this.paused&&await new Promise(l=>this.on("resume",()=>l(void 0))),ge&&+ge[0]-D<=this.chunkSize){const m=ge[1],T=await M(m);o||ie.write(T),D+=m,ge=S.pop(),z++,g+=m;continue}const P=await M(this.chunkSize);o||ie.write(P),L.length==this.batchSize&&(await Promise.all(L),L=[]),L.push(b(P,D,++z)),D+=P.length}if(ie&&ie.end(),await Promise.all(L),!o){const P=await oe,l=Buffer.from(await this.currencyConfig.getSigner().sign(P));Y.set(l,2),await b(Y,0,0)}const re=await this.api.post(`/chunks/${this.currency}/${a}/-1`,null,{headers:{"Content-Type":"application/octet-stream",...c},timeout:this.api.config.timeout*10});if(re.status===402)throw new Error("Not enough funds to send data");return Lu.default.checkAndThrow(re,"Finalising upload",[201]),re.status===201&&(re.data={id:(s=re.statusText.split(" "))===null||s===void 0?void 0:s[1]}),this.emit("done",re),re}get completionPromise(){return new Promise(e=>this.on("done",e))}}_f.ChunkingUploader=JA;var I1=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ro,"__esModule",{value:!0});Ro.sleep=void 0;const WA=po,YA=I1(T1),XA=I1(wf),QA=_f,ZA=t=>new Promise(e=>setTimeout(e,t));Ro.sleep=ZA;class e5{constructor(e,r,n,i){this.api=e,this.currency=n,this.currencyConfig=i,this.utils=r}async upload(e,r){return await this.chunkedUploader.uploadData(e,r)}get chunkedUploader(){return new QA.ChunkingUploader(this.currencyConfig,this.api)}async transactionUploader(e){let r;const n=WA.DataItem.isDataItem(e);if(this.forceUseChunking||n&&e.getRaw().length>5e7||!n)r=await this.chunkedUploader.uploadTransaction(n?e.getRaw():e);else{const{protocol:i,host:s,port:a,timeout:o}=this.api.getConfig();r=await this.api.post(`${i}://${s}:${a}/tx/${this.currency}`,e.getRaw(),{headers:{"Content-Type":"application/octet-stream"},timeout:o,maxBodyLength:1/0}),r.status==201&&(r.data={id:e.id})}switch(r.status){case 402:throw new Error("Not enough funds to send data");default:if(r.status>=400)throw new Error(`whilst uploading DataItem: ${r.status} ${r.statusText}`)}return r}async concurrentUploader(e,r=5,n,i){const s=[],a=await YA.default.for(e).withConcurrency(r>=1?r:5).handleError(async(o,c)=>{if(s.push(o),o.message==="Not enough funds to send data")throw o}).process(async(o,c,f)=>{await(0,XA.default)(async u=>{try{const d=await this.processItem(o);return c%r==0&&await i(`Processed ${c} Items`),n?await n({item:o,res:d,i:c}):{item:o,res:d,i:c}}catch(d){throw d.message==="Not enough funds to send data"&&u(d),d}},{retries:3,minTimeout:1e3,maxTimeout:1e4})});return{errors:s,results:a.results}}async processItem(e){return typeof e=="string"&&(e=Buffer.from(e)),await this.transactionUploader(e)}async generateManifest(e){const{items:r,indexFile:n}=e,i={manifest:"arweave/paths",version:"0.1.0",paths:{}};if(n){if(!r.has(n))throw new Error(`Unable to access item: ${n}`);i.index={path:n}}for(const[s,a]of r.entries())i.paths[s]={id:a};return i}set useChunking(e){typeof e=="boolean"&&(this.forceUseChunking=e)}set contentType(e){this.contentTypeOverride=e}}Ro.default=e5;var Bh={},Af={},Qi={},Sf=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.getRedstonePrice=void 0;const t5=Sf(hs),r5=Sf(wn),n5=Sf(Ya),i5=Sf(Ss);class s5{constructor(e){this.minConfirm=5,this.isSlow=!1,this.needsFee=!0,Object.assign(this,e)}get address(){return this._address}async ready(){this._address=this.wallet?this.ownerToAddress(await this.getPublicKey()):void 0}async getId(e){return r5.default.encode(Buffer.from(await t5.default.crypto.hash(await e.rawSignature())))}async price(){return N1(this.ticker)}}Qi.default=s5;async function N1(t){const e=await n5.default.get(`https://api.redstone.finance/prices?symbol=${t}&provider=redstone&limit=1`);return await i5.default.checkAndThrow(e,"Getting price data"),e.data[0].value}Qi.getRedstonePrice=N1;var Mh=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Af,"__esModule",{value:!0});const a5=Mh(dx),Fl=pf,ts=Mh(qi),R1=la,o5=Mh(Qi),c5=Fl.ethers.BigNumber,f5=R1.InjectedEthereumSigner;class u5 extends o5.default{constructor(e){super(e),this.base=["wei",1e18]}async getTx(e){const n=await this.providerInstance.getTransaction(e);if(!n)throw new Error("Tx doesn't exist");return{from:n.from,to:n.to,blockHeight:n.blockNumber?new ts.default(n.blockNumber):null,amount:new ts.default(n.value.toHexString(),16),pending:!n.blockNumber,confirmed:n.confirmations>=this.minConfirm}}ownerToAddress(e){return"0x"+(0,a5.default)(Buffer.from(e.slice(1))).slice(-20).toString("hex")}async sign(e){return(await this.getSigner()).sign(e)}getSigner(){return this.signer||(this.signer=new R1.InjectedEthereumSigner(this.wallet)),this.signer}async verify(e,r,n){return f5.verify(e,r,n)}async getCurrentHeight(){const r=await this.providerInstance.send("eth_blockNumber",[]);return new ts.default(r,16)}async getFee(e,r){const n=this.providerInstance,i={to:r,from:this.address,value:"0x"+new ts.default(e).toString(16)},s=await n.estimateGas(i),a=await n.getGasPrice();return new ts.default(s.mul(a).toString())}async sendTx(e){const n=await this.w3signer.sendTransaction(e);return n?n.hash:void 0}async createTx(e,r,n){const i=c5.from(new ts.default(e).toFixed()),s=this.w3signer,a=await s.estimateGas({to:r,from:this.address,value:i.toHexString()});let o=await s.getGasPrice();return this.name==="matic"&&(o=Fl.ethers.BigNumber.from(new ts.default(o.toString()).multipliedBy(10).decimalPlaces(0).toString())),{txId:void 0,tx:await s.populateTransaction({to:r,from:this.address,value:i.toHexString(),gasPrice:o,gasLimit:a})}}async getPublicKey(){const e=await this.getSigner();return await e.setPublicKey(),e.publicKey}pruneBalanceTransactions(e){throw new Error("Method not implemented.")}async ready(){var e;this.w3signer=await this.wallet.getSigner(),this._address=this.ownerToAddress(await this.getPublicKey()),this.providerInstance=new Fl.ethers.providers.JsonRpcProvider(this.providerUrl),await((e=this.providerInstance)===null||e===void 0?void 0:e._ready())}}Af.default=u5;var Oh={},B1={},M1={},Ts={};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.KeyStore=void 0;class l5{}Ts.KeyStore=l5;var Do={},ni={},jl={},d5={get exports(){return jl},set exports(t){jl=t}};(function(t){(function(e){var r=function(w){var k,I=new Float64Array(16);if(w)for(k=0;k<w.length;k++)I[k]=w[k];return I},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var a=r(),o=r([1]),c=r([56129,1]),f=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),g=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),b=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function S(w,k,I,p){w[k]=I>>24&255,w[k+1]=I>>16&255,w[k+2]=I>>8&255,w[k+3]=I&255,w[k+4]=p>>24&255,w[k+5]=p>>16&255,w[k+6]=p>>8&255,w[k+7]=p&255}function _(w,k,I,p,R){var V,G=0;for(V=0;V<R;V++)G|=w[k+V]^I[p+V];return(1&G-1>>>8)-1}function y(w,k,I,p){return _(w,k,I,p,16)}function E(w,k,I,p){return _(w,k,I,p,32)}function A(w,k,I,p){for(var R=p[0]&255|(p[1]&255)<<8|(p[2]&255)<<16|(p[3]&255)<<24,V=I[0]&255|(I[1]&255)<<8|(I[2]&255)<<16|(I[3]&255)<<24,G=I[4]&255|(I[5]&255)<<8|(I[6]&255)<<16|(I[7]&255)<<24,ee=I[8]&255|(I[9]&255)<<8|(I[10]&255)<<16|(I[11]&255)<<24,fe=I[12]&255|(I[13]&255)<<8|(I[14]&255)<<16|(I[15]&255)<<24,xe=p[4]&255|(p[5]&255)<<8|(p[6]&255)<<16|(p[7]&255)<<24,ue=k[0]&255|(k[1]&255)<<8|(k[2]&255)<<16|(k[3]&255)<<24,Le=k[4]&255|(k[5]&255)<<8|(k[6]&255)<<16|(k[7]&255)<<24,ve=k[8]&255|(k[9]&255)<<8|(k[10]&255)<<16|(k[11]&255)<<24,Ce=k[12]&255|(k[13]&255)<<8|(k[14]&255)<<16|(k[15]&255)<<24,Ie=p[8]&255|(p[9]&255)<<8|(p[10]&255)<<16|(p[11]&255)<<24,Ne=I[16]&255|(I[17]&255)<<8|(I[18]&255)<<16|(I[19]&255)<<24,De=I[20]&255|(I[21]&255)<<8|(I[22]&255)<<16|(I[23]&255)<<24,Re=I[24]&255|(I[25]&255)<<8|(I[26]&255)<<16|(I[27]&255)<<24,Me=I[28]&255|(I[29]&255)<<8|(I[30]&255)<<16|(I[31]&255)<<24,Be=p[12]&255|(p[13]&255)<<8|(p[14]&255)<<16|(p[15]&255)<<24,Ae=R,ke=V,we=G,Se=ee,Te=fe,_e=xe,Q=ue,Z=Le,ce=ve,ne=Ce,ae=Ie,he=Ne,Oe=De,qe=Re,Ge=Me,$e=Be,F,We=0;We<20;We+=2)F=Ae+Oe|0,Te^=F<<7|F>>>32-7,F=Te+Ae|0,ce^=F<<9|F>>>32-9,F=ce+Te|0,Oe^=F<<13|F>>>32-13,F=Oe+ce|0,Ae^=F<<18|F>>>32-18,F=_e+ke|0,ne^=F<<7|F>>>32-7,F=ne+_e|0,qe^=F<<9|F>>>32-9,F=qe+ne|0,ke^=F<<13|F>>>32-13,F=ke+qe|0,_e^=F<<18|F>>>32-18,F=ae+Q|0,Ge^=F<<7|F>>>32-7,F=Ge+ae|0,we^=F<<9|F>>>32-9,F=we+Ge|0,Q^=F<<13|F>>>32-13,F=Q+we|0,ae^=F<<18|F>>>32-18,F=$e+he|0,Se^=F<<7|F>>>32-7,F=Se+$e|0,Z^=F<<9|F>>>32-9,F=Z+Se|0,he^=F<<13|F>>>32-13,F=he+Z|0,$e^=F<<18|F>>>32-18,F=Ae+Se|0,ke^=F<<7|F>>>32-7,F=ke+Ae|0,we^=F<<9|F>>>32-9,F=we+ke|0,Se^=F<<13|F>>>32-13,F=Se+we|0,Ae^=F<<18|F>>>32-18,F=_e+Te|0,Q^=F<<7|F>>>32-7,F=Q+_e|0,Z^=F<<9|F>>>32-9,F=Z+Q|0,Te^=F<<13|F>>>32-13,F=Te+Z|0,_e^=F<<18|F>>>32-18,F=ae+ne|0,he^=F<<7|F>>>32-7,F=he+ae|0,ce^=F<<9|F>>>32-9,F=ce+he|0,ne^=F<<13|F>>>32-13,F=ne+ce|0,ae^=F<<18|F>>>32-18,F=$e+Ge|0,Oe^=F<<7|F>>>32-7,F=Oe+$e|0,qe^=F<<9|F>>>32-9,F=qe+Oe|0,Ge^=F<<13|F>>>32-13,F=Ge+qe|0,$e^=F<<18|F>>>32-18;Ae=Ae+R|0,ke=ke+V|0,we=we+G|0,Se=Se+ee|0,Te=Te+fe|0,_e=_e+xe|0,Q=Q+ue|0,Z=Z+Le|0,ce=ce+ve|0,ne=ne+Ce|0,ae=ae+Ie|0,he=he+Ne|0,Oe=Oe+De|0,qe=qe+Re|0,Ge=Ge+Me|0,$e=$e+Be|0,w[0]=Ae>>>0&255,w[1]=Ae>>>8&255,w[2]=Ae>>>16&255,w[3]=Ae>>>24&255,w[4]=ke>>>0&255,w[5]=ke>>>8&255,w[6]=ke>>>16&255,w[7]=ke>>>24&255,w[8]=we>>>0&255,w[9]=we>>>8&255,w[10]=we>>>16&255,w[11]=we>>>24&255,w[12]=Se>>>0&255,w[13]=Se>>>8&255,w[14]=Se>>>16&255,w[15]=Se>>>24&255,w[16]=Te>>>0&255,w[17]=Te>>>8&255,w[18]=Te>>>16&255,w[19]=Te>>>24&255,w[20]=_e>>>0&255,w[21]=_e>>>8&255,w[22]=_e>>>16&255,w[23]=_e>>>24&255,w[24]=Q>>>0&255,w[25]=Q>>>8&255,w[26]=Q>>>16&255,w[27]=Q>>>24&255,w[28]=Z>>>0&255,w[29]=Z>>>8&255,w[30]=Z>>>16&255,w[31]=Z>>>24&255,w[32]=ce>>>0&255,w[33]=ce>>>8&255,w[34]=ce>>>16&255,w[35]=ce>>>24&255,w[36]=ne>>>0&255,w[37]=ne>>>8&255,w[38]=ne>>>16&255,w[39]=ne>>>24&255,w[40]=ae>>>0&255,w[41]=ae>>>8&255,w[42]=ae>>>16&255,w[43]=ae>>>24&255,w[44]=he>>>0&255,w[45]=he>>>8&255,w[46]=he>>>16&255,w[47]=he>>>24&255,w[48]=Oe>>>0&255,w[49]=Oe>>>8&255,w[50]=Oe>>>16&255,w[51]=Oe>>>24&255,w[52]=qe>>>0&255,w[53]=qe>>>8&255,w[54]=qe>>>16&255,w[55]=qe>>>24&255,w[56]=Ge>>>0&255,w[57]=Ge>>>8&255,w[58]=Ge>>>16&255,w[59]=Ge>>>24&255,w[60]=$e>>>0&255,w[61]=$e>>>8&255,w[62]=$e>>>16&255,w[63]=$e>>>24&255}function M(w,k,I,p){for(var R=p[0]&255|(p[1]&255)<<8|(p[2]&255)<<16|(p[3]&255)<<24,V=I[0]&255|(I[1]&255)<<8|(I[2]&255)<<16|(I[3]&255)<<24,G=I[4]&255|(I[5]&255)<<8|(I[6]&255)<<16|(I[7]&255)<<24,ee=I[8]&255|(I[9]&255)<<8|(I[10]&255)<<16|(I[11]&255)<<24,fe=I[12]&255|(I[13]&255)<<8|(I[14]&255)<<16|(I[15]&255)<<24,xe=p[4]&255|(p[5]&255)<<8|(p[6]&255)<<16|(p[7]&255)<<24,ue=k[0]&255|(k[1]&255)<<8|(k[2]&255)<<16|(k[3]&255)<<24,Le=k[4]&255|(k[5]&255)<<8|(k[6]&255)<<16|(k[7]&255)<<24,ve=k[8]&255|(k[9]&255)<<8|(k[10]&255)<<16|(k[11]&255)<<24,Ce=k[12]&255|(k[13]&255)<<8|(k[14]&255)<<16|(k[15]&255)<<24,Ie=p[8]&255|(p[9]&255)<<8|(p[10]&255)<<16|(p[11]&255)<<24,Ne=I[16]&255|(I[17]&255)<<8|(I[18]&255)<<16|(I[19]&255)<<24,De=I[20]&255|(I[21]&255)<<8|(I[22]&255)<<16|(I[23]&255)<<24,Re=I[24]&255|(I[25]&255)<<8|(I[26]&255)<<16|(I[27]&255)<<24,Me=I[28]&255|(I[29]&255)<<8|(I[30]&255)<<16|(I[31]&255)<<24,Be=p[12]&255|(p[13]&255)<<8|(p[14]&255)<<16|(p[15]&255)<<24,Ae=R,ke=V,we=G,Se=ee,Te=fe,_e=xe,Q=ue,Z=Le,ce=ve,ne=Ce,ae=Ie,he=Ne,Oe=De,qe=Re,Ge=Me,$e=Be,F,We=0;We<20;We+=2)F=Ae+Oe|0,Te^=F<<7|F>>>32-7,F=Te+Ae|0,ce^=F<<9|F>>>32-9,F=ce+Te|0,Oe^=F<<13|F>>>32-13,F=Oe+ce|0,Ae^=F<<18|F>>>32-18,F=_e+ke|0,ne^=F<<7|F>>>32-7,F=ne+_e|0,qe^=F<<9|F>>>32-9,F=qe+ne|0,ke^=F<<13|F>>>32-13,F=ke+qe|0,_e^=F<<18|F>>>32-18,F=ae+Q|0,Ge^=F<<7|F>>>32-7,F=Ge+ae|0,we^=F<<9|F>>>32-9,F=we+Ge|0,Q^=F<<13|F>>>32-13,F=Q+we|0,ae^=F<<18|F>>>32-18,F=$e+he|0,Se^=F<<7|F>>>32-7,F=Se+$e|0,Z^=F<<9|F>>>32-9,F=Z+Se|0,he^=F<<13|F>>>32-13,F=he+Z|0,$e^=F<<18|F>>>32-18,F=Ae+Se|0,ke^=F<<7|F>>>32-7,F=ke+Ae|0,we^=F<<9|F>>>32-9,F=we+ke|0,Se^=F<<13|F>>>32-13,F=Se+we|0,Ae^=F<<18|F>>>32-18,F=_e+Te|0,Q^=F<<7|F>>>32-7,F=Q+_e|0,Z^=F<<9|F>>>32-9,F=Z+Q|0,Te^=F<<13|F>>>32-13,F=Te+Z|0,_e^=F<<18|F>>>32-18,F=ae+ne|0,he^=F<<7|F>>>32-7,F=he+ae|0,ce^=F<<9|F>>>32-9,F=ce+he|0,ne^=F<<13|F>>>32-13,F=ne+ce|0,ae^=F<<18|F>>>32-18,F=$e+Ge|0,Oe^=F<<7|F>>>32-7,F=Oe+$e|0,qe^=F<<9|F>>>32-9,F=qe+Oe|0,Ge^=F<<13|F>>>32-13,F=Ge+qe|0,$e^=F<<18|F>>>32-18;w[0]=Ae>>>0&255,w[1]=Ae>>>8&255,w[2]=Ae>>>16&255,w[3]=Ae>>>24&255,w[4]=_e>>>0&255,w[5]=_e>>>8&255,w[6]=_e>>>16&255,w[7]=_e>>>24&255,w[8]=ae>>>0&255,w[9]=ae>>>8&255,w[10]=ae>>>16&255,w[11]=ae>>>24&255,w[12]=$e>>>0&255,w[13]=$e>>>8&255,w[14]=$e>>>16&255,w[15]=$e>>>24&255,w[16]=Q>>>0&255,w[17]=Q>>>8&255,w[18]=Q>>>16&255,w[19]=Q>>>24&255,w[20]=Z>>>0&255,w[21]=Z>>>8&255,w[22]=Z>>>16&255,w[23]=Z>>>24&255,w[24]=ce>>>0&255,w[25]=ce>>>8&255,w[26]=ce>>>16&255,w[27]=ce>>>24&255,w[28]=ne>>>0&255,w[29]=ne>>>8&255,w[30]=ne>>>16&255,w[31]=ne>>>24&255}function B(w,k,I,p){A(w,k,I,p)}function D(w,k,I,p){M(w,k,I,p)}var L=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function z(w,k,I,p,R,V,G){var ee=new Uint8Array(16),fe=new Uint8Array(64),xe,ue;for(ue=0;ue<16;ue++)ee[ue]=0;for(ue=0;ue<8;ue++)ee[ue]=V[ue];for(;R>=64;){for(B(fe,ee,G,L),ue=0;ue<64;ue++)w[k+ue]=I[p+ue]^fe[ue];for(xe=1,ue=8;ue<16;ue++)xe=xe+(ee[ue]&255)|0,ee[ue]=xe&255,xe>>>=8;R-=64,k+=64,p+=64}if(R>0)for(B(fe,ee,G,L),ue=0;ue<R;ue++)w[k+ue]=I[p+ue]^fe[ue];return 0}function Y(w,k,I,p,R){var V=new Uint8Array(16),G=new Uint8Array(64),ee,fe;for(fe=0;fe<16;fe++)V[fe]=0;for(fe=0;fe<8;fe++)V[fe]=p[fe];for(;I>=64;){for(B(G,V,R,L),fe=0;fe<64;fe++)w[k+fe]=G[fe];for(ee=1,fe=8;fe<16;fe++)ee=ee+(V[fe]&255)|0,V[fe]=ee&255,ee>>>=8;I-=64,k+=64}if(I>0)for(B(G,V,R,L),fe=0;fe<I;fe++)w[k+fe]=G[fe];return 0}function ie(w,k,I,p,R){var V=new Uint8Array(32);D(V,p,R,L);for(var G=new Uint8Array(8),ee=0;ee<8;ee++)G[ee]=p[ee+16];return Y(w,k,I,G,V)}function oe(w,k,I,p,R,V,G){var ee=new Uint8Array(32);D(ee,V,G,L);for(var fe=new Uint8Array(8),xe=0;xe<8;xe++)fe[xe]=V[xe+16];return z(w,k,I,p,R,fe,ee)}var ge=function(w){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var k,I,p,R,V,G,ee,fe;k=w[0]&255|(w[1]&255)<<8,this.r[0]=k&8191,I=w[2]&255|(w[3]&255)<<8,this.r[1]=(k>>>13|I<<3)&8191,p=w[4]&255|(w[5]&255)<<8,this.r[2]=(I>>>10|p<<6)&7939,R=w[6]&255|(w[7]&255)<<8,this.r[3]=(p>>>7|R<<9)&8191,V=w[8]&255|(w[9]&255)<<8,this.r[4]=(R>>>4|V<<12)&255,this.r[5]=V>>>1&8190,G=w[10]&255|(w[11]&255)<<8,this.r[6]=(V>>>14|G<<2)&8191,ee=w[12]&255|(w[13]&255)<<8,this.r[7]=(G>>>11|ee<<5)&8065,fe=w[14]&255|(w[15]&255)<<8,this.r[8]=(ee>>>8|fe<<8)&8191,this.r[9]=fe>>>5&127,this.pad[0]=w[16]&255|(w[17]&255)<<8,this.pad[1]=w[18]&255|(w[19]&255)<<8,this.pad[2]=w[20]&255|(w[21]&255)<<8,this.pad[3]=w[22]&255|(w[23]&255)<<8,this.pad[4]=w[24]&255|(w[25]&255)<<8,this.pad[5]=w[26]&255|(w[27]&255)<<8,this.pad[6]=w[28]&255|(w[29]&255)<<8,this.pad[7]=w[30]&255|(w[31]&255)<<8};ge.prototype.blocks=function(w,k,I){for(var p=this.fin?0:2048,R,V,G,ee,fe,xe,ue,Le,ve,Ce,Ie,Ne,De,Re,Me,Be,Ae,ke,we,Se=this.h[0],Te=this.h[1],_e=this.h[2],Q=this.h[3],Z=this.h[4],ce=this.h[5],ne=this.h[6],ae=this.h[7],he=this.h[8],Oe=this.h[9],qe=this.r[0],Ge=this.r[1],$e=this.r[2],F=this.r[3],We=this.r[4],bt=this.r[5],mt=this.r[6],Ve=this.r[7],ft=this.r[8],ut=this.r[9];I>=16;)R=w[k+0]&255|(w[k+1]&255)<<8,Se+=R&8191,V=w[k+2]&255|(w[k+3]&255)<<8,Te+=(R>>>13|V<<3)&8191,G=w[k+4]&255|(w[k+5]&255)<<8,_e+=(V>>>10|G<<6)&8191,ee=w[k+6]&255|(w[k+7]&255)<<8,Q+=(G>>>7|ee<<9)&8191,fe=w[k+8]&255|(w[k+9]&255)<<8,Z+=(ee>>>4|fe<<12)&8191,ce+=fe>>>1&8191,xe=w[k+10]&255|(w[k+11]&255)<<8,ne+=(fe>>>14|xe<<2)&8191,ue=w[k+12]&255|(w[k+13]&255)<<8,ae+=(xe>>>11|ue<<5)&8191,Le=w[k+14]&255|(w[k+15]&255)<<8,he+=(ue>>>8|Le<<8)&8191,Oe+=Le>>>5|p,ve=0,Ce=ve,Ce+=Se*qe,Ce+=Te*(5*ut),Ce+=_e*(5*ft),Ce+=Q*(5*Ve),Ce+=Z*(5*mt),ve=Ce>>>13,Ce&=8191,Ce+=ce*(5*bt),Ce+=ne*(5*We),Ce+=ae*(5*F),Ce+=he*(5*$e),Ce+=Oe*(5*Ge),ve+=Ce>>>13,Ce&=8191,Ie=ve,Ie+=Se*Ge,Ie+=Te*qe,Ie+=_e*(5*ut),Ie+=Q*(5*ft),Ie+=Z*(5*Ve),ve=Ie>>>13,Ie&=8191,Ie+=ce*(5*mt),Ie+=ne*(5*bt),Ie+=ae*(5*We),Ie+=he*(5*F),Ie+=Oe*(5*$e),ve+=Ie>>>13,Ie&=8191,Ne=ve,Ne+=Se*$e,Ne+=Te*Ge,Ne+=_e*qe,Ne+=Q*(5*ut),Ne+=Z*(5*ft),ve=Ne>>>13,Ne&=8191,Ne+=ce*(5*Ve),Ne+=ne*(5*mt),Ne+=ae*(5*bt),Ne+=he*(5*We),Ne+=Oe*(5*F),ve+=Ne>>>13,Ne&=8191,De=ve,De+=Se*F,De+=Te*$e,De+=_e*Ge,De+=Q*qe,De+=Z*(5*ut),ve=De>>>13,De&=8191,De+=ce*(5*ft),De+=ne*(5*Ve),De+=ae*(5*mt),De+=he*(5*bt),De+=Oe*(5*We),ve+=De>>>13,De&=8191,Re=ve,Re+=Se*We,Re+=Te*F,Re+=_e*$e,Re+=Q*Ge,Re+=Z*qe,ve=Re>>>13,Re&=8191,Re+=ce*(5*ut),Re+=ne*(5*ft),Re+=ae*(5*Ve),Re+=he*(5*mt),Re+=Oe*(5*bt),ve+=Re>>>13,Re&=8191,Me=ve,Me+=Se*bt,Me+=Te*We,Me+=_e*F,Me+=Q*$e,Me+=Z*Ge,ve=Me>>>13,Me&=8191,Me+=ce*qe,Me+=ne*(5*ut),Me+=ae*(5*ft),Me+=he*(5*Ve),Me+=Oe*(5*mt),ve+=Me>>>13,Me&=8191,Be=ve,Be+=Se*mt,Be+=Te*bt,Be+=_e*We,Be+=Q*F,Be+=Z*$e,ve=Be>>>13,Be&=8191,Be+=ce*Ge,Be+=ne*qe,Be+=ae*(5*ut),Be+=he*(5*ft),Be+=Oe*(5*Ve),ve+=Be>>>13,Be&=8191,Ae=ve,Ae+=Se*Ve,Ae+=Te*mt,Ae+=_e*bt,Ae+=Q*We,Ae+=Z*F,ve=Ae>>>13,Ae&=8191,Ae+=ce*$e,Ae+=ne*Ge,Ae+=ae*qe,Ae+=he*(5*ut),Ae+=Oe*(5*ft),ve+=Ae>>>13,Ae&=8191,ke=ve,ke+=Se*ft,ke+=Te*Ve,ke+=_e*mt,ke+=Q*bt,ke+=Z*We,ve=ke>>>13,ke&=8191,ke+=ce*F,ke+=ne*$e,ke+=ae*Ge,ke+=he*qe,ke+=Oe*(5*ut),ve+=ke>>>13,ke&=8191,we=ve,we+=Se*ut,we+=Te*ft,we+=_e*Ve,we+=Q*mt,we+=Z*bt,ve=we>>>13,we&=8191,we+=ce*We,we+=ne*F,we+=ae*$e,we+=he*Ge,we+=Oe*qe,ve+=we>>>13,we&=8191,ve=(ve<<2)+ve|0,ve=ve+Ce|0,Ce=ve&8191,ve=ve>>>13,Ie+=ve,Se=Ce,Te=Ie,_e=Ne,Q=De,Z=Re,ce=Me,ne=Be,ae=Ae,he=ke,Oe=we,k+=16,I-=16;this.h[0]=Se,this.h[1]=Te,this.h[2]=_e,this.h[3]=Q,this.h[4]=Z,this.h[5]=ce,this.h[6]=ne,this.h[7]=ae,this.h[8]=he,this.h[9]=Oe},ge.prototype.finish=function(w,k){var I=new Uint16Array(10),p,R,V,G;if(this.leftover){for(G=this.leftover,this.buffer[G++]=1;G<16;G++)this.buffer[G]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(p=this.h[1]>>>13,this.h[1]&=8191,G=2;G<10;G++)this.h[G]+=p,p=this.h[G]>>>13,this.h[G]&=8191;for(this.h[0]+=p*5,p=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=p,p=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=p,I[0]=this.h[0]+5,p=I[0]>>>13,I[0]&=8191,G=1;G<10;G++)I[G]=this.h[G]+p,p=I[G]>>>13,I[G]&=8191;for(I[9]-=1<<13,R=(p^1)-1,G=0;G<10;G++)I[G]&=R;for(R=~R,G=0;G<10;G++)this.h[G]=this.h[G]&R|I[G];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,V=this.h[0]+this.pad[0],this.h[0]=V&65535,G=1;G<8;G++)V=(this.h[G]+this.pad[G]|0)+(V>>>16)|0,this.h[G]=V&65535;w[k+0]=this.h[0]>>>0&255,w[k+1]=this.h[0]>>>8&255,w[k+2]=this.h[1]>>>0&255,w[k+3]=this.h[1]>>>8&255,w[k+4]=this.h[2]>>>0&255,w[k+5]=this.h[2]>>>8&255,w[k+6]=this.h[3]>>>0&255,w[k+7]=this.h[3]>>>8&255,w[k+8]=this.h[4]>>>0&255,w[k+9]=this.h[4]>>>8&255,w[k+10]=this.h[5]>>>0&255,w[k+11]=this.h[5]>>>8&255,w[k+12]=this.h[6]>>>0&255,w[k+13]=this.h[6]>>>8&255,w[k+14]=this.h[7]>>>0&255,w[k+15]=this.h[7]>>>8&255},ge.prototype.update=function(w,k,I){var p,R;if(this.leftover){for(R=16-this.leftover,R>I&&(R=I),p=0;p<R;p++)this.buffer[this.leftover+p]=w[k+p];if(I-=R,k+=R,this.leftover+=R,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(I>=16&&(R=I-I%16,this.blocks(w,k,R),k+=R,I-=R),I){for(p=0;p<I;p++)this.buffer[this.leftover+p]=w[k+p];this.leftover+=I}};function re(w,k,I,p,R,V){var G=new ge(V);return G.update(I,p,R),G.finish(w,k),0}function P(w,k,I,p,R,V){var G=new Uint8Array(16);return re(G,0,I,p,R,V),y(w,k,G,0)}function l(w,k,I,p,R){var V;if(I<32)return-1;for(oe(w,0,k,0,I,p,R),re(w,16,w,32,I-32,w),V=0;V<16;V++)w[V]=0;return 0}function m(w,k,I,p,R){var V,G=new Uint8Array(32);if(I<32||(ie(G,0,32,p,R),P(k,16,k,32,I-32,G)!==0))return-1;for(oe(w,0,k,0,I,p,R),V=0;V<32;V++)w[V]=0;return 0}function T(w,k){var I;for(I=0;I<16;I++)w[I]=k[I]|0}function N(w){var k,I,p=1;for(k=0;k<16;k++)I=w[k]+p+65535,p=Math.floor(I/65536),w[k]=I-p*65536;w[0]+=p-1+37*(p-1)}function O(w,k,I){for(var p,R=~(I-1),V=0;V<16;V++)p=R&(w[V]^k[V]),w[V]^=p,k[V]^=p}function U(w,k){var I,p,R,V=r(),G=r();for(I=0;I<16;I++)G[I]=k[I];for(N(G),N(G),N(G),p=0;p<2;p++){for(V[0]=G[0]-65517,I=1;I<15;I++)V[I]=G[I]-65535-(V[I-1]>>16&1),V[I-1]&=65535;V[15]=G[15]-32767-(V[14]>>16&1),R=V[15]>>16&1,V[14]&=65535,O(G,V,1-R)}for(I=0;I<16;I++)w[2*I]=G[I]&255,w[2*I+1]=G[I]>>8}function $(w,k){var I=new Uint8Array(32),p=new Uint8Array(32);return U(I,w),U(p,k),E(I,0,p,0)}function v(w){var k=new Uint8Array(32);return U(k,w),k[0]&1}function h(w,k){var I;for(I=0;I<16;I++)w[I]=k[2*I]+(k[2*I+1]<<8);w[15]&=32767}function C(w,k,I){for(var p=0;p<16;p++)w[p]=k[p]+I[p]}function q(w,k,I){for(var p=0;p<16;p++)w[p]=k[p]-I[p]}function x(w,k,I){var p,R,V=0,G=0,ee=0,fe=0,xe=0,ue=0,Le=0,ve=0,Ce=0,Ie=0,Ne=0,De=0,Re=0,Me=0,Be=0,Ae=0,ke=0,we=0,Se=0,Te=0,_e=0,Q=0,Z=0,ce=0,ne=0,ae=0,he=0,Oe=0,qe=0,Ge=0,$e=0,F=I[0],We=I[1],bt=I[2],mt=I[3],Ve=I[4],ft=I[5],ut=I[6],ir=I[7],Mt=I[8],Yt=I[9],Xt=I[10],Qt=I[11],lr=I[12],Nr=I[13],Rr=I[14],Br=I[15];p=k[0],V+=p*F,G+=p*We,ee+=p*bt,fe+=p*mt,xe+=p*Ve,ue+=p*ft,Le+=p*ut,ve+=p*ir,Ce+=p*Mt,Ie+=p*Yt,Ne+=p*Xt,De+=p*Qt,Re+=p*lr,Me+=p*Nr,Be+=p*Rr,Ae+=p*Br,p=k[1],G+=p*F,ee+=p*We,fe+=p*bt,xe+=p*mt,ue+=p*Ve,Le+=p*ft,ve+=p*ut,Ce+=p*ir,Ie+=p*Mt,Ne+=p*Yt,De+=p*Xt,Re+=p*Qt,Me+=p*lr,Be+=p*Nr,Ae+=p*Rr,ke+=p*Br,p=k[2],ee+=p*F,fe+=p*We,xe+=p*bt,ue+=p*mt,Le+=p*Ve,ve+=p*ft,Ce+=p*ut,Ie+=p*ir,Ne+=p*Mt,De+=p*Yt,Re+=p*Xt,Me+=p*Qt,Be+=p*lr,Ae+=p*Nr,ke+=p*Rr,we+=p*Br,p=k[3],fe+=p*F,xe+=p*We,ue+=p*bt,Le+=p*mt,ve+=p*Ve,Ce+=p*ft,Ie+=p*ut,Ne+=p*ir,De+=p*Mt,Re+=p*Yt,Me+=p*Xt,Be+=p*Qt,Ae+=p*lr,ke+=p*Nr,we+=p*Rr,Se+=p*Br,p=k[4],xe+=p*F,ue+=p*We,Le+=p*bt,ve+=p*mt,Ce+=p*Ve,Ie+=p*ft,Ne+=p*ut,De+=p*ir,Re+=p*Mt,Me+=p*Yt,Be+=p*Xt,Ae+=p*Qt,ke+=p*lr,we+=p*Nr,Se+=p*Rr,Te+=p*Br,p=k[5],ue+=p*F,Le+=p*We,ve+=p*bt,Ce+=p*mt,Ie+=p*Ve,Ne+=p*ft,De+=p*ut,Re+=p*ir,Me+=p*Mt,Be+=p*Yt,Ae+=p*Xt,ke+=p*Qt,we+=p*lr,Se+=p*Nr,Te+=p*Rr,_e+=p*Br,p=k[6],Le+=p*F,ve+=p*We,Ce+=p*bt,Ie+=p*mt,Ne+=p*Ve,De+=p*ft,Re+=p*ut,Me+=p*ir,Be+=p*Mt,Ae+=p*Yt,ke+=p*Xt,we+=p*Qt,Se+=p*lr,Te+=p*Nr,_e+=p*Rr,Q+=p*Br,p=k[7],ve+=p*F,Ce+=p*We,Ie+=p*bt,Ne+=p*mt,De+=p*Ve,Re+=p*ft,Me+=p*ut,Be+=p*ir,Ae+=p*Mt,ke+=p*Yt,we+=p*Xt,Se+=p*Qt,Te+=p*lr,_e+=p*Nr,Q+=p*Rr,Z+=p*Br,p=k[8],Ce+=p*F,Ie+=p*We,Ne+=p*bt,De+=p*mt,Re+=p*Ve,Me+=p*ft,Be+=p*ut,Ae+=p*ir,ke+=p*Mt,we+=p*Yt,Se+=p*Xt,Te+=p*Qt,_e+=p*lr,Q+=p*Nr,Z+=p*Rr,ce+=p*Br,p=k[9],Ie+=p*F,Ne+=p*We,De+=p*bt,Re+=p*mt,Me+=p*Ve,Be+=p*ft,Ae+=p*ut,ke+=p*ir,we+=p*Mt,Se+=p*Yt,Te+=p*Xt,_e+=p*Qt,Q+=p*lr,Z+=p*Nr,ce+=p*Rr,ne+=p*Br,p=k[10],Ne+=p*F,De+=p*We,Re+=p*bt,Me+=p*mt,Be+=p*Ve,Ae+=p*ft,ke+=p*ut,we+=p*ir,Se+=p*Mt,Te+=p*Yt,_e+=p*Xt,Q+=p*Qt,Z+=p*lr,ce+=p*Nr,ne+=p*Rr,ae+=p*Br,p=k[11],De+=p*F,Re+=p*We,Me+=p*bt,Be+=p*mt,Ae+=p*Ve,ke+=p*ft,we+=p*ut,Se+=p*ir,Te+=p*Mt,_e+=p*Yt,Q+=p*Xt,Z+=p*Qt,ce+=p*lr,ne+=p*Nr,ae+=p*Rr,he+=p*Br,p=k[12],Re+=p*F,Me+=p*We,Be+=p*bt,Ae+=p*mt,ke+=p*Ve,we+=p*ft,Se+=p*ut,Te+=p*ir,_e+=p*Mt,Q+=p*Yt,Z+=p*Xt,ce+=p*Qt,ne+=p*lr,ae+=p*Nr,he+=p*Rr,Oe+=p*Br,p=k[13],Me+=p*F,Be+=p*We,Ae+=p*bt,ke+=p*mt,we+=p*Ve,Se+=p*ft,Te+=p*ut,_e+=p*ir,Q+=p*Mt,Z+=p*Yt,ce+=p*Xt,ne+=p*Qt,ae+=p*lr,he+=p*Nr,Oe+=p*Rr,qe+=p*Br,p=k[14],Be+=p*F,Ae+=p*We,ke+=p*bt,we+=p*mt,Se+=p*Ve,Te+=p*ft,_e+=p*ut,Q+=p*ir,Z+=p*Mt,ce+=p*Yt,ne+=p*Xt,ae+=p*Qt,he+=p*lr,Oe+=p*Nr,qe+=p*Rr,Ge+=p*Br,p=k[15],Ae+=p*F,ke+=p*We,we+=p*bt,Se+=p*mt,Te+=p*Ve,_e+=p*ft,Q+=p*ut,Z+=p*ir,ce+=p*Mt,ne+=p*Yt,ae+=p*Xt,he+=p*Qt,Oe+=p*lr,qe+=p*Nr,Ge+=p*Rr,$e+=p*Br,V+=38*ke,G+=38*we,ee+=38*Se,fe+=38*Te,xe+=38*_e,ue+=38*Q,Le+=38*Z,ve+=38*ce,Ce+=38*ne,Ie+=38*ae,Ne+=38*he,De+=38*Oe,Re+=38*qe,Me+=38*Ge,Be+=38*$e,R=1,p=V+R+65535,R=Math.floor(p/65536),V=p-R*65536,p=G+R+65535,R=Math.floor(p/65536),G=p-R*65536,p=ee+R+65535,R=Math.floor(p/65536),ee=p-R*65536,p=fe+R+65535,R=Math.floor(p/65536),fe=p-R*65536,p=xe+R+65535,R=Math.floor(p/65536),xe=p-R*65536,p=ue+R+65535,R=Math.floor(p/65536),ue=p-R*65536,p=Le+R+65535,R=Math.floor(p/65536),Le=p-R*65536,p=ve+R+65535,R=Math.floor(p/65536),ve=p-R*65536,p=Ce+R+65535,R=Math.floor(p/65536),Ce=p-R*65536,p=Ie+R+65535,R=Math.floor(p/65536),Ie=p-R*65536,p=Ne+R+65535,R=Math.floor(p/65536),Ne=p-R*65536,p=De+R+65535,R=Math.floor(p/65536),De=p-R*65536,p=Re+R+65535,R=Math.floor(p/65536),Re=p-R*65536,p=Me+R+65535,R=Math.floor(p/65536),Me=p-R*65536,p=Be+R+65535,R=Math.floor(p/65536),Be=p-R*65536,p=Ae+R+65535,R=Math.floor(p/65536),Ae=p-R*65536,V+=R-1+37*(R-1),R=1,p=V+R+65535,R=Math.floor(p/65536),V=p-R*65536,p=G+R+65535,R=Math.floor(p/65536),G=p-R*65536,p=ee+R+65535,R=Math.floor(p/65536),ee=p-R*65536,p=fe+R+65535,R=Math.floor(p/65536),fe=p-R*65536,p=xe+R+65535,R=Math.floor(p/65536),xe=p-R*65536,p=ue+R+65535,R=Math.floor(p/65536),ue=p-R*65536,p=Le+R+65535,R=Math.floor(p/65536),Le=p-R*65536,p=ve+R+65535,R=Math.floor(p/65536),ve=p-R*65536,p=Ce+R+65535,R=Math.floor(p/65536),Ce=p-R*65536,p=Ie+R+65535,R=Math.floor(p/65536),Ie=p-R*65536,p=Ne+R+65535,R=Math.floor(p/65536),Ne=p-R*65536,p=De+R+65535,R=Math.floor(p/65536),De=p-R*65536,p=Re+R+65535,R=Math.floor(p/65536),Re=p-R*65536,p=Me+R+65535,R=Math.floor(p/65536),Me=p-R*65536,p=Be+R+65535,R=Math.floor(p/65536),Be=p-R*65536,p=Ae+R+65535,R=Math.floor(p/65536),Ae=p-R*65536,V+=R-1+37*(R-1),w[0]=V,w[1]=G,w[2]=ee,w[3]=fe,w[4]=xe,w[5]=ue,w[6]=Le,w[7]=ve,w[8]=Ce,w[9]=Ie,w[10]=Ne,w[11]=De,w[12]=Re,w[13]=Me,w[14]=Be,w[15]=Ae}function K(w,k){x(w,k,k)}function J(w,k){var I=r(),p;for(p=0;p<16;p++)I[p]=k[p];for(p=253;p>=0;p--)K(I,I),p!==2&&p!==4&&x(I,I,k);for(p=0;p<16;p++)w[p]=I[p]}function W(w,k){var I=r(),p;for(p=0;p<16;p++)I[p]=k[p];for(p=250;p>=0;p--)K(I,I),p!==1&&x(I,I,k);for(p=0;p<16;p++)w[p]=I[p]}function X(w,k,I){var p=new Uint8Array(32),R=new Float64Array(80),V,G,ee=r(),fe=r(),xe=r(),ue=r(),Le=r(),ve=r();for(G=0;G<31;G++)p[G]=k[G];for(p[31]=k[31]&127|64,p[0]&=248,h(R,I),G=0;G<16;G++)fe[G]=R[G],ue[G]=ee[G]=xe[G]=0;for(ee[0]=ue[0]=1,G=254;G>=0;--G)V=p[G>>>3]>>>(G&7)&1,O(ee,fe,V),O(xe,ue,V),C(Le,ee,xe),q(ee,ee,xe),C(xe,fe,ue),q(fe,fe,ue),K(ue,Le),K(ve,ee),x(ee,xe,ee),x(xe,fe,Le),C(Le,ee,xe),q(ee,ee,xe),K(fe,ee),q(xe,ue,ve),x(ee,xe,c),C(ee,ee,ue),x(xe,xe,ee),x(ee,ue,ve),x(ue,fe,R),K(fe,Le),O(ee,fe,V),O(xe,ue,V);for(G=0;G<16;G++)R[G+16]=ee[G],R[G+32]=xe[G],R[G+48]=fe[G],R[G+64]=ue[G];var Ce=R.subarray(32),Ie=R.subarray(16);return J(Ce,Ce),x(Ie,Ie,Ce),U(w,Ie),0}function ye(w,k){return X(w,k,s)}function pe(w,k){return n(k,32),ye(w,k)}function be(w,k,I){var p=new Uint8Array(32);return X(p,I,k),D(w,i,p,L)}var Qe=l,Ee=m;function Ue(w,k,I,p,R,V){var G=new Uint8Array(32);return be(G,R,V),Qe(w,k,I,p,G)}function Wt(w,k,I,p,R,V){var G=new Uint8Array(32);return be(G,R,V),Ee(w,k,I,p,G)}var Tt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function kt(w,k,I,p){for(var R=new Int32Array(16),V=new Int32Array(16),G,ee,fe,xe,ue,Le,ve,Ce,Ie,Ne,De,Re,Me,Be,Ae,ke,we,Se,Te,_e,Q,Z,ce,ne,ae,he,Oe=w[0],qe=w[1],Ge=w[2],$e=w[3],F=w[4],We=w[5],bt=w[6],mt=w[7],Ve=k[0],ft=k[1],ut=k[2],ir=k[3],Mt=k[4],Yt=k[5],Xt=k[6],Qt=k[7],lr=0;p>=128;){for(Te=0;Te<16;Te++)_e=8*Te+lr,R[Te]=I[_e+0]<<24|I[_e+1]<<16|I[_e+2]<<8|I[_e+3],V[Te]=I[_e+4]<<24|I[_e+5]<<16|I[_e+6]<<8|I[_e+7];for(Te=0;Te<80;Te++)if(G=Oe,ee=qe,fe=Ge,xe=$e,ue=F,Le=We,ve=bt,Ce=mt,Ie=Ve,Ne=ft,De=ut,Re=ir,Me=Mt,Be=Yt,Ae=Xt,ke=Qt,Q=mt,Z=Qt,ce=Z&65535,ne=Z>>>16,ae=Q&65535,he=Q>>>16,Q=(F>>>14|Mt<<32-14)^(F>>>18|Mt<<32-18)^(Mt>>>41-32|F<<32-(41-32)),Z=(Mt>>>14|F<<32-14)^(Mt>>>18|F<<32-18)^(F>>>41-32|Mt<<32-(41-32)),ce+=Z&65535,ne+=Z>>>16,ae+=Q&65535,he+=Q>>>16,Q=F&We^~F&bt,Z=Mt&Yt^~Mt&Xt,ce+=Z&65535,ne+=Z>>>16,ae+=Q&65535,he+=Q>>>16,Q=Tt[Te*2],Z=Tt[Te*2+1],ce+=Z&65535,ne+=Z>>>16,ae+=Q&65535,he+=Q>>>16,Q=R[Te%16],Z=V[Te%16],ce+=Z&65535,ne+=Z>>>16,ae+=Q&65535,he+=Q>>>16,ne+=ce>>>16,ae+=ne>>>16,he+=ae>>>16,we=ae&65535|he<<16,Se=ce&65535|ne<<16,Q=we,Z=Se,ce=Z&65535,ne=Z>>>16,ae=Q&65535,he=Q>>>16,Q=(Oe>>>28|Ve<<32-28)^(Ve>>>34-32|Oe<<32-(34-32))^(Ve>>>39-32|Oe<<32-(39-32)),Z=(Ve>>>28|Oe<<32-28)^(Oe>>>34-32|Ve<<32-(34-32))^(Oe>>>39-32|Ve<<32-(39-32)),ce+=Z&65535,ne+=Z>>>16,ae+=Q&65535,he+=Q>>>16,Q=Oe&qe^Oe&Ge^qe&Ge,Z=Ve&ft^Ve&ut^ft&ut,ce+=Z&65535,ne+=Z>>>16,ae+=Q&65535,he+=Q>>>16,ne+=ce>>>16,ae+=ne>>>16,he+=ae>>>16,Ce=ae&65535|he<<16,ke=ce&65535|ne<<16,Q=xe,Z=Re,ce=Z&65535,ne=Z>>>16,ae=Q&65535,he=Q>>>16,Q=we,Z=Se,ce+=Z&65535,ne+=Z>>>16,ae+=Q&65535,he+=Q>>>16,ne+=ce>>>16,ae+=ne>>>16,he+=ae>>>16,xe=ae&65535|he<<16,Re=ce&65535|ne<<16,qe=G,Ge=ee,$e=fe,F=xe,We=ue,bt=Le,mt=ve,Oe=Ce,ft=Ie,ut=Ne,ir=De,Mt=Re,Yt=Me,Xt=Be,Qt=Ae,Ve=ke,Te%16===15)for(_e=0;_e<16;_e++)Q=R[_e],Z=V[_e],ce=Z&65535,ne=Z>>>16,ae=Q&65535,he=Q>>>16,Q=R[(_e+9)%16],Z=V[(_e+9)%16],ce+=Z&65535,ne+=Z>>>16,ae+=Q&65535,he+=Q>>>16,we=R[(_e+1)%16],Se=V[(_e+1)%16],Q=(we>>>1|Se<<32-1)^(we>>>8|Se<<32-8)^we>>>7,Z=(Se>>>1|we<<32-1)^(Se>>>8|we<<32-8)^(Se>>>7|we<<32-7),ce+=Z&65535,ne+=Z>>>16,ae+=Q&65535,he+=Q>>>16,we=R[(_e+14)%16],Se=V[(_e+14)%16],Q=(we>>>19|Se<<32-19)^(Se>>>61-32|we<<32-(61-32))^we>>>6,Z=(Se>>>19|we<<32-19)^(we>>>61-32|Se<<32-(61-32))^(Se>>>6|we<<32-6),ce+=Z&65535,ne+=Z>>>16,ae+=Q&65535,he+=Q>>>16,ne+=ce>>>16,ae+=ne>>>16,he+=ae>>>16,R[_e]=ae&65535|he<<16,V[_e]=ce&65535|ne<<16;Q=Oe,Z=Ve,ce=Z&65535,ne=Z>>>16,ae=Q&65535,he=Q>>>16,Q=w[0],Z=k[0],ce+=Z&65535,ne+=Z>>>16,ae+=Q&65535,he+=Q>>>16,ne+=ce>>>16,ae+=ne>>>16,he+=ae>>>16,w[0]=Oe=ae&65535|he<<16,k[0]=Ve=ce&65535|ne<<16,Q=qe,Z=ft,ce=Z&65535,ne=Z>>>16,ae=Q&65535,he=Q>>>16,Q=w[1],Z=k[1],ce+=Z&65535,ne+=Z>>>16,ae+=Q&65535,he+=Q>>>16,ne+=ce>>>16,ae+=ne>>>16,he+=ae>>>16,w[1]=qe=ae&65535|he<<16,k[1]=ft=ce&65535|ne<<16,Q=Ge,Z=ut,ce=Z&65535,ne=Z>>>16,ae=Q&65535,he=Q>>>16,Q=w[2],Z=k[2],ce+=Z&65535,ne+=Z>>>16,ae+=Q&65535,he+=Q>>>16,ne+=ce>>>16,ae+=ne>>>16,he+=ae>>>16,w[2]=Ge=ae&65535|he<<16,k[2]=ut=ce&65535|ne<<16,Q=$e,Z=ir,ce=Z&65535,ne=Z>>>16,ae=Q&65535,he=Q>>>16,Q=w[3],Z=k[3],ce+=Z&65535,ne+=Z>>>16,ae+=Q&65535,he+=Q>>>16,ne+=ce>>>16,ae+=ne>>>16,he+=ae>>>16,w[3]=$e=ae&65535|he<<16,k[3]=ir=ce&65535|ne<<16,Q=F,Z=Mt,ce=Z&65535,ne=Z>>>16,ae=Q&65535,he=Q>>>16,Q=w[4],Z=k[4],ce+=Z&65535,ne+=Z>>>16,ae+=Q&65535,he+=Q>>>16,ne+=ce>>>16,ae+=ne>>>16,he+=ae>>>16,w[4]=F=ae&65535|he<<16,k[4]=Mt=ce&65535|ne<<16,Q=We,Z=Yt,ce=Z&65535,ne=Z>>>16,ae=Q&65535,he=Q>>>16,Q=w[5],Z=k[5],ce+=Z&65535,ne+=Z>>>16,ae+=Q&65535,he+=Q>>>16,ne+=ce>>>16,ae+=ne>>>16,he+=ae>>>16,w[5]=We=ae&65535|he<<16,k[5]=Yt=ce&65535|ne<<16,Q=bt,Z=Xt,ce=Z&65535,ne=Z>>>16,ae=Q&65535,he=Q>>>16,Q=w[6],Z=k[6],ce+=Z&65535,ne+=Z>>>16,ae+=Q&65535,he+=Q>>>16,ne+=ce>>>16,ae+=ne>>>16,he+=ae>>>16,w[6]=bt=ae&65535|he<<16,k[6]=Xt=ce&65535|ne<<16,Q=mt,Z=Qt,ce=Z&65535,ne=Z>>>16,ae=Q&65535,he=Q>>>16,Q=w[7],Z=k[7],ce+=Z&65535,ne+=Z>>>16,ae+=Q&65535,he+=Q>>>16,ne+=ce>>>16,ae+=ne>>>16,he+=ae>>>16,w[7]=mt=ae&65535|he<<16,k[7]=Qt=ce&65535|ne<<16,lr+=128,p-=128}return p}function yr(w,k,I){var p=new Int32Array(8),R=new Int32Array(8),V=new Uint8Array(256),G,ee=I;for(p[0]=1779033703,p[1]=3144134277,p[2]=1013904242,p[3]=2773480762,p[4]=1359893119,p[5]=2600822924,p[6]=528734635,p[7]=1541459225,R[0]=4089235720,R[1]=2227873595,R[2]=4271175723,R[3]=1595750129,R[4]=2917565137,R[5]=725511199,R[6]=4215389547,R[7]=327033209,kt(p,R,k,I),I%=128,G=0;G<I;G++)V[G]=k[ee-I+G];for(V[I]=128,I=256-128*(I<112?1:0),V[I-9]=0,S(V,I-8,ee/536870912|0,ee<<3),kt(p,R,V,I),G=0;G<8;G++)S(w,8*G,p[G],R[G]);return 0}function dt(w,k){var I=r(),p=r(),R=r(),V=r(),G=r(),ee=r(),fe=r(),xe=r(),ue=r();q(I,w[1],w[0]),q(ue,k[1],k[0]),x(I,I,ue),C(p,w[0],w[1]),C(ue,k[0],k[1]),x(p,p,ue),x(R,w[3],k[3]),x(R,R,u),x(V,w[2],k[2]),C(V,V,V),q(G,p,I),q(ee,V,R),C(fe,V,R),C(xe,p,I),x(w[0],G,ee),x(w[1],xe,fe),x(w[2],fe,ee),x(w[3],G,xe)}function Pt(w,k,I){var p;for(p=0;p<4;p++)O(w[p],k[p],I)}function Jr(w,k){var I=r(),p=r(),R=r();J(R,k[2]),x(I,k[0],R),x(p,k[1],R),U(w,p),w[31]^=v(I)<<7}function wt(w,k,I){var p,R;for(T(w[0],a),T(w[1],o),T(w[2],o),T(w[3],a),R=255;R>=0;--R)p=I[R/8|0]>>(R&7)&1,Pt(w,k,p),dt(k,w),dt(w,w),Pt(w,k,p)}function ht(w,k){var I=[r(),r(),r(),r()];T(I[0],d),T(I[1],g),T(I[2],o),x(I[3],d,g),wt(w,I,k)}function Wr(w,k,I){var p=new Uint8Array(64),R=[r(),r(),r(),r()],V;for(I||n(k,32),yr(p,k,32),p[0]&=248,p[31]&=127,p[31]|=64,ht(R,p),Jr(w,R),V=0;V<32;V++)k[V+32]=w[V];return 0}var pt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function _t(w,k){var I,p,R,V;for(p=63;p>=32;--p){for(I=0,R=p-32,V=p-12;R<V;++R)k[R]+=I-16*k[p]*pt[R-(p-32)],I=Math.floor((k[R]+128)/256),k[R]-=I*256;k[R]+=I,k[p]=0}for(I=0,R=0;R<32;R++)k[R]+=I-(k[31]>>4)*pt[R],I=k[R]>>8,k[R]&=255;for(R=0;R<32;R++)k[R]-=I*pt[R];for(p=0;p<32;p++)k[p+1]+=k[p]>>8,w[p]=k[p]&255}function jr(w){var k=new Float64Array(64),I;for(I=0;I<64;I++)k[I]=w[I];for(I=0;I<64;I++)w[I]=0;_t(w,k)}function Et(w,k,I,p){var R=new Uint8Array(64),V=new Uint8Array(64),G=new Uint8Array(64),ee,fe,xe=new Float64Array(64),ue=[r(),r(),r(),r()];yr(R,p,32),R[0]&=248,R[31]&=127,R[31]|=64;var Le=I+64;for(ee=0;ee<I;ee++)w[64+ee]=k[ee];for(ee=0;ee<32;ee++)w[32+ee]=R[32+ee];for(yr(G,w.subarray(32),I+32),jr(G),ht(ue,G),Jr(w,ue),ee=32;ee<64;ee++)w[ee]=p[ee];for(yr(V,w,I+64),jr(V),ee=0;ee<64;ee++)xe[ee]=0;for(ee=0;ee<32;ee++)xe[ee]=G[ee];for(ee=0;ee<32;ee++)for(fe=0;fe<32;fe++)xe[ee+fe]+=V[ee]*R[fe];return _t(w.subarray(32),xe),Le}function Ct(w,k){var I=r(),p=r(),R=r(),V=r(),G=r(),ee=r(),fe=r();return T(w[2],o),h(w[1],k),K(R,w[1]),x(V,R,f),q(R,R,w[2]),C(V,w[2],V),K(G,V),K(ee,G),x(fe,ee,G),x(I,fe,R),x(I,I,V),W(I,I),x(I,I,R),x(I,I,V),x(I,I,V),x(w[0],I,V),K(p,w[0]),x(p,p,V),$(p,R)&&x(w[0],w[0],b),K(p,w[0]),x(p,p,V),$(p,R)?-1:(v(w[0])===k[31]>>7&&q(w[0],a,w[0]),x(w[3],w[0],w[1]),0)}function Kr(w,k,I,p){var R,V=new Uint8Array(32),G=new Uint8Array(64),ee=[r(),r(),r(),r()],fe=[r(),r(),r(),r()];if(I<64||Ct(fe,p))return-1;for(R=0;R<I;R++)w[R]=k[R];for(R=0;R<32;R++)w[R+32]=p[R];if(yr(G,w,I),jr(G),wt(ee,fe,G),ht(fe,k.subarray(32)),dt(ee,fe),Jr(V,ee),I-=64,E(k,0,V,0)){for(R=0;R<I;R++)w[R]=0;return-1}for(R=0;R<I;R++)w[R]=k[R+64];return I}var gt=32,ct=24,wr=32,tt=16,nt=32,Ir=32,it=32,st=32,qr=32,At=ct,It=wr,on=tt,Je=64,Ze=32,xr=64,yt=32,xt=64;e.lowlevel={crypto_core_hsalsa20:D,crypto_stream_xor:oe,crypto_stream:ie,crypto_stream_salsa20_xor:z,crypto_stream_salsa20:Y,crypto_onetimeauth:re,crypto_onetimeauth_verify:P,crypto_verify_16:y,crypto_verify_32:E,crypto_secretbox:l,crypto_secretbox_open:m,crypto_scalarmult:X,crypto_scalarmult_base:ye,crypto_box_beforenm:be,crypto_box_afternm:Qe,crypto_box:Ue,crypto_box_open:Wt,crypto_box_keypair:pe,crypto_hash:yr,crypto_sign:Et,crypto_sign_keypair:Wr,crypto_sign_open:Kr,crypto_secretbox_KEYBYTES:gt,crypto_secretbox_NONCEBYTES:ct,crypto_secretbox_ZEROBYTES:wr,crypto_secretbox_BOXZEROBYTES:tt,crypto_scalarmult_BYTES:nt,crypto_scalarmult_SCALARBYTES:Ir,crypto_box_PUBLICKEYBYTES:it,crypto_box_SECRETKEYBYTES:st,crypto_box_BEFORENMBYTES:qr,crypto_box_NONCEBYTES:At,crypto_box_ZEROBYTES:It,crypto_box_BOXZEROBYTES:on,crypto_sign_BYTES:Je,crypto_sign_PUBLICKEYBYTES:Ze,crypto_sign_SECRETKEYBYTES:xr,crypto_sign_SEEDBYTES:yt,crypto_hash_BYTES:xt,gf:r,D:f,L:pt,pack25519:U,unpack25519:h,M:x,A:C,S:K,Z:q,pow2523:W,add:dt,set25519:T,modL:_t,scalarmult:wt,scalarbase:ht};function Yr(w,k){if(w.length!==gt)throw new Error("bad key size");if(k.length!==ct)throw new Error("bad nonce size")}function Nt(w,k){if(w.length!==it)throw new Error("bad public key size");if(k.length!==st)throw new Error("bad secret key size")}function Ke(){for(var w=0;w<arguments.length;w++)if(!(arguments[w]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Xr(w){for(var k=0;k<w.length;k++)w[k]=0}e.randomBytes=function(w){var k=new Uint8Array(w);return n(k,w),k},e.secretbox=function(w,k,I){Ke(w,k,I),Yr(I,k);for(var p=new Uint8Array(wr+w.length),R=new Uint8Array(p.length),V=0;V<w.length;V++)p[V+wr]=w[V];return l(R,p,p.length,k,I),R.subarray(tt)},e.secretbox.open=function(w,k,I){Ke(w,k,I),Yr(I,k);for(var p=new Uint8Array(tt+w.length),R=new Uint8Array(p.length),V=0;V<w.length;V++)p[V+tt]=w[V];return p.length<32||m(R,p,p.length,k,I)!==0?null:R.subarray(wr)},e.secretbox.keyLength=gt,e.secretbox.nonceLength=ct,e.secretbox.overheadLength=tt,e.scalarMult=function(w,k){if(Ke(w,k),w.length!==Ir)throw new Error("bad n size");if(k.length!==nt)throw new Error("bad p size");var I=new Uint8Array(nt);return X(I,w,k),I},e.scalarMult.base=function(w){if(Ke(w),w.length!==Ir)throw new Error("bad n size");var k=new Uint8Array(nt);return ye(k,w),k},e.scalarMult.scalarLength=Ir,e.scalarMult.groupElementLength=nt,e.box=function(w,k,I,p){var R=e.box.before(I,p);return e.secretbox(w,k,R)},e.box.before=function(w,k){Ke(w,k),Nt(w,k);var I=new Uint8Array(qr);return be(I,w,k),I},e.box.after=e.secretbox,e.box.open=function(w,k,I,p){var R=e.box.before(I,p);return e.secretbox.open(w,k,R)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var w=new Uint8Array(it),k=new Uint8Array(st);return pe(w,k),{publicKey:w,secretKey:k}},e.box.keyPair.fromSecretKey=function(w){if(Ke(w),w.length!==st)throw new Error("bad secret key size");var k=new Uint8Array(it);return ye(k,w),{publicKey:k,secretKey:new Uint8Array(w)}},e.box.publicKeyLength=it,e.box.secretKeyLength=st,e.box.sharedKeyLength=qr,e.box.nonceLength=At,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(w,k){if(Ke(w,k),k.length!==xr)throw new Error("bad secret key size");var I=new Uint8Array(Je+w.length);return Et(I,w,w.length,k),I},e.sign.open=function(w,k){if(Ke(w,k),k.length!==Ze)throw new Error("bad public key size");var I=new Uint8Array(w.length),p=Kr(I,w,w.length,k);if(p<0)return null;for(var R=new Uint8Array(p),V=0;V<R.length;V++)R[V]=I[V];return R},e.sign.detached=function(w,k){for(var I=e.sign(w,k),p=new Uint8Array(Je),R=0;R<p.length;R++)p[R]=I[R];return p},e.sign.detached.verify=function(w,k,I){if(Ke(w,k,I),k.length!==Je)throw new Error("bad signature size");if(I.length!==Ze)throw new Error("bad public key size");var p=new Uint8Array(Je+w.length),R=new Uint8Array(Je+w.length),V;for(V=0;V<Je;V++)p[V]=k[V];for(V=0;V<w.length;V++)p[V+Je]=w[V];return Kr(R,p,p.length,I)>=0},e.sign.keyPair=function(){var w=new Uint8Array(Ze),k=new Uint8Array(xr);return Wr(w,k),{publicKey:w,secretKey:k}},e.sign.keyPair.fromSecretKey=function(w){if(Ke(w),w.length!==xr)throw new Error("bad secret key size");for(var k=new Uint8Array(Ze),I=0;I<k.length;I++)k[I]=w[32+I];return{publicKey:k,secretKey:new Uint8Array(w)}},e.sign.keyPair.fromSeed=function(w){if(Ke(w),w.length!==yt)throw new Error("bad seed size");for(var k=new Uint8Array(Ze),I=new Uint8Array(xr),p=0;p<32;p++)I[p]=w[p];return Wr(k,I,!0),{publicKey:k,secretKey:I}},e.sign.publicKeyLength=Ze,e.sign.secretKeyLength=xr,e.sign.seedLength=yt,e.sign.signatureLength=Je,e.hash=function(w){Ke(w);var k=new Uint8Array(xt);return yr(k,w,w.length),k},e.hash.hashLength=xt,e.verify=function(w,k){return Ke(w,k),w.length===0||k.length===0||w.length!==k.length?!1:_(w,0,k,0,w.length)===0},e.setPRNG=function(w){n=w},function(){var w=typeof self<"u"?self.crypto||self.msCrypto:null;if(w&&w.getRandomValues){var k=65536;e.setPRNG(function(I,p){var R,V=new Uint8Array(p);for(R=0;R<p;R+=k)w.getRandomValues(V.subarray(R,R+Math.min(p-R,k)));for(R=0;R<p;R++)I[R]=V[R];Xr(V)})}else typeof rm<"u"&&(w=Ki(),w&&w.randomBytes&&e.setPRNG(function(I,p){var R,V=w.randomBytes(p);for(R=0;R<p;R++)I[R]=V[R];Xr(V)}))}()})(t.exports?t.exports:self.nacl=self.nacl||{})})(d5);var Dh={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Qs;Object.defineProperty(t,"base_encode",{enumerable:!0,get:function(){return e.baseEncode}}),Object.defineProperty(t,"base_decode",{enumerable:!0,get:function(){return e.baseDecode}}),Object.defineProperty(t,"serialize",{enumerable:!0,get:function(){return e.serialize}}),Object.defineProperty(t,"deserialize",{enumerable:!0,get:function(){return e.deserialize}}),Object.defineProperty(t,"BorshError",{enumerable:!0,get:function(){return e.BorshError}}),Object.defineProperty(t,"BinaryWriter",{enumerable:!0,get:function(){return e.BinaryWriter}}),Object.defineProperty(t,"BinaryReader",{enumerable:!0,get:function(){return e.BinaryReader}})})(Dh);var ji={};Object.defineProperty(ji,"__esModule",{value:!0});ji.Assignable=ji.Enum=void 0;class h5{constructor(e){if(Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(r=>{this[r]=e[r],this.enum=r})}}ji.Enum=h5;class p5{constructor(e){Object.keys(e).map(r=>{this[r]=e[r]})}}ji.Assignable=p5;(function(t){var e=H&&H.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyPairEd25519=t.KeyPair=t.PublicKey=t.KeyType=void 0;const r=e(jl),n=Dh,i=ji;var s;(function(d){d[d.ED25519=0]="ED25519"})(s=t.KeyType||(t.KeyType={}));function a(d){switch(d){case s.ED25519:return"ed25519";default:throw new Error(`Unknown key type ${d}`)}}function o(d){switch(d.toLowerCase()){case"ed25519":return s.ED25519;default:throw new Error(`Unknown key type ${d}`)}}class c extends i.Assignable{static from(g){return typeof g=="string"?c.fromString(g):g}static fromString(g){const b=g.split(":");if(b.length===1)return new c({keyType:s.ED25519,data:n.base_decode(b[0])});if(b.length===2)return new c({keyType:o(b[0]),data:n.base_decode(b[1])});throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${a(this.keyType)}:${n.base_encode(this.data)}`}verify(g,b){switch(this.keyType){case s.ED25519:return r.default.sign.detached.verify(g,b,this.data);default:throw new Error(`Unknown key type ${this.keyType}`)}}}t.PublicKey=c;class f{static fromRandom(g){switch(g.toUpperCase()){case"ED25519":return u.fromRandom();default:throw new Error(`Unknown curve ${g}`)}}static fromString(g){const b=g.split(":");if(b.length===1)return new u(b[0]);if(b.length===2)switch(b[0].toUpperCase()){case"ED25519":return new u(b[1]);default:throw new Error(`Unknown curve: ${b[0]}`)}else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}}t.KeyPair=f;class u extends f{constructor(g){super();const b=r.default.sign.keyPair.fromSecretKey(n.base_decode(g));this.publicKey=new c({keyType:s.ED25519,data:b.publicKey}),this.secretKey=g}static fromRandom(){const g=r.default.sign.keyPair();return new u(n.base_encode(g.secretKey))}sign(g){return{signature:r.default.sign.detached(g,n.base_decode(this.secretKey)),publicKey:this.publicKey}}verify(g,b){return this.publicKey.verify(g,b)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}t.KeyPairEd25519=u})(ni);Object.defineProperty(Do,"__esModule",{value:!0});Do.InMemoryKeyStore=void 0;const g5=Ts,y5=ni;class x5 extends g5.KeyStore{constructor(){super(),this.keys={}}async setKey(e,r,n){this.keys[`${r}:${e}`]=n.toString()}async getKey(e,r){const n=this.keys[`${r}:${e}`];return n?y5.KeyPair.fromString(n):null}async removeKey(e,r){delete this.keys[`${r}:${e}`]}async clear(){this.keys={}}async getNetworks(){const e=new Set;return Object.keys(this.keys).forEach(r=>{const n=r.split(":");e.add(n[1])}),Array.from(e.values())}async getAccounts(e){const r=new Array;return Object.keys(this.keys).forEach(n=>{const i=n.split(":");i[i.length-1]===e&&r.push(i.slice(0,i.length-1).join(":"))}),r}toString(){return"InMemoryKeyStore"}}Do.InMemoryKeyStore=x5;var Tf={};Object.defineProperty(Tf,"__esModule",{value:!0});Tf.BrowserLocalStorageKeyStore=void 0;const b5=Ts,m5=ni,v5="near-api-js:keystore:";class w5 extends b5.KeyStore{constructor(e=window.localStorage,r=v5){super(),this.localStorage=e,this.prefix=r}async setKey(e,r,n){this.localStorage.setItem(this.storageKeyForSecretKey(e,r),n.toString())}async getKey(e,r){const n=this.localStorage.getItem(this.storageKeyForSecretKey(e,r));return n?m5.KeyPair.fromString(n):null}async removeKey(e,r){this.localStorage.removeItem(this.storageKeyForSecretKey(e,r))}async clear(){for(const e of this.storageKeys())e.startsWith(this.prefix)&&this.localStorage.removeItem(e)}async getNetworks(){const e=new Set;for(const r of this.storageKeys())if(r.startsWith(this.prefix)){const n=r.substring(this.prefix.length).split(":");e.add(n[1])}return Array.from(e.values())}async getAccounts(e){const r=new Array;for(const n of this.storageKeys())if(n.startsWith(this.prefix)){const i=n.substring(this.prefix.length).split(":");i[1]===e&&r.push(i[0])}return r}storageKeyForSecretKey(e,r){return`${this.prefix}${r}:${e}`}*storageKeys(){for(let e=0;e<this.localStorage.length;e++)yield this.localStorage.key(e)}}Tf.BrowserLocalStorageKeyStore=w5;var kf={};Object.defineProperty(kf,"__esModule",{value:!0});kf.MergeKeyStore=void 0;const _5=Ts;class E5 extends _5.KeyStore{constructor(e,r={writeKeyStoreIndex:0}){super(),this.options=r,this.keyStores=e}async setKey(e,r,n){await this.keyStores[this.options.writeKeyStoreIndex].setKey(e,r,n)}async getKey(e,r){for(const n of this.keyStores){const i=await n.getKey(e,r);if(i)return i}return null}async removeKey(e,r){for(const n of this.keyStores)await n.removeKey(e,r)}async clear(){for(const e of this.keyStores)await e.clear()}async getNetworks(){const e=new Set;for(const r of this.keyStores)for(const n of await r.getNetworks())e.add(n);return Array.from(e)}async getAccounts(e){const r=new Set;for(const n of this.keyStores)for(const i of await n.getAccounts(e))r.add(i);return Array.from(r)}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}kf.MergeKeyStore=E5;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MergeKeyStore=t.BrowserLocalStorageKeyStore=t.InMemoryKeyStore=t.KeyStore=void 0;const e=Ts;Object.defineProperty(t,"KeyStore",{enumerable:!0,get:function(){return e.KeyStore}});const r=Do;Object.defineProperty(t,"InMemoryKeyStore",{enumerable:!0,get:function(){return r.InMemoryKeyStore}});const n=Tf;Object.defineProperty(t,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return n.BrowserLocalStorageKeyStore}});const i=kf;Object.defineProperty(t,"MergeKeyStore",{enumerable:!0,get:function(){return i.MergeKeyStore}})})(M1);var ju={},Ku={},Uh={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getTransactionLastResult=t.Provider=t.IdType=t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=void 0,function(n){n.Unknown="Unknown",n.Pending="Pending",n.Failure="Failure"}(t.ExecutionStatusBasic||(t.ExecutionStatusBasic={})),function(n){n.NotStarted="NotStarted",n.Started="Started",n.Failure="Failure"}(t.FinalExecutionStatusBasic||(t.FinalExecutionStatusBasic={})),function(n){n.Transaction="transaction",n.Receipt="receipt"}(t.IdType||(t.IdType={}));class e{}t.Provider=e;function r(n){if(typeof n.status=="object"&&typeof n.status.SuccessValue=="string"){const i=Buffer.from(n.status.SuccessValue,"base64").toString();try{return JSON.parse(i)}catch{return i}}return null}t.getTransactionLastResult=r})(Uh);var qu={};/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var ya=A5;function A5(t){if(!t)throw new TypeError("argument namespace is required");function e(r){}return e._file=void 0,e._ignored=!0,e._namespace=t,e._traced=!1,e._warned=Object.create(null),e.function=S5,e.property=T5,e}function S5(t,e){if(typeof t!="function")throw new TypeError("argument fn must be a function");return t}function T5(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable")}var Ia={},Kl={},k5={get exports(){return Kl},set exports(t){Kl=t}};/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var P5=C5;function C5(t){if(!t)throw new TypeError("argument namespace is required");function e(r){}return e._file=void 0,e._ignored=!0,e._namespace=t,e._traced=!1,e._warned=Object.create(null),e.function=I5,e.property=N5,e}function I5(t,e){if(typeof t!="function")throw new TypeError("argument fn must be a function");return t}function N5(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable")}var R5=Object.setPrototypeOf||({__proto__:[]}instanceof Array?B5:M5);function B5(t,e){return t.__proto__=e,t}function M5(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=e[r]);return t}const O5={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"(Unused)",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var O1=O5,D5=Xn;Xn.STATUS_CODES=O1;Xn.codes=U5(Xn,O1);Xn.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};Xn.empty={204:!0,205:!0,304:!0};Xn.retry={502:!0,503:!0,504:!0};function U5(t,e){var r=[];return Object.keys(e).forEach(function(i){var s=e[i],a=Number(i);t[a]=s,t[s]=a,t[s.toLowerCase()]=a,r.push(a)}),r}function Xn(t){if(typeof t=="number"){if(!Xn[t])throw new Error("invalid status code: "+t);return t}if(typeof t!="string")throw new TypeError("code must be a number or string");var e=parseInt(t,10);if(!isNaN(e)){if(!Xn[e])throw new Error("invalid status code: "+e);return e}if(e=Xn[t.toLowerCase()],!e)throw new Error('invalid status message: "'+t+'"');return e}/*!
 * toidentifier
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var L5=F5;function F5(t){return t.split(" ").map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("").replace(/[^ _0-9a-z]/gi,"")}/*!
 * http-errors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */(function(t){var e=P5("http-errors"),r=R5,n=D5,i=X1,s=L5;t.exports=o,t.exports.HttpError=c(),t.exports.isHttpError=u(t.exports.HttpError),b(t.exports,n.codes,t.exports.HttpError);function a(_){return Number(String(_).charAt(0)+"00")}function o(){for(var _,y,E=500,A={},M=0;M<arguments.length;M++){var B=arguments[M];if(B instanceof Error){_=B,E=_.status||_.statusCode||E;continue}switch(typeof B){case"string":y=B;break;case"number":E=B;break;case"object":A=B;break}}(typeof E!="number"||!n[E]&&(E<400||E>=600))&&(E=500);var D=o[E]||o[a(E)];_||(_=D?new D(y):new Error(y||n[E]),Error.captureStackTrace(_,o)),(!D||!(_ instanceof D)||_.status!==E)&&(_.expose=E<500,_.status=_.statusCode=E);for(var L in A)L!=="status"&&L!=="statusCode"&&(_[L]=A[L]);return _}function c(){function _(){throw new TypeError("cannot construct abstract class")}return i(_,Error),_}function f(_,y,E){var A=S(y);function M(B){var D=B??n[E],L=new Error(D);return Error.captureStackTrace(L,M),r(L,M.prototype),Object.defineProperty(L,"message",{enumerable:!0,configurable:!0,value:D,writable:!0}),Object.defineProperty(L,"name",{enumerable:!1,configurable:!0,value:A,writable:!0}),L}return i(M,_),g(M,A),M.prototype.status=E,M.prototype.statusCode=E,M.prototype.expose=!0,M}function u(_){return function(E){return!E||typeof E!="object"?!1:E instanceof _?!0:E instanceof Error&&typeof E.expose=="boolean"&&typeof E.statusCode=="number"&&E.status===E.statusCode}}function d(_,y,E){var A=S(y);function M(B){var D=B??n[E],L=new Error(D);return Error.captureStackTrace(L,M),r(L,M.prototype),Object.defineProperty(L,"message",{enumerable:!0,configurable:!0,value:D,writable:!0}),Object.defineProperty(L,"name",{enumerable:!1,configurable:!0,value:A,writable:!0}),L}return i(M,_),g(M,A),M.prototype.status=E,M.prototype.statusCode=E,M.prototype.expose=!1,M}function g(_,y){var E=Object.getOwnPropertyDescriptor(_,"name");E&&E.configurable&&(E.value=y,Object.defineProperty(_,"name",E))}function b(_,y,E){y.forEach(function(M){var B,D=s(n[M]);switch(a(M)){case 400:B=f(E,D,M);break;case 500:B=d(E,D,M);break}B&&(_[M]=B,_[D]=B)}),_["I'mateapot"]=e.function(_.ImATeapot,`"I'mateapot"; use "ImATeapot" instead`)}function S(_){return _.substr(-5)!=="Error"?_+"Error":_}})(k5);var Uo={};Object.defineProperty(Uo,"__esModule",{value:!0});async function j5(t,e,r,n){let i=t;for(let s=0;s<e;s++){const a=await n();if(a)return a;await K5(i),i*=r}return null}Uo.default=j5;function K5(t){return new Promise(e=>setTimeout(e,t))}var Ar={};Object.defineProperty(Ar,"__esModule",{value:!0});Ar.logWarning=Ar.ErrorContext=Ar.TypedError=Ar.ArgumentTypeError=Ar.PositionalArgsError=void 0;class q5 extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}Ar.PositionalArgsError=q5;class $5 extends Error{constructor(e,r,n){super(`Expected ${r} for '${e}' argument, but got '${JSON.stringify(n)}'`)}}Ar.ArgumentTypeError=$5;class H5 extends Error{constructor(e,r,n){super(e),this.type=r||"UntypedError",this.context=n}}Ar.TypedError=H5;class z5{constructor(e){this.transactionHash=e}}Ar.ErrorContext=z5;function G5(...t){process.env.NEAR_NO_LOGS||console.warn(...t)}Ar.logWarning=G5;var xg;function Pf(){if(xg)return Ia;xg=1;var t=H&&H.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.fetchJson=void 0;const e=t(Kl),r=t(Uo),n=Lo(),i=Ar,s=1e3,a=1.5,o=10;async function c(f,u){let d={url:null};typeof f=="string"?d.url=f:d=f;const g=await r.default(s,o,a,async()=>{try{const b=await fetch(d.url,{method:u?"POST":"GET",body:u||void 0,headers:{...d.headers,"Content-Type":"application/json"}});if(!b.ok){if(b.status===503)return i.logWarning(`Retrying HTTP request for ${d.url} as it's not available now`),null;throw e.default(b.status,await b.text())}return b}catch(b){if(b.toString().includes("FetchError")||b.toString().includes("Failed to fetch"))return i.logWarning(`Retrying HTTP request for ${d.url} because of error: ${b}`),null;throw b}});if(!g)throw new n.TypedError(`Exceeded ${o} attempts for ${d.url}.`,"RetriesExceeded");return await g.json()}return Ia.fetchJson=c,Ia}var fn={},ql={},V5={get exports(){return ql},set exports(t){ql=t}};(function(t,e){(function(r,n){t.exports=n()})(H,function(){/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var r=Object.prototype.toString,n=Array.isArray||function(P){return r.call(P)==="[object Array]"};function i(re){return typeof re=="function"}function s(re){return n(re)?"array":typeof re}function a(re){return re.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(re,P){return re!=null&&typeof re=="object"&&P in re}function c(re,P){return re!=null&&typeof re!="object"&&re.hasOwnProperty&&re.hasOwnProperty(P)}var f=RegExp.prototype.test;function u(re,P){return f.call(re,P)}var d=/\S/;function g(re){return!u(d,re)}var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function S(re){return String(re).replace(/[&<>"'`=\/]/g,function(l){return b[l]})}var _=/\s*/,y=/\s+/,E=/\s*=/,A=/\s*\}/,M=/#|\^|\/|>|\{|&|=|!/;function B(re,P){if(!re)return[];var l=!1,m=[],T=[],N=[],O=!1,U=!1,$="",v=0;function h(){if(O&&!U)for(;N.length;)delete T[N.pop()];else N=[];O=!1,U=!1}var C,q,x;function K(Wt){if(typeof Wt=="string"&&(Wt=Wt.split(y,2)),!n(Wt)||Wt.length!==2)throw new Error("Invalid tags: "+Wt);C=new RegExp(a(Wt[0])+"\\s*"),q=new RegExp("\\s*"+a(Wt[1])),x=new RegExp("\\s*"+a("}"+Wt[1]))}K(P||oe.tags);for(var J=new z(re),W,X,ye,pe,be,Qe;!J.eos();){if(W=J.pos,ye=J.scanUntil(C),ye)for(var Ee=0,Ue=ye.length;Ee<Ue;++Ee)pe=ye.charAt(Ee),g(pe)?(N.push(T.length),$+=pe):(U=!0,l=!0,$+=" "),T.push(["text",pe,W,W+1]),W+=1,pe===`
`&&(h(),$="",v=0,l=!1);if(!J.scan(C))break;if(O=!0,X=J.scan(M)||"name",J.scan(_),X==="="?(ye=J.scanUntil(E),J.scan(E),J.scanUntil(q)):X==="{"?(ye=J.scanUntil(x),J.scan(A),J.scanUntil(q),X="&"):ye=J.scanUntil(q),!J.scan(q))throw new Error("Unclosed tag at "+J.pos);if(X==">"?be=[X,ye,W,J.pos,$,v,l]:be=[X,ye,W,J.pos],v++,T.push(be),X==="#"||X==="^")m.push(be);else if(X==="/"){if(Qe=m.pop(),!Qe)throw new Error('Unopened section "'+ye+'" at '+W);if(Qe[1]!==ye)throw new Error('Unclosed section "'+Qe[1]+'" at '+W)}else X==="name"||X==="{"||X==="&"?U=!0:X==="="&&K(ye)}if(h(),Qe=m.pop(),Qe)throw new Error('Unclosed section "'+Qe[1]+'" at '+J.pos);return L(D(T))}function D(re){for(var P=[],l,m,T=0,N=re.length;T<N;++T)l=re[T],l&&(l[0]==="text"&&m&&m[0]==="text"?(m[1]+=l[1],m[3]=l[3]):(P.push(l),m=l));return P}function L(re){for(var P=[],l=P,m=[],T,N,O=0,U=re.length;O<U;++O)switch(T=re[O],T[0]){case"#":case"^":l.push(T),m.push(T),l=T[4]=[];break;case"/":N=m.pop(),N[5]=T[2],l=m.length>0?m[m.length-1][4]:P;break;default:l.push(T)}return P}function z(re){this.string=re,this.tail=re,this.pos=0}z.prototype.eos=function(){return this.tail===""},z.prototype.scan=function(P){var l=this.tail.match(P);if(!l||l.index!==0)return"";var m=l[0];return this.tail=this.tail.substring(m.length),this.pos+=m.length,m},z.prototype.scanUntil=function(P){var l=this.tail.search(P),m;switch(l){case-1:m=this.tail,this.tail="";break;case 0:m="";break;default:m=this.tail.substring(0,l),this.tail=this.tail.substring(l)}return this.pos+=m.length,m};function Y(re,P){this.view=re,this.cache={".":this.view},this.parent=P}Y.prototype.push=function(P){return new Y(P,this)},Y.prototype.lookup=function(P){var l=this.cache,m;if(l.hasOwnProperty(P))m=l[P];else{for(var T=this,N,O,U,$=!1;T;){if(P.indexOf(".")>0)for(N=T.view,O=P.split("."),U=0;N!=null&&U<O.length;)U===O.length-1&&($=o(N,O[U])||c(N,O[U])),N=N[O[U++]];else N=T.view[P],$=o(T.view,P);if($){m=N;break}T=T.parent}l[P]=m}return i(m)&&(m=m.call(this.view)),m};function ie(){this.templateCache={_cache:{},set:function(P,l){this._cache[P]=l},get:function(P){return this._cache[P]},clear:function(){this._cache={}}}}ie.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},ie.prototype.parse=function(P,l){var m=this.templateCache,T=P+":"+(l||oe.tags).join(":"),N=typeof m<"u",O=N?m.get(T):void 0;return O==null&&(O=B(P,l),N&&m.set(T,O)),O},ie.prototype.render=function(P,l,m,T){var N=this.getConfigTags(T),O=this.parse(P,N),U=l instanceof Y?l:new Y(l,void 0);return this.renderTokens(O,U,m,P,T)},ie.prototype.renderTokens=function(P,l,m,T,N){for(var O="",U,$,v,h=0,C=P.length;h<C;++h)v=void 0,U=P[h],$=U[0],$==="#"?v=this.renderSection(U,l,m,T,N):$==="^"?v=this.renderInverted(U,l,m,T,N):$===">"?v=this.renderPartial(U,l,m,N):$==="&"?v=this.unescapedValue(U,l):$==="name"?v=this.escapedValue(U,l,N):$==="text"&&(v=this.rawValue(U)),v!==void 0&&(O+=v);return O},ie.prototype.renderSection=function(P,l,m,T,N){var O=this,U="",$=l.lookup(P[1]);function v(q){return O.render(q,l,m,N)}if($){if(n($))for(var h=0,C=$.length;h<C;++h)U+=this.renderTokens(P[4],l.push($[h]),m,T,N);else if(typeof $=="object"||typeof $=="string"||typeof $=="number")U+=this.renderTokens(P[4],l.push($),m,T,N);else if(i($)){if(typeof T!="string")throw new Error("Cannot use higher-order sections without the original template");$=$.call(l.view,T.slice(P[3],P[5]),v),$!=null&&(U+=$)}else U+=this.renderTokens(P[4],l,m,T,N);return U}},ie.prototype.renderInverted=function(P,l,m,T,N){var O=l.lookup(P[1]);if(!O||n(O)&&O.length===0)return this.renderTokens(P[4],l,m,T,N)},ie.prototype.indentPartial=function(P,l,m){for(var T=l.replace(/[^ \t]/g,""),N=P.split(`
`),O=0;O<N.length;O++)N[O].length&&(O>0||!m)&&(N[O]=T+N[O]);return N.join(`
`)},ie.prototype.renderPartial=function(P,l,m,T){if(m){var N=this.getConfigTags(T),O=i(m)?m(P[1]):m[P[1]];if(O!=null){var U=P[6],$=P[5],v=P[4],h=O;$==0&&v&&(h=this.indentPartial(O,v,U));var C=this.parse(h,N);return this.renderTokens(C,l,m,h,T)}}},ie.prototype.unescapedValue=function(P,l){var m=l.lookup(P[1]);if(m!=null)return m},ie.prototype.escapedValue=function(P,l,m){var T=this.getConfigEscape(m)||oe.escape,N=l.lookup(P[1]);if(N!=null)return typeof N=="number"&&T===oe.escape?String(N):T(N)},ie.prototype.rawValue=function(P){return P[1]},ie.prototype.getConfigTags=function(P){return n(P)?P:P&&typeof P=="object"?P.tags:void 0},ie.prototype.getConfigEscape=function(P){if(P&&typeof P=="object"&&!n(P))return P.escape};var oe={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(re){ge.templateCache=re},get templateCache(){return ge.templateCache}},ge=new ie;return oe.clearCache=function(){return ge.clearCache()},oe.parse=function(P,l){return ge.parse(P,l)},oe.render=function(P,l,m,T){if(typeof P!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+s(P)+'" was given as the first argument for mustache#render(template, view, partials)');return ge.render(P,l,m,T)},oe.escape=S,oe.Scanner=z,oe.Context=Y,oe.Writer=ie,oe})})(V5);const J5={BadUTF16:{name:"BadUTF16",subtypes:[],props:{}},BadUTF8:{name:"BadUTF8",subtypes:[],props:{}},BalanceExceeded:{name:"BalanceExceeded",subtypes:[],props:{}},BreakpointTrap:{name:"BreakpointTrap",subtypes:[],props:{}},CacheError:{name:"CacheError",subtypes:["ReadError","WriteError","DeserializationError","SerializationError"],props:{}},CallIndirectOOB:{name:"CallIndirectOOB",subtypes:[],props:{}},CannotAppendActionToJointPromise:{name:"CannotAppendActionToJointPromise",subtypes:[],props:{}},CannotReturnJointPromise:{name:"CannotReturnJointPromise",subtypes:[],props:{}},CodeDoesNotExist:{name:"CodeDoesNotExist",subtypes:[],props:{account_id:""}},CompilationError:{name:"CompilationError",subtypes:["CodeDoesNotExist","PrepareError","WasmerCompileError"],props:{}},ContractSizeExceeded:{name:"ContractSizeExceeded",subtypes:[],props:{limit:"",size:""}},Deprecated:{name:"Deprecated",subtypes:[],props:{method_name:""}},Deserialization:{name:"Deserialization",subtypes:[],props:{}},DeserializationError:{name:"DeserializationError",subtypes:[],props:{}},EmptyMethodName:{name:"EmptyMethodName",subtypes:[],props:{}},FunctionCallError:{name:"FunctionCallError",subtypes:["CompilationError","LinkError","MethodResolveError","WasmTrap","WasmUnknownError","HostError","EvmError"],props:{}},GasExceeded:{name:"GasExceeded",subtypes:[],props:{}},GasInstrumentation:{name:"GasInstrumentation",subtypes:[],props:{}},GasLimitExceeded:{name:"GasLimitExceeded",subtypes:[],props:{}},GenericTrap:{name:"GenericTrap",subtypes:[],props:{}},GuestPanic:{name:"GuestPanic",subtypes:[],props:{panic_msg:""}},HostError:{name:"HostError",subtypes:["BadUTF16","BadUTF8","GasExceeded","GasLimitExceeded","BalanceExceeded","EmptyMethodName","GuestPanic","IntegerOverflow","InvalidPromiseIndex","CannotAppendActionToJointPromise","CannotReturnJointPromise","InvalidPromiseResultIndex","InvalidRegisterId","IteratorWasInvalidated","MemoryAccessViolation","InvalidReceiptIndex","InvalidIteratorIndex","InvalidAccountId","InvalidMethodName","InvalidPublicKey","ProhibitedInView","NumberOfLogsExceeded","KeyLengthExceeded","ValueLengthExceeded","TotalLogLengthExceeded","NumberPromisesExceeded","NumberInputDataDependenciesExceeded","ReturnedValueLengthExceeded","ContractSizeExceeded","Deprecated"],props:{}},IllegalArithmetic:{name:"IllegalArithmetic",subtypes:[],props:{}},IncorrectCallIndirectSignature:{name:"IncorrectCallIndirectSignature",subtypes:[],props:{}},Instantiate:{name:"Instantiate",subtypes:[],props:{}},IntegerOverflow:{name:"IntegerOverflow",subtypes:[],props:{}},InternalMemoryDeclared:{name:"InternalMemoryDeclared",subtypes:[],props:{}},InvalidAccountId:{name:"InvalidAccountId",subtypes:[],props:{account_id:""}},InvalidIteratorIndex:{name:"InvalidIteratorIndex",subtypes:[],props:{iterator_index:""}},InvalidMethodName:{name:"InvalidMethodName",subtypes:[],props:{}},InvalidPromiseIndex:{name:"InvalidPromiseIndex",subtypes:[],props:{promise_idx:""}},InvalidPromiseResultIndex:{name:"InvalidPromiseResultIndex",subtypes:[],props:{result_idx:""}},InvalidPublicKey:{name:"InvalidPublicKey",subtypes:[],props:{}},InvalidReceiptIndex:{name:"InvalidReceiptIndex",subtypes:[],props:{receipt_index:""}},InvalidRegisterId:{name:"InvalidRegisterId",subtypes:[],props:{register_id:""}},IteratorWasInvalidated:{name:"IteratorWasInvalidated",subtypes:[],props:{iterator_index:""}},KeyLengthExceeded:{name:"KeyLengthExceeded",subtypes:[],props:{length:"",limit:""}},LinkError:{name:"LinkError",subtypes:[],props:{msg:""}},Memory:{name:"Memory",subtypes:[],props:{}},MemoryAccessViolation:{name:"MemoryAccessViolation",subtypes:[],props:{}},MemoryOutOfBounds:{name:"MemoryOutOfBounds",subtypes:[],props:{}},MethodEmptyName:{name:"MethodEmptyName",subtypes:[],props:{}},MethodInvalidSignature:{name:"MethodInvalidSignature",subtypes:[],props:{}},MethodNotFound:{name:"MethodNotFound",subtypes:[],props:{}},MethodResolveError:{name:"MethodResolveError",subtypes:["MethodEmptyName","MethodUTF8Error","MethodNotFound","MethodInvalidSignature"],props:{}},MethodUTF8Error:{name:"MethodUTF8Error",subtypes:[],props:{}},MisalignedAtomicAccess:{name:"MisalignedAtomicAccess",subtypes:[],props:{}},NumberInputDataDependenciesExceeded:{name:"NumberInputDataDependenciesExceeded",subtypes:[],props:{limit:"",number_of_input_data_dependencies:""}},NumberOfLogsExceeded:{name:"NumberOfLogsExceeded",subtypes:[],props:{limit:""}},NumberPromisesExceeded:{name:"NumberPromisesExceeded",subtypes:[],props:{limit:"",number_of_promises:""}},PrepareError:{name:"PrepareError",subtypes:["Serialization","Deserialization","InternalMemoryDeclared","GasInstrumentation","StackHeightInstrumentation","Instantiate","Memory"],props:{}},ProhibitedInView:{name:"ProhibitedInView",subtypes:[],props:{method_name:""}},ReadError:{name:"ReadError",subtypes:[],props:{}},ReturnedValueLengthExceeded:{name:"ReturnedValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},Serialization:{name:"Serialization",subtypes:[],props:{}},SerializationError:{name:"SerializationError",subtypes:[],props:{hash:""}},StackHeightInstrumentation:{name:"StackHeightInstrumentation",subtypes:[],props:{}},StackOverflow:{name:"StackOverflow",subtypes:[],props:{}},TotalLogLengthExceeded:{name:"TotalLogLengthExceeded",subtypes:[],props:{length:"",limit:""}},Unreachable:{name:"Unreachable",subtypes:[],props:{}},ValueLengthExceeded:{name:"ValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},WasmTrap:{name:"WasmTrap",subtypes:["Unreachable","IncorrectCallIndirectSignature","MemoryOutOfBounds","CallIndirectOOB","IllegalArithmetic","MisalignedAtomicAccess","BreakpointTrap","StackOverflow","GenericTrap"],props:{}},WasmUnknownError:{name:"WasmUnknownError",subtypes:[],props:{}},WasmerCompileError:{name:"WasmerCompileError",subtypes:[],props:{msg:""}},WriteError:{name:"WriteError",subtypes:[],props:{}},AccessKeyNotFound:{name:"AccessKeyNotFound",subtypes:[],props:{account_id:"",public_key:""}},AccountAlreadyExists:{name:"AccountAlreadyExists",subtypes:[],props:{account_id:""}},AccountDoesNotExist:{name:"AccountDoesNotExist",subtypes:[],props:{account_id:""}},ActionError:{name:"ActionError",subtypes:["AccountAlreadyExists","AccountDoesNotExist","CreateAccountOnlyByRegistrar","CreateAccountNotAllowed","ActorNoPermission","DeleteKeyDoesNotExist","AddKeyAlreadyExists","DeleteAccountStaking","LackBalanceForState","TriesToUnstake","TriesToStake","InsufficientStake","FunctionCallError","NewReceiptValidationError","OnlyImplicitAccountCreationAllowed"],props:{index:""}},ActionsValidationError:{name:"ActionsValidationError",subtypes:["DeleteActionMustBeFinal","TotalPrepaidGasExceeded","TotalNumberOfActionsExceeded","AddKeyMethodNamesNumberOfBytesExceeded","AddKeyMethodNameLengthExceeded","IntegerOverflow","InvalidAccountId","ContractSizeExceeded","FunctionCallMethodNameLengthExceeded","FunctionCallArgumentsLengthExceeded","UnsuitableStakingKey","FunctionCallZeroAttachedGas"],props:{}},ActorNoPermission:{name:"ActorNoPermission",subtypes:[],props:{account_id:"",actor_id:""}},AddKeyAlreadyExists:{name:"AddKeyAlreadyExists",subtypes:[],props:{account_id:"",public_key:""}},AddKeyMethodNameLengthExceeded:{name:"AddKeyMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},AddKeyMethodNamesNumberOfBytesExceeded:{name:"AddKeyMethodNamesNumberOfBytesExceeded",subtypes:[],props:{limit:"",total_number_of_bytes:""}},BalanceMismatchError:{name:"BalanceMismatchError",subtypes:[],props:{final_accounts_balance:"",final_postponed_receipts_balance:"",incoming_receipts_balance:"",incoming_validator_rewards:"",initial_accounts_balance:"",initial_postponed_receipts_balance:"",new_delayed_receipts_balance:"",other_burnt_amount:"",outgoing_receipts_balance:"",processed_delayed_receipts_balance:"",slashed_burnt_amount:"",tx_burnt_amount:""}},CostOverflow:{name:"CostOverflow",subtypes:[],props:{}},CreateAccountNotAllowed:{name:"CreateAccountNotAllowed",subtypes:[],props:{account_id:"",predecessor_id:""}},CreateAccountOnlyByRegistrar:{name:"CreateAccountOnlyByRegistrar",subtypes:[],props:{account_id:"",predecessor_id:"",registrar_account_id:""}},DeleteAccountStaking:{name:"DeleteAccountStaking",subtypes:[],props:{account_id:""}},DeleteActionMustBeFinal:{name:"DeleteActionMustBeFinal",subtypes:[],props:{}},DeleteKeyDoesNotExist:{name:"DeleteKeyDoesNotExist",subtypes:[],props:{account_id:"",public_key:""}},DepositWithFunctionCall:{name:"DepositWithFunctionCall",subtypes:[],props:{}},Expired:{name:"Expired",subtypes:[],props:{}},FunctionCallArgumentsLengthExceeded:{name:"FunctionCallArgumentsLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallMethodNameLengthExceeded:{name:"FunctionCallMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallZeroAttachedGas:{name:"FunctionCallZeroAttachedGas",subtypes:[],props:{}},InsufficientStake:{name:"InsufficientStake",subtypes:[],props:{account_id:"",minimum_stake:"",stake:""}},InvalidAccessKeyError:{name:"InvalidAccessKeyError",subtypes:["AccessKeyNotFound","ReceiverMismatch","MethodNameMismatch","RequiresFullAccess","NotEnoughAllowance","DepositWithFunctionCall"],props:{}},InvalidChain:{name:"InvalidChain",subtypes:[],props:{}},InvalidDataReceiverId:{name:"InvalidDataReceiverId",subtypes:[],props:{account_id:""}},InvalidNonce:{name:"InvalidNonce",subtypes:[],props:{ak_nonce:"",tx_nonce:""}},InvalidPredecessorId:{name:"InvalidPredecessorId",subtypes:[],props:{account_id:""}},InvalidReceiverId:{name:"InvalidReceiverId",subtypes:[],props:{account_id:""}},InvalidSignature:{name:"InvalidSignature",subtypes:[],props:{}},InvalidSignerId:{name:"InvalidSignerId",subtypes:[],props:{account_id:""}},InvalidTxError:{name:"InvalidTxError",subtypes:["InvalidAccessKeyError","InvalidSignerId","SignerDoesNotExist","InvalidNonce","InvalidReceiverId","InvalidSignature","NotEnoughBalance","LackBalanceForState","CostOverflow","InvalidChain","Expired","ActionsValidation"],props:{}},LackBalanceForState:{name:"LackBalanceForState",subtypes:[],props:{account_id:"",amount:""}},MethodNameMismatch:{name:"MethodNameMismatch",subtypes:[],props:{method_name:""}},NotEnoughAllowance:{name:"NotEnoughAllowance",subtypes:[],props:{account_id:"",allowance:"",cost:"",public_key:""}},NotEnoughBalance:{name:"NotEnoughBalance",subtypes:[],props:{balance:"",cost:"",signer_id:""}},OnlyImplicitAccountCreationAllowed:{name:"OnlyImplicitAccountCreationAllowed",subtypes:[],props:{account_id:""}},ReceiptValidationError:{name:"ReceiptValidationError",subtypes:["InvalidPredecessorId","InvalidReceiverId","InvalidSignerId","InvalidDataReceiverId","ReturnedValueLengthExceeded","NumberInputDataDependenciesExceeded","ActionsValidation"],props:{}},ReceiverMismatch:{name:"ReceiverMismatch",subtypes:[],props:{ak_receiver:"",tx_receiver:""}},RequiresFullAccess:{name:"RequiresFullAccess",subtypes:[],props:{}},SignerDoesNotExist:{name:"SignerDoesNotExist",subtypes:[],props:{signer_id:""}},TotalNumberOfActionsExceeded:{name:"TotalNumberOfActionsExceeded",subtypes:[],props:{limit:"",total_number_of_actions:""}},TotalPrepaidGasExceeded:{name:"TotalPrepaidGasExceeded",subtypes:[],props:{limit:"",total_prepaid_gas:""}},TriesToStake:{name:"TriesToStake",subtypes:[],props:{account_id:"",balance:"",locked:"",stake:""}},TriesToUnstake:{name:"TriesToUnstake",subtypes:[],props:{account_id:""}},TxExecutionError:{name:"TxExecutionError",subtypes:["ActionError","InvalidTxError"],props:{}},UnsuitableStakingKey:{name:"UnsuitableStakingKey",subtypes:[],props:{public_key:""}},Closed:{name:"Closed",subtypes:[],props:{}},InternalError:{name:"InternalError",subtypes:[],props:{}},ServerError:{name:"ServerError",subtypes:["TxExecutionError","Timeout","Closed","InternalError"],props:{}},Timeout:{name:"Timeout",subtypes:[],props:{}}},W5={schema:J5},Y5="Exceeded the maximum amount of gas allowed to burn per contract",X5="Method name is empty",Q5="Wasmer compilation error: {{msg}}",Z5="Smart contract panicked: {{panic_msg}}",e8="Error creating Wasm memory",t8="Exceeded the prepaid gas",r8="Method name is not valid UTF8 string",n8="String encoding is bad UTF-16 sequence",i8="WebAssembly trap: {{msg}}",s8="Gas instrumentation failed or contract has denied instructions.",a8="{{promise_idx}} does not correspond to existing promises",o8="Accessed invalid promise result index: {{result_idx}}",c8="Error happened while deserializing the module",f8="Contract method is not found",u8="Accessed invalid register id: {{register_id}}",l8="VM Logic returned an invalid receipt index: {{receipt_index}}",d8="Method name is empty in contract call",h8="Returning joint promise is currently prohibited",p8="Stack instrumentation failed",g8="Cannot find contract code for account {{account_id}}",y8="Invalid method signature",x8="Integer overflow happened during contract execution",b8="MemoryAccessViolation",m8="Iterator index {{iterator_index}} does not exist",v8="Iterator {{iterator_index}} was invalidated after its creation by performing a mutable operation on trie",w8="VM Logic returned an invalid account id",_8="Error happened while serializing the module",E8="Actions can only be appended to non-joint promise.",A8="Internal memory declaration has been found in the module",S8="Error happened during instantiation",T8="{{method_name}} is not allowed in view calls",k8="VM Logic returned an invalid method name",P8="String encoding is bad UTF-8 sequence",C8="Exceeded the account balance",I8="Wasm contract link error: {{msg}}",N8="VM Logic provided an invalid public key",R8="Actor {{actor_id}} doesn't have permission to account {{account_id}} to complete the action",B8="The account {{account_id}} wouldn't have enough balance to cover storage, required to have {{amount}} yoctoNEAR more",M8="Wrong AccessKey used for transaction: transaction is sent to receiver_id={{tx_receiver}}, but is signed with function call access key that restricted to only use with receiver_id={{ak_receiver}}. Either change receiver_id in your transaction or switch to use a FullAccessKey.",O8="Transaction gas or balance cost is too high",D8="Transaction is not signed with the given public key",U8=`Signer "{{account_id}}" doesn't have access key with the given public_key {{public_key}}`,L8="Sender {{signer_id}} does not have enough balance {{#formatNear}}{{balance}}{{/formatNear}} for operation costing {{#formatNear}}{{cost}}{{/formatNear}}",F8="Access Key {account_id}:{public_key} does not have enough balance {{#formatNear}}{{allowance}}{{/formatNear}} for transaction costing {{#formatNear}}{{cost}}{{/formatNear}}",j8="Transaction has expired",K8="Account {{account_id}} is staking and can not be deleted",q8="Signer {{signer_id}} does not exist",$8="Account {{account_id}} tried to stake {{#formatNear}}{{stake}}{{/formatNear}}, but has staked {{#formatNear}}{{locked}}{{/formatNear}} and only has {{#formatNear}}{{balance}}{{/formatNear}}",H8="The public key {{public_key}} is already used for an existing access key",z8="Invalid signer account ID {{signer_id}} according to requirements",G8="The new account_id {{account_id}} can't be created by {{predecessor_id}}",V8="The transaction contains more then one action, but it was signed with an access key which allows transaction to apply only one specific action. To apply more then one actions TX must be signed with a full access key",J8="Account {{account_id}} is not yet staked, but tried to unstake",W8="Transaction nonce {{tx_nonce}} must be larger than nonce of the used access key {{ak_nonce}}",Y8="Can't create a new account {{account_id}}, because it already exists",X8="Transaction parent block hash doesn't belong to the current chain",Q8="Can't complete the action because account {{account_id}} doesn't exist",Z8="Transaction method name {{method_name}} isn't allowed by the access key",eS="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover the rent",tS="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover it's storage",rS="Invalid receiver account ID {{receiver_id}} according to requirements",nS="Account {{account_id}} tries to remove an access key that doesn't exist",iS="Timeout exceeded",sS="Connection closed",aS={GasLimitExceeded:Y5,MethodEmptyName:X5,WasmerCompileError:Q5,GuestPanic:Z5,Memory:e8,GasExceeded:t8,MethodUTF8Error:r8,BadUTF16:n8,WasmTrap:i8,GasInstrumentation:s8,InvalidPromiseIndex:a8,InvalidPromiseResultIndex:o8,Deserialization:c8,MethodNotFound:f8,InvalidRegisterId:u8,InvalidReceiptIndex:l8,EmptyMethodName:d8,CannotReturnJointPromise:h8,StackHeightInstrumentation:p8,CodeDoesNotExist:g8,MethodInvalidSignature:y8,IntegerOverflow:x8,MemoryAccessViolation:b8,InvalidIteratorIndex:m8,IteratorWasInvalidated:v8,InvalidAccountId:w8,Serialization:_8,CannotAppendActionToJointPromise:E8,InternalMemoryDeclared:A8,Instantiate:S8,ProhibitedInView:T8,InvalidMethodName:k8,BadUTF8:P8,BalanceExceeded:C8,LinkError:I8,InvalidPublicKey:N8,ActorNoPermission:R8,LackBalanceForState:B8,ReceiverMismatch:M8,CostOverflow:O8,InvalidSignature:D8,AccessKeyNotFound:U8,NotEnoughBalance:L8,NotEnoughAllowance:F8,Expired:j8,DeleteAccountStaking:K8,SignerDoesNotExist:q8,TriesToStake:$8,AddKeyAlreadyExists:H8,InvalidSigner:z8,CreateAccountNotAllowed:G8,RequiresFullAccess:V8,TriesToUnstake:J8,InvalidNonce:W8,AccountAlreadyExists:Y8,InvalidChain:X8,AccountDoesNotExist:Q8,MethodNameMismatch:Z8,DeleteAccountHasRent:eS,DeleteAccountHasEnoughBalance:tS,InvalidReceiver:rS,DeleteKeyDoesNotExist:nS,Timeout:iS,Closed:sS};var bg;function Lh(){if(bg)return fn;bg=1;var t=H&&H.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(fn,"__esModule",{value:!0}),fn.getErrorTypeFromErrorMessage=fn.formatError=fn.parseResultError=fn.parseRpcError=fn.ServerError=void 0;const e=t(ql),r=t(W5),n=t(aS),i=$1(),s=Ar,a={formatNear:()=>(y,E)=>i.utils.format.formatNearAmount(E(y))};class o extends s.TypedError{}fn.ServerError=o;class c extends o{}function f(y){const E={},A=g(y,r.default.schema,E,""),M=new o(d(A,E),A);return Object.assign(M,E),M}fn.parseRpcError=f;function u(y){const E=f(y.status.Failure),A=new c;return Object.assign(A,E),A.type=E.type,A.message=E.message,A.transaction_outcome=y.transaction_outcome,A}fn.parseResultError=u;function d(y,E){return typeof n.default[y]=="string"?e.default.render(n.default[y],{...E,...a}):JSON.stringify(E)}fn.formatError=d;function g(y,E,A,M){let B,D,L;for(const z in E){if(_(y[z]))return y[z];if(S(y[z]))B=y[z],D=E[z],L=z;else if(S(y.kind)&&S(y.kind[z]))B=y.kind[z],D=E[z],L=z;else continue}if(B&&D){for(const z of Object.keys(D.props))A[z]=B[z];return g(B,E,A,L)}else return A.kind=y,M}function b(y){switch(!0){case/^account .*? does not exist while viewing$/.test(y):return"AccountDoesNotExist";case/^Account .*? doesn't exist$/.test(y):return"AccountDoesNotExist";case/^access key .*? does not exist while viewing$/.test(y):return"AccessKeyDoesNotExist";case/wasm execution failed with error: FunctionCallError\(CompilationError\(CodeDoesNotExist/.test(y):return"CodeDoesNotExist";case/Transaction nonce \d+ must be larger than nonce of the used access key \d+/.test(y):return"InvalidNonce";default:return"UntypedError"}}fn.getErrorTypeFromErrorMessage=b;function S(y){return Object.prototype.toString.call(y)==="[object Object]"}function _(y){return Object.prototype.toString.call(y)==="[object String]"}return fn}var mg;function oS(){return mg||(mg=1,function(t){var e=H&&H.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcProvider=t.ErrorContext=t.TypedError=void 0;const r=e(ya),n=Uh,i=Pf(),s=Ar;Object.defineProperty(t,"TypedError",{enumerable:!0,get:function(){return s.TypedError}}),Object.defineProperty(t,"ErrorContext",{enumerable:!0,get:function(){return s.ErrorContext}});const a=Qs,o=e(Uo),c=Lh(),f=12,u=500,d=1.5;let g=123;class b extends n.Provider{constructor(_){super(),_!=null&&typeof _=="object"?this.connection=_:(r.default("JsonRpcProvider(url?: string)")("use `JsonRpcProvider(connectionInfo: ConnectionInfo)` instead"),this.connection={url:_})}async status(){return this.sendJsonRpc("status",[])}async sendTransaction(_){const y=_.encode();return this.sendJsonRpc("broadcast_tx_commit",[Buffer.from(y).toString("base64")])}async sendTransactionAsync(_){const y=_.encode();return this.sendJsonRpc("broadcast_tx_async",[Buffer.from(y).toString("base64")])}async txStatus(_,y){return typeof _=="string"?this.txStatusString(_,y):this.txStatusUint8Array(_,y)}async txStatusUint8Array(_,y){return this.sendJsonRpc("tx",[a.baseEncode(_),y])}async txStatusString(_,y){return this.sendJsonRpc("tx",[_,y])}async txStatusReceipts(_,y){return this.sendJsonRpc("EXPERIMENTAL_tx_status",[a.baseEncode(_),y])}async query(..._){let y;if(_.length===1)y=await this.sendJsonRpc("query",_[0]);else{const[E,A]=_;y=await this.sendJsonRpc("query",[E,A])}if(y&&y.error)throw new s.TypedError(`Querying ${_} failed: ${y.error}.
${JSON.stringify(y,null,2)}`,c.getErrorTypeFromErrorMessage(y.error));return y}async block(_){const{finality:y}=_;let{blockId:E}=_;return typeof _!="object"&&(r.default("JsonRpcProvider.block(blockId)")("use `block({ blockId })` or `block({ finality })` instead"),E=_),this.sendJsonRpc("block",{block_id:E,finality:y})}async blockChanges(_){const{finality:y}=_,{blockId:E}=_;return this.sendJsonRpc("EXPERIMENTAL_changes_in_block",{block_id:E,finality:y})}async chunk(_){return this.sendJsonRpc("chunk",[_])}async validators(_){return this.sendJsonRpc("validators",[_])}async experimental_genesisConfig(){return r.default("JsonRpcProvider.experimental_protocolConfig()")("use `experimental_protocolConfig({ sync_checkpoint: 'genesis' })` to fetch the up-to-date or genesis protocol config explicitly"),await this.sendJsonRpc("EXPERIMENTAL_protocol_config",{sync_checkpoint:"genesis"})}async experimental_protocolConfig(_){return await this.sendJsonRpc("EXPERIMENTAL_protocol_config",_)}async experimental_lightClientProof(_){return r.default("JsonRpcProvider.experimental_lightClientProof(request)")("use `lightClientProof` instead"),await this.lightClientProof(_)}async lightClientProof(_){return await this.sendJsonRpc("EXPERIMENTAL_light_client_proof",_)}async accessKeyChanges(_,y){const{finality:E}=y,{blockId:A}=y;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"all_access_key_changes",account_ids:_,block_id:A,finality:E})}async singleAccessKeyChanges(_,y){const{finality:E}=y,{blockId:A}=y;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"single_access_key_changes",keys:_,block_id:A,finality:E})}async accountChanges(_,y){const{finality:E}=y,{blockId:A}=y;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"account_changes",account_ids:_,block_id:A,finality:E})}async contractStateChanges(_,y,E=""){const{finality:A}=y,{blockId:M}=y;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"data_changes",account_ids:_,key_prefix_base64:E,block_id:M,finality:A})}async contractCodeChanges(_,y){const{finality:E}=y,{blockId:A}=y;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"contract_code_changes",account_ids:_,block_id:A,finality:E})}async gasPrice(_){return await this.sendJsonRpc("gas_price",[_])}async sendJsonRpc(_,y){const E=await o.default(u,f,d,async()=>{try{const M={method:_,params:y,id:g++,jsonrpc:"2.0"},B=await i.fetchJson(this.connection,JSON.stringify(M));if(B.error){if(typeof B.error.data=="object")throw typeof B.error.data.error_message=="string"&&typeof B.error.data.error_type=="string"?new s.TypedError(B.error.data.error_message,B.error.data.error_type):c.parseRpcError(B.error.data);{const D=`[${B.error.code}] ${B.error.message}: ${B.error.data}`;throw B.error.data==="Timeout"||D.includes("Timeout error")||D.includes("query has timed out")?new s.TypedError(D,"TimeoutError"):new s.TypedError(D,c.getErrorTypeFromErrorMessage(B.error.data))}}return B}catch(M){if(M.type==="TimeoutError")return process.env.NEAR_NO_LOGS||console.warn(`Retrying request to ${_} as it has timed out`,y),null;throw M}}),{result:A}=E;if(typeof A>"u")throw new s.TypedError(`Exceeded ${f} attempts for request to ${_}.`,"RetriesExceeded");return A}}t.JsonRpcProvider=b}(qu)),qu}var vg;function Lo(){return vg||(vg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorContext=t.TypedError=t.getTransactionLastResult=t.FinalExecutionStatusBasic=t.JsonRpcProvider=t.Provider=void 0;const e=Uh;Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return e.Provider}}),Object.defineProperty(t,"getTransactionLastResult",{enumerable:!0,get:function(){return e.getTransactionLastResult}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return e.FinalExecutionStatusBasic}});const r=oS();Object.defineProperty(t,"JsonRpcProvider",{enumerable:!0,get:function(){return r.JsonRpcProvider}}),Object.defineProperty(t,"TypedError",{enumerable:!0,get:function(){return r.TypedError}}),Object.defineProperty(t,"ErrorContext",{enumerable:!0,get:function(){return r.ErrorContext}})}(Ku)),Ku}var $u={},Fh={},mi={},cS={get exports(){return mi},set exports(t){mi=t}};(function(t){(function(e,r){function n(P,l){if(!P)throw new Error(l||"Assertion failed")}function i(P,l){P.super_=l;var m=function(){};m.prototype=l.prototype,P.prototype=new m,P.prototype.constructor=P}function s(P,l,m){if(s.isBN(P))return P;this.negative=0,this.words=null,this.length=0,this.red=null,P!==null&&((l==="le"||l==="be")&&(m=l,l=10),this._init(P||0,l||10,m||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=Gl.Buffer}catch{}s.isBN=function(l){return l instanceof s?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===s.wordSize&&Array.isArray(l.words)},s.max=function(l,m){return l.cmp(m)>0?l:m},s.min=function(l,m){return l.cmp(m)<0?l:m},s.prototype._init=function(l,m,T){if(typeof l=="number")return this._initNumber(l,m,T);if(typeof l=="object")return this._initArray(l,m,T);m==="hex"&&(m=16),n(m===(m|0)&&m>=2&&m<=36),l=l.toString().replace(/\s+/g,"");var N=0;l[0]==="-"&&(N++,this.negative=1),N<l.length&&(m===16?this._parseHex(l,N,T):(this._parseBase(l,m,N),T==="le"&&this._initArray(this.toArray(),m,T)))},s.prototype._initNumber=function(l,m,T){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(n(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),T==="le"&&this._initArray(this.toArray(),m,T)},s.prototype._initArray=function(l,m,T){if(n(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var O,U,$=0;if(T==="be")for(N=l.length-1,O=0;N>=0;N-=3)U=l[N]|l[N-1]<<8|l[N-2]<<16,this.words[O]|=U<<$&67108863,this.words[O+1]=U>>>26-$&67108863,$+=24,$>=26&&($-=26,O++);else if(T==="le")for(N=0,O=0;N<l.length;N+=3)U=l[N]|l[N+1]<<8|l[N+2]<<16,this.words[O]|=U<<$&67108863,this.words[O+1]=U>>>26-$&67108863,$+=24,$>=26&&($-=26,O++);return this._strip()};function o(P,l){var m=P.charCodeAt(l);if(m>=48&&m<=57)return m-48;if(m>=65&&m<=70)return m-55;if(m>=97&&m<=102)return m-87;n(!1,"Invalid character in "+P)}function c(P,l,m){var T=o(P,m);return m-1>=l&&(T|=o(P,m-1)<<4),T}s.prototype._parseHex=function(l,m,T){this.length=Math.ceil((l.length-m)/6),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var O=0,U=0,$;if(T==="be")for(N=l.length-1;N>=m;N-=2)$=c(l,m,N)<<O,this.words[U]|=$&67108863,O>=18?(O-=18,U+=1,this.words[U]|=$>>>26):O+=8;else{var v=l.length-m;for(N=v%2===0?m+1:m;N<l.length;N+=2)$=c(l,m,N)<<O,this.words[U]|=$&67108863,O>=18?(O-=18,U+=1,this.words[U]|=$>>>26):O+=8}this._strip()};function f(P,l,m,T){for(var N=0,O=0,U=Math.min(P.length,m),$=l;$<U;$++){var v=P.charCodeAt($)-48;N*=T,v>=49?O=v-49+10:v>=17?O=v-17+10:O=v,n(v>=0&&O<T,"Invalid character"),N+=O}return N}s.prototype._parseBase=function(l,m,T){this.words=[0],this.length=1;for(var N=0,O=1;O<=67108863;O*=m)N++;N--,O=O/m|0;for(var U=l.length-T,$=U%N,v=Math.min(U,U-$)+T,h=0,C=T;C<v;C+=N)h=f(l,C,C+N,m),this.imuln(O),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if($!==0){var q=1;for(h=f(l,C,l.length,m),C=0;C<$;C++)q*=m;this.imuln(q),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},s.prototype.copy=function(l){l.words=new Array(this.length);for(var m=0;m<this.length;m++)l.words[m]=this.words[m];l.length=this.length,l.negative=this.negative,l.red=this.red};function u(P,l){P.words=l.words,P.length=l.length,P.negative=l.negative,P.red=l.red}if(s.prototype._move=function(l){u(l,this)},s.prototype.clone=function(){var l=new s(null);return this.copy(l),l},s.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch{s.prototype.inspect=d}else s.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],b=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(l,m){l=l||10,m=m|0||1;var T;if(l===16||l==="hex"){T="";for(var N=0,O=0,U=0;U<this.length;U++){var $=this.words[U],v=(($<<N|O)&16777215).toString(16);O=$>>>24-N&16777215,O!==0||U!==this.length-1?T=g[6-v.length]+v+T:T=v+T,N+=2,N>=26&&(N-=26,U--)}for(O!==0&&(T=O.toString(16)+T);T.length%m!==0;)T="0"+T;return this.negative!==0&&(T="-"+T),T}if(l===(l|0)&&l>=2&&l<=36){var h=b[l],C=S[l];T="";var q=this.clone();for(q.negative=0;!q.isZero();){var x=q.modrn(C).toString(l);q=q.idivn(C),q.isZero()?T=x+T:T=g[h-x.length]+x+T}for(this.isZero()&&(T="0"+T);T.length%m!==0;)T="0"+T;return this.negative!==0&&(T="-"+T),T}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},s.prototype.toJSON=function(){return this.toString(16,2)},a&&(s.prototype.toBuffer=function(l,m){return this.toArrayLike(a,l,m)}),s.prototype.toArray=function(l,m){return this.toArrayLike(Array,l,m)};var _=function(l,m){return l.allocUnsafe?l.allocUnsafe(m):new l(m)};s.prototype.toArrayLike=function(l,m,T){this._strip();var N=this.byteLength(),O=T||Math.max(1,N);n(N<=O,"byte array longer than desired length"),n(O>0,"Requested array length <= 0");var U=_(l,O),$=m==="le"?"LE":"BE";return this["_toArrayLike"+$](U,N),U},s.prototype._toArrayLikeLE=function(l,m){for(var T=0,N=0,O=0,U=0;O<this.length;O++){var $=this.words[O]<<U|N;l[T++]=$&255,T<l.length&&(l[T++]=$>>8&255),T<l.length&&(l[T++]=$>>16&255),U===6?(T<l.length&&(l[T++]=$>>24&255),N=0,U=0):(N=$>>>24,U+=2)}if(T<l.length)for(l[T++]=N;T<l.length;)l[T++]=0},s.prototype._toArrayLikeBE=function(l,m){for(var T=l.length-1,N=0,O=0,U=0;O<this.length;O++){var $=this.words[O]<<U|N;l[T--]=$&255,T>=0&&(l[T--]=$>>8&255),T>=0&&(l[T--]=$>>16&255),U===6?(T>=0&&(l[T--]=$>>24&255),N=0,U=0):(N=$>>>24,U+=2)}if(T>=0)for(l[T--]=N;T>=0;)l[T--]=0},Math.clz32?s.prototype._countBits=function(l){return 32-Math.clz32(l)}:s.prototype._countBits=function(l){var m=l,T=0;return m>=4096&&(T+=13,m>>>=13),m>=64&&(T+=7,m>>>=7),m>=8&&(T+=4,m>>>=4),m>=2&&(T+=2,m>>>=2),T+m},s.prototype._zeroBits=function(l){if(l===0)return 26;var m=l,T=0;return m&8191||(T+=13,m>>>=13),m&127||(T+=7,m>>>=7),m&15||(T+=4,m>>>=4),m&3||(T+=2,m>>>=2),m&1||T++,T},s.prototype.bitLength=function(){var l=this.words[this.length-1],m=this._countBits(l);return(this.length-1)*26+m};function y(P){for(var l=new Array(P.bitLength()),m=0;m<l.length;m++){var T=m/26|0,N=m%26;l[m]=P.words[T]>>>N&1}return l}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,m=0;m<this.length;m++){var T=this._zeroBits(this.words[m]);if(l+=T,T!==26)break}return l},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},s.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var m=0;m<l.length;m++)this.words[m]=this.words[m]|l.words[m];return this._strip()},s.prototype.ior=function(l){return n((this.negative|l.negative)===0),this.iuor(l)},s.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},s.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},s.prototype.iuand=function(l){var m;this.length>l.length?m=l:m=this;for(var T=0;T<m.length;T++)this.words[T]=this.words[T]&l.words[T];return this.length=m.length,this._strip()},s.prototype.iand=function(l){return n((this.negative|l.negative)===0),this.iuand(l)},s.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},s.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},s.prototype.iuxor=function(l){var m,T;this.length>l.length?(m=this,T=l):(m=l,T=this);for(var N=0;N<T.length;N++)this.words[N]=m.words[N]^T.words[N];if(this!==m)for(;N<m.length;N++)this.words[N]=m.words[N];return this.length=m.length,this._strip()},s.prototype.ixor=function(l){return n((this.negative|l.negative)===0),this.iuxor(l)},s.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},s.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},s.prototype.inotn=function(l){n(typeof l=="number"&&l>=0);var m=Math.ceil(l/26)|0,T=l%26;this._expand(m),T>0&&m--;for(var N=0;N<m;N++)this.words[N]=~this.words[N]&67108863;return T>0&&(this.words[N]=~this.words[N]&67108863>>26-T),this._strip()},s.prototype.notn=function(l){return this.clone().inotn(l)},s.prototype.setn=function(l,m){n(typeof l=="number"&&l>=0);var T=l/26|0,N=l%26;return this._expand(T+1),m?this.words[T]=this.words[T]|1<<N:this.words[T]=this.words[T]&~(1<<N),this._strip()},s.prototype.iadd=function(l){var m;if(this.negative!==0&&l.negative===0)return this.negative=0,m=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,m=this.isub(l),l.negative=1,m._normSign();var T,N;this.length>l.length?(T=this,N=l):(T=l,N=this);for(var O=0,U=0;U<N.length;U++)m=(T.words[U]|0)+(N.words[U]|0)+O,this.words[U]=m&67108863,O=m>>>26;for(;O!==0&&U<T.length;U++)m=(T.words[U]|0)+O,this.words[U]=m&67108863,O=m>>>26;if(this.length=T.length,O!==0)this.words[this.length]=O,this.length++;else if(T!==this)for(;U<T.length;U++)this.words[U]=T.words[U];return this},s.prototype.add=function(l){var m;return l.negative!==0&&this.negative===0?(l.negative=0,m=this.sub(l),l.negative^=1,m):l.negative===0&&this.negative!==0?(this.negative=0,m=l.sub(this),this.negative=1,m):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},s.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var m=this.iadd(l);return l.negative=1,m._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var T=this.cmp(l);if(T===0)return this.negative=0,this.length=1,this.words[0]=0,this;var N,O;T>0?(N=this,O=l):(N=l,O=this);for(var U=0,$=0;$<O.length;$++)m=(N.words[$]|0)-(O.words[$]|0)+U,U=m>>26,this.words[$]=m&67108863;for(;U!==0&&$<N.length;$++)m=(N.words[$]|0)+U,U=m>>26,this.words[$]=m&67108863;if(U===0&&$<N.length&&N!==this)for(;$<N.length;$++)this.words[$]=N.words[$];return this.length=Math.max(this.length,$),N!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(l){return this.clone().isub(l)};function E(P,l,m){m.negative=l.negative^P.negative;var T=P.length+l.length|0;m.length=T,T=T-1|0;var N=P.words[0]|0,O=l.words[0]|0,U=N*O,$=U&67108863,v=U/67108864|0;m.words[0]=$;for(var h=1;h<T;h++){for(var C=v>>>26,q=v&67108863,x=Math.min(h,l.length-1),K=Math.max(0,h-P.length+1);K<=x;K++){var J=h-K|0;N=P.words[J]|0,O=l.words[K]|0,U=N*O+q,C+=U/67108864|0,q=U&67108863}m.words[h]=q|0,v=C|0}return v!==0?m.words[h]=v|0:m.length--,m._strip()}var A=function(l,m,T){var N=l.words,O=m.words,U=T.words,$=0,v,h,C,q=N[0]|0,x=q&8191,K=q>>>13,J=N[1]|0,W=J&8191,X=J>>>13,ye=N[2]|0,pe=ye&8191,be=ye>>>13,Qe=N[3]|0,Ee=Qe&8191,Ue=Qe>>>13,Wt=N[4]|0,Tt=Wt&8191,kt=Wt>>>13,yr=N[5]|0,dt=yr&8191,Pt=yr>>>13,Jr=N[6]|0,wt=Jr&8191,ht=Jr>>>13,Wr=N[7]|0,pt=Wr&8191,_t=Wr>>>13,jr=N[8]|0,Et=jr&8191,Ct=jr>>>13,Kr=N[9]|0,gt=Kr&8191,ct=Kr>>>13,wr=O[0]|0,tt=wr&8191,nt=wr>>>13,Ir=O[1]|0,it=Ir&8191,st=Ir>>>13,qr=O[2]|0,At=qr&8191,It=qr>>>13,on=O[3]|0,Je=on&8191,Ze=on>>>13,xr=O[4]|0,yt=xr&8191,xt=xr>>>13,Yr=O[5]|0,Nt=Yr&8191,Ke=Yr>>>13,Xr=O[6]|0,w=Xr&8191,k=Xr>>>13,I=O[7]|0,p=I&8191,R=I>>>13,V=O[8]|0,G=V&8191,ee=V>>>13,fe=O[9]|0,xe=fe&8191,ue=fe>>>13;T.negative=l.negative^m.negative,T.length=19,v=Math.imul(x,tt),h=Math.imul(x,nt),h=h+Math.imul(K,tt)|0,C=Math.imul(K,nt);var Le=($+v|0)+((h&8191)<<13)|0;$=(C+(h>>>13)|0)+(Le>>>26)|0,Le&=67108863,v=Math.imul(W,tt),h=Math.imul(W,nt),h=h+Math.imul(X,tt)|0,C=Math.imul(X,nt),v=v+Math.imul(x,it)|0,h=h+Math.imul(x,st)|0,h=h+Math.imul(K,it)|0,C=C+Math.imul(K,st)|0;var ve=($+v|0)+((h&8191)<<13)|0;$=(C+(h>>>13)|0)+(ve>>>26)|0,ve&=67108863,v=Math.imul(pe,tt),h=Math.imul(pe,nt),h=h+Math.imul(be,tt)|0,C=Math.imul(be,nt),v=v+Math.imul(W,it)|0,h=h+Math.imul(W,st)|0,h=h+Math.imul(X,it)|0,C=C+Math.imul(X,st)|0,v=v+Math.imul(x,At)|0,h=h+Math.imul(x,It)|0,h=h+Math.imul(K,At)|0,C=C+Math.imul(K,It)|0;var Ce=($+v|0)+((h&8191)<<13)|0;$=(C+(h>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,v=Math.imul(Ee,tt),h=Math.imul(Ee,nt),h=h+Math.imul(Ue,tt)|0,C=Math.imul(Ue,nt),v=v+Math.imul(pe,it)|0,h=h+Math.imul(pe,st)|0,h=h+Math.imul(be,it)|0,C=C+Math.imul(be,st)|0,v=v+Math.imul(W,At)|0,h=h+Math.imul(W,It)|0,h=h+Math.imul(X,At)|0,C=C+Math.imul(X,It)|0,v=v+Math.imul(x,Je)|0,h=h+Math.imul(x,Ze)|0,h=h+Math.imul(K,Je)|0,C=C+Math.imul(K,Ze)|0;var Ie=($+v|0)+((h&8191)<<13)|0;$=(C+(h>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,v=Math.imul(Tt,tt),h=Math.imul(Tt,nt),h=h+Math.imul(kt,tt)|0,C=Math.imul(kt,nt),v=v+Math.imul(Ee,it)|0,h=h+Math.imul(Ee,st)|0,h=h+Math.imul(Ue,it)|0,C=C+Math.imul(Ue,st)|0,v=v+Math.imul(pe,At)|0,h=h+Math.imul(pe,It)|0,h=h+Math.imul(be,At)|0,C=C+Math.imul(be,It)|0,v=v+Math.imul(W,Je)|0,h=h+Math.imul(W,Ze)|0,h=h+Math.imul(X,Je)|0,C=C+Math.imul(X,Ze)|0,v=v+Math.imul(x,yt)|0,h=h+Math.imul(x,xt)|0,h=h+Math.imul(K,yt)|0,C=C+Math.imul(K,xt)|0;var Ne=($+v|0)+((h&8191)<<13)|0;$=(C+(h>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,v=Math.imul(dt,tt),h=Math.imul(dt,nt),h=h+Math.imul(Pt,tt)|0,C=Math.imul(Pt,nt),v=v+Math.imul(Tt,it)|0,h=h+Math.imul(Tt,st)|0,h=h+Math.imul(kt,it)|0,C=C+Math.imul(kt,st)|0,v=v+Math.imul(Ee,At)|0,h=h+Math.imul(Ee,It)|0,h=h+Math.imul(Ue,At)|0,C=C+Math.imul(Ue,It)|0,v=v+Math.imul(pe,Je)|0,h=h+Math.imul(pe,Ze)|0,h=h+Math.imul(be,Je)|0,C=C+Math.imul(be,Ze)|0,v=v+Math.imul(W,yt)|0,h=h+Math.imul(W,xt)|0,h=h+Math.imul(X,yt)|0,C=C+Math.imul(X,xt)|0,v=v+Math.imul(x,Nt)|0,h=h+Math.imul(x,Ke)|0,h=h+Math.imul(K,Nt)|0,C=C+Math.imul(K,Ke)|0;var De=($+v|0)+((h&8191)<<13)|0;$=(C+(h>>>13)|0)+(De>>>26)|0,De&=67108863,v=Math.imul(wt,tt),h=Math.imul(wt,nt),h=h+Math.imul(ht,tt)|0,C=Math.imul(ht,nt),v=v+Math.imul(dt,it)|0,h=h+Math.imul(dt,st)|0,h=h+Math.imul(Pt,it)|0,C=C+Math.imul(Pt,st)|0,v=v+Math.imul(Tt,At)|0,h=h+Math.imul(Tt,It)|0,h=h+Math.imul(kt,At)|0,C=C+Math.imul(kt,It)|0,v=v+Math.imul(Ee,Je)|0,h=h+Math.imul(Ee,Ze)|0,h=h+Math.imul(Ue,Je)|0,C=C+Math.imul(Ue,Ze)|0,v=v+Math.imul(pe,yt)|0,h=h+Math.imul(pe,xt)|0,h=h+Math.imul(be,yt)|0,C=C+Math.imul(be,xt)|0,v=v+Math.imul(W,Nt)|0,h=h+Math.imul(W,Ke)|0,h=h+Math.imul(X,Nt)|0,C=C+Math.imul(X,Ke)|0,v=v+Math.imul(x,w)|0,h=h+Math.imul(x,k)|0,h=h+Math.imul(K,w)|0,C=C+Math.imul(K,k)|0;var Re=($+v|0)+((h&8191)<<13)|0;$=(C+(h>>>13)|0)+(Re>>>26)|0,Re&=67108863,v=Math.imul(pt,tt),h=Math.imul(pt,nt),h=h+Math.imul(_t,tt)|0,C=Math.imul(_t,nt),v=v+Math.imul(wt,it)|0,h=h+Math.imul(wt,st)|0,h=h+Math.imul(ht,it)|0,C=C+Math.imul(ht,st)|0,v=v+Math.imul(dt,At)|0,h=h+Math.imul(dt,It)|0,h=h+Math.imul(Pt,At)|0,C=C+Math.imul(Pt,It)|0,v=v+Math.imul(Tt,Je)|0,h=h+Math.imul(Tt,Ze)|0,h=h+Math.imul(kt,Je)|0,C=C+Math.imul(kt,Ze)|0,v=v+Math.imul(Ee,yt)|0,h=h+Math.imul(Ee,xt)|0,h=h+Math.imul(Ue,yt)|0,C=C+Math.imul(Ue,xt)|0,v=v+Math.imul(pe,Nt)|0,h=h+Math.imul(pe,Ke)|0,h=h+Math.imul(be,Nt)|0,C=C+Math.imul(be,Ke)|0,v=v+Math.imul(W,w)|0,h=h+Math.imul(W,k)|0,h=h+Math.imul(X,w)|0,C=C+Math.imul(X,k)|0,v=v+Math.imul(x,p)|0,h=h+Math.imul(x,R)|0,h=h+Math.imul(K,p)|0,C=C+Math.imul(K,R)|0;var Me=($+v|0)+((h&8191)<<13)|0;$=(C+(h>>>13)|0)+(Me>>>26)|0,Me&=67108863,v=Math.imul(Et,tt),h=Math.imul(Et,nt),h=h+Math.imul(Ct,tt)|0,C=Math.imul(Ct,nt),v=v+Math.imul(pt,it)|0,h=h+Math.imul(pt,st)|0,h=h+Math.imul(_t,it)|0,C=C+Math.imul(_t,st)|0,v=v+Math.imul(wt,At)|0,h=h+Math.imul(wt,It)|0,h=h+Math.imul(ht,At)|0,C=C+Math.imul(ht,It)|0,v=v+Math.imul(dt,Je)|0,h=h+Math.imul(dt,Ze)|0,h=h+Math.imul(Pt,Je)|0,C=C+Math.imul(Pt,Ze)|0,v=v+Math.imul(Tt,yt)|0,h=h+Math.imul(Tt,xt)|0,h=h+Math.imul(kt,yt)|0,C=C+Math.imul(kt,xt)|0,v=v+Math.imul(Ee,Nt)|0,h=h+Math.imul(Ee,Ke)|0,h=h+Math.imul(Ue,Nt)|0,C=C+Math.imul(Ue,Ke)|0,v=v+Math.imul(pe,w)|0,h=h+Math.imul(pe,k)|0,h=h+Math.imul(be,w)|0,C=C+Math.imul(be,k)|0,v=v+Math.imul(W,p)|0,h=h+Math.imul(W,R)|0,h=h+Math.imul(X,p)|0,C=C+Math.imul(X,R)|0,v=v+Math.imul(x,G)|0,h=h+Math.imul(x,ee)|0,h=h+Math.imul(K,G)|0,C=C+Math.imul(K,ee)|0;var Be=($+v|0)+((h&8191)<<13)|0;$=(C+(h>>>13)|0)+(Be>>>26)|0,Be&=67108863,v=Math.imul(gt,tt),h=Math.imul(gt,nt),h=h+Math.imul(ct,tt)|0,C=Math.imul(ct,nt),v=v+Math.imul(Et,it)|0,h=h+Math.imul(Et,st)|0,h=h+Math.imul(Ct,it)|0,C=C+Math.imul(Ct,st)|0,v=v+Math.imul(pt,At)|0,h=h+Math.imul(pt,It)|0,h=h+Math.imul(_t,At)|0,C=C+Math.imul(_t,It)|0,v=v+Math.imul(wt,Je)|0,h=h+Math.imul(wt,Ze)|0,h=h+Math.imul(ht,Je)|0,C=C+Math.imul(ht,Ze)|0,v=v+Math.imul(dt,yt)|0,h=h+Math.imul(dt,xt)|0,h=h+Math.imul(Pt,yt)|0,C=C+Math.imul(Pt,xt)|0,v=v+Math.imul(Tt,Nt)|0,h=h+Math.imul(Tt,Ke)|0,h=h+Math.imul(kt,Nt)|0,C=C+Math.imul(kt,Ke)|0,v=v+Math.imul(Ee,w)|0,h=h+Math.imul(Ee,k)|0,h=h+Math.imul(Ue,w)|0,C=C+Math.imul(Ue,k)|0,v=v+Math.imul(pe,p)|0,h=h+Math.imul(pe,R)|0,h=h+Math.imul(be,p)|0,C=C+Math.imul(be,R)|0,v=v+Math.imul(W,G)|0,h=h+Math.imul(W,ee)|0,h=h+Math.imul(X,G)|0,C=C+Math.imul(X,ee)|0,v=v+Math.imul(x,xe)|0,h=h+Math.imul(x,ue)|0,h=h+Math.imul(K,xe)|0,C=C+Math.imul(K,ue)|0;var Ae=($+v|0)+((h&8191)<<13)|0;$=(C+(h>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,v=Math.imul(gt,it),h=Math.imul(gt,st),h=h+Math.imul(ct,it)|0,C=Math.imul(ct,st),v=v+Math.imul(Et,At)|0,h=h+Math.imul(Et,It)|0,h=h+Math.imul(Ct,At)|0,C=C+Math.imul(Ct,It)|0,v=v+Math.imul(pt,Je)|0,h=h+Math.imul(pt,Ze)|0,h=h+Math.imul(_t,Je)|0,C=C+Math.imul(_t,Ze)|0,v=v+Math.imul(wt,yt)|0,h=h+Math.imul(wt,xt)|0,h=h+Math.imul(ht,yt)|0,C=C+Math.imul(ht,xt)|0,v=v+Math.imul(dt,Nt)|0,h=h+Math.imul(dt,Ke)|0,h=h+Math.imul(Pt,Nt)|0,C=C+Math.imul(Pt,Ke)|0,v=v+Math.imul(Tt,w)|0,h=h+Math.imul(Tt,k)|0,h=h+Math.imul(kt,w)|0,C=C+Math.imul(kt,k)|0,v=v+Math.imul(Ee,p)|0,h=h+Math.imul(Ee,R)|0,h=h+Math.imul(Ue,p)|0,C=C+Math.imul(Ue,R)|0,v=v+Math.imul(pe,G)|0,h=h+Math.imul(pe,ee)|0,h=h+Math.imul(be,G)|0,C=C+Math.imul(be,ee)|0,v=v+Math.imul(W,xe)|0,h=h+Math.imul(W,ue)|0,h=h+Math.imul(X,xe)|0,C=C+Math.imul(X,ue)|0;var ke=($+v|0)+((h&8191)<<13)|0;$=(C+(h>>>13)|0)+(ke>>>26)|0,ke&=67108863,v=Math.imul(gt,At),h=Math.imul(gt,It),h=h+Math.imul(ct,At)|0,C=Math.imul(ct,It),v=v+Math.imul(Et,Je)|0,h=h+Math.imul(Et,Ze)|0,h=h+Math.imul(Ct,Je)|0,C=C+Math.imul(Ct,Ze)|0,v=v+Math.imul(pt,yt)|0,h=h+Math.imul(pt,xt)|0,h=h+Math.imul(_t,yt)|0,C=C+Math.imul(_t,xt)|0,v=v+Math.imul(wt,Nt)|0,h=h+Math.imul(wt,Ke)|0,h=h+Math.imul(ht,Nt)|0,C=C+Math.imul(ht,Ke)|0,v=v+Math.imul(dt,w)|0,h=h+Math.imul(dt,k)|0,h=h+Math.imul(Pt,w)|0,C=C+Math.imul(Pt,k)|0,v=v+Math.imul(Tt,p)|0,h=h+Math.imul(Tt,R)|0,h=h+Math.imul(kt,p)|0,C=C+Math.imul(kt,R)|0,v=v+Math.imul(Ee,G)|0,h=h+Math.imul(Ee,ee)|0,h=h+Math.imul(Ue,G)|0,C=C+Math.imul(Ue,ee)|0,v=v+Math.imul(pe,xe)|0,h=h+Math.imul(pe,ue)|0,h=h+Math.imul(be,xe)|0,C=C+Math.imul(be,ue)|0;var we=($+v|0)+((h&8191)<<13)|0;$=(C+(h>>>13)|0)+(we>>>26)|0,we&=67108863,v=Math.imul(gt,Je),h=Math.imul(gt,Ze),h=h+Math.imul(ct,Je)|0,C=Math.imul(ct,Ze),v=v+Math.imul(Et,yt)|0,h=h+Math.imul(Et,xt)|0,h=h+Math.imul(Ct,yt)|0,C=C+Math.imul(Ct,xt)|0,v=v+Math.imul(pt,Nt)|0,h=h+Math.imul(pt,Ke)|0,h=h+Math.imul(_t,Nt)|0,C=C+Math.imul(_t,Ke)|0,v=v+Math.imul(wt,w)|0,h=h+Math.imul(wt,k)|0,h=h+Math.imul(ht,w)|0,C=C+Math.imul(ht,k)|0,v=v+Math.imul(dt,p)|0,h=h+Math.imul(dt,R)|0,h=h+Math.imul(Pt,p)|0,C=C+Math.imul(Pt,R)|0,v=v+Math.imul(Tt,G)|0,h=h+Math.imul(Tt,ee)|0,h=h+Math.imul(kt,G)|0,C=C+Math.imul(kt,ee)|0,v=v+Math.imul(Ee,xe)|0,h=h+Math.imul(Ee,ue)|0,h=h+Math.imul(Ue,xe)|0,C=C+Math.imul(Ue,ue)|0;var Se=($+v|0)+((h&8191)<<13)|0;$=(C+(h>>>13)|0)+(Se>>>26)|0,Se&=67108863,v=Math.imul(gt,yt),h=Math.imul(gt,xt),h=h+Math.imul(ct,yt)|0,C=Math.imul(ct,xt),v=v+Math.imul(Et,Nt)|0,h=h+Math.imul(Et,Ke)|0,h=h+Math.imul(Ct,Nt)|0,C=C+Math.imul(Ct,Ke)|0,v=v+Math.imul(pt,w)|0,h=h+Math.imul(pt,k)|0,h=h+Math.imul(_t,w)|0,C=C+Math.imul(_t,k)|0,v=v+Math.imul(wt,p)|0,h=h+Math.imul(wt,R)|0,h=h+Math.imul(ht,p)|0,C=C+Math.imul(ht,R)|0,v=v+Math.imul(dt,G)|0,h=h+Math.imul(dt,ee)|0,h=h+Math.imul(Pt,G)|0,C=C+Math.imul(Pt,ee)|0,v=v+Math.imul(Tt,xe)|0,h=h+Math.imul(Tt,ue)|0,h=h+Math.imul(kt,xe)|0,C=C+Math.imul(kt,ue)|0;var Te=($+v|0)+((h&8191)<<13)|0;$=(C+(h>>>13)|0)+(Te>>>26)|0,Te&=67108863,v=Math.imul(gt,Nt),h=Math.imul(gt,Ke),h=h+Math.imul(ct,Nt)|0,C=Math.imul(ct,Ke),v=v+Math.imul(Et,w)|0,h=h+Math.imul(Et,k)|0,h=h+Math.imul(Ct,w)|0,C=C+Math.imul(Ct,k)|0,v=v+Math.imul(pt,p)|0,h=h+Math.imul(pt,R)|0,h=h+Math.imul(_t,p)|0,C=C+Math.imul(_t,R)|0,v=v+Math.imul(wt,G)|0,h=h+Math.imul(wt,ee)|0,h=h+Math.imul(ht,G)|0,C=C+Math.imul(ht,ee)|0,v=v+Math.imul(dt,xe)|0,h=h+Math.imul(dt,ue)|0,h=h+Math.imul(Pt,xe)|0,C=C+Math.imul(Pt,ue)|0;var _e=($+v|0)+((h&8191)<<13)|0;$=(C+(h>>>13)|0)+(_e>>>26)|0,_e&=67108863,v=Math.imul(gt,w),h=Math.imul(gt,k),h=h+Math.imul(ct,w)|0,C=Math.imul(ct,k),v=v+Math.imul(Et,p)|0,h=h+Math.imul(Et,R)|0,h=h+Math.imul(Ct,p)|0,C=C+Math.imul(Ct,R)|0,v=v+Math.imul(pt,G)|0,h=h+Math.imul(pt,ee)|0,h=h+Math.imul(_t,G)|0,C=C+Math.imul(_t,ee)|0,v=v+Math.imul(wt,xe)|0,h=h+Math.imul(wt,ue)|0,h=h+Math.imul(ht,xe)|0,C=C+Math.imul(ht,ue)|0;var Q=($+v|0)+((h&8191)<<13)|0;$=(C+(h>>>13)|0)+(Q>>>26)|0,Q&=67108863,v=Math.imul(gt,p),h=Math.imul(gt,R),h=h+Math.imul(ct,p)|0,C=Math.imul(ct,R),v=v+Math.imul(Et,G)|0,h=h+Math.imul(Et,ee)|0,h=h+Math.imul(Ct,G)|0,C=C+Math.imul(Ct,ee)|0,v=v+Math.imul(pt,xe)|0,h=h+Math.imul(pt,ue)|0,h=h+Math.imul(_t,xe)|0,C=C+Math.imul(_t,ue)|0;var Z=($+v|0)+((h&8191)<<13)|0;$=(C+(h>>>13)|0)+(Z>>>26)|0,Z&=67108863,v=Math.imul(gt,G),h=Math.imul(gt,ee),h=h+Math.imul(ct,G)|0,C=Math.imul(ct,ee),v=v+Math.imul(Et,xe)|0,h=h+Math.imul(Et,ue)|0,h=h+Math.imul(Ct,xe)|0,C=C+Math.imul(Ct,ue)|0;var ce=($+v|0)+((h&8191)<<13)|0;$=(C+(h>>>13)|0)+(ce>>>26)|0,ce&=67108863,v=Math.imul(gt,xe),h=Math.imul(gt,ue),h=h+Math.imul(ct,xe)|0,C=Math.imul(ct,ue);var ne=($+v|0)+((h&8191)<<13)|0;return $=(C+(h>>>13)|0)+(ne>>>26)|0,ne&=67108863,U[0]=Le,U[1]=ve,U[2]=Ce,U[3]=Ie,U[4]=Ne,U[5]=De,U[6]=Re,U[7]=Me,U[8]=Be,U[9]=Ae,U[10]=ke,U[11]=we,U[12]=Se,U[13]=Te,U[14]=_e,U[15]=Q,U[16]=Z,U[17]=ce,U[18]=ne,$!==0&&(U[19]=$,T.length++),T};Math.imul||(A=E);function M(P,l,m){m.negative=l.negative^P.negative,m.length=P.length+l.length;for(var T=0,N=0,O=0;O<m.length-1;O++){var U=N;N=0;for(var $=T&67108863,v=Math.min(O,l.length-1),h=Math.max(0,O-P.length+1);h<=v;h++){var C=O-h,q=P.words[C]|0,x=l.words[h]|0,K=q*x,J=K&67108863;U=U+(K/67108864|0)|0,J=J+$|0,$=J&67108863,U=U+(J>>>26)|0,N+=U>>>26,U&=67108863}m.words[O]=$,T=U,U=N}return T!==0?m.words[O]=T:m.length--,m._strip()}function B(P,l,m){return M(P,l,m)}s.prototype.mulTo=function(l,m){var T,N=this.length+l.length;return this.length===10&&l.length===10?T=A(this,l,m):N<63?T=E(this,l,m):N<1024?T=M(this,l,m):T=B(this,l,m),T},s.prototype.mul=function(l){var m=new s(null);return m.words=new Array(this.length+l.length),this.mulTo(l,m)},s.prototype.mulf=function(l){var m=new s(null);return m.words=new Array(this.length+l.length),B(this,l,m)},s.prototype.imul=function(l){return this.clone().mulTo(l,this)},s.prototype.imuln=function(l){var m=l<0;m&&(l=-l),n(typeof l=="number"),n(l<67108864);for(var T=0,N=0;N<this.length;N++){var O=(this.words[N]|0)*l,U=(O&67108863)+(T&67108863);T>>=26,T+=O/67108864|0,T+=U>>>26,this.words[N]=U&67108863}return T!==0&&(this.words[N]=T,this.length++),m?this.ineg():this},s.prototype.muln=function(l){return this.clone().imuln(l)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(l){var m=y(l);if(m.length===0)return new s(1);for(var T=this,N=0;N<m.length&&m[N]===0;N++,T=T.sqr());if(++N<m.length)for(var O=T.sqr();N<m.length;N++,O=O.sqr())m[N]!==0&&(T=T.mul(O));return T},s.prototype.iushln=function(l){n(typeof l=="number"&&l>=0);var m=l%26,T=(l-m)/26,N=67108863>>>26-m<<26-m,O;if(m!==0){var U=0;for(O=0;O<this.length;O++){var $=this.words[O]&N,v=(this.words[O]|0)-$<<m;this.words[O]=v|U,U=$>>>26-m}U&&(this.words[O]=U,this.length++)}if(T!==0){for(O=this.length-1;O>=0;O--)this.words[O+T]=this.words[O];for(O=0;O<T;O++)this.words[O]=0;this.length+=T}return this._strip()},s.prototype.ishln=function(l){return n(this.negative===0),this.iushln(l)},s.prototype.iushrn=function(l,m,T){n(typeof l=="number"&&l>=0);var N;m?N=(m-m%26)/26:N=0;var O=l%26,U=Math.min((l-O)/26,this.length),$=67108863^67108863>>>O<<O,v=T;if(N-=U,N=Math.max(0,N),v){for(var h=0;h<U;h++)v.words[h]=this.words[h];v.length=U}if(U!==0)if(this.length>U)for(this.length-=U,h=0;h<this.length;h++)this.words[h]=this.words[h+U];else this.words[0]=0,this.length=1;var C=0;for(h=this.length-1;h>=0&&(C!==0||h>=N);h--){var q=this.words[h]|0;this.words[h]=C<<26-O|q>>>O,C=q&$}return v&&C!==0&&(v.words[v.length++]=C),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(l,m,T){return n(this.negative===0),this.iushrn(l,m,T)},s.prototype.shln=function(l){return this.clone().ishln(l)},s.prototype.ushln=function(l){return this.clone().iushln(l)},s.prototype.shrn=function(l){return this.clone().ishrn(l)},s.prototype.ushrn=function(l){return this.clone().iushrn(l)},s.prototype.testn=function(l){n(typeof l=="number"&&l>=0);var m=l%26,T=(l-m)/26,N=1<<m;if(this.length<=T)return!1;var O=this.words[T];return!!(O&N)},s.prototype.imaskn=function(l){n(typeof l=="number"&&l>=0);var m=l%26,T=(l-m)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=T)return this;if(m!==0&&T++,this.length=Math.min(T,this.length),m!==0){var N=67108863^67108863>>>m<<m;this.words[this.length-1]&=N}return this._strip()},s.prototype.maskn=function(l){return this.clone().imaskn(l)},s.prototype.iaddn=function(l){return n(typeof l=="number"),n(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<=l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},s.prototype._iaddn=function(l){this.words[0]+=l;for(var m=0;m<this.length&&this.words[m]>=67108864;m++)this.words[m]-=67108864,m===this.length-1?this.words[m+1]=1:this.words[m+1]++;return this.length=Math.max(this.length,m+1),this},s.prototype.isubn=function(l){if(n(typeof l=="number"),n(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var m=0;m<this.length&&this.words[m]<0;m++)this.words[m]+=67108864,this.words[m+1]-=1;return this._strip()},s.prototype.addn=function(l){return this.clone().iaddn(l)},s.prototype.subn=function(l){return this.clone().isubn(l)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(l,m,T){var N=l.length+T,O;this._expand(N);var U,$=0;for(O=0;O<l.length;O++){U=(this.words[O+T]|0)+$;var v=(l.words[O]|0)*m;U-=v&67108863,$=(U>>26)-(v/67108864|0),this.words[O+T]=U&67108863}for(;O<this.length-T;O++)U=(this.words[O+T]|0)+$,$=U>>26,this.words[O+T]=U&67108863;if($===0)return this._strip();for(n($===-1),$=0,O=0;O<this.length;O++)U=-(this.words[O]|0)+$,$=U>>26,this.words[O]=U&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(l,m){var T=this.length-l.length,N=this.clone(),O=l,U=O.words[O.length-1]|0,$=this._countBits(U);T=26-$,T!==0&&(O=O.ushln(T),N.iushln(T),U=O.words[O.length-1]|0);var v=N.length-O.length,h;if(m!=="mod"){h=new s(null),h.length=v+1,h.words=new Array(h.length);for(var C=0;C<h.length;C++)h.words[C]=0}var q=N.clone()._ishlnsubmul(O,1,v);q.negative===0&&(N=q,h&&(h.words[v]=1));for(var x=v-1;x>=0;x--){var K=(N.words[O.length+x]|0)*67108864+(N.words[O.length+x-1]|0);for(K=Math.min(K/U|0,67108863),N._ishlnsubmul(O,K,x);N.negative!==0;)K--,N.negative=0,N._ishlnsubmul(O,1,x),N.isZero()||(N.negative^=1);h&&(h.words[x]=K)}return h&&h._strip(),N._strip(),m!=="div"&&T!==0&&N.iushrn(T),{div:h||null,mod:N}},s.prototype.divmod=function(l,m,T){if(n(!l.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var N,O,U;return this.negative!==0&&l.negative===0?(U=this.neg().divmod(l,m),m!=="mod"&&(N=U.div.neg()),m!=="div"&&(O=U.mod.neg(),T&&O.negative!==0&&O.iadd(l)),{div:N,mod:O}):this.negative===0&&l.negative!==0?(U=this.divmod(l.neg(),m),m!=="mod"&&(N=U.div.neg()),{div:N,mod:U.mod}):this.negative&l.negative?(U=this.neg().divmod(l.neg(),m),m!=="div"&&(O=U.mod.neg(),T&&O.negative!==0&&O.isub(l)),{div:U.div,mod:O}):l.length>this.length||this.cmp(l)<0?{div:new s(0),mod:this}:l.length===1?m==="div"?{div:this.divn(l.words[0]),mod:null}:m==="mod"?{div:null,mod:new s(this.modrn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new s(this.modrn(l.words[0]))}:this._wordDiv(l,m)},s.prototype.div=function(l){return this.divmod(l,"div",!1).div},s.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},s.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},s.prototype.divRound=function(l){var m=this.divmod(l);if(m.mod.isZero())return m.div;var T=m.div.negative!==0?m.mod.isub(l):m.mod,N=l.ushrn(1),O=l.andln(1),U=T.cmp(N);return U<0||O===1&&U===0?m.div:m.div.negative!==0?m.div.isubn(1):m.div.iaddn(1)},s.prototype.modrn=function(l){var m=l<0;m&&(l=-l),n(l<=67108863);for(var T=(1<<26)%l,N=0,O=this.length-1;O>=0;O--)N=(T*N+(this.words[O]|0))%l;return m?-N:N},s.prototype.modn=function(l){return this.modrn(l)},s.prototype.idivn=function(l){var m=l<0;m&&(l=-l),n(l<=67108863);for(var T=0,N=this.length-1;N>=0;N--){var O=(this.words[N]|0)+T*67108864;this.words[N]=O/l|0,T=O%l}return this._strip(),m?this.ineg():this},s.prototype.divn=function(l){return this.clone().idivn(l)},s.prototype.egcd=function(l){n(l.negative===0),n(!l.isZero());var m=this,T=l.clone();m.negative!==0?m=m.umod(l):m=m.clone();for(var N=new s(1),O=new s(0),U=new s(0),$=new s(1),v=0;m.isEven()&&T.isEven();)m.iushrn(1),T.iushrn(1),++v;for(var h=T.clone(),C=m.clone();!m.isZero();){for(var q=0,x=1;!(m.words[0]&x)&&q<26;++q,x<<=1);if(q>0)for(m.iushrn(q);q-- >0;)(N.isOdd()||O.isOdd())&&(N.iadd(h),O.isub(C)),N.iushrn(1),O.iushrn(1);for(var K=0,J=1;!(T.words[0]&J)&&K<26;++K,J<<=1);if(K>0)for(T.iushrn(K);K-- >0;)(U.isOdd()||$.isOdd())&&(U.iadd(h),$.isub(C)),U.iushrn(1),$.iushrn(1);m.cmp(T)>=0?(m.isub(T),N.isub(U),O.isub($)):(T.isub(m),U.isub(N),$.isub(O))}return{a:U,b:$,gcd:T.iushln(v)}},s.prototype._invmp=function(l){n(l.negative===0),n(!l.isZero());var m=this,T=l.clone();m.negative!==0?m=m.umod(l):m=m.clone();for(var N=new s(1),O=new s(0),U=T.clone();m.cmpn(1)>0&&T.cmpn(1)>0;){for(var $=0,v=1;!(m.words[0]&v)&&$<26;++$,v<<=1);if($>0)for(m.iushrn($);$-- >0;)N.isOdd()&&N.iadd(U),N.iushrn(1);for(var h=0,C=1;!(T.words[0]&C)&&h<26;++h,C<<=1);if(h>0)for(T.iushrn(h);h-- >0;)O.isOdd()&&O.iadd(U),O.iushrn(1);m.cmp(T)>=0?(m.isub(T),N.isub(O)):(T.isub(m),O.isub(N))}var q;return m.cmpn(1)===0?q=N:q=O,q.cmpn(0)<0&&q.iadd(l),q},s.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var m=this.clone(),T=l.clone();m.negative=0,T.negative=0;for(var N=0;m.isEven()&&T.isEven();N++)m.iushrn(1),T.iushrn(1);do{for(;m.isEven();)m.iushrn(1);for(;T.isEven();)T.iushrn(1);var O=m.cmp(T);if(O<0){var U=m;m=T,T=U}else if(O===0||T.cmpn(1)===0)break;m.isub(T)}while(!0);return T.iushln(N)},s.prototype.invm=function(l){return this.egcd(l).a.umod(l)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(l){return this.words[0]&l},s.prototype.bincn=function(l){n(typeof l=="number");var m=l%26,T=(l-m)/26,N=1<<m;if(this.length<=T)return this._expand(T+1),this.words[T]|=N,this;for(var O=N,U=T;O!==0&&U<this.length;U++){var $=this.words[U]|0;$+=O,O=$>>>26,$&=67108863,this.words[U]=$}return O!==0&&(this.words[U]=O,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(l){var m=l<0;if(this.negative!==0&&!m)return-1;if(this.negative===0&&m)return 1;this._strip();var T;if(this.length>1)T=1;else{m&&(l=-l),n(l<=67108863,"Number is too big");var N=this.words[0]|0;T=N===l?0:N<l?-1:1}return this.negative!==0?-T|0:T},s.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var m=this.ucmp(l);return this.negative!==0?-m|0:m},s.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var m=0,T=this.length-1;T>=0;T--){var N=this.words[T]|0,O=l.words[T]|0;if(N!==O){N<O?m=-1:N>O&&(m=1);break}}return m},s.prototype.gtn=function(l){return this.cmpn(l)===1},s.prototype.gt=function(l){return this.cmp(l)===1},s.prototype.gten=function(l){return this.cmpn(l)>=0},s.prototype.gte=function(l){return this.cmp(l)>=0},s.prototype.ltn=function(l){return this.cmpn(l)===-1},s.prototype.lt=function(l){return this.cmp(l)===-1},s.prototype.lten=function(l){return this.cmpn(l)<=0},s.prototype.lte=function(l){return this.cmp(l)<=0},s.prototype.eqn=function(l){return this.cmpn(l)===0},s.prototype.eq=function(l){return this.cmp(l)===0},s.red=function(l){return new ge(l)},s.prototype.toRed=function(l){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(l){return this.red=l,this},s.prototype.forceRed=function(l){return n(!this.red,"Already a number in reduction context"),this._forceRed(l)},s.prototype.redAdd=function(l){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},s.prototype.redIAdd=function(l){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},s.prototype.redSub=function(l){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},s.prototype.redISub=function(l){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},s.prototype.redShl=function(l){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},s.prototype.redMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},s.prototype.redIMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(l){return n(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var D={k256:null,p224:null,p192:null,p25519:null};function L(P,l){this.name=P,this.p=new s(l,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}L.prototype._tmp=function(){var l=new s(null);return l.words=new Array(Math.ceil(this.n/13)),l},L.prototype.ireduce=function(l){var m=l,T;do this.split(m,this.tmp),m=this.imulK(m),m=m.iadd(this.tmp),T=m.bitLength();while(T>this.n);var N=T<this.n?-1:m.ucmp(this.p);return N===0?(m.words[0]=0,m.length=1):N>0?m.isub(this.p):m.strip!==void 0?m.strip():m._strip(),m},L.prototype.split=function(l,m){l.iushrn(this.n,0,m)},L.prototype.imulK=function(l){return l.imul(this.k)};function z(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(z,L),z.prototype.split=function(l,m){for(var T=4194303,N=Math.min(l.length,9),O=0;O<N;O++)m.words[O]=l.words[O];if(m.length=N,l.length<=9){l.words[0]=0,l.length=1;return}var U=l.words[9];for(m.words[m.length++]=U&T,O=10;O<l.length;O++){var $=l.words[O]|0;l.words[O-10]=($&T)<<4|U>>>22,U=$}U>>>=22,l.words[O-10]=U,U===0&&l.length>10?l.length-=10:l.length-=9},z.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var m=0,T=0;T<l.length;T++){var N=l.words[T]|0;m+=N*977,l.words[T]=m&67108863,m=N*64+(m/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function Y(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(Y,L);function ie(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(ie,L);function oe(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(oe,L),oe.prototype.imulK=function(l){for(var m=0,T=0;T<l.length;T++){var N=(l.words[T]|0)*19+m,O=N&67108863;N>>>=26,l.words[T]=O,m=N}return m!==0&&(l.words[l.length++]=m),l},s._prime=function(l){if(D[l])return D[l];var m;if(l==="k256")m=new z;else if(l==="p224")m=new Y;else if(l==="p192")m=new ie;else if(l==="p25519")m=new oe;else throw new Error("Unknown prime "+l);return D[l]=m,m};function ge(P){if(typeof P=="string"){var l=s._prime(P);this.m=l.p,this.prime=l}else n(P.gtn(1),"modulus must be greater than 1"),this.m=P,this.prime=null}ge.prototype._verify1=function(l){n(l.negative===0,"red works only with positives"),n(l.red,"red works only with red numbers")},ge.prototype._verify2=function(l,m){n((l.negative|m.negative)===0,"red works only with positives"),n(l.red&&l.red===m.red,"red works only with red numbers")},ge.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):(u(l,l.umod(this.m)._forceRed(this)),l)},ge.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},ge.prototype.add=function(l,m){this._verify2(l,m);var T=l.add(m);return T.cmp(this.m)>=0&&T.isub(this.m),T._forceRed(this)},ge.prototype.iadd=function(l,m){this._verify2(l,m);var T=l.iadd(m);return T.cmp(this.m)>=0&&T.isub(this.m),T},ge.prototype.sub=function(l,m){this._verify2(l,m);var T=l.sub(m);return T.cmpn(0)<0&&T.iadd(this.m),T._forceRed(this)},ge.prototype.isub=function(l,m){this._verify2(l,m);var T=l.isub(m);return T.cmpn(0)<0&&T.iadd(this.m),T},ge.prototype.shl=function(l,m){return this._verify1(l),this.imod(l.ushln(m))},ge.prototype.imul=function(l,m){return this._verify2(l,m),this.imod(l.imul(m))},ge.prototype.mul=function(l,m){return this._verify2(l,m),this.imod(l.mul(m))},ge.prototype.isqr=function(l){return this.imul(l,l.clone())},ge.prototype.sqr=function(l){return this.mul(l,l)},ge.prototype.sqrt=function(l){if(l.isZero())return l.clone();var m=this.m.andln(3);if(n(m%2===1),m===3){var T=this.m.add(new s(1)).iushrn(2);return this.pow(l,T)}for(var N=this.m.subn(1),O=0;!N.isZero()&&N.andln(1)===0;)O++,N.iushrn(1);n(!N.isZero());var U=new s(1).toRed(this),$=U.redNeg(),v=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);this.pow(h,v).cmp($)!==0;)h.redIAdd($);for(var C=this.pow(h,N),q=this.pow(l,N.addn(1).iushrn(1)),x=this.pow(l,N),K=O;x.cmp(U)!==0;){for(var J=x,W=0;J.cmp(U)!==0;W++)J=J.redSqr();n(W<K);var X=this.pow(C,new s(1).iushln(K-W-1));q=q.redMul(X),C=X.redSqr(),x=x.redMul(C),K=W}return q},ge.prototype.invm=function(l){var m=l._invmp(this.m);return m.negative!==0?(m.negative=0,this.imod(m).redNeg()):this.imod(m)},ge.prototype.pow=function(l,m){if(m.isZero())return new s(1).toRed(this);if(m.cmpn(1)===0)return l.clone();var T=4,N=new Array(1<<T);N[0]=new s(1).toRed(this),N[1]=l;for(var O=2;O<N.length;O++)N[O]=this.mul(N[O-1],l);var U=N[0],$=0,v=0,h=m.bitLength()%26;for(h===0&&(h=26),O=m.length-1;O>=0;O--){for(var C=m.words[O],q=h-1;q>=0;q--){var x=C>>q&1;if(U!==N[0]&&(U=this.sqr(U)),x===0&&$===0){v=0;continue}$<<=1,$|=x,v++,!(v!==T&&(O!==0||q!==0))&&(U=this.mul(U,N[$]),v=0,$=0)}h=26}return U},ge.prototype.convertTo=function(l){var m=l.umod(this.m);return m===l?m.clone():m},ge.prototype.convertFrom=function(l){var m=l.clone();return m.red=null,m},s.mont=function(l){return new re(l)};function re(P){ge.call(this,P),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(re,ge),re.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},re.prototype.convertFrom=function(l){var m=this.imod(l.mul(this.rinv));return m.red=null,m},re.prototype.imul=function(l,m){if(l.isZero()||m.isZero())return l.words[0]=0,l.length=1,l;var T=l.imul(m),N=T.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),O=T.isub(N).iushrn(this.shift),U=O;return O.cmp(this.m)>=0?U=O.isub(this.m):O.cmpn(0)<0&&(U=O.iadd(this.m)),U._forceRed(this)},re.prototype.mul=function(l,m){if(l.isZero()||m.isZero())return new s(0)._forceRed(this);var T=l.mul(m),N=T.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),O=T.isub(N).iushrn(this.shift),U=O;return O.cmp(this.m)>=0?U=O.isub(this.m):O.cmpn(0)<0&&(U=O.iadd(this.m)),U._forceRed(this)},re.prototype.invm=function(l){var m=this.imod(l._invmp(this.m).mul(this.r2));return m._forceRed(this)}})(t,H)})(cS);(function(t){var e=H&&H.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseNearAmount=t.formatNearAmount=t.NEAR_NOMINATION=t.NEAR_NOMINATION_EXP=void 0;const r=e(mi);t.NEAR_NOMINATION_EXP=24,t.NEAR_NOMINATION=new r.default("10",10).pow(new r.default(t.NEAR_NOMINATION_EXP,10));const n=[],i=new r.default(10);for(let d=0,g=new r.default(5);d<t.NEAR_NOMINATION_EXP;d++,g=g.mul(i))n[d]=g;function s(d,g=t.NEAR_NOMINATION_EXP){const b=new r.default(d,10);if(g!==t.NEAR_NOMINATION_EXP){const y=t.NEAR_NOMINATION_EXP-g-1;y>0&&b.iadd(n[y])}d=b.toString();const S=d.substring(0,d.length-t.NEAR_NOMINATION_EXP)||"0",_=d.substring(d.length-t.NEAR_NOMINATION_EXP).padStart(t.NEAR_NOMINATION_EXP,"0").substring(0,g);return c(`${u(S)}.${_}`)}t.formatNearAmount=s;function a(d){if(!d)return null;d=o(d);const g=d.split("."),b=g[0],S=g[1]||"";if(g.length>2||S.length>t.NEAR_NOMINATION_EXP)throw new Error(`Cannot parse '${d}' as NEAR amount`);return f(b+S.padEnd(t.NEAR_NOMINATION_EXP,"0"))}t.parseNearAmount=a;function o(d){return d.replace(/,/g,"").trim()}function c(d){return d.replace(/\.?0*$/,"")}function f(d){return d=d.replace(/^0+/,""),d===""?"0":d}function u(d){const g=/(-?\d+)(\d{3})/;for(;g.test(d);)d=d.replace(g,"$1,$2");return d}})(Fh);var wg;function D1(){return wg||(wg=1,function(t){var e=H&&H.__createBinding||(Object.create?function(g,b,S,_){_===void 0&&(_=S),Object.defineProperty(g,_,{enumerable:!0,get:function(){return b[S]}})}:function(g,b,S,_){_===void 0&&(_=S),g[_]=b[S]}),r=H&&H.__setModuleDefault||(Object.create?function(g,b){Object.defineProperty(g,"default",{enumerable:!0,value:b})}:function(g,b){g.default=b}),n=H&&H.__importStar||function(g){if(g&&g.__esModule)return g;var b={};if(g!=null)for(var S in g)S!=="default"&&Object.hasOwnProperty.call(g,S)&&e(b,g,S);return r(b,g),b};Object.defineProperty(t,"__esModule",{value:!0}),t.logWarning=t.rpc_errors=t.KeyPairEd25519=t.KeyPair=t.PublicKey=t.format=t.enums=t.web=t.serialize=t.key_pair=void 0;const i=n(ni);t.key_pair=i;const s=n(Dh);t.serialize=s;const a=n(Pf());t.web=a;const o=n(ji);t.enums=o;const c=n(Fh);t.format=c;const f=n(Lh());t.rpc_errors=f;const u=ni;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return u.PublicKey}}),Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return u.KeyPair}}),Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return u.KeyPairEd25519}});const d=Ar;Object.defineProperty(t,"logWarning",{enumerable:!0,get:function(){return d.logWarning}})}($u)),$u}var Fo={};(function(t){var e=H&&H.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(t,"__esModule",{value:!0}),t.signTransaction=t.createTransaction=t.SCHEMA=t.Action=t.SignedTransaction=t.Transaction=t.Signature=t.deleteAccount=t.deleteKey=t.addKey=t.stake=t.transfer=t.functionCall=t.stringifyJsonOrBytes=t.deployContract=t.createAccount=t.DeleteAccount=t.DeleteKey=t.AddKey=t.Stake=t.Transfer=t.FunctionCall=t.DeployContract=t.CreateAccount=t.IAction=t.functionCallAccessKey=t.fullAccessKey=t.AccessKey=t.AccessKeyPermission=t.FullAccessPermission=t.FunctionCallPermission=void 0;const r=e(Jl),n=ji,i=Qs,s=ni;class a extends n.Assignable{}t.FunctionCallPermission=a;class o extends n.Assignable{}t.FullAccessPermission=o;class c extends n.Enum{}t.AccessKeyPermission=c;class f extends n.Assignable{}t.AccessKey=f;function u(){return new f({nonce:0,permission:new c({fullAccess:new o({})})})}t.fullAccessKey=u;function d(v,h,C){return new f({nonce:0,permission:new c({functionCall:new a({receiverId:v,allowance:C,methodNames:h})})})}t.functionCallAccessKey=d;class g extends n.Assignable{}t.IAction=g;class b extends g{}t.CreateAccount=b;class S extends g{}t.DeployContract=S;class _ extends g{}t.FunctionCall=_;class y extends g{}t.Transfer=y;class E extends g{}t.Stake=E;class A extends g{}t.AddKey=A;class M extends g{}t.DeleteKey=M;class B extends g{}t.DeleteAccount=B;function D(){return new N({createAccount:new b({})})}t.createAccount=D;function L(v){return new N({deployContract:new S({code:v})})}t.deployContract=L;function z(v){return v.byteLength!==void 0&&v.byteLength===v.length?v:Buffer.from(JSON.stringify(v))}t.stringifyJsonOrBytes=z;function Y(v,h,C,q,x=z){return new N({functionCall:new _({methodName:v,args:x(h),gas:C,deposit:q})})}t.functionCall=Y;function ie(v){return new N({transfer:new y({deposit:v})})}t.transfer=ie;function oe(v,h){return new N({stake:new E({stake:v,publicKey:h})})}t.stake=oe;function ge(v,h){return new N({addKey:new A({publicKey:v,accessKey:h})})}t.addKey=ge;function re(v){return new N({deleteKey:new M({publicKey:v})})}t.deleteKey=re;function P(v){return new N({deleteAccount:new B({beneficiaryId:v})})}t.deleteAccount=P;class l extends n.Assignable{}t.Signature=l;class m extends n.Assignable{encode(){return i.serialize(t.SCHEMA,this)}static decode(h){return i.deserialize(t.SCHEMA,m,h)}}t.Transaction=m;class T extends n.Assignable{encode(){return i.serialize(t.SCHEMA,this)}static decode(h){return i.deserialize(t.SCHEMA,T,h)}}t.SignedTransaction=T;class N extends n.Enum{}t.Action=N,t.SCHEMA=new Map([[l,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[T,{kind:"struct",fields:[["transaction",m],["signature",l]]}],[m,{kind:"struct",fields:[["signerId","string"],["publicKey",s.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[N]]]}],[s.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[f,{kind:"struct",fields:[["nonce","u64"],["permission",c]]}],[c,{kind:"enum",field:"enum",values:[["functionCall",a],["fullAccess",o]]}],[a,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[o,{kind:"struct",fields:[]}],[N,{kind:"enum",field:"enum",values:[["createAccount",b],["deployContract",S],["functionCall",_],["transfer",y],["stake",E],["addKey",A],["deleteKey",M],["deleteAccount",B]]}],[b,{kind:"struct",fields:[]}],[S,{kind:"struct",fields:[["code",["u8"]]]}],[_,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[y,{kind:"struct",fields:[["deposit","u128"]]}],[E,{kind:"struct",fields:[["stake","u128"],["publicKey",s.PublicKey]]}],[A,{kind:"struct",fields:[["publicKey",s.PublicKey],["accessKey",f]]}],[M,{kind:"struct",fields:[["publicKey",s.PublicKey]]}],[B,{kind:"struct",fields:[["beneficiaryId","string"]]}]]);function O(v,h,C,q,x,K){return new m({signerId:v,publicKey:h,nonce:q,receiverId:C,actions:x,blockHash:K})}t.createTransaction=O;async function U(v,h,C,q){const x=i.serialize(t.SCHEMA,v),K=new Uint8Array(r.default.sha256.array(x)),J=await h.signMessage(x,C,q),W=new T({transaction:v,signature:new l({keyType:v.publicKey.keyType,data:J.signature})});return[K,W]}async function $(...v){if(v[0].constructor===m){const[h,C,q,x]=v;return U(h,C,q,x)}else{const[h,C,q,x,K,J,W]=v,X=await K.getPublicKey(J,W),ye=O(J,X,h,C,q,x);return U(ye,K,J,W)}}t.signTransaction=$})(Fo);var ia={},U1=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ia,"__esModule",{value:!0});ia.diffEpochValidators=ia.findSeatPrice=void 0;const Bn=U1(mi),fS=U1(ya);function uS(t,e,r,n){return n&&n<49?lS(t,e):(r||(fS.default("findSeatPrice(validators, maxNumberOfSeats)")("`use `findSeatPrice(validators, maxNumberOfSeats, minimumStakeRatio)` instead"),r=[1,6250]),dS(t,e,r))}ia.findSeatPrice=uS;function lS(t,e){const r=t.map(o=>new Bn.default(o.stake,10)).sort((o,c)=>o.cmp(c)),n=new Bn.default(e),i=r.reduce((o,c)=>o.add(c));if(i.lt(n))throw new Error("Stakes are below seats");let s=new Bn.default(1),a=i.add(new Bn.default(1));for(;!s.eq(a.sub(new Bn.default(1)));){const o=s.add(a).div(new Bn.default(2));let c=!1,f=new Bn.default(0);for(let u=0;u<r.length;++u)if(f=f.add(r[u].div(o)),f.gte(n)){s=o,c=!0;break}c||(a=o)}return s}function dS(t,e,r){if(r.length!=2)throw Error("minimumStakeRatio should have 2 elements");const n=t.map(s=>new Bn.default(s.stake,10)).sort((s,a)=>s.cmp(a)),i=n.reduce((s,a)=>s.add(a));return t.length<e?i.mul(new Bn.default(r[0])).div(new Bn.default(r[1])):n[0].add(new Bn.default(1))}function hS(t,e){const r=new Map;t.forEach(i=>r.set(i.account_id,i));const n=new Set(e.map(i=>i.account_id));return{newValidators:e.filter(i=>!r.has(i.account_id)),removedValidators:t.filter(i=>!n.has(i.account_id)),changedValidators:e.filter(i=>r.has(i.account_id)&&r.get(i.account_id).stake!=i.stake).map(i=>({current:r.get(i.account_id),next:i}))}}ia.diffEpochValidators=hS;var Na={},Cf={},pS=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cf,"__esModule",{value:!0});Cf.DEFAULT_FUNCTION_CALL_GAS=void 0;const gS=pS(mi);Cf.DEFAULT_FUNCTION_CALL_GAS=new gS.default("30000000000000");var _g;function If(){if(_g)return Na;_g=1;var t=H&&H.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(Na,"__esModule",{value:!0}),Na.Account=void 0;const e=t(mi),r=t(ya),n=Fo,i=Lo(),s=Qs,a=ni,o=Ar,c=Lh(),f=Cf,u=t(Uo),d=12,g=500,b=1.5;function S(E){return JSON.parse(Buffer.from(E).toString())}function _(E){return Buffer.from(JSON.stringify(E))}class y{constructor(A,M){this.accessKeyByPublicKeyCache={},this.connection=A,this.accountId=M}get ready(){return r.default("Account.ready()")("not needed anymore, always ready"),Promise.resolve()}async fetchState(){r.default("Account.fetchState()")("use `Account.state()` instead")}async state(){return this.connection.provider.query({request_type:"view_account",account_id:this.accountId,finality:"optimistic"})}printLogsAndFailures(A,M){if(!process.env.NEAR_NO_LOGS)for(const B of M)console.log(`Receipt${B.receiptIds.length>1?"s":""}: ${B.receiptIds.join(", ")}`),this.printLogs(A,B.logs,"	"),B.failure&&console.warn(`	Failure [${A}]: ${B.failure}`)}printLogs(A,M,B=""){if(!process.env.NEAR_NO_LOGS)for(const D of M)console.log(`${B}Log [${A}]: ${D}`)}async signTransaction(A,M){const B=await this.findAccessKey(A,M);if(!B)throw new i.TypedError(`Can not sign transactions for account ${this.accountId} on network ${this.connection.networkId}, no matching key pair found in ${this.connection.signer}.`,"KeyNotFound");const{accessKey:D}=B,z=(await this.connection.provider.block({finality:"final"})).header.hash,Y=++D.nonce;return await n.signTransaction(A,Y,M,s.baseDecode(z),this.connection.signer,this.accountId,this.connection.networkId)}signAndSendTransaction(...A){return typeof A[0]=="string"?this.signAndSendTransactionV1(A[0],A[1]):this.signAndSendTransactionV2(A[0])}signAndSendTransactionV1(A,M){return r.default("Account.signAndSendTransaction(receiverId, actions")("use `Account.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.signAndSendTransactionV2({receiverId:A,actions:M})}async signAndSendTransactionV2({receiverId:A,actions:M,returnError:B}){let D,L;const z=await u.default(g,d,b,async()=>{[D,L]=await this.signTransaction(A,M);const ie=L.transaction.publicKey;try{return await this.connection.provider.sendTransaction(L)}catch(oe){if(oe.type==="InvalidNonce")return o.logWarning(`Retrying transaction ${A}:${s.baseEncode(D)} with new nonce.`),delete this.accessKeyByPublicKeyCache[ie.toString()],null;if(oe.type==="Expired")return o.logWarning(`Retrying transaction ${A}:${s.baseEncode(D)} due to expired block hash`),null;throw oe.context=new i.ErrorContext(s.baseEncode(D)),oe}});if(!z)throw new i.TypedError("nonce retries exceeded for transaction. This usually means there are too many parallel requests with the same access key.","RetriesExceeded");const Y=[z.transaction_outcome,...z.receipts_outcome].reduce((ie,oe)=>oe.outcome.logs.length||typeof oe.outcome.status=="object"&&typeof oe.outcome.status.Failure=="object"?ie.concat({receiptIds:oe.outcome.receipt_ids,logs:oe.outcome.logs,failure:typeof oe.outcome.status.Failure<"u"?c.parseRpcError(oe.outcome.status.Failure):null}):ie,[]);if(this.printLogsAndFailures(L.transaction.receiverId,Y),!B&&typeof z.status=="object"&&typeof z.status.Failure=="object")throw z.status.Failure.error_message&&z.status.Failure.error_type?new i.TypedError(`Transaction ${z.transaction_outcome.id} failed. ${z.status.Failure.error_message}`,z.status.Failure.error_type):c.parseResultError(z);return z}async findAccessKey(A,M){const B=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);if(!B)return null;const D=this.accessKeyByPublicKeyCache[B.toString()];if(D!==void 0)return{publicKey:B,accessKey:D};try{const L=await this.connection.provider.query({request_type:"view_access_key",account_id:this.accountId,public_key:B.toString(),finality:"optimistic"});return this.accessKeyByPublicKeyCache[B.toString()]?{publicKey:B,accessKey:this.accessKeyByPublicKeyCache[B.toString()]}:(this.accessKeyByPublicKeyCache[B.toString()]=L,{publicKey:B,accessKey:L})}catch(L){if(L.type=="AccessKeyDoesNotExist")return null;throw L}}async createAndDeployContract(A,M,B,D){const L=n.fullAccessKey();return await this.signAndSendTransaction({receiverId:A,actions:[n.createAccount(),n.transfer(D),n.addKey(a.PublicKey.from(M),L),n.deployContract(B)]}),new y(this.connection,A)}async sendMoney(A,M){return this.signAndSendTransaction({receiverId:A,actions:[n.transfer(M)]})}async createAccount(A,M,B){const D=n.fullAccessKey();return this.signAndSendTransaction({receiverId:A,actions:[n.createAccount(),n.transfer(B),n.addKey(a.PublicKey.from(M),D)]})}async deleteAccount(A){return this.signAndSendTransaction({receiverId:this.accountId,actions:[n.deleteAccount(A)]})}async deployContract(A){return this.signAndSendTransaction({receiverId:this.accountId,actions:[n.deployContract(A)]})}async functionCall(...A){return typeof A[0]=="string"?this.functionCallV1(A[0],A[1],A[2],A[3],A[4]):this.functionCallV2(A[0])}functionCallV1(A,M,B,D,L){return r.default("Account.functionCall(contractId, methodName, args, gas, amount)")("use `Account.functionCall(FunctionCallOptions)` instead"),B=B||{},this.validateArgs(B),this.signAndSendTransaction({receiverId:A,actions:[n.functionCall(M,B,D||f.DEFAULT_FUNCTION_CALL_GAS,L)]})}functionCallV2({contractId:A,methodName:M,args:B={},gas:D=f.DEFAULT_FUNCTION_CALL_GAS,attachedDeposit:L,walletMeta:z,walletCallbackUrl:Y,stringify:ie}){this.validateArgs(B);const oe=ie===void 0?n.stringifyJsonOrBytes:ie;return this.signAndSendTransaction({receiverId:A,actions:[n.functionCall(M,B,D,L,oe)],walletMeta:z,walletCallbackUrl:Y})}async addKey(A,M,B,D){B||(B=[]),Array.isArray(B)||(B=[B]);let L;return M?L=n.functionCallAccessKey(M,B,D):L=n.fullAccessKey(),this.signAndSendTransaction({receiverId:this.accountId,actions:[n.addKey(a.PublicKey.from(A),L)]})}async deleteKey(A){return this.signAndSendTransaction({receiverId:this.accountId,actions:[n.deleteKey(a.PublicKey.from(A))]})}async stake(A,M){return this.signAndSendTransaction({receiverId:this.accountId,actions:[n.stake(M,a.PublicKey.from(A))]})}validateArgs(A){if(!(A.byteLength!==void 0&&A.byteLength===A.length)&&(Array.isArray(A)||typeof A!="object"))throw new o.PositionalArgsError}async viewFunction(A,M,B={},{parse:D=S,stringify:L=_}={}){this.validateArgs(B);const z=L(B).toString("base64"),Y=await this.connection.provider.query({request_type:"call_function",account_id:A,method_name:M,args_base64:z,finality:"optimistic"});return Y.logs&&this.printLogs(A,Y.logs),Y.result&&Y.result.length>0&&D(Buffer.from(Y.result))}async viewState(A,M={finality:"optimistic"}){const{values:B}=await this.connection.provider.query({request_type:"view_state",...M,account_id:this.accountId,prefix_base64:Buffer.from(A).toString("base64")});return B.map(({key:D,value:L})=>({key:Buffer.from(D,"base64"),value:Buffer.from(L,"base64")}))}async getAccessKeys(){const A=await this.connection.provider.query({request_type:"view_access_key_list",account_id:this.accountId,finality:"optimistic"});return Array.isArray(A)?A:A.keys}async getAccountDetails(){return{authorizedApps:(await this.getAccessKeys()).filter(B=>B.access_key.permission!=="FullAccess").map(B=>{const D=B.access_key.permission;return{contractId:D.FunctionCall.receiver_id,amount:D.FunctionCall.allowance,publicKey:B.public_key}})}}async getAccountBalance(){const A=await this.connection.provider.experimental_protocolConfig({finality:"final"}),M=await this.state(),B=new e.default(A.runtime_config.storage_amount_per_byte),D=new e.default(M.storage_usage).mul(B),L=new e.default(M.locked),z=new e.default(M.amount).add(L),Y=z.sub(e.default.max(L,D));return{total:z.toString(),stateStaked:D.toString(),staked:L.toString(),available:Y.toString()}}}return Na.Account=y,Na}var Hu={},Eg;function yS(){return Eg||(Eg=1,function(t){var e=H&&H.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(t,"__esModule",{value:!0}),t.Account2FA=t.AccountMultisig=t.MULTISIG_CONFIRM_METHODS=t.MULTISIG_CHANGE_METHODS=t.MULTISIG_DEPOSIT=t.MULTISIG_GAS=t.MULTISIG_ALLOWANCE=t.MULTISIG_STORAGE_KEY=void 0;const r=e(mi),n=e(ya),i=If(),s=Fh,a=ni,o=Fo,c=Pf();t.MULTISIG_STORAGE_KEY="__multisigRequest",t.MULTISIG_ALLOWANCE=new r.default(s.parseNearAmount("1")),t.MULTISIG_GAS=new r.default("100000000000000"),t.MULTISIG_DEPOSIT=new r.default("0"),t.MULTISIG_CHANGE_METHODS=["add_request","add_request_and_confirm","delete_request","confirm"],t.MULTISIG_CONFIRM_METHODS=["confirm"];const f={[t.MULTISIG_STORAGE_KEY]:null};class u extends i.Account{constructor(y,E,A){super(y,E),this.storage=A.storage,this.onAddRequestResult=A.onAddRequestResult}async signAndSendTransactionWithAccount(y,E){return super.signAndSendTransaction({receiverId:y,actions:E})}signAndSendTransaction(...y){return typeof y[0]=="string"?this._signAndSendTransaction({receiverId:y[0],actions:y[1]}):this._signAndSendTransaction(y[0])}async _signAndSendTransaction({receiverId:y,actions:E}){const{accountId:A}=this,M=Buffer.from(JSON.stringify({request:{receiver_id:y,actions:S(E,A,y)}}));let B;try{B=await super.signAndSendTransaction({receiverId:A,actions:[o.functionCall("add_request_and_confirm",M,t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)]})}catch(L){if(L.toString().includes("Account has too many active requests. Confirm or delete some"))return await this.deleteUnconfirmedRequests(),await this.signAndSendTransaction(y,E);throw L}if(!B.status)throw new Error("Request failed");const D={...B.status};if(!D.SuccessValue||typeof D.SuccessValue!="string")throw new Error("Request failed");return this.setRequest({accountId:A,actions:E,requestId:parseInt(Buffer.from(D.SuccessValue,"base64").toString("ascii"),10)}),this.onAddRequestResult&&await this.onAddRequestResult(B),this.deleteUnconfirmedRequests(),B}async deleteUnconfirmedRequests(){const y=await this.getRequestIds(),{requestId:E}=this.getRequest();for(const A of y)if(A!=E)try{await super.signAndSendTransaction({receiverId:this.accountId,actions:[o.functionCall("delete_request",{request_id:A},t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)]})}catch{console.warn("Attempt to delete an earlier request before 15 minutes failed. Will try again.")}}async getRequestIds(){return this.viewFunction(this.accountId,"list_request_ids")}getRequest(){return this.storage?JSON.parse(this.storage.getItem(t.MULTISIG_STORAGE_KEY)||"{}"):f[t.MULTISIG_STORAGE_KEY]}setRequest(y){if(this.storage)return this.storage.setItem(t.MULTISIG_STORAGE_KEY,JSON.stringify(y));f[t.MULTISIG_STORAGE_KEY]=y}}t.AccountMultisig=u;class d extends u{constructor(y,E,A){super(y,E,A),this.helperUrl="https://helper.testnet.near.org",this.helperUrl=A.helperUrl||this.helperUrl,this.storage=A.storage,this.sendCode=A.sendCode||this.sendCodeDefault,this.getCode=A.getCode||this.getCodeDefault,this.verifyCode=A.verifyCode||this.verifyCodeDefault,this.onConfirmResult=A.onConfirmResult}async signAndSendTransaction(...y){return typeof y[0]=="string"?(n.default("Account.signAndSendTransaction(receiverId, actions")("use `Account2FA.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.__signAndSendTransaction({receiverId:y[0],actions:y[1]})):this.__signAndSendTransaction(y[0])}async __signAndSendTransaction({receiverId:y,actions:E}){await super.signAndSendTransaction({receiverId:y,actions:E}),await this.sendCode();const A=await this.promptAndVerify();return this.onConfirmResult&&await this.onConfirmResult(A),A}async deployMultisig(y){const{accountId:E}=this,A=(await this.getRecoveryMethods()).data.filter(({kind:z,publicKey:Y})=>(z==="phrase"||z==="ledger")&&Y!==null).map(z=>z.publicKey),M=(await this.getAccessKeys()).filter(({public_key:z,access_key:{permission:Y}})=>Y==="FullAccess"&&!A.includes(z)).map(z=>z.public_key).map(g),B=g((await this.postSignedJson("/2fa/getAccessKey",{accountId:E})).publicKey),D=Buffer.from(JSON.stringify({num_confirmations:2})),L=[...M.map(z=>o.deleteKey(z)),...M.map(z=>o.addKey(z,o.functionCallAccessKey(E,t.MULTISIG_CHANGE_METHODS,null))),o.addKey(B,o.functionCallAccessKey(E,t.MULTISIG_CONFIRM_METHODS,null)),o.deployContract(y)];return(await this.state()).code_hash==="11111111111111111111111111111111"&&L.push(o.functionCall("new",D,t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)),console.log("deploying multisig contract for",E),await super.signAndSendTransactionWithAccount(E,L)}async disable(y){const{accountId:E}=this,M=(await this.getAccessKeys()).filter(({access_key:L})=>L.permission!=="FullAccess").filter(({access_key:L})=>{const z=L.permission.FunctionCall;return z.receiver_id===E&&z.method_names.length===4&&z.method_names.includes("add_request_and_confirm")}),B=a.PublicKey.from((await this.postSignedJson("/2fa/getAccessKey",{accountId:E})).publicKey),D=[o.deleteKey(B),...M.map(({public_key:L})=>o.deleteKey(a.PublicKey.from(L))),...M.map(({public_key:L})=>o.addKey(a.PublicKey.from(L),null)),o.deployContract(y)];return console.log("disabling 2fa for",E),await this.signAndSendTransaction({receiverId:E,actions:D})}async sendCodeDefault(){const{accountId:y}=this,{requestId:E}=this.getRequest(),A=await this.get2faMethod();return await this.postSignedJson("/2fa/send",{accountId:y,method:A,requestId:E}),E}async getCodeDefault(y){throw new Error('There is no getCode callback provided. Please provide your own in AccountMultisig constructor options. It has a parameter method where method.kind is "email" or "phone".')}async promptAndVerify(){const y=await this.get2faMethod(),E=await this.getCode(y);try{return await this.verifyCode(E)}catch(A){if(console.warn("Error validating security code:",A),A.toString().includes("invalid 2fa code provided")||A.toString().includes("2fa code not valid"))return await this.promptAndVerify();throw A}}async verifyCodeDefault(y){const{accountId:E}=this,A=this.getRequest();if(!A)throw new Error("no request pending");const{requestId:M}=A;return await this.postSignedJson("/2fa/verify",{accountId:E,securityCode:y,requestId:M})}async getRecoveryMethods(){const{accountId:y}=this;return{accountId:y,data:await this.postSignedJson("/account/recoveryMethods",{accountId:y})}}async get2faMethod(){let{data:y}=await this.getRecoveryMethods();if(y&&y.length&&(y=y.find(M=>M.kind.indexOf("2fa-")===0)),!y)return null;const{kind:E,detail:A}=y;return{kind:E,detail:A}}async signatureFor(){const{accountId:y}=this,A=(await this.connection.provider.block({finality:"final"})).header.height.toString(),M=await this.connection.signer.signMessage(Buffer.from(A),y,this.connection.networkId),B=Buffer.from(M.signature).toString("base64");return{blockNumber:A,blockNumberSignature:B}}async postSignedJson(y,E){return await c.fetchJson(this.helperUrl+y,JSON.stringify({...E,...await this.signatureFor()}))}}t.Account2FA=d;const g=_=>a.PublicKey.from(_),b=_=>_.toString().replace("ed25519:",""),S=(_,y,E)=>_.map(A=>{const M=A.enum,{gas:B,publicKey:D,methodName:L,args:z,deposit:Y,accessKey:ie,code:oe}=A[M],ge={type:M[0].toUpperCase()+M.substr(1),gas:B&&B.toString()||void 0,public_key:D&&b(D)||void 0,method_name:L,args:z&&Buffer.from(z).toString("base64")||void 0,code:oe&&Buffer.from(oe).toString("base64")||void 0,amount:Y&&Y.toString()||void 0,deposit:Y&&Y.toString()||"0",permission:void 0};if(ie&&(E===y&&ie.permission.enum!=="fullAccess"&&(ge.permission={receiver_id:y,allowance:t.MULTISIG_ALLOWANCE.toString(),method_names:t.MULTISIG_CHANGE_METHODS}),ie.permission.enum==="functionCall")){const{receiverId:re,methodNames:P,allowance:l}=ie.permission.functionCall;ge.permission={receiver_id:re,allowance:l&&l.toString()||void 0,method_names:P}}return ge})}(Hu)),Hu}var ci={},Ag;function L1(){if(Ag)return ci;Ag=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.UrlAccountCreator=ci.LocalAccountCreator=ci.AccountCreator=void 0;const t=Pf();class e{}ci.AccountCreator=e;class r extends e{constructor(s,a){super(),this.masterAccount=s,this.initialBalance=a}async createAccount(s,a){await this.masterAccount.createAccount(s,a,this.initialBalance)}}ci.LocalAccountCreator=r;class n extends e{constructor(s,a){super(),this.connection=s,this.helperUrl=a}async createAccount(s,a){await t.fetchJson(`${this.helperUrl}/account`,JSON.stringify({newAccountId:s,newAccountPublicKey:a.toString()}))}}return ci.UrlAccountCreator=n,ci}var Ra={},ds={},xS=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ds,"__esModule",{value:!0});ds.InMemorySigner=ds.Signer=void 0;const bS=xS(Jl),mS=ni,vS=Do;class F1{}ds.Signer=F1;class jh extends F1{constructor(e){super(),this.keyStore=e}static async fromKeyPair(e,r,n){const i=new vS.InMemoryKeyStore;return await i.setKey(e,r,n),new jh(i)}async createKey(e,r){const n=mS.KeyPair.fromRandom("ed25519");return await this.keyStore.setKey(r,e,n),n.getPublicKey()}async getPublicKey(e,r){const n=await this.keyStore.getKey(r,e);return n===null?null:n.getPublicKey()}async signMessage(e,r,n){const i=new Uint8Array(bS.default.sha256.array(e));if(!r)throw new Error("InMemorySigner requires provided account id");const s=await this.keyStore.getKey(n,r);if(s===null)throw new Error(`Key for ${r} not found in ${n}`);return s.sign(i)}toString(){return`InMemorySigner(${this.keyStore})`}}ds.InMemorySigner=jh;var Sg;function j1(){if(Sg)return Ra;Sg=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.Connection=void 0;const t=Lo(),e=ds;function r(s){switch(s.type){case void 0:return s;case"JsonRpcProvider":return new t.JsonRpcProvider({...s.args});default:throw new Error(`Unknown provider type ${s.type}`)}}function n(s){switch(s.type){case void 0:return s;case"InMemorySigner":return new e.InMemorySigner(s.keyStore);default:throw new Error(`Unknown signer type ${s.type}`)}}class i{constructor(a,o,c){this.networkId=a,this.provider=o,this.signer=c}static fromConfig(a){const o=r(a.provider),c=n(a.signer);return new i(a.networkId,o,c)}}return Ra.Connection=i,Ra}var Ba={},Tg;function K1(){if(Tg)return Ba;Tg=1;var t=H&&H.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.Contract=void 0;const e=t(mi),r=t(ya),n=Lo(),i=Ar;function s(u,d){return{[u](...g){return d(...g)}}[u]}const a=u=>u&&u.byteLength!==void 0&&u.byteLength===u.length,o=u=>Object.prototype.toString.call(u)==="[object Object]";class c{constructor(d,g,b){this.account=d,this.contractId=g;const{viewMethods:S=[],changeMethods:_=[]}=b;S.forEach(y=>{Object.defineProperty(this,y,{writable:!1,enumerable:!0,value:s(y,async(E={},A={},...M)=>{if(M.length||!(o(E)||a(E))||!o(A))throw new i.PositionalArgsError;return this.account.viewFunction(this.contractId,y,E,A)})})}),_.forEach(y=>{Object.defineProperty(this,y,{writable:!1,enumerable:!0,value:s(y,async(...E)=>{if(E.length&&(E.length>3||!(o(E[0])||a(E[0]))))throw new i.PositionalArgsError;return E.length>1||!(E[0]&&E[0].args)?(r.default("contract.methodName(args, gas, amount)")("use `contract.methodName({ args, gas?, amount?, callbackUrl?, meta? })` instead"),this._changeMethod({methodName:y,args:E[0],gas:E[1],amount:E[2]})):this._changeMethod({methodName:y,...E[0]})})})})}async _changeMethod({args:d,methodName:g,gas:b,amount:S,meta:_,callbackUrl:y}){f({gas:b,amount:S});const E=await this.account.functionCall({contractId:this.contractId,methodName:g,args:d,gas:b,attachedDeposit:S,walletMeta:_,walletCallbackUrl:y});return n.getTransactionLastResult(E)}}Ba.Contract=c;function f(u){const d="number, decimal string or BN";for(const g of Object.keys(u)){const b=u[g];if(b&&!e.default.isBN(b)&&isNaN(b))throw new i.ArgumentTypeError(g,d,b)}}return Ba}var Ma={},kg;function q1(){if(kg)return Ma;kg=1;var t=H&&H.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.Near=void 0;const e=t(mi),r=If(),n=j1(),i=K1(),s=L1();class a{constructor(c){if(this.config=c,this.connection=n.Connection.fromConfig({networkId:c.networkId,provider:{type:"JsonRpcProvider",args:{url:c.nodeUrl,headers:c.headers}},signer:c.signer||{type:"InMemorySigner",keyStore:c.keyStore||c.deps.keyStore}}),c.masterAccount){const f=c.initialBalance?new e.default(c.initialBalance):new e.default("500000000000000000000000000");this.accountCreator=new s.LocalAccountCreator(new r.Account(this.connection,c.masterAccount),f)}else c.helperUrl?this.accountCreator=new s.UrlAccountCreator(this.connection,c.helperUrl):this.accountCreator=null}async account(c){return new r.Account(this.connection,c)}async createAccount(c,f){if(!this.accountCreator)throw new Error("Must specify account creator, either via masterAccount or helperUrl configuration settings.");return await this.accountCreator.createAccount(c,f),new r.Account(this.connection,c)}async loadContract(c,f){const u=new r.Account(this.connection,f.sender);return new i.Contract(u,c,f)}async sendTokens(c,f,u){return console.warn("near.sendTokens is deprecated. Use `yourAccount.sendMoney` instead."),(await new r.Account(this.connection,f).sendMoney(u,c)).transaction_outcome.id}}return Ma.Near=a,Ma}var fi={},Pg;function wS(){if(Pg)return fi;Pg=1;var t=H&&H.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(fi,"__esModule",{value:!0}),fi.ConnectedWalletAccount=fi.WalletAccount=fi.WalletConnection=void 0;const e=t(ya),r=If(),n=Fo,i=D1(),s=Qs,a=Qs,o="/login/",c="add_request_and_confirm",f="_wallet_auth_key",u="pending_key";class d{constructor(S,_){this._near=S;const y=_+f,E=JSON.parse(window.localStorage.getItem(y));this._networkId=S.config.networkId,this._walletBaseUrl=S.config.walletUrl,_=_||S.config.contractName||"default",this._keyStore=S.connection.signer.keyStore,this._authData=E||{allKeys:[]},this._authDataKey=y,this.isSignedIn()||this._completeSignInWithAccessKey()}isSignedIn(){return!!this._authData.accountId}getAccountId(){return this._authData.accountId||""}async requestSignIn(S={},_,y,E){let A;typeof S=="string"?(e.default("requestSignIn(contractId, title)")("`title` ignored; use `requestSignIn({ contractId, methodNames, successUrl, failureUrl })` instead"),A={contractId:S,successUrl:y,failureUrl:E}):A=S;const M=new URL(window.location.href),B=new URL(this._walletBaseUrl+o);if(B.searchParams.set("success_url",A.successUrl||M.href),B.searchParams.set("failure_url",A.failureUrl||M.href),A.contractId){await(await this._near.account(A.contractId)).state(),B.searchParams.set("contract_id",A.contractId);const L=i.KeyPair.fromRandom("ed25519");B.searchParams.set("public_key",L.getPublicKey().toString()),await this._keyStore.setKey(this._networkId,u+L.getPublicKey(),L)}A.methodNames&&A.methodNames.forEach(D=>{B.searchParams.append("methodNames",D)}),window.location.assign(B.toString())}async requestSignTransactions(...S){return Array.isArray(S[0])?(e.default("WalletConnection.requestSignTransactions(transactions, callbackUrl, meta)")("use `WalletConnection.requestSignTransactions(RequestSignTransactionsOptions)` instead"),this._requestSignTransactions({transactions:S[0],callbackUrl:S[1],meta:S[2]})):this._requestSignTransactions(S[0])}async _requestSignTransactions({transactions:S,meta:_,callbackUrl:y}){const E=new URL(window.location.href),A=new URL("sign",this._walletBaseUrl);A.searchParams.set("transactions",S.map(M=>a.serialize(n.SCHEMA,M)).map(M=>Buffer.from(M).toString("base64")).join(",")),A.searchParams.set("callbackUrl",y||E.href),_&&A.searchParams.set("meta",_),window.location.assign(A.toString())}async _completeSignInWithAccessKey(){const S=new URL(window.location.href),_=S.searchParams.get("public_key")||"",y=(S.searchParams.get("all_keys")||"").split(","),E=S.searchParams.get("account_id")||"";E&&(this._authData={accountId:E,allKeys:y},window.localStorage.setItem(this._authDataKey,JSON.stringify(this._authData)),_&&await this._moveKeyFromTempToPermanent(E,_)),S.searchParams.delete("public_key"),S.searchParams.delete("all_keys"),S.searchParams.delete("account_id"),S.searchParams.delete("meta"),S.searchParams.delete("transactionHashes"),window.history.replaceState({},document.title,S.toString())}async _moveKeyFromTempToPermanent(S,_){const y=await this._keyStore.getKey(this._networkId,u+_);await this._keyStore.setKey(this._networkId,S,y),await this._keyStore.removeKey(this._networkId,u+_)}signOut(){this._authData={},window.localStorage.removeItem(this._authDataKey)}account(){return this._connectedAccount||(this._connectedAccount=new g(this,this._near.connection,this._authData.accountId)),this._connectedAccount}}fi.WalletConnection=d,fi.WalletAccount=d;class g extends r.Account{constructor(S,_,y){super(_,y),this.walletConnection=S}signAndSendTransaction(...S){return typeof S[0]=="string"?this._signAndSendTransaction({receiverId:S[0],actions:S[1]}):this._signAndSendTransaction(S[0])}async _signAndSendTransaction({receiverId:S,actions:_,walletMeta:y,walletCallbackUrl:E=window.location.href}){const A=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);let M=await this.accessKeyForTransaction(S,_,A);if(!M)throw new Error(`Cannot find matching key for transaction sent to ${S}`);if(A&&A.toString()===M.public_key)try{return await super.signAndSendTransaction({receiverId:S,actions:_})}catch(ie){if(ie.type==="NotEnoughAllowance")M=await this.accessKeyForTransaction(S,_);else throw ie}const B=await this.connection.provider.block({finality:"final"}),D=s.baseDecode(B.header.hash),L=i.PublicKey.from(M.public_key),z=M.access_key.nonce+1,Y=n.createTransaction(this.accountId,L,S,z,_,D);return await this.walletConnection.requestSignTransactions({transactions:[Y],meta:y,callbackUrl:E}),new Promise((ie,oe)=>{setTimeout(()=>{oe(new Error("Failed to redirect to sign transaction"))},1e3)})}async accessKeyMatchesTransaction(S,_,y){const{access_key:{permission:E}}=S;if(E==="FullAccess")return!0;if(E.FunctionCall){const{receiver_id:A,method_names:M}=E.FunctionCall;if(A===this.accountId&&M.includes(c))return!0;if(A===_){if(y.length!==1)return!1;const[{functionCall:B}]=y;return B&&(!B.deposit||B.deposit.toString()==="0")&&(M.length===0||M.includes(B.methodName))}}return!1}async accessKeyForTransaction(S,_,y){const E=await this.getAccessKeys();if(y){const M=E.find(B=>B.public_key.toString()===y.toString());if(M&&await this.accessKeyMatchesTransaction(M,S,_))return M}const A=this.walletConnection._authData.allKeys;for(const M of E)if(A.indexOf(M.public_key)!==-1&&await this.accessKeyMatchesTransaction(M,S,_))return M;return null}}return fi.ConnectedWalletAccount=g,fi}var Cg;function $1(){return Cg||(Cg=1,function(t){var e=H&&H.__createBinding||(Object.create?function(E,A,M,B){B===void 0&&(B=M),Object.defineProperty(E,B,{enumerable:!0,get:function(){return A[M]}})}:function(E,A,M,B){B===void 0&&(B=M),E[B]=A[M]}),r=H&&H.__setModuleDefault||(Object.create?function(E,A){Object.defineProperty(E,"default",{enumerable:!0,value:A})}:function(E,A){E.default=A}),n=H&&H.__importStar||function(E){if(E&&E.__esModule)return E;var A={};if(E!=null)for(var M in E)M!=="default"&&Object.hasOwnProperty.call(E,M)&&e(A,E,M);return r(A,E),A};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnection=t.WalletAccount=t.ConnectedWalletAccount=t.Near=t.KeyPair=t.Signer=t.InMemorySigner=t.Contract=t.Connection=t.Account=t.multisig=t.validators=t.transactions=t.utils=t.providers=t.accountCreator=void 0;const i=n(Lo());t.providers=i;const s=n(D1());t.utils=s;const a=n(Fo);t.transactions=a;const o=n(ia);t.validators=o;const c=If();Object.defineProperty(t,"Account",{enumerable:!0,get:function(){return c.Account}});const f=n(yS());t.multisig=f;const u=n(L1());t.accountCreator=u;const d=j1();Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return d.Connection}});const g=ds;Object.defineProperty(t,"Signer",{enumerable:!0,get:function(){return g.Signer}}),Object.defineProperty(t,"InMemorySigner",{enumerable:!0,get:function(){return g.InMemorySigner}});const b=K1();Object.defineProperty(t,"Contract",{enumerable:!0,get:function(){return b.Contract}});const S=ni;Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return S.KeyPair}});const _=q1();Object.defineProperty(t,"Near",{enumerable:!0,get:function(){return _.Near}});const y=wS();Object.defineProperty(t,"ConnectedWalletAccount",{enumerable:!0,get:function(){return y.ConnectedWalletAccount}}),Object.defineProperty(t,"WalletAccount",{enumerable:!0,get:function(){return y.WalletAccount}}),Object.defineProperty(t,"WalletConnection",{enumerable:!0,get:function(){return y.WalletConnection}})}(ju)),ju}var Nf={};Object.defineProperty(Nf,"__esModule",{value:!0});Nf.connect=void 0;const _S=q1();async function ES(t){return new _S.Near(t)}Nf.connect=ES;var Ig={},AS={get exports(){return Ig},set exports(t){Ig=t}},co={},SS={get exports(){return co},set exports(t){co=t}},$l=function(){this.tests={},this.cache={}};$l.prototype={constructor:$l,define:function(t,e){if(typeof t!="string"||!(e instanceof Function))throw new Error("Invalid capability definition.");if(this.tests[t])throw new Error('Duplicated capability definition by "'+t+'".');this.tests[t]=e},check:function(t){if(!this.test(t))throw new Error('The current environment does not support "'+t+'", therefore we cannot continue.')},test:function(t){if(this.cache[t]!==void 0)return this.cache[t];if(!this.tests[t])throw new Error('Unknown capability with name "'+t+'".');var e=this.tests[t];return this.cache[t]=!!e(),this.cache[t]}};var TS=$l,kS=TS,Kh=new kS,fo=function(t){return Kh.test(t)};fo.define=function(t,e){Kh.define(t,e)};fo.check=function(t){Kh.check(t)};fo.test=fo;var H1=fo,z1=H1,Pn=z1.define,rs=z1.test;Pn("strict mode",function(){return this===void 0});Pn("arguments.callee.caller",function(){try{return function(){return arguments.callee.caller}()===arguments.callee}catch{return!1}});Pn("es5",function(){return rs("Array.prototype.forEach")&&rs("Array.prototype.map")&&rs("Function.prototype.bind")&&rs("Object.create")&&rs("Object.defineProperties")&&rs("Object.defineProperty")&&rs("Object.prototype.hasOwnProperty")});Pn("Array.prototype.forEach",function(){return Array.prototype.forEach});Pn("Array.prototype.map",function(){return Array.prototype.map});Pn("Function.prototype.bind",function(){return Function.prototype.bind});Pn("Object.create",function(){return Object.create});Pn("Object.defineProperties",function(){return Object.defineProperties});Pn("Object.defineProperty",function(){return Object.defineProperty});Pn("Object.prototype.hasOwnProperty",function(){return Object.prototype.hasOwnProperty});Pn("Error.captureStackTrace",function(){return Error.captureStackTrace});Pn("Error.prototype.stack",function(){try{throw new Error}catch(t){return t.stack||t.stacktrace}});(function(t){t.exports=H1})(SS);co.check("es5");var zu,Ng;function qh(){if(Ng)return zu;Ng=1;var t=function(e,r,n){var i="";if(i+=e.name||"Error",i+=": "+(e.message||""),n instanceof Array)for(var s in n){var a=n[s];i+=`
   # `+a}for(var o in r){var c=r[o];i+=`
   at `+c.toString()}return i};return zu=t,zu}var Gu,Rg;function PS(){if(Rg)return Gu;Rg=1;var t=qh();return Gu=function(){return Error.getStackTrace=function(e){return e.stack},{prepareStackTrace:t}},Gu}var Uc={},CS={get exports(){return Uc},set exports(t){Uc=t}},Vu,Bg;function IS(){if(Bg)return Vu;Bg=1;var t=function(){var e=Object.create({Source:Object,config:{},buildArgs:[]});function r(c){var f="config";if(c instanceof Function)f="Source";else if(c instanceof Array)f="buildArgs";else if(c instanceof Object)f="config";else throw new Error("Invalid configuration option.");if(e.hasOwnProperty(f))throw new Error("Duplicated configuration option: "+f+".");e[f]=c}for(var n=0,i=arguments.length;n<i;++n)r(arguments[n]);var s=e.Source,a=e.config,o=e.buildArgs;return(s.extend||t.extend).call(s,a,o)};return t.factory=function(){return function(){var e=this;e.build instanceof Function&&e.build.apply(e,arguments),e.init instanceof Function&&e.init.apply(e,arguments)}},t.extend=function(e,r){var n=this;e||(e={});var i;return e.prototype instanceof Object&&e.prototype.constructor!==Object?i=e.prototype.constructor:e.factory instanceof Function&&(i=e.factory.call(n)),i=(n.clone||t.clone).call(n,i,r),(i.merge||t.merge).call(i,e),i},t.prototype.extend=function(e,r){var n=this,i=(n.clone||t.prototype.clone).apply(n,r);return(i.merge||t.prototype.merge).call(i,e),i},t.clone=function(e,r){var n=this;e instanceof Function||(e=(n.factory||t.factory).call(n)),e.prototype=(n.prototype.clone||t.prototype.clone).apply(n.prototype,r||[]),e.prototype.constructor=e;for(var i in n)i!=="prototype"&&(e[i]=n[i]);return e},t.prototype.clone=function(){var e=this,r=Object.create(e);return r.build instanceof Function&&r.build.apply(r,arguments),r},t.merge=function(e){var r=this;for(var n in e)n!=="prototype"&&(r[n]=e[n]);return e.prototype instanceof Object&&(r.prototype.merge||t.prototype.merge).call(r.prototype,e.prototype),r},t.prototype.merge=function(e){var r=this;for(var n in e)n!=="constructor"&&(r[n]=e[n]);return r},t.absorb=function(e){var r=this;for(var n in e)n!=="prototype"&&(r[n]===void 0||r[n]===Function.prototype[n])&&(r[n]=e[n]);return e.prototype instanceof Object&&(r.prototype.absorb||t.prototype.absorb).call(r.prototype,e.prototype),r},t.prototype.absorb=function(e){var r=this;for(var n in e)n!=="constructor"&&(r[n]===void 0||r[n]===Object.prototype[n])&&(r[n]=e[n]);return r},t.getAncestor=function(){var e=this;if(e!==e.prototype.constructor)return e.prototype.constructor},t.newInstance=function(){var e=this,r=Object.create(this.prototype);return e.apply(r,arguments),r},Vu=t,Vu}var Ju,Mg;function NS(){return Mg||(Mg=1,Ju=function(){throw new Error("Not implemented.")}),Ju}var Wu,Og;function RS(){return Og||(Og=1,Wu={Class:IS(),abstractMethod:NS()}),Wu}var Dg;function uo(){return Dg||(Dg=1,function(t){t.exports=RS()}(CS)),Uc}var Lc={},BS={get exports(){return Lc},set exports(t){Lc=t}},Yu,Ug;function MS(){if(Ug)return Yu;Ug=1;var t=function(e){var r=!1,n;return e instanceof Function||(r=!0,n=e,e=null),function(){return r||(r=!0,n=e.apply(this,arguments),e=null),n}};return Yu=t,Yu}var Xu,Lg;function OS(){return Lg||(Lg=1,Xu=function t(e,r,n){if(n||(n=[]),n.length<e.length){var i=e[n.length];for(var s in i)n[n.length]=i[s],t(e,r,n),--n.length}else r.apply(null,n)}),Xu}var Qu,Fg;function DS(){return Fg||(Fg=1,Qu={cache:MS(),eachCombination:OS()}),Qu}var jg;function lo(){return jg||(jg=1,function(t){t.exports=DS()}(BS)),Lc}var Zu,Kg;function US(){if(Kg)return Zu;Kg=1;var t=uo().Class,e=uo().abstractMethod,r=lo().eachCombination,n=lo().cache,i=co,s=t(Object,{prototype:{captureFrameStrings:function(o){var c=this.createError();o.unshift(this.captureFrameStrings),o.unshift(this.createError);var f=this.getFrameStrings(c),u=f.slice(o.length),d=[];if(i("arguments.callee.caller")){var g=[this.createError,this.captureFrameStrings];try{for(var b=arguments.callee;b=b.caller;)g.push(b)}catch{}d=g.slice(o.length)}return{frameStrings:u,functionValues:d}},getFrameStrings:function(o){var c=o.message||"",f=o.name||"",u=this.getStackString(o);if(u!==void 0){var d=u.split(`
`),g=0,b=d.length;return this.hasHeader&&(g+=f.split(`
`).length+c.split(`
`).length-1),this.hasFooter&&(b-=1),d.slice(g,b)}},createError:e,getStackString:e,hasHeader:void 0,hasFooter:void 0}}),a=t(Object,{prototype:{calibrateClass:function(o){return this.calibrateMethods(o)&&this.calibrateEnvelope(o)},calibrateMethods:function(o){try{r([[function(c){return new Error(c)},function(c){try{throw new Error(c)}catch(f){return f}}],[function(c){return c.stack},function(c){return c.stacktrace}]],function(c,f){if(f(c()))throw{getStackString:f,createError:c}})}catch(c){return t.merge.call(o,{prototype:c}),!0}return!1},calibrateEnvelope:function(o){var c=o.prototype.getStackString,f=o.prototype.createError,u=c(f("marker")),d=u.split(`
`);return t.merge.call(o,{prototype:{hasHeader:/marker/.test(d[0]),hasFooter:d[d.length-1]===""}}),!0}}});return Zu={getClass:n(function(){var o;if(o)return o;o=t(s,{});var c=new a;if(!c.calibrateClass(o))throw new Error("Cannot read Error.prototype.stack in this environment.");return o}),getInstance:n(function(){var o=this.getClass(),c=new o;return c})},Zu}var el,qg;function LS(){if(qg)return el;qg=1;var t=uo().Class,e=uo().abstractMethod,r=t(Object,{prototype:{init:t.prototype.merge,frameString:void 0,toString:function(){return this.frameString},functionValue:void 0,getThis:e,getTypeName:e,getFunction:function(){return this.functionValue},getFunctionName:e,getMethodName:e,getFileName:e,getLineNumber:e,getColumnNumber:e,getEvalOrigin:e,isTopLevel:e,isEval:e,isNative:e,isConstructor:e}});return el=r,el}var tl,$g;function FS(){if($g)return tl;$g=1;var t=uo().Class,e=LS(),r=lo().cache,n=t(Object,{prototype:{stackParser:null,frameParser:null,locationParsers:null,constructor:function(i){t.prototype.merge.call(this,i)},getFrames:function(i,s){for(var a=[],o=0,c=i.length;o<c;++o)a[o]=this.getFrame(i[o],s[o]);return a},getFrame:function(i,s){var a={frameString:i,functionValue:s};return new e(a)}}});return tl={getClass:r(function(){return n}),getInstance:r(function(){var i=this.getClass(),s=new i;return s})},tl}var rl,Hg;function jS(){if(Hg)return rl;Hg=1;var t=US(),e=FS(),r=lo().cache,n=qh();return rl=function(){return Error.captureStackTrace=function i(s,a){var o,c=[i];a&&c.push(a);var f=t.getInstance().captureFrameStrings(c);Object.defineProperties(s,{stack:{configurable:!0,get:r(function(){var u=e.getInstance().getFrames(f.frameStrings,f.functionValues);return(Error.prepareStackTrace||n)(s,u,o)})},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})},Error.getStackTrace=function(i){if(i.cachedStack)return i.stack;var s=t.getInstance().getFrameStrings(i),a=[],o;s?a=e.getInstance().getFrames(s,[]):o=["The stack is not readable by unthrown errors in this environment."];var c=(Error.prepareStackTrace||n)(i,a,o);if(s)try{Object.defineProperties(i,{stack:{configurable:!0,writable:!0,enumerable:!1,value:c},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})}catch{}return c},{prepareStackTrace:n}},rl}var nl,zg;function KS(){if(zg)return nl;zg=1;var t=lo().cache,e=qh();return nl=function(){return Error.captureStackTrace=function(r,n){Object.defineProperties(r,{stack:{configurable:!0,get:t(function(){return(Error.prepareStackTrace||e)(r,[])})},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})},Error.getStackTrace=function(r){if(r.cachedStack)return r.stack;var n=(Error.prepareStackTrace||e)(r,[]);try{Object.defineProperties(r,{stack:{configurable:!0,writable:!0,enumerable:!1,value:n},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})}catch{}return n},{prepareStackTrace:e}},nl}var Gg=co,yc;Gg("Error.captureStackTrace")?yc=PS():Gg("Error.prototype.stack")?yc=jS():yc=KS();var qS=yc();(function(t){t.exports=qS})(AS);(function(t){var e=H&&H.__createBinding||(Object.create?function(s,a,o,c){c===void 0&&(c=o),Object.defineProperty(s,c,{enumerable:!0,get:function(){return a[o]}})}:function(s,a,o,c){c===void 0&&(c=o),s[c]=a[o]}),r=H&&H.__setModuleDefault||(Object.create?function(s,a){Object.defineProperty(s,"default",{enumerable:!0,value:a})}:function(s,a){s.default=a}),n=H&&H.__importStar||function(s){if(s&&s.__esModule)return s;var a={};if(s!=null)for(var o in s)o!=="default"&&Object.hasOwnProperty.call(s,o)&&e(a,s,o);return r(a,s),a},i=H&&H.__exportStar||function(s,a){for(var o in s)o!=="default"&&!a.hasOwnProperty(o)&&e(a,s,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.keyStores=n(M1),i($1(),t),i(Nf,t)})(B1);var $h=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Oh,"__esModule",{value:!0});const Vg=la,Oa=$h(qi),ui=B1,il=Vl,$S=$h(Fe),HS=Jl,zS=$h(Qi);class GS extends zS.default{constructor(e){super(e),this.near=this.wallet._near,this.base=["yoctoNEAR",1e25]}async ready(){if(!this.wallet.isSignedIn())throw new Error("Wallet has not been signed in!");const e=new ui.keyStores.BrowserLocalStorageKeyStore,r=this.wallet.account();if(this.keyPair=await e.getKey(this.wallet._networkId,r.accountId),!this.keyPair){this.keyPair=ui.KeyPair.fromRandom("ed25519");const n=this.keyPair.getPublicKey().toString();await e.setKey(this.wallet._networkId,r.accountId,this.keyPair),await r.addKey(n)}this._address=await this.wallet.getAccountId(),this.providerInstance=this.wallet._near.connection.provider}async getTx(e){var r;const n=await this.providerInstance,[i,s]=e.split(":"),a=await n.txStatusReceipts((0,il.decode)(s),i),o=await n.block(a.transaction_outcome.block_hash),c=(await n.block({finality:"final"})).header.height;if(a.receipts_outcome[0].outcome.status.SuccessValue!=="")throw new Error("Transaction failed!");const f=(r=a.receipts[0].receipt.Action.actions[0].Transfer.deposit)!==null&&r!==void 0?r:0;return{from:i,to:a.transaction.receiver_id,amount:new Oa.default(f),blockHeight:new Oa.default(o.header.height),pending:!1,confirmed:c-o.header.height>=this.minConfirm}}ownerToAddress(e){const r=typeof e=="string"?e:(0,il.encode)(e);return(0,il.decode)(r.replace("ed25519:","")).toString("hex")}async sign(e){return this.getSigner().sign(e)}getSigner(){return new Vg.NearSigner(this.keyPair.secretKey)}async verify(e,r,n){return Vg.NearSigner.verify(e,r,n)}async getCurrentHeight(){const e=await this.providerInstance.status();return new Oa.default(e.sync_info.latest_block_height)}async getFee(e,r){const n=await this.providerInstance.gasPrice(null);return new Oa.default(n.gas_price).multipliedBy(45e10)}async sendTx(e){const r=await this.providerInstance.sendTransaction(e);return`${this.address}:${r.transaction.hash}`}async createTx(e,r,n){const i=await this.providerInstance.query({request_type:"view_access_key",finality:"final",account_id:this.address,public_key:this.keyPair.getPublicKey().toString()}),s=++i.nonce,a=ui.utils.serialize.base_decode(i.block_hash),o=[ui.transactions.transfer(new $S.default(new Oa.default(e).toString()))],c=ui.transactions.createTransaction(this.address,this.keyPair.getPublicKey(),r,s,o,a),f=ui.utils.serialize.serialize(ui.transactions.SCHEMA,c),u=new Uint8Array(HS.sha256.array(f)),d=this.keyPair.sign(u);return{tx:new ui.transactions.SignedTransaction({transaction:c,signature:new ui.transactions.Signature({keyType:c.publicKey.keyType,data:d.signature})}),txId:void 0}}async getPublicKey(){return Buffer.from(this.keyPair.getPublicKey().data)}}Oh.default=GS;var Hh={},VS=H&&H.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),JS=H&&H.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),WS=H&&H.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&VS(e,t,r);return JS(e,t),e},Rf=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hh,"__esModule",{value:!0});const Jg=la,Fs=Rf(qi),YS=Rf(Qi),Da=WS(Q1),XS=Rf(Vl),QS=Rf(wf);class ZS extends YS.default{constructor(e){super(e),this.minConfirm=1,this.base=["lamports",1e9]}async getProvider(){return this.providerInstance||(this.providerInstance=new Da.Connection(this.providerUrl,{confirmTransactionInitialTimeout:6e4,commitment:"confirmed"})),this.providerInstance}async getTx(e){const r=await this.getProvider(),n=await r.getTransaction(e,{commitment:"confirmed"});if(!n)throw new Error("Confirmed tx not found");const i=await r.getSlot("confirmed"),s=new Fs.default(n.meta.postBalances[1]).minus(new Fs.default(n.meta.preBalances[1]));return{from:n.transaction.message.accountKeys[0].toBase58(),to:n.transaction.message.accountKeys[1].toBase58(),amount:s,blockHeight:new Fs.default(n.slot),pending:!1,confirmed:i-n.slot>=1}}ownerToAddress(e){return typeof e=="string"&&(e=Buffer.from(e)),XS.default.encode(e)}async sign(e){return await(await this.getSigner()).sign(e)}getSigner(){return this.signer||(this.signer=new Jg.HexInjectedSolanaSigner(this.wallet)),this.signer}verify(e,r,n){return Jg.HexInjectedSolanaSigner.verify(e,r,n)}async getCurrentHeight(){return new Fs.default((await(await this.getProvider()).getEpochInfo()).blockHeight)}async getFee(e,r){return new Fs.default(5e3)}async sendTx(e){return await this.wallet.sendTransaction(e,await this.getProvider(),{skipPreflight:!0})}async createTx(e,r,n){const i=new Da.PublicKey(await this.getPublicKey()),s=await(0,QS.default)(async o=>{var c;try{return(await(await this.getProvider()).getRecentBlockhash()).blockhash}catch(f){throw!((c=f.message)===null||c===void 0)&&c.includes("blockhash")?f:(o(f),new Error("Unreachable"))}},{retries:3,minTimeout:1e3}),a=new Da.Transaction({recentBlockhash:s,feePayer:i});return a.add(Da.SystemProgram.transfer({fromPubkey:i,toPubkey:new Da.PublicKey(r),lamports:+new Fs.default(e).toNumber()})),{tx:a,txId:void 0}}async getPublicKey(){return this.wallet.publicKey.toBuffer()}}Hh.default=ZS;var G1={};(function(t){var e=H&&H.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.erc20abi=void 0;const r=e(qi),n=pf,i=Qi,s=e(Af);class a extends s.default{constructor(c){super(c),this.contractAddress=c.contractAddress}async getContract(){return this.contractInstance||(this.contractInstance=new n.ethers.Contract(this.contractAddress,t.erc20abi,this.w3signer),this.base=["wei",Math.pow(10,await this.contractInstance.decimals())]),this.contractInstance}async getTx(c){const f=await this.providerInstance.getTransaction(c);if(!f)throw new Error("Tx doesn't exist");if(f.data.length!==138||f.data.slice(2,10)!=="a9059cbb")throw new Error("Tx isn't a ERC20 transfer");const u=`0x${f.data.slice(34,74)}`,d=new r.default(f.data.slice(74),16);return{from:f.from,to:u,blockHeight:f.blockNumber?new r.default(f.blockNumber):null,amount:d,pending:!f.blockNumber,confirmed:f.confirmations>=this.minConfirm}}async getFee(c,f){const u="0x"+new r.default(c).toString(16),d=await this.getContract(),g=await this.providerInstance.getGasPrice(),b=await d.estimateGas.transfer(f,u),S=new r.default(g.mul(b).toString()),[_]=await this.getGas(),y=_.multipliedBy(S),E=new r.default(await this.price());return new r.default(y).dividedToIntegerBy(E)}async createTx(c,f,u){const d=await this.getContract(),g="0x"+new r.default(c).toString(16),b=await d.populateTransaction.transfer(f,g);return b.gasPrice=await this.providerInstance.getGasPrice(),b.gasLimit=await d.estimateGas.transfer(f,g),b.chainId=(await this.providerInstance.getNetwork()).chainId,b.nonce=await this.providerInstance.getTransactionCount(this.address),{txId:void 0,tx:b}}async getGas(){return[new r.default(await(0,i.getRedstonePrice)("ETH")),1e18]}}t.default=a,t.erc20abi=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}]})(G1);var xa=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bh,"__esModule",{value:!0});const js=xa(Af),e7=xa(Oh),t7=xa(Hh),r7=xa(G1),n7=xa(Ya),i7=xa(Ss);function s7(t,e,r,n){switch(t){case"ethereum":return new js.default({name:"ethereum",ticker:"ETH",providerUrl:r??"https://cloudflare-eth.com/",wallet:e});case"matic":return new js.default({name:"matic",ticker:"MATIC",providerUrl:r??"https://polygon-rpc.com",wallet:e,minConfirm:1});case"arbitrum":return new js.default({name:"arbitrum",ticker:"ETH",providerUrl:r??"https://arb1.arbitrum.io/rpc",wallet:e});case"bnb":return new js.default({name:"bnb",ticker:"BNB",providerUrl:r??"https://bsc-dataseed.binance.org",wallet:e});case"avalanche":return new js.default({name:"avalanche",ticker:"AVAX",providerUrl:r??"https://api.avax.network/ext/bc/C/rpc",wallet:e});case"boba-eth":return new js.default({name:"boba-eth",ticker:"ETH",providerUrl:r??"https://mainnet.boba.network/",minConfirm:1,wallet:e});case"boba":{const i=new r7.default({name:"boba",ticker:"BOBA",providerUrl:r??"https://mainnet.boba.network/",contractAddress:n??"0xa18bF3994C0Cc6E3b63ac420308E5383f53120D7",minConfirm:1,wallet:e});return i.price=async()=>{var s;const a=await n7.default.post("https://api.livecoinwatch.com/coins/single",JSON.stringify({currency:"USD",code:`${i.ticker}`}),{headers:{"x-api-key":"75a7a824-6577-45e6-ad86-511d590c7cc8","content-type":"application/json"}});if(await i7.default.checkAndThrow(a,"Getting price data"),!(!((s=a?.data)===null||s===void 0)&&s.rate))throw new Error(`unable to get price for ${i.name}`);return+a.data.rate},i}case"solana":return new t7.default({name:"solana",ticker:"SOL",providerUrl:r??"https://api.mainnet-beta.solana.com/",wallet:e});case"near":return new e7.default({name:"near",ticker:"NEAR",providerUrl:r??"https://rpc.mainnet.near.org",wallet:e});default:throw new Error(`Unknown/Unsupported currency ${t}`)}}Bh.default=s7;var ba=H&&H.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bc,"__esModule",{value:!0});const a7=ba(Zl),o7=ba(nd),c7=ba(Nh),f7=ba(Ro),u7=ba(Ss),l7=ba(Bh);class d7 extends o7.default{constructor(e,r,n,i){var s;super();const a=new URL(e);this.api=new a7.default({protocol:a.protocol.slice(0,-1),port:a.port,host:a.hostname,timeout:(s=i?.timeout)!==null&&s!==void 0?s:1e5}),this.currency=r.toLowerCase(),this.currencyConfig=(0,l7.default)(r,n,i?.providerUrl,i?.contractAddress),this.utils=new u7.default(this.api,this.currency,this.currencyConfig),this.uploader=new f7.default(this.api,this.utils,this.currency,this.currencyConfig),this.funder=new c7.default(this.utils)}async ready(){await this.currencyConfig.ready(),this.address=this.currencyConfig.address}}bc.default=d7;(function(t){var e=H&&H.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebBundlr=t.default=void 0;var r=bc;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e(r).default}});var n=bc;Object.defineProperty(t,"WebBundlr",{enumerable:!0,get:function(){return e(n).default}})})(Ql);const h7=Z1(Ql),v7=tm({__proto__:null,default:h7},[Ql]);export{v7 as i};
